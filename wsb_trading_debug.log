2025-03-24 20:27:06,676 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 20:27:06,676 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 20:27:06,676 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 20:27:06,676 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 20:27:06,992 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 20:27:07,040 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000215CD289700>
2025-03-24 20:27:07,041 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000215CD2CB8D0> server_hostname='api.notion.com' timeout=60.0
2025-03-24 20:27:07,063 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000215CD1BFA40>
2025-03-24 20:27:07,063 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:27:07,064 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:27:07,064 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:27:07,064 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:27:07,065 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:27:15,628 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:27:15 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b4f861c0f172a-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-zmxHU8XFa2o+K8wPs06Vfp19sHo"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'7790e24a-cbdb-46b3-bf72-a71196d54369'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=UsvUiU81GCOA6xTzqFEt2cbJ.gqhuvtNt6cEYQCkBlQ-1742873235-1.0.1.1-sSrn9CQnYvpL0Dhg4tt1VX2PxWkXyqcUEIrS2HOkW38OGw.ZbtYGUyNCOgEdbm8dXdp7DmQsrY7iDlEaGB7RSpSqK5G.QfPF7K22KrOoQ20; path=/; expires=Tue, 25-Mar-25 03:57:15 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=TS3LwUYcwGTzU5cdOg7lw9te.tG.QJ7jpum0siXb550-1742873235760-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:27:15,631 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:27:15,631 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:27:15,632 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:27:15,632 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:27:15,632 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:27:15,633 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:27:15,633 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:27:15,633 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:27:15,634 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:27:15,634 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:27:15,773 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:27:15 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b4fbbae8c172a-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-uQ8Fi76x0dx53F+5v/xtQ5EfQGE"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'9d7bda74-8a2b-4130-879d-6c62ef151ee4'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:27:15,775 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:27:15,775 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:27:15,776 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:27:15,776 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:27:15,776 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:27:15,777 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:27:15,777 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:27:15,777 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:27:15,778 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:27:15,778 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:27:15,968 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:27:16 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b4fbc8fad172a-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-0ClUQHHdHAHNaKIAL0jvIp48ZAk"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'9142dbfb-284b-4ff4-8608-1156778c59ce'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:27:15,970 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:27:15,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:27:15,970 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:27:15,971 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:27:15,971 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:27:15,971 - __main__ - INFO - All clients initialized successfully
2025-03-24 20:27:15,971 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 20:27:15,971 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 20:27:15,972 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:15,972 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:15,972 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
2025-03-24 20:27:15,973 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:15,974 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 20:27:15,975 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:27:16,021 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,021 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,021 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,022 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,022 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:27:16,022 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,022 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,023 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,023 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,024 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 20:27:16,025 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 20:27:16,025 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 20:27:16,025 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,027 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 20:27:16,168 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 20:27:16,169 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 20:27:16,170 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,170 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:16,171 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 20:27:16,351 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1645
2025-03-24 20:27:16,352 - yfinance - DEBUG - response code=200
2025-03-24 20:27:16,352 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:16,353 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:16,354 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:16,362 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,367 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,371 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,371 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:16,372 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:16,374 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:16,374 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:27:16,377 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:16,377 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:16,378 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:16,378 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:27:16,379 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,379 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,379 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,379 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,379 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:27:16,380 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,380 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,380 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,380 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,380 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,381 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:16,381 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,381 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:16,441 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1653
2025-03-24 20:27:16,442 - yfinance - DEBUG - response code=200
2025-03-24 20:27:16,442 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:16,442 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:16,443 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:16,449 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,451 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,455 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,455 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:16,455 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:16,457 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:16,458 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:27:16,460 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:16,461 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:16,461 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:16,462 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:27:16,462 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,462 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,463 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,463 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,463 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:27:16,463 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,463 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,464 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,464 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,464 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,464 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:16,464 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,464 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:16,524 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1622
2025-03-24 20:27:16,525 - yfinance - DEBUG - response code=200
2025-03-24 20:27:16,525 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:16,526 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:16,526 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:16,531 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,534 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,538 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,538 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:16,539 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:16,540 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:16,540 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:27:16,543 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:16,543 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:16,544 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:16,544 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:27:16,544 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,545 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,545 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,545 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,546 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:27:16,546 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,546 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,546 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,546 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,546 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,547 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:16,547 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,547 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:16,652 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1639
2025-03-24 20:27:16,653 - yfinance - DEBUG - response code=200
2025-03-24 20:27:16,653 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:16,653 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:16,654 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:16,658 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,660 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,664 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,664 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:16,665 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:16,666 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:16,666 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:27:16,669 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:16,669 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:16,670 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:16,670 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:27:16,671 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,671 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,671 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,671 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,671 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:27:16,671 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,672 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,672 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,672 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,672 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,672 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:16,672 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,673 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:16,729 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1661
2025-03-24 20:27:16,730 - yfinance - DEBUG - response code=200
2025-03-24 20:27:16,730 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:16,730 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:16,731 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:16,736 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,738 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,742 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,742 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:16,743 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:16,744 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:16,745 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:27:16,748 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:16,748 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:16,748 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:16,748 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:27:16,749 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,749 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,749 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,749 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,750 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:27:16,750 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,750 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,750 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,750 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,750 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,751 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:16,751 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,751 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:16,812 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1679
2025-03-24 20:27:16,813 - yfinance - DEBUG - response code=200
2025-03-24 20:27:16,813 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:16,814 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:16,815 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:16,819 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,822 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,826 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,826 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:16,827 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:16,828 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:16,829 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:27:16,831 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:16,832 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:16,832 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:16,832 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:27:16,833 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,833 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,833 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,833 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,834 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:27:16,834 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,834 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,834 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,834 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,834 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,835 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:16,835 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,835 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:16,899 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1679
2025-03-24 20:27:16,900 - yfinance - DEBUG - response code=200
2025-03-24 20:27:16,900 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:16,901 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:16,902 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:16,906 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,908 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,912 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:16,912 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:16,913 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:16,914 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:16,914 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:27:16,917 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:16,918 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:16,918 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:16,919 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:27:16,919 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:16,919 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,920 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:16,920 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:16,920 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:27:16,920 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:16,921 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:16,921 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:16,921 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,921 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:16,921 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:16,921 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:16,922 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:17,007 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:17,008 - yfinance - DEBUG - response code=200
2025-03-24 20:27:17,008 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:17,008 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:17,009 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:24:00
2025-03-24 20:27:17,013 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:24:00+00:00
2025-03-24 20:27:17,015 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:24:00+00:00
2025-03-24 20:27:17,020 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:27:17,020 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:17,021 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:17,022 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:17,023 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:27:17,026 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:17,026 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:17,026 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:17,027 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 20:27:17,028 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:17,028 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:17,028 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:17,028 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:17,029 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 20:27:17,029 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:17,029 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:17,029 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:17,029 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:17,030 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:17,030 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:17,030 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:17,030 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:17,092 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 931
2025-03-24 20:27:17,092 - yfinance - DEBUG - response code=200
2025-03-24 20:27:17,093 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:17,093 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:17,094 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 20:27:17,099 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:27:17,100 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:27:17,105 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:27:17,105 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:17,105 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:17,107 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:17,107 - yfinance_client - INFO - Downloaded data for ^VIX, shape: (14, 5)
2025-03-24 20:27:17,108 - yfinance_client - INFO - Current VIX price: 17.479999542236328
2025-03-24 20:27:17,108 - yfinance - DEBUG - Entering get()
2025-03-24 20:27:17,108 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:27:17,109 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:27:17,109 - yfinance - DEBUG - params=None
2025-03-24 20:27:17,109 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:27:17,109 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:17,110 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:17,110 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:17,110 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:17,110 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:17,110 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:27:17,195 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:17,196 - yfinance - DEBUG - response code=200
2025-03-24 20:27:17,196 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:27:17,196 - yfinance - DEBUG - Exiting get()
2025-03-24 20:27:17,197 - yfinance - DEBUG - Entering get()
2025-03-24 20:27:17,198 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:27:17,198 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1742860800
2025-03-24 20:27:17,198 - yfinance - DEBUG - params=None
2025-03-24 20:27:17,198 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:27:17,199 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:17,199 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:17,199 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:17,199 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:17,199 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:17,200 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:27:17,281 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1742860800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:17,283 - yfinance - DEBUG - response code=200
2025-03-24 20:27:17,283 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:27:17,283 - yfinance - DEBUG - Exiting get()
2025-03-24 20:27:55,593 - discord.discord_client - INFO - Content length exceeds Discord limit (5222 chars). Splitting into chunks.
2025-03-24 20:27:55,594 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:27:55,887 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:27:55,888 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:27:55,889 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:27:56,187 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:27:56,188 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:27:56,189 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:27:56,455 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:27:56,456 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:27:56,456 - __main__ - INFO - Comprehensive market analysis complete: bullish
2025-03-24 20:27:56,457 - __main__ - INFO - Starting stock analysis...
2025-03-24 20:27:56,457 - __main__ - INFO - get_stock_analysis_prompt signature: (*args, **kwargs) with params: ['args', 'kwargs']
2025-03-24 20:27:56,457 - __main__ - INFO - Found 36 symbols in watchlist
2025-03-24 20:27:56,457 - __main__ - INFO - Analyzing SPY...
2025-03-24 20:27:56,457 - __main__ - INFO - Step 1: Getting stock data for SPY...
2025-03-24 20:27:56,458 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:56,458 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:56,458 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:56,458 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:27:56,459 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:56,459 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:56,459 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:56,459 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:56,460 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:27:56,460 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:56,460 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:56,460 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:56,460 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,461 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:56,461 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:56,461 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,461 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:56,532 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1645
2025-03-24 20:27:56,533 - yfinance - DEBUG - response code=200
2025-03-24 20:27:56,533 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:56,533 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:56,534 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:27:56,539 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:56,542 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:56,546 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:27:56,547 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:56,548 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:56,549 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:56,550 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:27:56,550 - yfinance - DEBUG - Entering download()
2025-03-24 20:27:56,550 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:27:56,550 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:56,551 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:27:56,551 - yfinance - DEBUG -   Entering history()
2025-03-24 20:27:56,551 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:56,551 - yfinance - DEBUG -    Entering get()
2025-03-24 20:27:56,552 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:27:56,552 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:27:56,552 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:56,552 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:27:56,552 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:56,553 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,553 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:56,553 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:56,553 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,553 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:27:56,637 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2640
2025-03-24 20:27:56,638 - yfinance - DEBUG - response code=200
2025-03-24 20:27:56,638 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:27:56,639 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:27:56,640 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:27:56,641 - yfinance - DEBUG - SPY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:27:56,645 - yfinance - DEBUG - SPY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:27:56,648 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:27:56,649 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:27:56,649 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:56,651 - yfinance - DEBUG - Exiting download()
2025-03-24 20:27:56,651 - yfinance_client - INFO - Downloaded data for SPY, shape: (59, 5)
2025-03-24 20:27:56,657 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:27:56,660 - __main__ - INFO - Step 2: Getting options chain data for SPY...
2025-03-24 20:27:56,661 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SPY
2025-03-24 20:27:56,661 - yfinance - DEBUG - Entering history()
2025-03-24 20:27:56,662 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:27:56,662 - yfinance - DEBUG -  Entering history()
2025-03-24 20:27:56,662 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:56,662 - yfinance - DEBUG -   Entering get()
2025-03-24 20:27:56,663 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:27:56,663 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:27:56,663 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:27:56,663 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:27:56,663 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:56,663 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,664 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:56,664 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:56,664 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,664 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:27:56,746 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1198
2025-03-24 20:27:56,747 - yfinance - DEBUG - response code=200
2025-03-24 20:27:56,747 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:27:56,747 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:27:56,748 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:27:56,749 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:27:56,751 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:27:56,755 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:27:56,755 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:27:56,755 - yfinance - DEBUG - Exiting history()
2025-03-24 20:27:56,756 - yfinance_client - INFO - Current price of SPY: $574.08
2025-03-24 20:27:56,756 - yfinance - DEBUG - Entering get()
2025-03-24 20:27:56,756 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:27:56,756 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:27:56,757 - yfinance - DEBUG - params=None
2025-03-24 20:27:56,757 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:27:56,757 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:56,757 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,757 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:56,758 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:56,758 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,758 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:27:56,836 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:56,847 - yfinance - DEBUG - response code=200
2025-03-24 20:27:56,848 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:27:56,848 - yfinance - DEBUG - Exiting get()
2025-03-24 20:27:56,849 - yfinance_client - INFO - Found 32 expiration dates for SPY
2025-03-24 20:27:56,851 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:27:56,851 - yfinance - DEBUG - Entering get()
2025-03-24 20:27:56,851 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:27:56,851 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743379200
2025-03-24 20:27:56,852 - yfinance - DEBUG - params=None
2025-03-24 20:27:56,852 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:27:56,852 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:56,852 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,852 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:56,853 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:56,853 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:56,853 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:27:57,019 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:57,046 - yfinance - DEBUG - response code=200
2025-03-24 20:27:57,046 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:27:57,047 - yfinance - DEBUG - Exiting get()
2025-03-24 20:27:57,052 - yfinance_client - INFO - Retrieved 206 calls and 201 puts
2025-03-24 20:27:57,747 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:27:57,748 - yfinance - DEBUG - Entering get()
2025-03-24 20:27:57,748 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:27:57,748 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743724800
2025-03-24 20:27:57,749 - yfinance - DEBUG - params=None
2025-03-24 20:27:57,749 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:27:57,749 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:57,749 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:57,749 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:57,750 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:57,750 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:57,750 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:27:57,844 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:57,867 - yfinance - DEBUG - response code=200
2025-03-24 20:27:57,868 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:27:57,868 - yfinance - DEBUG - Exiting get()
2025-03-24 20:27:57,873 - yfinance_client - INFO - Retrieved 134 calls and 136 puts
2025-03-24 20:27:58,002 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:27:58,002 - yfinance - DEBUG - Entering get()
2025-03-24 20:27:58,003 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:27:58,003 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744329600
2025-03-24 20:27:58,003 - yfinance - DEBUG - params=None
2025-03-24 20:27:58,003 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:27:58,003 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:58,003 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:58,004 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:58,004 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:58,004 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:58,004 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:27:58,090 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:58,110 - yfinance - DEBUG - response code=200
2025-03-24 20:27:58,111 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:27:58,111 - yfinance - DEBUG - Exiting get()
2025-03-24 20:27:58,115 - yfinance_client - INFO - Retrieved 143 calls and 131 puts
2025-03-24 20:27:58,246 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:27:58,246 - yfinance - DEBUG - Entering get()
2025-03-24 20:27:58,247 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:27:58,247 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744848000
2025-03-24 20:27:58,247 - yfinance - DEBUG - params=None
2025-03-24 20:27:58,247 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:27:58,248 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:27:58,248 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:27:58,248 - yfinance - DEBUG - reusing cookie
2025-03-24 20:27:58,248 - yfinance - DEBUG - reusing crumb
2025-03-24 20:27:58,249 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:27:58,249 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:27:58,344 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:27:58,356 - yfinance - DEBUG - response code=200
2025-03-24 20:27:58,356 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:27:58,356 - yfinance - DEBUG - Exiting get()
2025-03-24 20:27:58,362 - yfinance_client - INFO - Retrieved 224 calls and 195 puts
2025-03-24 20:27:58,563 - yfinance_client - INFO - Successfully fetched 4 option chains for SPY
2025-03-24 20:27:58,563 - __main__ - INFO - Step 3: Preparing analysis data for SPY...
2025-03-24 20:27:58,564 - __main__ - INFO - Step 4: Processing options data for SPY...
2025-03-24 20:27:58,564 - __main__ - INFO - Found 4 expiration dates for SPY
2025-03-24 20:27:58,564 - __main__ - INFO - Processing expiration date 2025-03-31 for SPY...
2025-03-24 20:27:58,565 - __main__ - DEBUG - ATM calls shape before filtering: (206, 19)
2025-03-24 20:27:58,565 - __main__ - DEBUG - ATM puts shape before filtering: (201, 19)
2025-03-24 20:27:58,566 - __main__ - DEBUG - ATM calls shape after filtering: (55, 19)
2025-03-24 20:27:58,566 - __main__ - DEBUG - ATM puts shape after filtering: (55, 19)
2025-03-24 20:27:58,566 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:27:58,567 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:27:58,567 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:27:58,568 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:27:58,568 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:27:58,569 - __main__ - DEBUG - Volume data for SPY: calls=130483, puts=133470
2025-03-24 20:27:58,569 - __main__ - INFO - Successfully processed expiration 2025-03-31 for SPY
2025-03-24 20:27:58,569 - __main__ - INFO - Processing expiration date 2025-04-04 for SPY...
2025-03-24 20:27:58,570 - __main__ - DEBUG - ATM calls shape before filtering: (134, 19)
2025-03-24 20:27:58,570 - __main__ - DEBUG - ATM puts shape before filtering: (136, 19)
2025-03-24 20:27:58,571 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:27:58,571 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:27:58,571 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:27:58,573 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:27:58,573 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:27:58,573 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:27:58,573 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:27:58,574 - __main__ - DEBUG - Volume data for SPY: calls=69776, puts=96136
2025-03-24 20:27:58,574 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SPY
2025-03-24 20:27:58,574 - __main__ - INFO - Processing expiration date 2025-04-11 for SPY...
2025-03-24 20:27:58,575 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 20:27:58,575 - __main__ - DEBUG - ATM puts shape before filtering: (131, 19)
2025-03-24 20:27:58,575 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:27:58,576 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:27:58,576 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:27:58,577 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:27:58,577 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:27:58,578 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:27:58,578 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:27:58,578 - __main__ - DEBUG - Volume data for SPY: calls=38192, puts=37007
2025-03-24 20:27:58,578 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SPY
2025-03-24 20:27:58,579 - __main__ - INFO - Processing expiration date 2025-04-17 for SPY...
2025-03-24 20:27:58,579 - __main__ - DEBUG - ATM calls shape before filtering: (224, 19)
2025-03-24 20:27:58,579 - __main__ - DEBUG - ATM puts shape before filtering: (195, 19)
2025-03-24 20:27:58,580 - __main__ - DEBUG - ATM calls shape after filtering: (57, 19)
2025-03-24 20:27:58,580 - __main__ - DEBUG - ATM puts shape after filtering: (57, 19)
2025-03-24 20:27:58,581 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:27:58,581 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:27:58,582 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:27:58,582 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:27:58,582 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:27:58,583 - __main__ - DEBUG - Volume data for SPY: calls=175952, puts=311384
2025-03-24 20:27:58,583 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SPY
2025-03-24 20:27:58,583 - __main__ - INFO - Step 5: Generating analysis for SPY...
2025-03-24 20:27:58,583 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SPY with args: stock_analysis_data, market_context
2025-03-24 20:28:11,064 - __main__ - INFO - Market alignment for SPY: contrary
2025-03-24 20:28:11,065 - __main__ - INFO - Creating stock analysis result for SPY...
2025-03-24 20:28:11,065 - __main__ - INFO - Successfully added SPY to stock analyses
2025-03-24 20:28:11,066 - __main__ - INFO - Updating Notion with analysis for SPY...
2025-03-24 20:28:11,066 - __main__ - INFO - Sending Discord notification for SPY...
2025-03-24 20:28:11,066 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2853 chars). Splitting into parts.
2025-03-24 20:28:11,067 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:11,408 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:11,409 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:11,410 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:11,726 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:11,727 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:11,727 - __main__ - INFO - Successfully sent Discord notification for SPY
2025-03-24 20:28:11,727 - __main__ - INFO - Analyzing QQQ...
2025-03-24 20:28:11,728 - __main__ - INFO - Step 1: Getting stock data for QQQ...
2025-03-24 20:28:11,728 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:11,728 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:11,728 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:11,728 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:28:11,729 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:11,729 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:11,729 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:11,729 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:11,729 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:28:11,730 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:11,730 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:11,730 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:11,730 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:11,730 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:11,730 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:11,730 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:11,731 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:11,807 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1655
2025-03-24 20:28:11,808 - yfinance - DEBUG - response code=200
2025-03-24 20:28:11,808 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:11,808 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:11,809 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:28:11,814 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:11,815 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:11,820 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:11,820 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:11,820 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:11,822 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:11,822 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:28:11,823 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:11,823 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:11,823 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:11,823 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:28:11,824 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:11,824 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:11,824 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:11,824 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:11,825 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:28:11,825 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:11,825 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:11,825 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:11,825 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:11,826 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:11,826 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:11,826 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:11,826 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:11,919 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2242
2025-03-24 20:28:11,920 - yfinance - DEBUG - response code=200
2025-03-24 20:28:11,920 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:11,920 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:11,921 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:28:11,922 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:28:11,924 - yfinance - DEBUG - QQQ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:11,928 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:11,928 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:11,928 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:11,930 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:11,930 - yfinance_client - INFO - Downloaded data for QQQ, shape: (59, 5)
2025-03-24 20:28:11,936 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:28:11,939 - __main__ - INFO - Step 2: Getting options chain data for QQQ...
2025-03-24 20:28:11,939 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QQQ
2025-03-24 20:28:11,940 - yfinance - DEBUG - Entering history()
2025-03-24 20:28:11,940 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:28:11,941 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:11,941 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:11,941 - yfinance - DEBUG -   Entering get()
2025-03-24 20:28:11,941 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:28:11,941 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:28:11,942 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:11,942 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:28:11,942 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:11,942 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:11,942 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:11,943 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:11,943 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:11,943 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:28:12,016 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1208
2025-03-24 20:28:12,017 - yfinance - DEBUG - response code=200
2025-03-24 20:28:12,017 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:28:12,017 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:28:12,018 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:28:12,019 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:28:12,021 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:12,025 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:12,025 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:12,026 - yfinance - DEBUG - Exiting history()
2025-03-24 20:28:12,026 - yfinance_client - INFO - Current price of QQQ: $490.66
2025-03-24 20:28:12,026 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:12,026 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:12,026 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ
2025-03-24 20:28:12,027 - yfinance - DEBUG - params=None
2025-03-24 20:28:12,027 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:12,027 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:12,027 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,027 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:12,027 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:12,028 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,028 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:12,105 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:12,107 - yfinance - DEBUG - response code=200
2025-03-24 20:28:12,107 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:12,107 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:12,108 - yfinance_client - INFO - Found 33 expiration dates for QQQ
2025-03-24 20:28:12,109 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:28:12,109 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:12,110 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:12,110 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743379200
2025-03-24 20:28:12,110 - yfinance - DEBUG - params=None
2025-03-24 20:28:12,110 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:12,110 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:12,111 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,111 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:12,111 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:12,111 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,111 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:12,213 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:12,217 - yfinance - DEBUG - response code=200
2025-03-24 20:28:12,217 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:12,218 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:12,222 - yfinance_client - INFO - Retrieved 159 calls and 145 puts
2025-03-24 20:28:12,367 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:28:12,367 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:12,367 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:12,368 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743724800
2025-03-24 20:28:12,368 - yfinance - DEBUG - params=None
2025-03-24 20:28:12,368 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:12,368 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:12,369 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,369 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:12,369 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:12,369 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,369 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:12,532 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:12,555 - yfinance - DEBUG - response code=200
2025-03-24 20:28:12,555 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:12,555 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:12,560 - yfinance_client - INFO - Retrieved 140 calls and 159 puts
2025-03-24 20:28:12,703 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:28:12,703 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:12,703 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:12,703 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744329600
2025-03-24 20:28:12,704 - yfinance - DEBUG - params=None
2025-03-24 20:28:12,704 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:12,704 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:12,704 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,704 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:12,704 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:12,705 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,705 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:12,807 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:12,819 - yfinance - DEBUG - response code=200
2025-03-24 20:28:12,819 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:12,819 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:12,824 - yfinance_client - INFO - Retrieved 136 calls and 133 puts
2025-03-24 20:28:12,953 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:28:12,954 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:12,954 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:12,954 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744848000
2025-03-24 20:28:12,954 - yfinance - DEBUG - params=None
2025-03-24 20:28:12,954 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:12,955 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:12,955 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,955 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:12,955 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:12,955 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:12,955 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:13,101 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:13,125 - yfinance - DEBUG - response code=200
2025-03-24 20:28:13,126 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:13,126 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:13,130 - yfinance_client - INFO - Retrieved 140 calls and 132 puts
2025-03-24 20:28:13,260 - yfinance_client - INFO - Successfully fetched 4 option chains for QQQ
2025-03-24 20:28:13,260 - __main__ - INFO - Step 3: Preparing analysis data for QQQ...
2025-03-24 20:28:13,261 - __main__ - INFO - Step 4: Processing options data for QQQ...
2025-03-24 20:28:13,261 - __main__ - INFO - Found 4 expiration dates for QQQ
2025-03-24 20:28:13,261 - __main__ - INFO - Processing expiration date 2025-03-31 for QQQ...
2025-03-24 20:28:13,262 - __main__ - DEBUG - ATM calls shape before filtering: (159, 19)
2025-03-24 20:28:13,262 - __main__ - DEBUG - ATM puts shape before filtering: (145, 19)
2025-03-24 20:28:13,262 - __main__ - DEBUG - ATM calls shape after filtering: (37, 19)
2025-03-24 20:28:13,263 - __main__ - DEBUG - ATM puts shape after filtering: (35, 19)
2025-03-24 20:28:13,263 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:28:13,264 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:28:13,265 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:28:13,265 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:28:13,266 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:28:13,266 - __main__ - DEBUG - Volume data for QQQ: calls=38217, puts=47709
2025-03-24 20:28:13,266 - __main__ - INFO - Successfully processed expiration 2025-03-31 for QQQ
2025-03-24 20:28:13,267 - __main__ - INFO - Processing expiration date 2025-04-04 for QQQ...
2025-03-24 20:28:13,267 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:28:13,267 - __main__ - DEBUG - ATM puts shape before filtering: (159, 19)
2025-03-24 20:28:13,268 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:28:13,268 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:28:13,268 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:28:13,269 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:28:13,269 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:28:13,270 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:28:13,270 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:28:13,271 - __main__ - DEBUG - Volume data for QQQ: calls=28545, puts=29809
2025-03-24 20:28:13,271 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QQQ
2025-03-24 20:28:13,271 - __main__ - INFO - Processing expiration date 2025-04-11 for QQQ...
2025-03-24 20:28:13,272 - __main__ - DEBUG - ATM calls shape before filtering: (136, 19)
2025-03-24 20:28:13,272 - __main__ - DEBUG - ATM puts shape before filtering: (133, 19)
2025-03-24 20:28:13,272 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:28:13,273 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:28:13,273 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:28:13,274 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:28:13,274 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:28:13,275 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:28:13,275 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:28:13,275 - __main__ - DEBUG - Volume data for QQQ: calls=16620, puts=21183
2025-03-24 20:28:13,275 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QQQ
2025-03-24 20:28:13,276 - __main__ - INFO - Processing expiration date 2025-04-17 for QQQ...
2025-03-24 20:28:13,276 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:28:13,276 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 20:28:13,277 - __main__ - DEBUG - ATM calls shape after filtering: (22, 19)
2025-03-24 20:28:13,277 - __main__ - DEBUG - ATM puts shape after filtering: (22, 19)
2025-03-24 20:28:13,277 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:28:13,278 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:28:13,278 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:28:13,279 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:28:13,279 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:28:13,280 - __main__ - DEBUG - Volume data for QQQ: calls=92414, puts=81733
2025-03-24 20:28:13,280 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QQQ
2025-03-24 20:28:13,280 - __main__ - INFO - Step 5: Generating analysis for QQQ...
2025-03-24 20:28:13,280 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QQQ with args: stock_analysis_data, market_context
2025-03-24 20:28:25,362 - __main__ - INFO - Market alignment for QQQ: **
2025-03-24 20:28:25,363 - __main__ - INFO - Creating stock analysis result for QQQ...
2025-03-24 20:28:25,363 - __main__ - INFO - Successfully added QQQ to stock analyses
2025-03-24 20:28:25,363 - __main__ - INFO - Updating Notion with analysis for QQQ...
2025-03-24 20:28:25,363 - __main__ - INFO - Sending Discord notification for QQQ...
2025-03-24 20:28:25,364 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2617 chars). Splitting into parts.
2025-03-24 20:28:25,364 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:25,665 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:25,666 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:25,667 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:26,072 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:26,073 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:26,074 - __main__ - INFO - Successfully sent Discord notification for QQQ
2025-03-24 20:28:26,074 - __main__ - INFO - Analyzing IWM...
2025-03-24 20:28:26,074 - __main__ - INFO - Step 1: Getting stock data for IWM...
2025-03-24 20:28:26,075 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:26,075 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:26,075 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:26,075 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:28:26,076 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:26,076 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:26,076 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:26,077 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:26,077 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:28:26,077 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:26,077 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,077 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,078 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,078 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,078 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,078 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,078 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:26,150 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1628
2025-03-24 20:28:26,151 - yfinance - DEBUG - response code=200
2025-03-24 20:28:26,151 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:26,152 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:26,153 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:28:26,157 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:26,160 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:26,164 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:26,165 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:26,165 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:26,167 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:26,167 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:28:26,168 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:26,168 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:26,168 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:26,169 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:28:26,169 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:26,169 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:26,169 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:26,169 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:26,170 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:28:26,170 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:26,170 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,170 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,171 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,171 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,171 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,171 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,171 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:26,246 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2605
2025-03-24 20:28:26,247 - yfinance - DEBUG - response code=200
2025-03-24 20:28:26,248 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:26,248 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:26,249 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:28:26,250 - yfinance - DEBUG - IWM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:28:26,254 - yfinance - DEBUG - IWM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:26,257 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:26,258 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:26,258 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:26,260 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:26,260 - yfinance_client - INFO - Downloaded data for IWM, shape: (59, 5)
2025-03-24 20:28:26,266 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:28:26,269 - __main__ - INFO - Step 2: Getting options chain data for IWM...
2025-03-24 20:28:26,269 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for IWM
2025-03-24 20:28:26,269 - yfinance - DEBUG - Entering history()
2025-03-24 20:28:26,270 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:28:26,270 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:26,270 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:26,271 - yfinance - DEBUG -   Entering get()
2025-03-24 20:28:26,271 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:28:26,271 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:28:26,272 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:26,272 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,272 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,272 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,273 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,273 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,273 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,273 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:28:26,359 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1218
2025-03-24 20:28:26,360 - yfinance - DEBUG - response code=200
2025-03-24 20:28:26,360 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:28:26,360 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:28:26,361 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:28:26,362 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:28:26,364 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:26,368 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:26,368 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:26,368 - yfinance - DEBUG - Exiting history()
2025-03-24 20:28:26,368 - yfinance_client - INFO - Current price of IWM: $208.86
2025-03-24 20:28:26,368 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:26,368 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:26,368 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM
2025-03-24 20:28:26,369 - yfinance - DEBUG - params=None
2025-03-24 20:28:26,369 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,369 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,369 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,369 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,370 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,370 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,370 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:26,442 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:26,443 - yfinance - DEBUG - response code=200
2025-03-24 20:28:26,443 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:26,444 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:26,445 - yfinance_client - INFO - Found 31 expiration dates for IWM
2025-03-24 20:28:26,446 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:28:26,446 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:26,446 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:26,446 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743379200
2025-03-24 20:28:26,447 - yfinance - DEBUG - params=None
2025-03-24 20:28:26,447 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,447 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,447 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,447 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,447 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,448 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,448 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:26,538 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:26,540 - yfinance - DEBUG - response code=200
2025-03-24 20:28:26,540 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:26,540 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:26,544 - yfinance_client - INFO - Retrieved 90 calls and 86 puts
2025-03-24 20:28:26,628 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:28:26,629 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:26,629 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:26,629 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743724800
2025-03-24 20:28:26,630 - yfinance - DEBUG - params=None
2025-03-24 20:28:26,630 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,630 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,630 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,631 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,631 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,631 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,631 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:26,718 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:26,719 - yfinance - DEBUG - response code=200
2025-03-24 20:28:26,719 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:26,720 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:26,724 - yfinance_client - INFO - Retrieved 80 calls and 82 puts
2025-03-24 20:28:26,807 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:28:26,807 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:26,807 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:26,808 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744329600
2025-03-24 20:28:26,808 - yfinance - DEBUG - params=None
2025-03-24 20:28:26,808 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,808 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,808 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,808 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,809 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,809 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,809 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:26,889 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:26,891 - yfinance - DEBUG - response code=200
2025-03-24 20:28:26,891 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:26,892 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:26,895 - yfinance_client - INFO - Retrieved 71 calls and 80 puts
2025-03-24 20:28:26,970 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:28:26,970 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:26,970 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:26,971 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744848000
2025-03-24 20:28:26,971 - yfinance - DEBUG - params=None
2025-03-24 20:28:26,971 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:26,971 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:26,972 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,972 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:26,972 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:26,972 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:26,972 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:27,060 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:27,062 - yfinance - DEBUG - response code=200
2025-03-24 20:28:27,062 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:27,063 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:27,067 - yfinance_client - INFO - Retrieved 101 calls and 91 puts
2025-03-24 20:28:27,159 - yfinance_client - INFO - Successfully fetched 4 option chains for IWM
2025-03-24 20:28:27,160 - __main__ - INFO - Step 3: Preparing analysis data for IWM...
2025-03-24 20:28:27,160 - __main__ - INFO - Step 4: Processing options data for IWM...
2025-03-24 20:28:27,160 - __main__ - INFO - Found 4 expiration dates for IWM
2025-03-24 20:28:27,160 - __main__ - INFO - Processing expiration date 2025-03-31 for IWM...
2025-03-24 20:28:27,162 - __main__ - DEBUG - ATM calls shape before filtering: (90, 19)
2025-03-24 20:28:27,162 - __main__ - DEBUG - ATM puts shape before filtering: (86, 19)
2025-03-24 20:28:27,163 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:28:27,163 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:28:27,163 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:28:27,164 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:28:27,165 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:28:27,165 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:28:27,166 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:28:27,166 - __main__ - DEBUG - Volume data for IWM: calls=14723, puts=18881
2025-03-24 20:28:27,167 - __main__ - INFO - Successfully processed expiration 2025-03-31 for IWM
2025-03-24 20:28:27,167 - __main__ - INFO - Processing expiration date 2025-04-04 for IWM...
2025-03-24 20:28:27,167 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:28:27,168 - __main__ - DEBUG - ATM puts shape before filtering: (82, 19)
2025-03-24 20:28:27,168 - __main__ - DEBUG - ATM calls shape after filtering: (23, 19)
2025-03-24 20:28:27,169 - __main__ - DEBUG - ATM puts shape after filtering: (23, 19)
2025-03-24 20:28:27,169 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:28:27,170 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:28:27,170 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:28:27,171 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:28:27,171 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:28:27,172 - __main__ - DEBUG - Volume data for IWM: calls=19269, puts=29074
2025-03-24 20:28:27,172 - __main__ - INFO - Successfully processed expiration 2025-04-04 for IWM
2025-03-24 20:28:27,172 - __main__ - INFO - Processing expiration date 2025-04-11 for IWM...
2025-03-24 20:28:27,173 - __main__ - DEBUG - ATM calls shape before filtering: (71, 19)
2025-03-24 20:28:27,173 - __main__ - DEBUG - ATM puts shape before filtering: (80, 19)
2025-03-24 20:28:27,174 - __main__ - DEBUG - ATM calls shape after filtering: (25, 19)
2025-03-24 20:28:27,174 - __main__ - DEBUG - ATM puts shape after filtering: (25, 19)
2025-03-24 20:28:27,175 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:28:27,176 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:28:27,176 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:28:27,177 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:28:27,177 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:28:27,178 - __main__ - DEBUG - Volume data for IWM: calls=5175, puts=10062
2025-03-24 20:28:27,178 - __main__ - INFO - Successfully processed expiration 2025-04-11 for IWM
2025-03-24 20:28:27,178 - __main__ - INFO - Processing expiration date 2025-04-17 for IWM...
2025-03-24 20:28:27,178 - __main__ - DEBUG - ATM calls shape before filtering: (101, 19)
2025-03-24 20:28:27,178 - __main__ - DEBUG - ATM puts shape before filtering: (91, 19)
2025-03-24 20:28:27,179 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:28:27,180 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:28:27,180 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:28:27,180 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:28:27,181 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:28:27,181 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:28:27,182 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:28:27,182 - __main__ - DEBUG - Volume data for IWM: calls=34485, puts=312289
2025-03-24 20:28:27,182 - __main__ - INFO - Successfully processed expiration 2025-04-17 for IWM
2025-03-24 20:28:27,183 - __main__ - INFO - Step 5: Generating analysis for IWM...
2025-03-24 20:28:27,183 - __main__ - DEBUG - Calling get_stock_analysis_prompt for IWM with args: stock_analysis_data, market_context
2025-03-24 20:28:40,913 - __main__ - INFO - Market alignment for IWM: **
2025-03-24 20:28:40,913 - __main__ - INFO - Creating stock analysis result for IWM...
2025-03-24 20:28:40,914 - __main__ - INFO - Successfully added IWM to stock analyses
2025-03-24 20:28:40,914 - __main__ - INFO - Updating Notion with analysis for IWM...
2025-03-24 20:28:40,914 - __main__ - INFO - Sending Discord notification for IWM...
2025-03-24 20:28:40,914 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2686 chars). Splitting into parts.
2025-03-24 20:28:40,915 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:41,230 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:41,231 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:41,232 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:41,481 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:41,483 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:41,483 - __main__ - INFO - Successfully sent Discord notification for IWM
2025-03-24 20:28:41,483 - __main__ - INFO - Analyzing VTV...
2025-03-24 20:28:41,483 - __main__ - INFO - Step 1: Getting stock data for VTV...
2025-03-24 20:28:41,483 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:41,484 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:41,484 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:41,484 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:28:41,485 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:41,485 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:41,485 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:41,485 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:41,485 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:28:41,486 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:41,486 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:41,486 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:41,486 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,486 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:41,486 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:41,487 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,487 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:41,552 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1638
2025-03-24 20:28:41,552 - yfinance - DEBUG - response code=200
2025-03-24 20:28:41,553 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:41,553 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:41,554 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:28:41,559 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:41,561 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:41,565 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:41,565 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:41,565 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:41,567 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:41,567 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:28:41,568 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:41,568 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:41,568 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:41,569 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:28:41,569 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:41,569 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:41,569 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:41,570 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:41,570 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:28:41,570 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:41,570 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:41,570 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:41,571 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,571 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:41,571 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:41,571 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,571 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:41,641 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1972
2025-03-24 20:28:41,642 - yfinance - DEBUG - response code=200
2025-03-24 20:28:41,642 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:41,643 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:41,644 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:28:41,645 - yfinance - DEBUG - VTV: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:28:41,647 - yfinance - DEBUG - VTV: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:41,651 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:41,652 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:41,652 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:41,654 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:41,654 - yfinance_client - INFO - Downloaded data for VTV, shape: (59, 5)
2025-03-24 20:28:41,660 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:28:41,663 - __main__ - INFO - Step 2: Getting options chain data for VTV...
2025-03-24 20:28:41,663 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VTV
2025-03-24 20:28:41,663 - yfinance - DEBUG - Entering history()
2025-03-24 20:28:41,664 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:28:41,664 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:41,664 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:41,664 - yfinance - DEBUG -   Entering get()
2025-03-24 20:28:41,664 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:28:41,665 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:28:41,665 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:41,665 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:28:41,665 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:41,666 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,666 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:41,666 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:41,666 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,666 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:28:41,826 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1219
2025-03-24 20:28:41,827 - yfinance - DEBUG - response code=200
2025-03-24 20:28:41,828 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:28:41,828 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:28:41,829 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:28:41,829 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:28:41,831 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:41,835 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:41,835 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:41,836 - yfinance - DEBUG - Exiting history()
2025-03-24 20:28:41,836 - yfinance_client - INFO - Current price of VTV: $174.55
2025-03-24 20:28:41,836 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:41,836 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:41,837 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV
2025-03-24 20:28:41,837 - yfinance - DEBUG - params=None
2025-03-24 20:28:41,837 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:41,837 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:41,838 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,838 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:41,838 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:41,838 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,838 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:41,946 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:41,947 - yfinance - DEBUG - response code=200
2025-03-24 20:28:41,948 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:41,948 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:41,948 - yfinance_client - INFO - Found 4 expiration dates for VTV
2025-03-24 20:28:41,949 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:28:41,949 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:41,949 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:41,949 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV?date=1744848000
2025-03-24 20:28:41,950 - yfinance - DEBUG - params=None
2025-03-24 20:28:41,950 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:41,951 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:41,951 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,951 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:41,951 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:41,951 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:41,951 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:42,068 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:28:42,069 - yfinance - DEBUG - response code=200
2025-03-24 20:28:42,069 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:42,070 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:42,073 - yfinance_client - INFO - Retrieved 18 calls and 11 puts
2025-03-24 20:28:42,089 - yfinance_client - INFO - Successfully fetched 1 option chains for VTV
2025-03-24 20:28:42,090 - __main__ - INFO - Step 3: Preparing analysis data for VTV...
2025-03-24 20:28:42,090 - __main__ - INFO - Step 4: Processing options data for VTV...
2025-03-24 20:28:42,090 - __main__ - INFO - Found 1 expiration dates for VTV
2025-03-24 20:28:42,090 - __main__ - INFO - Processing expiration date 2025-04-17 for VTV...
2025-03-24 20:28:42,091 - __main__ - DEBUG - ATM calls shape before filtering: (18, 19)
2025-03-24 20:28:42,091 - __main__ - DEBUG - ATM puts shape before filtering: (11, 19)
2025-03-24 20:28:42,092 - __main__ - DEBUG - ATM calls shape after filtering: (15, 19)
2025-03-24 20:28:42,092 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:28:42,092 - __main__ - DEBUG - Finding ATM call for VTV...
2025-03-24 20:28:42,093 - __main__ - DEBUG - ATM call for VTV: strike=175.0
2025-03-24 20:28:42,093 - __main__ - DEBUG - Finding ATM put for VTV...
2025-03-24 20:28:42,094 - __main__ - DEBUG - ATM put for VTV: strike=175.0
2025-03-24 20:28:42,094 - __main__ - DEBUG - Calculating volume data for VTV...
2025-03-24 20:28:42,095 - __main__ - DEBUG - Volume data for VTV: calls=92, puts=8
2025-03-24 20:28:42,095 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VTV
2025-03-24 20:28:42,095 - __main__ - INFO - Step 5: Generating analysis for VTV...
2025-03-24 20:28:42,095 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VTV with args: stock_analysis_data, market_context
2025-03-24 20:28:54,558 - __main__ - INFO - Market alignment for VTV: **
2025-03-24 20:28:54,559 - __main__ - INFO - Creating stock analysis result for VTV...
2025-03-24 20:28:54,559 - __main__ - INFO - Successfully added VTV to stock analyses
2025-03-24 20:28:54,559 - __main__ - INFO - Updating Notion with analysis for VTV...
2025-03-24 20:28:54,560 - __main__ - INFO - Sending Discord notification for VTV...
2025-03-24 20:28:54,560 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2529 chars). Splitting into parts.
2025-03-24 20:28:54,561 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:54,835 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:54,836 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:54,837 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:28:55,246 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:28:55,247 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:28:55,247 - __main__ - INFO - Successfully sent Discord notification for VTV
2025-03-24 20:28:55,247 - __main__ - INFO - Analyzing VGLT...
2025-03-24 20:28:55,248 - __main__ - INFO - Step 1: Getting stock data for VGLT...
2025-03-24 20:28:55,248 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:55,248 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:55,248 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:55,248 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:28:55,249 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:55,249 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:55,249 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:55,249 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:55,250 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:28:55,250 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:55,250 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:55,250 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:55,250 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,251 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:55,251 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:55,251 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,251 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:55,360 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1676
2025-03-24 20:28:55,361 - yfinance - DEBUG - response code=200
2025-03-24 20:28:55,361 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:55,362 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:55,363 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:28:55,367 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:55,369 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:55,373 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:28:55,374 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:55,374 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:55,376 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:55,376 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:28:55,376 - yfinance - DEBUG - Entering download()
2025-03-24 20:28:55,376 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:28:55,377 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:55,377 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:28:55,378 - yfinance - DEBUG -   Entering history()
2025-03-24 20:28:55,378 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:55,378 - yfinance - DEBUG -    Entering get()
2025-03-24 20:28:55,378 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:28:55,378 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:28:55,379 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:55,379 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:28:55,379 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:55,379 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,379 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:55,379 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:55,380 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,380 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:28:55,450 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2382
2025-03-24 20:28:55,451 - yfinance - DEBUG - response code=200
2025-03-24 20:28:55,451 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:28:55,451 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:28:55,453 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:28:55,454 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:28:55,456 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 20:28:55,460 - yfinance - DEBUG - VGLT: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:55,465 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:28:55,465 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:28:55,466 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:55,468 - yfinance - DEBUG - Exiting download()
2025-03-24 20:28:55,468 - yfinance_client - INFO - Downloaded data for VGLT, shape: (59, 5)
2025-03-24 20:28:55,475 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:28:55,478 - __main__ - INFO - Step 2: Getting options chain data for VGLT...
2025-03-24 20:28:55,478 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VGLT
2025-03-24 20:28:55,479 - yfinance - DEBUG - Entering history()
2025-03-24 20:28:55,479 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:28:55,480 - yfinance - DEBUG -  Entering history()
2025-03-24 20:28:55,480 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:55,480 - yfinance - DEBUG -   Entering get()
2025-03-24 20:28:55,481 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:28:55,481 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:28:55,481 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:28:55,481 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:28:55,481 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:55,482 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,482 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:55,482 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:55,482 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,482 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:28:55,558 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1241
2025-03-24 20:28:55,559 - yfinance - DEBUG - response code=200
2025-03-24 20:28:55,559 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:28:55,560 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:28:55,560 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:28:55,561 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:28:55,563 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:55,567 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:28:55,567 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:28:55,568 - yfinance - DEBUG - Exiting history()
2025-03-24 20:28:55,568 - yfinance_client - INFO - Current price of VGLT: $56.85
2025-03-24 20:28:55,568 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:55,568 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:55,569 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT
2025-03-24 20:28:55,569 - yfinance - DEBUG - params=None
2025-03-24 20:28:55,569 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:55,569 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:55,569 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,570 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:55,570 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:55,570 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,570 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:55,624 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1814
2025-03-24 20:28:55,625 - yfinance - DEBUG - response code=200
2025-03-24 20:28:55,625 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:55,625 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:55,626 - yfinance_client - INFO - Found 4 expiration dates for VGLT
2025-03-24 20:28:55,626 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:28:55,626 - yfinance - DEBUG - Entering get()
2025-03-24 20:28:55,626 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:28:55,627 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT?date=1744848000
2025-03-24 20:28:55,627 - yfinance - DEBUG - params=None
2025-03-24 20:28:55,627 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:28:55,627 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:28:55,627 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,627 - yfinance - DEBUG - reusing cookie
2025-03-24 20:28:55,628 - yfinance - DEBUG - reusing crumb
2025-03-24 20:28:55,628 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:28:55,628 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:28:55,685 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1814
2025-03-24 20:28:55,686 - yfinance - DEBUG - response code=200
2025-03-24 20:28:55,686 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:28:55,686 - yfinance - DEBUG - Exiting get()
2025-03-24 20:28:55,689 - yfinance_client - INFO - Retrieved 8 calls and 8 puts
2025-03-24 20:28:55,700 - yfinance_client - INFO - Successfully fetched 1 option chains for VGLT
2025-03-24 20:28:55,700 - __main__ - INFO - Step 3: Preparing analysis data for VGLT...
2025-03-24 20:28:55,700 - __main__ - INFO - Step 4: Processing options data for VGLT...
2025-03-24 20:28:55,700 - __main__ - INFO - Found 1 expiration dates for VGLT
2025-03-24 20:28:55,701 - __main__ - INFO - Processing expiration date 2025-04-17 for VGLT...
2025-03-24 20:28:55,701 - __main__ - DEBUG - ATM calls shape before filtering: (8, 19)
2025-03-24 20:28:55,701 - __main__ - DEBUG - ATM puts shape before filtering: (8, 19)
2025-03-24 20:28:55,702 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:28:55,703 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:28:55,703 - __main__ - DEBUG - Finding ATM call for VGLT...
2025-03-24 20:28:55,704 - __main__ - DEBUG - ATM call for VGLT: strike=57.0
2025-03-24 20:28:55,704 - __main__ - DEBUG - Finding ATM put for VGLT...
2025-03-24 20:28:55,705 - __main__ - DEBUG - ATM put for VGLT: strike=57.0
2025-03-24 20:28:55,705 - __main__ - DEBUG - Calculating volume data for VGLT...
2025-03-24 20:28:55,706 - __main__ - DEBUG - Volume data for VGLT: calls=23, puts=27
2025-03-24 20:28:55,706 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VGLT
2025-03-24 20:28:55,706 - __main__ - INFO - Step 5: Generating analysis for VGLT...
2025-03-24 20:28:55,706 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VGLT with args: stock_analysis_data, market_context
2025-03-24 20:29:09,727 - __main__ - INFO - Market alignment for VGLT: contrary
2025-03-24 20:29:09,727 - __main__ - INFO - Creating stock analysis result for VGLT...
2025-03-24 20:29:09,728 - __main__ - INFO - Successfully added VGLT to stock analyses
2025-03-24 20:29:09,728 - __main__ - INFO - Updating Notion with analysis for VGLT...
2025-03-24 20:29:09,728 - __main__ - INFO - Sending Discord notification for VGLT...
2025-03-24 20:29:09,729 - discord.discord_client - INFO - Analysis description exceeds Discord limit (3011 chars). Splitting into parts.
2025-03-24 20:29:09,730 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:10,136 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:10,137 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:10,138 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:10,434 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:10,435 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:10,435 - __main__ - INFO - Successfully sent Discord notification for VGLT
2025-03-24 20:29:10,436 - __main__ - INFO - Analyzing VIX...
2025-03-24 20:29:10,436 - __main__ - INFO - Step 1: Getting stock data for VIX...
2025-03-24 20:29:10,436 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:10,436 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:10,436 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:10,437 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:29:10,437 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:10,437 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,437 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:10,437 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:10,438 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:29:10,438 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,438 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:10,438 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:10,438 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,439 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:10,439 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:10,439 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,440 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:10,550 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 801
2025-03-24 20:29:10,551 - yfinance - DEBUG - response code=200
2025-03-24 20:29:10,551 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:10,552 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:10,554 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:29:10,555 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=5d)')
2025-03-24 20:29:10,555 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=5d)

2025-03-24 20:29:10,558 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:10,558 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:29:10,558 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:10,559 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:10,559 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:10,559 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:29:10,560 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:10,560 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,560 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:10,560 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:10,561 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:29:10,561 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,561 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:10,561 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:10,561 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,562 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:10,562 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:10,562 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,562 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:10,618 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 802
2025-03-24 20:29:10,618 - yfinance - DEBUG - response code=200
2025-03-24 20:29:10,619 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:10,619 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:10,620 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:29:10,620 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=3mo)')
2025-03-24 20:29:10,620 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=3mo)

2025-03-24 20:29:10,623 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:10,623 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:29:10,624 - yfinance_client - ERROR - Failed to retrieve data for VIX
2025-03-24 20:29:10,624 - __main__ - ERROR - Failed to get stock data for VIX
2025-03-24 20:29:10,624 - __main__ - INFO - Analyzing DIA...
2025-03-24 20:29:10,624 - __main__ - INFO - Step 1: Getting stock data for DIA...
2025-03-24 20:29:10,624 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:10,624 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:10,625 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:10,625 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:29:10,625 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:10,625 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,626 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:10,626 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:10,626 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:29:10,626 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,626 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:10,627 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:10,627 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,627 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:10,627 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:10,627 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,627 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:10,702 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1669
2025-03-24 20:29:10,703 - yfinance - DEBUG - response code=200
2025-03-24 20:29:10,703 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:10,703 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:10,704 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:29:10,708 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:10,712 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:10,715 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:10,716 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:10,716 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:10,718 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:10,718 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:29:10,718 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:10,718 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:10,719 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:10,719 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:29:10,720 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:10,721 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,721 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:10,721 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:10,721 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:29:10,721 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,721 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:10,721 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:10,721 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,722 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:10,722 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:10,722 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,722 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:10,817 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2596
2025-03-24 20:29:10,818 - yfinance - DEBUG - response code=200
2025-03-24 20:29:10,818 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:10,819 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:10,819 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:29:10,821 - yfinance - DEBUG - DIA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:29:10,825 - yfinance - DEBUG - DIA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:29:10,828 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:29:10,828 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:10,829 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:10,830 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:10,831 - yfinance_client - INFO - Downloaded data for DIA, shape: (59, 5)
2025-03-24 20:29:10,836 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:29:10,839 - __main__ - INFO - Step 2: Getting options chain data for DIA...
2025-03-24 20:29:10,839 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for DIA
2025-03-24 20:29:10,840 - yfinance - DEBUG - Entering history()
2025-03-24 20:29:10,840 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:29:10,841 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:10,841 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,841 - yfinance - DEBUG -   Entering get()
2025-03-24 20:29:10,841 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:29:10,842 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:29:10,842 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:10,842 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:29:10,842 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:10,842 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,843 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:10,843 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:10,843 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,843 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:29:10,940 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1236
2025-03-24 20:29:10,941 - yfinance - DEBUG - response code=200
2025-03-24 20:29:10,941 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:29:10,942 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:29:10,943 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:29:10,943 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:29:10,945 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:29:10,949 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:29:10,949 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:10,949 - yfinance - DEBUG - Exiting history()
2025-03-24 20:29:10,950 - yfinance_client - INFO - Current price of DIA: $425.49
2025-03-24 20:29:10,950 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:10,950 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:10,950 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA
2025-03-24 20:29:10,951 - yfinance - DEBUG - params=None
2025-03-24 20:29:10,951 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:10,951 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:10,951 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,951 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:10,952 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:10,952 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:10,952 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:11,050 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:11,063 - yfinance - DEBUG - response code=200
2025-03-24 20:29:11,064 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:11,064 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:11,065 - yfinance_client - INFO - Found 17 expiration dates for DIA
2025-03-24 20:29:11,066 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:29:11,066 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:11,067 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:11,067 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743379200
2025-03-24 20:29:11,067 - yfinance - DEBUG - params=None
2025-03-24 20:29:11,068 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:11,068 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:11,068 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,068 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:11,068 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:11,069 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,069 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:11,161 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:11,164 - yfinance - DEBUG - response code=200
2025-03-24 20:29:11,164 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:11,164 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:11,168 - yfinance_client - INFO - Retrieved 113 calls and 106 puts
2025-03-24 20:29:11,272 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:29:11,273 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:11,273 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:11,273 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743724800
2025-03-24 20:29:11,273 - yfinance - DEBUG - params=None
2025-03-24 20:29:11,274 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:11,274 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:11,274 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,274 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:11,274 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:11,275 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,275 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:11,404 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:11,405 - yfinance - DEBUG - response code=200
2025-03-24 20:29:11,405 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:11,405 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:11,409 - yfinance_client - INFO - Retrieved 75 calls and 67 puts
2025-03-24 20:29:11,480 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:29:11,480 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:11,480 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:11,481 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1744329600
2025-03-24 20:29:11,481 - yfinance - DEBUG - params=None
2025-03-24 20:29:11,481 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:11,482 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:11,482 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,482 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:11,482 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:11,482 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,482 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:11,568 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:11,569 - yfinance - DEBUG - response code=200
2025-03-24 20:29:11,569 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:11,569 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:11,573 - yfinance_client - INFO - Retrieved 54 calls and 54 puts
2025-03-24 20:29:11,628 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:29:11,628 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:11,628 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:11,628 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1744848000
2025-03-24 20:29:11,628 - yfinance - DEBUG - params=None
2025-03-24 20:29:11,629 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:11,629 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:11,629 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,629 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:11,629 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:11,629 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:11,629 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:11,721 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:11,723 - yfinance - DEBUG - response code=200
2025-03-24 20:29:11,724 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:11,724 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:11,729 - yfinance_client - INFO - Retrieved 99 calls and 89 puts
2025-03-24 20:29:11,825 - yfinance_client - INFO - Successfully fetched 4 option chains for DIA
2025-03-24 20:29:11,825 - __main__ - INFO - Step 3: Preparing analysis data for DIA...
2025-03-24 20:29:11,825 - __main__ - INFO - Step 4: Processing options data for DIA...
2025-03-24 20:29:11,825 - __main__ - INFO - Found 4 expiration dates for DIA
2025-03-24 20:29:11,826 - __main__ - INFO - Processing expiration date 2025-03-31 for DIA...
2025-03-24 20:29:11,826 - __main__ - DEBUG - ATM calls shape before filtering: (113, 19)
2025-03-24 20:29:11,826 - __main__ - DEBUG - ATM puts shape before filtering: (106, 19)
2025-03-24 20:29:11,827 - __main__ - DEBUG - ATM calls shape after filtering: (34, 19)
2025-03-24 20:29:11,827 - __main__ - DEBUG - ATM puts shape after filtering: (34, 19)
2025-03-24 20:29:11,828 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:29:11,828 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:29:11,829 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:29:11,829 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:29:11,829 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:29:11,830 - __main__ - DEBUG - Volume data for DIA: calls=1390, puts=5714
2025-03-24 20:29:11,830 - __main__ - INFO - Successfully processed expiration 2025-03-31 for DIA
2025-03-24 20:29:11,830 - __main__ - INFO - Processing expiration date 2025-04-04 for DIA...
2025-03-24 20:29:11,831 - __main__ - DEBUG - ATM calls shape before filtering: (75, 19)
2025-03-24 20:29:11,831 - __main__ - DEBUG - ATM puts shape before filtering: (67, 19)
2025-03-24 20:29:11,831 - __main__ - DEBUG - ATM calls shape after filtering: (44, 19)
2025-03-24 20:29:11,832 - __main__ - DEBUG - ATM puts shape after filtering: (46, 19)
2025-03-24 20:29:11,832 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:29:11,833 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:29:11,833 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:29:11,834 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:29:11,834 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:29:11,835 - __main__ - DEBUG - Volume data for DIA: calls=1433, puts=2429
2025-03-24 20:29:11,835 - __main__ - INFO - Successfully processed expiration 2025-04-04 for DIA
2025-03-24 20:29:11,835 - __main__ - INFO - Processing expiration date 2025-04-11 for DIA...
2025-03-24 20:29:11,835 - __main__ - DEBUG - ATM calls shape before filtering: (54, 19)
2025-03-24 20:29:11,836 - __main__ - DEBUG - ATM puts shape before filtering: (54, 19)
2025-03-24 20:29:11,836 - __main__ - DEBUG - ATM calls shape after filtering: (41, 19)
2025-03-24 20:29:11,837 - __main__ - DEBUG - ATM puts shape after filtering: (38, 19)
2025-03-24 20:29:11,837 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:29:11,838 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:29:11,838 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:29:11,838 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:29:11,839 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:29:11,839 - __main__ - DEBUG - Volume data for DIA: calls=537, puts=5714
2025-03-24 20:29:11,839 - __main__ - INFO - Successfully processed expiration 2025-04-11 for DIA
2025-03-24 20:29:11,840 - __main__ - INFO - Processing expiration date 2025-04-17 for DIA...
2025-03-24 20:29:11,840 - __main__ - DEBUG - ATM calls shape before filtering: (99, 19)
2025-03-24 20:29:11,840 - __main__ - DEBUG - ATM puts shape before filtering: (89, 19)
2025-03-24 20:29:11,841 - __main__ - DEBUG - ATM calls shape after filtering: (42, 19)
2025-03-24 20:29:11,841 - __main__ - DEBUG - ATM puts shape after filtering: (40, 19)
2025-03-24 20:29:11,842 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:29:11,842 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:29:11,842 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:29:11,842 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:29:11,843 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:29:11,843 - __main__ - DEBUG - Volume data for DIA: calls=2018, puts=5446
2025-03-24 20:29:11,843 - __main__ - INFO - Successfully processed expiration 2025-04-17 for DIA
2025-03-24 20:29:11,843 - __main__ - INFO - Step 5: Generating analysis for DIA...
2025-03-24 20:29:11,844 - __main__ - DEBUG - Calling get_stock_analysis_prompt for DIA with args: stock_analysis_data, market_context
2025-03-24 20:29:25,070 - __main__ - INFO - Market alignment for DIA: **
2025-03-24 20:29:25,070 - __main__ - INFO - Creating stock analysis result for DIA...
2025-03-24 20:29:25,071 - __main__ - INFO - Successfully added DIA to stock analyses
2025-03-24 20:29:25,071 - __main__ - INFO - Updating Notion with analysis for DIA...
2025-03-24 20:29:25,071 - __main__ - INFO - Sending Discord notification for DIA...
2025-03-24 20:29:25,071 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2793 chars). Splitting into parts.
2025-03-24 20:29:25,072 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:25,453 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:25,454 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:25,455 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:25,694 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:25,695 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:25,696 - __main__ - INFO - Successfully sent Discord notification for DIA
2025-03-24 20:29:25,696 - __main__ - INFO - Analyzing BND...
2025-03-24 20:29:25,696 - __main__ - INFO - Step 1: Getting stock data for BND...
2025-03-24 20:29:25,696 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:25,697 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:25,697 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:25,697 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:29:25,697 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:25,698 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:25,698 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:25,698 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:25,698 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:29:25,698 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:25,698 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:25,699 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:25,699 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,699 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:25,699 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:25,699 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,699 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:25,768 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1681
2025-03-24 20:29:25,769 - yfinance - DEBUG - response code=200
2025-03-24 20:29:25,769 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:25,770 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:25,771 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:29:25,775 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:25,777 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:25,781 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:25,781 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:25,782 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:25,783 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:25,784 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:29:25,784 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:25,784 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:25,784 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:25,785 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:29:25,785 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:25,785 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:25,785 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:25,786 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:25,786 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:29:25,786 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:25,787 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:25,787 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:25,787 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,787 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:25,787 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:25,787 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,788 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:25,865 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2264
2025-03-24 20:29:25,866 - yfinance - DEBUG - response code=200
2025-03-24 20:29:25,867 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:25,867 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:25,868 - yfinance - DEBUG - BND: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:29:25,870 - yfinance - DEBUG - BND: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:29:25,873 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 20:29:25,877 - yfinance - DEBUG - BND: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:29:25,883 - yfinance - DEBUG - BND: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:29:25,884 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:25,884 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:25,886 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:25,887 - yfinance_client - INFO - Downloaded data for BND, shape: (59, 5)
2025-03-24 20:29:25,895 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:29:25,900 - __main__ - INFO - Step 2: Getting options chain data for BND...
2025-03-24 20:29:25,900 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BND
2025-03-24 20:29:25,900 - yfinance - DEBUG - Entering history()
2025-03-24 20:29:25,901 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:29:25,901 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:25,901 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:25,902 - yfinance - DEBUG -   Entering get()
2025-03-24 20:29:25,902 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:29:25,902 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:29:25,902 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:25,903 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:29:25,903 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:25,903 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,903 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:25,903 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:25,904 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,904 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:29:25,973 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1197
2025-03-24 20:29:25,974 - yfinance - DEBUG - response code=200
2025-03-24 20:29:25,974 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:29:25,974 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:29:25,975 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:29:25,976 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:29:25,978 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:29:25,982 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:29:25,982 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:25,983 - yfinance - DEBUG - Exiting history()
2025-03-24 20:29:25,983 - yfinance_client - INFO - Current price of BND: $73.00
2025-03-24 20:29:25,983 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:25,983 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:25,983 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BND
2025-03-24 20:29:25,984 - yfinance - DEBUG - params=None
2025-03-24 20:29:25,984 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:25,984 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:25,984 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,984 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:25,984 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:25,984 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:25,985 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:26,042 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BND?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1547
2025-03-24 20:29:26,043 - yfinance - DEBUG - response code=200
2025-03-24 20:29:26,043 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:26,044 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:26,044 - yfinance_client - INFO - Found 4 expiration dates for BND
2025-03-24 20:29:26,044 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:29:26,045 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:26,045 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:26,045 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BND?date=1744848000
2025-03-24 20:29:26,045 - yfinance - DEBUG - params=None
2025-03-24 20:29:26,045 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:26,045 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:26,045 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:26,046 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:26,046 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:26,046 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:26,046 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:26,109 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BND?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1547
2025-03-24 20:29:26,109 - yfinance - DEBUG - response code=200
2025-03-24 20:29:26,110 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:26,110 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:26,112 - yfinance_client - INFO - Retrieved 6 calls and 2 puts
2025-03-24 20:29:26,119 - yfinance_client - INFO - Successfully fetched 1 option chains for BND
2025-03-24 20:29:26,120 - __main__ - INFO - Step 3: Preparing analysis data for BND...
2025-03-24 20:29:26,120 - __main__ - INFO - Step 4: Processing options data for BND...
2025-03-24 20:29:26,120 - __main__ - INFO - Found 1 expiration dates for BND
2025-03-24 20:29:26,120 - __main__ - INFO - Processing expiration date 2025-04-17 for BND...
2025-03-24 20:29:26,121 - __main__ - DEBUG - ATM calls shape before filtering: (6, 19)
2025-03-24 20:29:26,121 - __main__ - DEBUG - ATM puts shape before filtering: (2, 19)
2025-03-24 20:29:26,122 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:29:26,122 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:29:26,122 - __main__ - DEBUG - Finding ATM call for BND...
2025-03-24 20:29:26,123 - __main__ - DEBUG - ATM call for BND: strike=73.0
2025-03-24 20:29:26,123 - __main__ - DEBUG - Finding ATM put for BND...
2025-03-24 20:29:26,124 - __main__ - DEBUG - ATM put for BND: strike=73.0
2025-03-24 20:29:26,124 - __main__ - DEBUG - Calculating volume data for BND...
2025-03-24 20:29:26,125 - __main__ - DEBUG - Volume data for BND: calls=87, puts=71
2025-03-24 20:29:26,125 - __main__ - INFO - Successfully processed expiration 2025-04-17 for BND
2025-03-24 20:29:26,125 - __main__ - INFO - Step 5: Generating analysis for BND...
2025-03-24 20:29:26,125 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BND with args: stock_analysis_data, market_context
2025-03-24 20:29:39,292 - __main__ - INFO - Market alignment for BND: aligned
2025-03-24 20:29:39,292 - __main__ - INFO - Creating stock analysis result for BND...
2025-03-24 20:29:39,292 - __main__ - INFO - Successfully added BND to stock analyses
2025-03-24 20:29:39,293 - __main__ - INFO - Updating Notion with analysis for BND...
2025-03-24 20:29:39,293 - __main__ - INFO - Sending Discord notification for BND...
2025-03-24 20:29:39,293 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2819 chars). Splitting into parts.
2025-03-24 20:29:39,294 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:39,642 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:39,644 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:39,645 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:39,923 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:39,924 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:39,924 - __main__ - INFO - Successfully sent Discord notification for BND
2025-03-24 20:29:39,925 - __main__ - INFO - Analyzing BTC-USD...
2025-03-24 20:29:39,925 - __main__ - INFO - Step 1: Getting stock data for BTC-USD...
2025-03-24 20:29:39,925 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:39,925 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:39,926 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:39,926 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:29:39,926 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:39,927 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:39,927 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:39,927 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:39,927 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:29:39,928 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:39,928 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:39,928 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:39,928 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:39,928 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:39,929 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:39,929 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:39,929 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:39,989 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:39,990 - yfinance - DEBUG - response code=200
2025-03-24 20:29:39,990 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:39,990 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:39,991 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:27:00
2025-03-24 20:29:39,995 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:27:00+00:00
2025-03-24 20:29:39,997 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:27:00+00:00
2025-03-24 20:29:40,002 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:29:40,002 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:40,003 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:40,004 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:40,005 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:29:40,005 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:40,005 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:40,005 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:40,006 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:29:40,006 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:40,006 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:40,006 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:40,006 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:40,007 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:29:40,007 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:40,007 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:40,007 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:40,007 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:40,007 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:40,008 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:40,008 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:40,008 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:40,064 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:40,066 - yfinance - DEBUG - response code=200
2025-03-24 20:29:40,066 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:40,066 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:40,067 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2024-12-25 00:00:00 -> 2025-03-25 03:27:00
2025-03-24 20:29:40,068 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2024-12-25 00:00:00+00:00 -> 2025-03-25 03:27:00+00:00
2025-03-24 20:29:40,070 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 20:29:40,074 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 20:29:40,074 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:40,074 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:40,076 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:40,076 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (90, 5)
2025-03-24 20:29:40,082 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (90, 5)
2025-03-24 20:29:40,086 - __main__ - INFO - Step 2: Getting options chain data for BTC-USD...
2025-03-24 20:29:40,086 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BTC-USD
2025-03-24 20:29:40,086 - yfinance - DEBUG - Entering history()
2025-03-24 20:29:40,086 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:29:40,087 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:40,087 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:40,087 - yfinance - DEBUG -   Entering get()
2025-03-24 20:29:40,088 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:29:40,088 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:29:40,088 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:40,088 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:29:40,088 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:40,089 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:40,089 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:40,089 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:40,089 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:40,089 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:29:40,160 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1160
2025-03-24 20:29:40,161 - yfinance - DEBUG - response code=200
2025-03-24 20:29:40,161 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:29:40,161 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:29:40,162 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-25 03:27:00 only
2025-03-24 20:29:40,163 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-25 03:27:00+00:00 only
2025-03-24 20:29:40,165 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:29:40,169 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:29:40,169 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:40,170 - yfinance - DEBUG - Exiting history()
2025-03-24 20:29:40,170 - yfinance_client - INFO - Current price of BTC-USD: $86754.11
2025-03-24 20:29:40,170 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:40,170 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:40,170 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BTC-USD
2025-03-24 20:29:40,171 - yfinance - DEBUG - params=None
2025-03-24 20:29:40,171 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:40,171 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:40,171 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:40,171 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:40,171 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:40,172 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:40,172 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:40,223 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BTC-USD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1017
2025-03-24 20:29:40,224 - yfinance - DEBUG - response code=200
2025-03-24 20:29:40,224 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:40,224 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:40,225 - yfinance_client - WARNING - No options expiration dates found for BTC-USD
2025-03-24 20:29:40,225 - __main__ - WARNING - No options chain data found for BTC-USD
2025-03-24 20:29:40,225 - __main__ - INFO - Step 3: Preparing analysis data for BTC-USD...
2025-03-24 20:29:40,225 - __main__ - INFO - Step 4: Processing options data for BTC-USD...
2025-03-24 20:29:40,225 - __main__ - INFO - Step 5: Generating analysis for BTC-USD...
2025-03-24 20:29:40,225 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BTC-USD with args: stock_analysis_data, market_context
2025-03-24 20:29:54,092 - __main__ - INFO - Market alignment for BTC-USD: **
2025-03-24 20:29:54,093 - __main__ - INFO - Creating stock analysis result for BTC-USD...
2025-03-24 20:29:54,093 - __main__ - INFO - Successfully added BTC-USD to stock analyses
2025-03-24 20:29:54,093 - __main__ - INFO - Updating Notion with analysis for BTC-USD...
2025-03-24 20:29:54,094 - __main__ - INFO - Sending Discord notification for BTC-USD...
2025-03-24 20:29:54,094 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2991 chars). Splitting into parts.
2025-03-24 20:29:54,095 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:54,467 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:54,468 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:54,469 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:29:55,872 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:29:55,873 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:29:55,873 - __main__ - INFO - Successfully sent Discord notification for BTC-USD
2025-03-24 20:29:55,873 - __main__ - INFO - Analyzing NVDA...
2025-03-24 20:29:55,874 - __main__ - INFO - Step 1: Getting stock data for NVDA...
2025-03-24 20:29:55,874 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:55,874 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:55,874 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:55,875 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:29:55,875 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:55,875 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:55,876 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:55,876 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:55,876 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:29:55,876 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:55,876 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:55,877 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:55,877 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:55,877 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:55,877 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:55,877 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:55,878 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:55,943 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1683
2025-03-24 20:29:55,944 - yfinance - DEBUG - response code=200
2025-03-24 20:29:55,944 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:55,945 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:55,946 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:29:55,950 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:55,952 - yfinance - DEBUG - NVDA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:55,955 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:29:55,956 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:55,956 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:55,958 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:55,958 - yfinance_client - INFO - Downloaded data for NVDA, shape: (35, 5)
2025-03-24 20:29:55,958 - yfinance - DEBUG - Entering download()
2025-03-24 20:29:55,958 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:29:55,958 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:55,959 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:29:55,959 - yfinance - DEBUG -   Entering history()
2025-03-24 20:29:55,959 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:55,960 - yfinance - DEBUG -    Entering get()
2025-03-24 20:29:55,960 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:29:55,960 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:29:55,960 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:55,960 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:29:55,960 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:55,961 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:55,961 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:55,961 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:55,961 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:55,962 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:29:56,024 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2739
2025-03-24 20:29:56,025 - yfinance - DEBUG - response code=200
2025-03-24 20:29:56,025 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:29:56,026 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:29:56,027 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:29:56,027 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:29:56,031 - yfinance - DEBUG - NVDA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:29:56,034 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:29:56,035 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:29:56,035 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:56,037 - yfinance - DEBUG - Exiting download()
2025-03-24 20:29:56,037 - yfinance_client - INFO - Downloaded data for NVDA, shape: (59, 5)
2025-03-24 20:29:56,042 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:29:56,045 - __main__ - INFO - Step 2: Getting options chain data for NVDA...
2025-03-24 20:29:56,045 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for NVDA
2025-03-24 20:29:56,046 - yfinance - DEBUG - Entering history()
2025-03-24 20:29:56,046 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:29:56,047 - yfinance - DEBUG -  Entering history()
2025-03-24 20:29:56,047 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:56,047 - yfinance - DEBUG -   Entering get()
2025-03-24 20:29:56,047 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:29:56,047 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:29:56,048 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:29:56,048 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:29:56,048 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:56,048 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,048 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:56,049 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:56,049 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,049 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:29:56,110 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1211
2025-03-24 20:29:56,111 - yfinance - DEBUG - response code=200
2025-03-24 20:29:56,111 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:29:56,111 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:29:56,112 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:29:56,113 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:29:56,115 - yfinance - DEBUG - NVDA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:29:56,118 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:29:56,119 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:29:56,119 - yfinance - DEBUG - Exiting history()
2025-03-24 20:29:56,119 - yfinance_client - INFO - Current price of NVDA: $121.41
2025-03-24 20:29:56,119 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:56,120 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:56,120 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA
2025-03-24 20:29:56,120 - yfinance - DEBUG - params=None
2025-03-24 20:29:56,120 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:56,120 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:56,120 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,121 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:56,121 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:56,121 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,121 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:56,211 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:56,212 - yfinance - DEBUG - response code=200
2025-03-24 20:29:56,213 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:56,213 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:56,214 - yfinance_client - INFO - Found 21 expiration dates for NVDA
2025-03-24 20:29:56,214 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:29:56,214 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:56,215 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:56,215 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1743120000
2025-03-24 20:29:56,215 - yfinance - DEBUG - params=None
2025-03-24 20:29:56,215 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:56,215 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:56,216 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,216 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:56,216 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:56,216 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,216 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:56,300 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:56,302 - yfinance - DEBUG - response code=200
2025-03-24 20:29:56,303 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:56,303 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:56,307 - yfinance_client - INFO - Retrieved 89 calls and 83 puts
2025-03-24 20:29:56,389 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:29:56,390 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:56,390 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:56,390 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1743724800
2025-03-24 20:29:56,391 - yfinance - DEBUG - params=None
2025-03-24 20:29:56,391 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:56,391 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:56,391 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,392 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:56,392 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:56,392 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,392 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:56,479 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:56,480 - yfinance - DEBUG - response code=200
2025-03-24 20:29:56,480 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:56,481 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:56,484 - yfinance_client - INFO - Retrieved 80 calls and 73 puts
2025-03-24 20:29:56,558 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:29:56,559 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:56,559 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:56,560 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1744329600
2025-03-24 20:29:56,560 - yfinance - DEBUG - params=None
2025-03-24 20:29:56,560 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:56,560 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:56,561 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,561 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:56,561 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:56,561 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,561 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:56,650 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:56,651 - yfinance - DEBUG - response code=200
2025-03-24 20:29:56,651 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:56,651 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:56,655 - yfinance_client - INFO - Retrieved 74 calls and 61 puts
2025-03-24 20:29:56,721 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:29:56,721 - yfinance - DEBUG - Entering get()
2025-03-24 20:29:56,722 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:29:56,722 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1744848000
2025-03-24 20:29:56,722 - yfinance - DEBUG - params=None
2025-03-24 20:29:56,722 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:29:56,723 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:29:56,723 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,723 - yfinance - DEBUG - reusing cookie
2025-03-24 20:29:56,723 - yfinance - DEBUG - reusing crumb
2025-03-24 20:29:56,723 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:29:56,723 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:29:56,859 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:29:56,860 - yfinance - DEBUG - response code=200
2025-03-24 20:29:56,861 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:29:56,861 - yfinance - DEBUG - Exiting get()
2025-03-24 20:29:56,864 - yfinance_client - INFO - Retrieved 49 calls and 47 puts
2025-03-24 20:29:56,913 - yfinance_client - INFO - Successfully fetched 4 option chains for NVDA
2025-03-24 20:29:56,914 - __main__ - INFO - Step 3: Preparing analysis data for NVDA...
2025-03-24 20:29:56,914 - __main__ - INFO - Step 4: Processing options data for NVDA...
2025-03-24 20:29:56,914 - __main__ - INFO - Found 4 expiration dates for NVDA
2025-03-24 20:29:56,915 - __main__ - INFO - Processing expiration date 2025-03-28 for NVDA...
2025-03-24 20:29:56,915 - __main__ - DEBUG - ATM calls shape before filtering: (89, 19)
2025-03-24 20:29:56,915 - __main__ - DEBUG - ATM puts shape before filtering: (83, 19)
2025-03-24 20:29:56,916 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:29:56,916 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:29:56,917 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:29:56,917 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:29:56,918 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:29:56,918 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:29:56,918 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:29:56,919 - __main__ - DEBUG - Volume data for NVDA: calls=850359, puts=487031
2025-03-24 20:29:56,919 - __main__ - INFO - Successfully processed expiration 2025-03-28 for NVDA
2025-03-24 20:29:56,919 - __main__ - INFO - Processing expiration date 2025-04-04 for NVDA...
2025-03-24 20:29:56,920 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:29:56,920 - __main__ - DEBUG - ATM puts shape before filtering: (73, 19)
2025-03-24 20:29:56,921 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:29:56,921 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:29:56,921 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:29:56,922 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:29:56,922 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:29:56,923 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:29:56,923 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:29:56,924 - __main__ - DEBUG - Volume data for NVDA: calls=194451, puts=103108
2025-03-24 20:29:56,924 - __main__ - INFO - Successfully processed expiration 2025-04-04 for NVDA
2025-03-24 20:29:56,924 - __main__ - INFO - Processing expiration date 2025-04-11 for NVDA...
2025-03-24 20:29:56,925 - __main__ - DEBUG - ATM calls shape before filtering: (74, 19)
2025-03-24 20:29:56,925 - __main__ - DEBUG - ATM puts shape before filtering: (61, 19)
2025-03-24 20:29:56,925 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:29:56,926 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:29:56,926 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:29:56,927 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:29:56,927 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:29:56,928 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:29:56,928 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:29:56,929 - __main__ - DEBUG - Volume data for NVDA: calls=61821, puts=57068
2025-03-24 20:29:56,929 - __main__ - INFO - Successfully processed expiration 2025-04-11 for NVDA
2025-03-24 20:29:56,929 - __main__ - INFO - Processing expiration date 2025-04-17 for NVDA...
2025-03-24 20:29:56,929 - __main__ - DEBUG - ATM calls shape before filtering: (49, 19)
2025-03-24 20:29:56,929 - __main__ - DEBUG - ATM puts shape before filtering: (47, 19)
2025-03-24 20:29:56,930 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:29:56,930 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:29:56,931 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:29:56,931 - __main__ - DEBUG - ATM call for NVDA: strike=120.0
2025-03-24 20:29:56,932 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:29:56,932 - __main__ - DEBUG - ATM put for NVDA: strike=120.0
2025-03-24 20:29:56,932 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:29:56,933 - __main__ - DEBUG - Volume data for NVDA: calls=137481, puts=86940
2025-03-24 20:29:56,933 - __main__ - INFO - Successfully processed expiration 2025-04-17 for NVDA
2025-03-24 20:29:56,933 - __main__ - INFO - Step 5: Generating analysis for NVDA...
2025-03-24 20:29:56,933 - __main__ - DEBUG - Calling get_stock_analysis_prompt for NVDA with args: stock_analysis_data, market_context
2025-03-24 20:30:08,563 - __main__ - INFO - Market alignment for NVDA: contrary
2025-03-24 20:30:08,564 - __main__ - INFO - Creating stock analysis result for NVDA...
2025-03-24 20:30:08,564 - __main__ - INFO - Successfully added NVDA to stock analyses
2025-03-24 20:30:08,564 - __main__ - INFO - Updating Notion with analysis for NVDA...
2025-03-24 20:30:08,565 - __main__ - INFO - Sending Discord notification for NVDA...
2025-03-24 20:30:08,565 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2528 chars). Splitting into parts.
2025-03-24 20:30:08,566 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:09,032 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:09,033 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:09,034 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:09,305 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:09,306 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:09,306 - __main__ - INFO - Successfully sent Discord notification for NVDA
2025-03-24 20:30:09,306 - __main__ - INFO - Analyzing TSLA...
2025-03-24 20:30:09,306 - __main__ - INFO - Step 1: Getting stock data for TSLA...
2025-03-24 20:30:09,307 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:09,307 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:09,307 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:09,307 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 20:30:09,308 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:09,308 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:09,308 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:09,308 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:09,308 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 20:30:09,309 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:09,309 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:09,309 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:09,309 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,309 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:09,310 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:09,310 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,310 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:09,391 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1816
2025-03-24 20:30:09,392 - yfinance - DEBUG - response code=200
2025-03-24 20:30:09,392 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:09,392 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:09,394 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:30:09,398 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:09,400 - yfinance - DEBUG - TSLA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:09,404 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:09,404 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:09,404 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:09,406 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:09,406 - yfinance_client - INFO - Downloaded data for TSLA, shape: (35, 5)
2025-03-24 20:30:09,407 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:09,407 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:09,407 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:09,407 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 20:30:09,408 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:09,408 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:09,408 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:09,408 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:09,408 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 20:30:09,409 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:09,409 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:09,409 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:09,409 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,409 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:09,409 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:09,410 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,410 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:09,466 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2310
2025-03-24 20:30:09,467 - yfinance - DEBUG - response code=200
2025-03-24 20:30:09,467 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:09,467 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:09,468 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:30:09,469 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:30:09,471 - yfinance - DEBUG - TSLA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:09,475 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:09,475 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:09,475 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:09,477 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:09,477 - yfinance_client - INFO - Downloaded data for TSLA, shape: (59, 5)
2025-03-24 20:30:09,483 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:30:09,486 - __main__ - INFO - Step 2: Getting options chain data for TSLA...
2025-03-24 20:30:09,486 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for TSLA
2025-03-24 20:30:09,487 - yfinance - DEBUG - Entering history()
2025-03-24 20:30:09,487 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 20:30:09,487 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:09,488 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:09,488 - yfinance - DEBUG -   Entering get()
2025-03-24 20:30:09,488 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:30:09,488 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 20:30:09,488 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:09,489 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:30:09,489 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:09,489 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,489 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:09,489 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:09,489 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,489 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:30:09,548 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1193
2025-03-24 20:30:09,549 - yfinance - DEBUG - response code=200
2025-03-24 20:30:09,549 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:30:09,549 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:30:09,550 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:30:09,551 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:30:09,552 - yfinance - DEBUG - TSLA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:09,556 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:09,556 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:09,557 - yfinance - DEBUG - Exiting history()
2025-03-24 20:30:09,557 - yfinance_client - INFO - Current price of TSLA: $278.39
2025-03-24 20:30:09,557 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:09,557 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:09,558 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA
2025-03-24 20:30:09,558 - yfinance - DEBUG - params=None
2025-03-24 20:30:09,558 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:09,558 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:09,558 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,558 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:09,559 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:09,559 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,559 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:09,655 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:09,668 - yfinance - DEBUG - response code=200
2025-03-24 20:30:09,668 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:09,668 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:09,670 - yfinance_client - INFO - Found 20 expiration dates for TSLA
2025-03-24 20:30:09,670 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:30:09,671 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:09,671 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:09,671 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1743120000
2025-03-24 20:30:09,671 - yfinance - DEBUG - params=None
2025-03-24 20:30:09,671 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:09,671 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:09,672 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,672 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:09,672 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:09,672 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,672 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:09,764 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:09,767 - yfinance - DEBUG - response code=200
2025-03-24 20:30:09,767 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:09,767 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:09,771 - yfinance_client - INFO - Retrieved 141 calls and 112 puts
2025-03-24 20:30:09,895 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:30:09,895 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:09,896 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:09,896 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1743724800
2025-03-24 20:30:09,896 - yfinance - DEBUG - params=None
2025-03-24 20:30:09,896 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:09,897 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:09,897 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,897 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:09,897 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:09,897 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:09,898 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:09,993 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:10,016 - yfinance - DEBUG - response code=200
2025-03-24 20:30:10,017 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:10,017 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:10,021 - yfinance_client - INFO - Retrieved 119 calls and 87 puts
2025-03-24 20:30:10,123 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:30:10,124 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:10,124 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:10,124 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1744329600
2025-03-24 20:30:10,124 - yfinance - DEBUG - params=None
2025-03-24 20:30:10,124 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:10,124 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:10,125 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:10,125 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:10,125 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:10,125 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:10,125 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:10,205 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:10,207 - yfinance - DEBUG - response code=200
2025-03-24 20:30:10,207 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:10,207 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:10,211 - yfinance_client - INFO - Retrieved 92 calls and 69 puts
2025-03-24 20:30:10,291 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:30:10,292 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:10,292 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:10,292 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1744848000
2025-03-24 20:30:10,292 - yfinance - DEBUG - params=None
2025-03-24 20:30:10,293 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:10,293 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:10,293 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:10,293 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:10,293 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:10,293 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:10,294 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:10,388 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:10,392 - yfinance - DEBUG - response code=200
2025-03-24 20:30:10,392 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:10,392 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:10,397 - yfinance_client - INFO - Retrieved 152 calls and 144 puts
2025-03-24 20:30:10,541 - yfinance_client - INFO - Successfully fetched 4 option chains for TSLA
2025-03-24 20:30:10,542 - __main__ - INFO - Step 3: Preparing analysis data for TSLA...
2025-03-24 20:30:10,542 - __main__ - INFO - Step 4: Processing options data for TSLA...
2025-03-24 20:30:10,542 - __main__ - INFO - Found 4 expiration dates for TSLA
2025-03-24 20:30:10,543 - __main__ - INFO - Processing expiration date 2025-03-28 for TSLA...
2025-03-24 20:30:10,543 - __main__ - DEBUG - ATM calls shape before filtering: (141, 19)
2025-03-24 20:30:10,543 - __main__ - DEBUG - ATM puts shape before filtering: (112, 19)
2025-03-24 20:30:10,544 - __main__ - DEBUG - ATM calls shape after filtering: (11, 19)
2025-03-24 20:30:10,544 - __main__ - DEBUG - ATM puts shape after filtering: (11, 19)
2025-03-24 20:30:10,544 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:30:10,545 - __main__ - DEBUG - ATM call for TSLA: strike=277.5
2025-03-24 20:30:10,545 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:30:10,546 - __main__ - DEBUG - ATM put for TSLA: strike=277.5
2025-03-24 20:30:10,546 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:30:10,547 - __main__ - DEBUG - Volume data for TSLA: calls=1129469, puts=889403
2025-03-24 20:30:10,547 - __main__ - INFO - Successfully processed expiration 2025-03-28 for TSLA
2025-03-24 20:30:10,547 - __main__ - INFO - Processing expiration date 2025-04-04 for TSLA...
2025-03-24 20:30:10,548 - __main__ - DEBUG - ATM calls shape before filtering: (119, 19)
2025-03-24 20:30:10,548 - __main__ - DEBUG - ATM puts shape before filtering: (87, 19)
2025-03-24 20:30:10,549 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:30:10,549 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:30:10,549 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:30:10,550 - __main__ - DEBUG - ATM call for TSLA: strike=280.0
2025-03-24 20:30:10,550 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:30:10,551 - __main__ - DEBUG - ATM put for TSLA: strike=280.0
2025-03-24 20:30:10,551 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:30:10,552 - __main__ - DEBUG - Volume data for TSLA: calls=151340, puts=177437
2025-03-24 20:30:10,552 - __main__ - INFO - Successfully processed expiration 2025-04-04 for TSLA
2025-03-24 20:30:10,552 - __main__ - INFO - Processing expiration date 2025-04-11 for TSLA...
2025-03-24 20:30:10,552 - __main__ - DEBUG - ATM calls shape before filtering: (92, 19)
2025-03-24 20:30:10,553 - __main__ - DEBUG - ATM puts shape before filtering: (69, 19)
2025-03-24 20:30:10,553 - __main__ - DEBUG - ATM calls shape after filtering: (6, 19)
2025-03-24 20:30:10,554 - __main__ - DEBUG - ATM puts shape after filtering: (6, 19)
2025-03-24 20:30:10,554 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:30:10,554 - __main__ - DEBUG - ATM call for TSLA: strike=280.0
2025-03-24 20:30:10,555 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:30:10,555 - __main__ - DEBUG - ATM put for TSLA: strike=280.0
2025-03-24 20:30:10,556 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:30:10,556 - __main__ - DEBUG - Volume data for TSLA: calls=47445, puts=40756
2025-03-24 20:30:10,556 - __main__ - INFO - Successfully processed expiration 2025-04-11 for TSLA
2025-03-24 20:30:10,557 - __main__ - INFO - Processing expiration date 2025-04-17 for TSLA...
2025-03-24 20:30:10,557 - __main__ - DEBUG - ATM calls shape before filtering: (152, 19)
2025-03-24 20:30:10,557 - __main__ - DEBUG - ATM puts shape before filtering: (144, 19)
2025-03-24 20:30:10,558 - __main__ - DEBUG - ATM calls shape after filtering: (6, 19)
2025-03-24 20:30:10,558 - __main__ - DEBUG - ATM puts shape after filtering: (6, 19)
2025-03-24 20:30:10,559 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:30:10,559 - __main__ - DEBUG - ATM call for TSLA: strike=280.0
2025-03-24 20:30:10,559 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:30:10,560 - __main__ - DEBUG - ATM put for TSLA: strike=280.0
2025-03-24 20:30:10,560 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:30:10,561 - __main__ - DEBUG - Volume data for TSLA: calls=143763, puts=116410
2025-03-24 20:30:10,561 - __main__ - INFO - Successfully processed expiration 2025-04-17 for TSLA
2025-03-24 20:30:10,561 - __main__ - INFO - Step 5: Generating analysis for TSLA...
2025-03-24 20:30:10,561 - __main__ - DEBUG - Calling get_stock_analysis_prompt for TSLA with args: stock_analysis_data, market_context
2025-03-24 20:30:22,534 - __main__ - INFO - Market alignment for TSLA: contrary
2025-03-24 20:30:22,534 - __main__ - INFO - Creating stock analysis result for TSLA...
2025-03-24 20:30:22,535 - __main__ - INFO - Successfully added TSLA to stock analyses
2025-03-24 20:30:22,535 - __main__ - INFO - Updating Notion with analysis for TSLA...
2025-03-24 20:30:22,535 - __main__ - INFO - Sending Discord notification for TSLA...
2025-03-24 20:30:22,535 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2569 chars). Splitting into parts.
2025-03-24 20:30:22,536 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:22,855 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:22,857 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:22,858 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:23,125 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:23,126 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:23,127 - __main__ - INFO - Successfully sent Discord notification for TSLA
2025-03-24 20:30:23,127 - __main__ - INFO - Analyzing AAPL...
2025-03-24 20:30:23,127 - __main__ - INFO - Step 1: Getting stock data for AAPL...
2025-03-24 20:30:23,127 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:23,127 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:23,128 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:23,128 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 20:30:23,128 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:23,129 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:23,129 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:23,129 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:23,129 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 20:30:23,129 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:23,130 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,130 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,130 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,130 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,130 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,130 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,131 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:23,204 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1695
2025-03-24 20:30:23,205 - yfinance - DEBUG - response code=200
2025-03-24 20:30:23,205 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:23,206 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:23,207 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:30:23,211 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:23,213 - yfinance - DEBUG - AAPL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:23,217 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:23,217 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:23,217 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:23,219 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:23,219 - yfinance_client - INFO - Downloaded data for AAPL, shape: (35, 5)
2025-03-24 20:30:23,220 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:23,220 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:23,220 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:23,221 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 20:30:23,221 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:23,221 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:23,222 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:23,222 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:23,222 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 20:30:23,222 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:23,223 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,223 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,223 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,223 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,223 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,223 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,224 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:23,329 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2415
2025-03-24 20:30:23,330 - yfinance - DEBUG - response code=200
2025-03-24 20:30:23,330 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:23,331 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:23,332 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:30:23,333 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:30:23,338 - yfinance - DEBUG - AAPL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:23,344 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:23,345 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:23,345 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:23,348 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:23,348 - yfinance_client - INFO - Downloaded data for AAPL, shape: (59, 5)
2025-03-24 20:30:23,354 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:30:23,358 - __main__ - INFO - Step 2: Getting options chain data for AAPL...
2025-03-24 20:30:23,358 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for AAPL
2025-03-24 20:30:23,359 - yfinance - DEBUG - Entering history()
2025-03-24 20:30:23,359 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 20:30:23,359 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:23,359 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:23,360 - yfinance - DEBUG -   Entering get()
2025-03-24 20:30:23,360 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:30:23,360 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 20:30:23,360 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:23,361 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,361 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,361 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,361 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,362 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,362 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,362 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:30:23,473 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1180
2025-03-24 20:30:23,474 - yfinance - DEBUG - response code=200
2025-03-24 20:30:23,474 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:30:23,475 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:30:23,475 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:30:23,476 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:30:23,478 - yfinance - DEBUG - AAPL: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:23,481 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:23,482 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:23,482 - yfinance - DEBUG - Exiting history()
2025-03-24 20:30:23,482 - yfinance_client - INFO - Current price of AAPL: $220.73
2025-03-24 20:30:23,483 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:23,483 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:23,483 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL
2025-03-24 20:30:23,483 - yfinance - DEBUG - params=None
2025-03-24 20:30:23,483 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,484 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,484 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,484 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,484 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,484 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,484 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:23,559 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:23,560 - yfinance - DEBUG - response code=200
2025-03-24 20:30:23,560 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:23,560 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:23,561 - yfinance_client - INFO - Found 20 expiration dates for AAPL
2025-03-24 20:30:23,562 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:30:23,562 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:23,562 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:23,563 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1743120000
2025-03-24 20:30:23,563 - yfinance - DEBUG - params=None
2025-03-24 20:30:23,563 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,563 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,563 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,563 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,564 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,564 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,564 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:23,643 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:23,644 - yfinance - DEBUG - response code=200
2025-03-24 20:30:23,644 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:23,645 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:23,648 - yfinance_client - INFO - Retrieved 66 calls and 62 puts
2025-03-24 20:30:23,713 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:30:23,713 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:23,713 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:23,713 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1743724800
2025-03-24 20:30:23,714 - yfinance - DEBUG - params=None
2025-03-24 20:30:23,714 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,714 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,714 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,715 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,715 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,715 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,715 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:23,801 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:23,802 - yfinance - DEBUG - response code=200
2025-03-24 20:30:23,802 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:23,802 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:23,806 - yfinance_client - INFO - Retrieved 53 calls and 48 puts
2025-03-24 20:30:23,857 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:30:23,857 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:23,857 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:23,857 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1744329600
2025-03-24 20:30:23,858 - yfinance - DEBUG - params=None
2025-03-24 20:30:23,858 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,858 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,859 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,859 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,859 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,859 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,859 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:23,932 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:23,933 - yfinance - DEBUG - response code=200
2025-03-24 20:30:23,933 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:23,933 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:23,936 - yfinance_client - INFO - Retrieved 37 calls and 35 puts
2025-03-24 20:30:23,975 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:30:23,976 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:23,976 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:23,976 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1744848000
2025-03-24 20:30:23,977 - yfinance - DEBUG - params=None
2025-03-24 20:30:23,977 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:23,977 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:23,977 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,977 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:23,977 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:23,978 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:23,978 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:24,058 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:24,058 - yfinance - DEBUG - response code=200
2025-03-24 20:30:24,059 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:24,059 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:24,062 - yfinance_client - INFO - Retrieved 47 calls and 47 puts
2025-03-24 20:30:24,110 - yfinance_client - INFO - Successfully fetched 4 option chains for AAPL
2025-03-24 20:30:24,111 - __main__ - INFO - Step 3: Preparing analysis data for AAPL...
2025-03-24 20:30:24,111 - __main__ - INFO - Step 4: Processing options data for AAPL...
2025-03-24 20:30:24,112 - __main__ - INFO - Found 4 expiration dates for AAPL
2025-03-24 20:30:24,112 - __main__ - INFO - Processing expiration date 2025-03-28 for AAPL...
2025-03-24 20:30:24,112 - __main__ - DEBUG - ATM calls shape before filtering: (66, 19)
2025-03-24 20:30:24,113 - __main__ - DEBUG - ATM puts shape before filtering: (62, 19)
2025-03-24 20:30:24,113 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:30:24,114 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:30:24,115 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:30:24,115 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:30:24,116 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:30:24,116 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:30:24,117 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:30:24,117 - __main__ - DEBUG - Volume data for AAPL: calls=231179, puts=132126
2025-03-24 20:30:24,117 - __main__ - INFO - Successfully processed expiration 2025-03-28 for AAPL
2025-03-24 20:30:24,118 - __main__ - INFO - Processing expiration date 2025-04-04 for AAPL...
2025-03-24 20:30:24,118 - __main__ - DEBUG - ATM calls shape before filtering: (53, 19)
2025-03-24 20:30:24,118 - __main__ - DEBUG - ATM puts shape before filtering: (48, 19)
2025-03-24 20:30:24,119 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:30:24,119 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:30:24,120 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:30:24,120 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:30:24,121 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:30:24,121 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:30:24,122 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:30:24,122 - __main__ - DEBUG - Volume data for AAPL: calls=46199, puts=19351
2025-03-24 20:30:24,122 - __main__ - INFO - Successfully processed expiration 2025-04-04 for AAPL
2025-03-24 20:30:24,122 - __main__ - INFO - Processing expiration date 2025-04-11 for AAPL...
2025-03-24 20:30:24,123 - __main__ - DEBUG - ATM calls shape before filtering: (37, 19)
2025-03-24 20:30:24,123 - __main__ - DEBUG - ATM puts shape before filtering: (35, 19)
2025-03-24 20:30:24,124 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:30:24,124 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:30:24,124 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:30:24,125 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:30:24,125 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:30:24,126 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:30:24,126 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:30:24,127 - __main__ - DEBUG - Volume data for AAPL: calls=7958, puts=17314
2025-03-24 20:30:24,127 - __main__ - INFO - Successfully processed expiration 2025-04-11 for AAPL
2025-03-24 20:30:24,127 - __main__ - INFO - Processing expiration date 2025-04-17 for AAPL...
2025-03-24 20:30:24,128 - __main__ - DEBUG - ATM calls shape before filtering: (47, 19)
2025-03-24 20:30:24,128 - __main__ - DEBUG - ATM puts shape before filtering: (47, 19)
2025-03-24 20:30:24,128 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:30:24,129 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:30:24,129 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:30:24,130 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:30:24,130 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:30:24,131 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:30:24,131 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:30:24,131 - __main__ - DEBUG - Volume data for AAPL: calls=42066, puts=30131
2025-03-24 20:30:24,131 - __main__ - INFO - Successfully processed expiration 2025-04-17 for AAPL
2025-03-24 20:30:24,132 - __main__ - INFO - Step 5: Generating analysis for AAPL...
2025-03-24 20:30:24,132 - __main__ - DEBUG - Calling get_stock_analysis_prompt for AAPL with args: stock_analysis_data, market_context
2025-03-24 20:30:36,716 - __main__ - INFO - Market alignment for AAPL: contrary
2025-03-24 20:30:36,716 - __main__ - INFO - Creating stock analysis result for AAPL...
2025-03-24 20:30:36,716 - __main__ - INFO - Successfully added AAPL to stock analyses
2025-03-24 20:30:36,717 - __main__ - INFO - Updating Notion with analysis for AAPL...
2025-03-24 20:30:36,717 - __main__ - INFO - Sending Discord notification for AAPL...
2025-03-24 20:30:36,717 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2744 chars). Splitting into parts.
2025-03-24 20:30:36,718 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:37,049 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:37,050 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:37,051 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:37,340 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:37,341 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:37,342 - __main__ - INFO - Successfully sent Discord notification for AAPL
2025-03-24 20:30:37,342 - __main__ - INFO - Analyzing GOOGL...
2025-03-24 20:30:37,342 - __main__ - INFO - Step 1: Getting stock data for GOOGL...
2025-03-24 20:30:37,342 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:37,343 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:37,343 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:37,343 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 20:30:37,343 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:37,344 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:37,344 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:37,344 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:37,344 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 20:30:37,344 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:37,345 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:37,345 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:37,345 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,345 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:37,345 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:37,345 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,346 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:37,444 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1660
2025-03-24 20:30:37,445 - yfinance - DEBUG - response code=200
2025-03-24 20:30:37,445 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:37,445 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:37,446 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:30:37,451 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:37,452 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:37,456 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:37,457 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:37,457 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:37,458 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:37,459 - yfinance_client - INFO - Downloaded data for GOOGL, shape: (35, 5)
2025-03-24 20:30:37,459 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:37,459 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:37,459 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:37,460 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 20:30:37,460 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:37,460 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:37,460 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:37,461 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:37,461 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 20:30:37,461 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:37,462 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:37,462 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:37,462 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,462 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:37,462 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:37,462 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,463 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:37,544 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2543
2025-03-24 20:30:37,545 - yfinance - DEBUG - response code=200
2025-03-24 20:30:37,545 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:37,545 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:37,546 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:30:37,547 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:30:37,551 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:37,555 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:37,556 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:37,556 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:37,558 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:37,558 - yfinance_client - INFO - Downloaded data for GOOGL, shape: (59, 5)
2025-03-24 20:30:37,564 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:30:37,567 - __main__ - INFO - Step 2: Getting options chain data for GOOGL...
2025-03-24 20:30:37,568 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for GOOGL
2025-03-24 20:30:37,568 - yfinance - DEBUG - Entering history()
2025-03-24 20:30:37,568 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 20:30:37,568 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:37,569 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:37,569 - yfinance - DEBUG -   Entering get()
2025-03-24 20:30:37,569 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:30:37,569 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 20:30:37,569 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:37,570 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:30:37,570 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:37,570 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,570 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:37,570 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:37,570 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,571 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:30:37,637 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1202
2025-03-24 20:30:37,637 - yfinance - DEBUG - response code=200
2025-03-24 20:30:37,638 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:30:37,638 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:30:37,639 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:30:37,640 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:30:37,642 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:37,645 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:37,646 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:37,646 - yfinance - DEBUG - Exiting history()
2025-03-24 20:30:37,646 - yfinance_client - INFO - Current price of GOOGL: $167.68
2025-03-24 20:30:37,646 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:37,647 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:37,647 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL
2025-03-24 20:30:37,647 - yfinance - DEBUG - params=None
2025-03-24 20:30:37,648 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:37,648 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:37,648 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,648 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:37,649 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:37,649 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,649 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:37,721 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:37,722 - yfinance - DEBUG - response code=200
2025-03-24 20:30:37,722 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:37,722 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:37,723 - yfinance_client - INFO - Found 20 expiration dates for GOOGL
2025-03-24 20:30:37,725 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:30:37,725 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:37,726 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:37,726 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1743120000
2025-03-24 20:30:37,726 - yfinance - DEBUG - params=None
2025-03-24 20:30:37,726 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:37,727 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:37,727 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,727 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:37,727 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:37,727 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,728 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:37,805 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:37,806 - yfinance - DEBUG - response code=200
2025-03-24 20:30:37,806 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:37,806 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:37,810 - yfinance_client - INFO - Retrieved 51 calls and 44 puts
2025-03-24 20:30:37,859 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:30:37,859 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:37,859 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:37,860 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1743724800
2025-03-24 20:30:37,860 - yfinance - DEBUG - params=None
2025-03-24 20:30:37,860 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:37,860 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:37,861 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,861 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:37,861 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:37,861 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,861 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:37,939 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:37,940 - yfinance - DEBUG - response code=200
2025-03-24 20:30:37,941 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:37,941 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:37,944 - yfinance_client - INFO - Retrieved 38 calls and 34 puts
2025-03-24 20:30:37,981 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:30:37,982 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:37,982 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:37,982 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1744329600
2025-03-24 20:30:37,983 - yfinance - DEBUG - params=None
2025-03-24 20:30:37,983 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:37,983 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:37,983 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,983 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:37,984 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:37,984 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:37,984 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:38,055 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:38,056 - yfinance - DEBUG - response code=200
2025-03-24 20:30:38,057 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:38,057 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:38,060 - yfinance_client - INFO - Retrieved 23 calls and 24 puts
2025-03-24 20:30:38,086 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:30:38,086 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:38,087 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:38,087 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1744848000
2025-03-24 20:30:38,087 - yfinance - DEBUG - params=None
2025-03-24 20:30:38,088 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:38,088 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:38,088 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:38,088 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:38,088 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:38,089 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:38,089 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:38,168 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:38,168 - yfinance - DEBUG - response code=200
2025-03-24 20:30:38,169 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:38,169 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:38,173 - yfinance_client - INFO - Retrieved 51 calls and 44 puts
2025-03-24 20:30:38,222 - yfinance_client - INFO - Successfully fetched 4 option chains for GOOGL
2025-03-24 20:30:38,222 - __main__ - INFO - Step 3: Preparing analysis data for GOOGL...
2025-03-24 20:30:38,223 - __main__ - INFO - Step 4: Processing options data for GOOGL...
2025-03-24 20:30:38,223 - __main__ - INFO - Found 4 expiration dates for GOOGL
2025-03-24 20:30:38,224 - __main__ - INFO - Processing expiration date 2025-03-28 for GOOGL...
2025-03-24 20:30:38,224 - __main__ - DEBUG - ATM calls shape before filtering: (51, 19)
2025-03-24 20:30:38,224 - __main__ - DEBUG - ATM puts shape before filtering: (44, 19)
2025-03-24 20:30:38,225 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:30:38,226 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:30:38,226 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:30:38,227 - __main__ - DEBUG - ATM call for GOOGL: strike=167.5
2025-03-24 20:30:38,227 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:30:38,228 - __main__ - DEBUG - ATM put for GOOGL: strike=167.5
2025-03-24 20:30:38,228 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:30:38,229 - __main__ - DEBUG - Volume data for GOOGL: calls=51230, puts=21646
2025-03-24 20:30:38,229 - __main__ - INFO - Successfully processed expiration 2025-03-28 for GOOGL
2025-03-24 20:30:38,229 - __main__ - INFO - Processing expiration date 2025-04-04 for GOOGL...
2025-03-24 20:30:38,229 - __main__ - DEBUG - ATM calls shape before filtering: (38, 19)
2025-03-24 20:30:38,230 - __main__ - DEBUG - ATM puts shape before filtering: (34, 19)
2025-03-24 20:30:38,230 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:30:38,231 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:30:38,231 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:30:38,231 - __main__ - DEBUG - ATM call for GOOGL: strike=167.5
2025-03-24 20:30:38,232 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:30:38,232 - __main__ - DEBUG - ATM put for GOOGL: strike=167.5
2025-03-24 20:30:38,233 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:30:38,233 - __main__ - DEBUG - Volume data for GOOGL: calls=12789, puts=6325
2025-03-24 20:30:38,233 - __main__ - INFO - Successfully processed expiration 2025-04-04 for GOOGL
2025-03-24 20:30:38,234 - __main__ - INFO - Processing expiration date 2025-04-11 for GOOGL...
2025-03-24 20:30:38,234 - __main__ - DEBUG - ATM calls shape before filtering: (23, 19)
2025-03-24 20:30:38,234 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:30:38,235 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:30:38,235 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:30:38,235 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:30:38,236 - __main__ - DEBUG - ATM call for GOOGL: strike=170.0
2025-03-24 20:30:38,236 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:30:38,237 - __main__ - DEBUG - ATM put for GOOGL: strike=170.0
2025-03-24 20:30:38,237 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:30:38,238 - __main__ - DEBUG - Volume data for GOOGL: calls=3484, puts=6714
2025-03-24 20:30:38,238 - __main__ - INFO - Successfully processed expiration 2025-04-11 for GOOGL
2025-03-24 20:30:38,238 - __main__ - INFO - Processing expiration date 2025-04-17 for GOOGL...
2025-03-24 20:30:38,239 - __main__ - DEBUG - ATM calls shape before filtering: (51, 19)
2025-03-24 20:30:38,239 - __main__ - DEBUG - ATM puts shape before filtering: (44, 19)
2025-03-24 20:30:38,239 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:30:38,240 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:30:38,240 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:30:38,241 - __main__ - DEBUG - ATM call for GOOGL: strike=170.0
2025-03-24 20:30:38,241 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:30:38,242 - __main__ - DEBUG - ATM put for GOOGL: strike=170.0
2025-03-24 20:30:38,242 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:30:38,243 - __main__ - DEBUG - Volume data for GOOGL: calls=22499, puts=10322
2025-03-24 20:30:38,243 - __main__ - INFO - Successfully processed expiration 2025-04-17 for GOOGL
2025-03-24 20:30:38,243 - __main__ - INFO - Step 5: Generating analysis for GOOGL...
2025-03-24 20:30:38,243 - __main__ - DEBUG - Calling get_stock_analysis_prompt for GOOGL with args: stock_analysis_data, market_context
2025-03-24 20:30:52,652 - __main__ - INFO - Market alignment for GOOGL: contrary
2025-03-24 20:30:52,652 - __main__ - INFO - Creating stock analysis result for GOOGL...
2025-03-24 20:30:52,653 - __main__ - INFO - Successfully added GOOGL to stock analyses
2025-03-24 20:30:52,653 - __main__ - INFO - Updating Notion with analysis for GOOGL...
2025-03-24 20:30:52,653 - __main__ - INFO - Sending Discord notification for GOOGL...
2025-03-24 20:30:52,653 - discord.discord_client - INFO - Analysis description exceeds Discord limit (3195 chars). Splitting into parts.
2025-03-24 20:30:52,654 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:52,953 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:52,954 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:52,955 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:30:53,234 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:30:53,235 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:30:53,235 - __main__ - INFO - Successfully sent Discord notification for GOOGL
2025-03-24 20:30:53,236 - __main__ - INFO - Analyzing AMZN...
2025-03-24 20:30:53,236 - __main__ - INFO - Step 1: Getting stock data for AMZN...
2025-03-24 20:30:53,236 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:53,236 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:53,236 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:53,237 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 20:30:53,237 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:53,237 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:53,238 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:53,238 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:53,238 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 20:30:53,238 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:53,238 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,239 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,239 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,239 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,239 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,239 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,239 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:53,302 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1694
2025-03-24 20:30:53,303 - yfinance - DEBUG - response code=200
2025-03-24 20:30:53,303 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:53,304 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:53,305 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:30:53,309 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:53,311 - yfinance - DEBUG - AMZN: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:53,314 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:30:53,315 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:53,315 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:53,317 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:53,317 - yfinance_client - INFO - Downloaded data for AMZN, shape: (35, 5)
2025-03-24 20:30:53,317 - yfinance - DEBUG - Entering download()
2025-03-24 20:30:53,318 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:30:53,318 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:53,318 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 20:30:53,318 - yfinance - DEBUG -   Entering history()
2025-03-24 20:30:53,319 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:53,319 - yfinance - DEBUG -    Entering get()
2025-03-24 20:30:53,319 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:30:53,319 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 20:30:53,319 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:53,320 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,320 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,320 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,320 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,320 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,321 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,321 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:30:53,374 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2135
2025-03-24 20:30:53,375 - yfinance - DEBUG - response code=200
2025-03-24 20:30:53,375 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:30:53,375 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:30:53,377 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:30:53,378 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:30:53,379 - yfinance - DEBUG - AMZN: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:53,383 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:30:53,384 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:30:53,384 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:53,386 - yfinance - DEBUG - Exiting download()
2025-03-24 20:30:53,386 - yfinance_client - INFO - Downloaded data for AMZN, shape: (59, 5)
2025-03-24 20:30:53,392 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:30:53,394 - __main__ - INFO - Step 2: Getting options chain data for AMZN...
2025-03-24 20:30:53,395 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for AMZN
2025-03-24 20:30:53,395 - yfinance - DEBUG - Entering history()
2025-03-24 20:30:53,395 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 20:30:53,396 - yfinance - DEBUG -  Entering history()
2025-03-24 20:30:53,396 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:53,396 - yfinance - DEBUG -   Entering get()
2025-03-24 20:30:53,396 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:30:53,397 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 20:30:53,397 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:30:53,397 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,397 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,397 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,398 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,398 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,398 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,398 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:30:53,446 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1192
2025-03-24 20:30:53,447 - yfinance - DEBUG - response code=200
2025-03-24 20:30:53,447 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:30:53,447 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:30:53,448 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:30:53,449 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:30:53,451 - yfinance - DEBUG - AMZN: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:53,454 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:30:53,455 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:30:53,455 - yfinance - DEBUG - Exiting history()
2025-03-24 20:30:53,455 - yfinance_client - INFO - Current price of AMZN: $203.26
2025-03-24 20:30:53,455 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:53,455 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:53,456 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN
2025-03-24 20:30:53,456 - yfinance - DEBUG - params=None
2025-03-24 20:30:53,456 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,456 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,456 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,456 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,456 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,457 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,457 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:53,537 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:53,538 - yfinance - DEBUG - response code=200
2025-03-24 20:30:53,538 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:53,539 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:53,540 - yfinance_client - INFO - Found 20 expiration dates for AMZN
2025-03-24 20:30:53,540 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:30:53,541 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:53,541 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:53,541 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1743120000
2025-03-24 20:30:53,542 - yfinance - DEBUG - params=None
2025-03-24 20:30:53,542 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,542 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,542 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,542 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,543 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,543 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,543 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:53,629 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:53,630 - yfinance - DEBUG - response code=200
2025-03-24 20:30:53,630 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:53,631 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:53,634 - yfinance_client - INFO - Retrieved 54 calls and 48 puts
2025-03-24 20:30:53,685 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:30:53,685 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:53,686 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:53,686 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1743724800
2025-03-24 20:30:53,686 - yfinance - DEBUG - params=None
2025-03-24 20:30:53,686 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,686 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,686 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,687 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,687 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,687 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,687 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:53,762 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:53,762 - yfinance - DEBUG - response code=200
2025-03-24 20:30:53,762 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:53,762 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:53,767 - yfinance_client - INFO - Retrieved 47 calls and 43 puts
2025-03-24 20:30:53,812 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:30:53,813 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:53,813 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:53,813 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1744329600
2025-03-24 20:30:53,814 - yfinance - DEBUG - params=None
2025-03-24 20:30:53,814 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,814 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,815 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,815 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,815 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,815 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,815 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:53,887 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:53,888 - yfinance - DEBUG - response code=200
2025-03-24 20:30:53,888 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:53,888 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:53,891 - yfinance_client - INFO - Retrieved 32 calls and 33 puts
2025-03-24 20:30:53,924 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:30:53,926 - yfinance - DEBUG - Entering get()
2025-03-24 20:30:53,926 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:30:53,926 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1744848000
2025-03-24 20:30:53,926 - yfinance - DEBUG - params=None
2025-03-24 20:30:53,926 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:30:53,926 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:30:53,927 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,927 - yfinance - DEBUG - reusing cookie
2025-03-24 20:30:53,927 - yfinance - DEBUG - reusing crumb
2025-03-24 20:30:53,927 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:30:53,927 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:30:54,013 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:30:54,014 - yfinance - DEBUG - response code=200
2025-03-24 20:30:54,015 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:30:54,015 - yfinance - DEBUG - Exiting get()
2025-03-24 20:30:54,019 - yfinance_client - INFO - Retrieved 56 calls and 52 puts
2025-03-24 20:30:54,072 - yfinance_client - INFO - Successfully fetched 4 option chains for AMZN
2025-03-24 20:30:54,073 - __main__ - INFO - Step 3: Preparing analysis data for AMZN...
2025-03-24 20:30:54,073 - __main__ - INFO - Step 4: Processing options data for AMZN...
2025-03-24 20:30:54,073 - __main__ - INFO - Found 4 expiration dates for AMZN
2025-03-24 20:30:54,074 - __main__ - INFO - Processing expiration date 2025-03-28 for AMZN...
2025-03-24 20:30:54,074 - __main__ - DEBUG - ATM calls shape before filtering: (54, 19)
2025-03-24 20:30:54,074 - __main__ - DEBUG - ATM puts shape before filtering: (48, 19)
2025-03-24 20:30:54,075 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:30:54,076 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:30:54,076 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:30:54,077 - __main__ - DEBUG - ATM call for AMZN: strike=202.5
2025-03-24 20:30:54,077 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:30:54,078 - __main__ - DEBUG - ATM put for AMZN: strike=202.5
2025-03-24 20:30:54,078 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:30:54,079 - __main__ - DEBUG - Volume data for AMZN: calls=213108, puts=65725
2025-03-24 20:30:54,079 - __main__ - INFO - Successfully processed expiration 2025-03-28 for AMZN
2025-03-24 20:30:54,079 - __main__ - INFO - Processing expiration date 2025-04-04 for AMZN...
2025-03-24 20:30:54,080 - __main__ - DEBUG - ATM calls shape before filtering: (47, 19)
2025-03-24 20:30:54,080 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:30:54,080 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:30:54,080 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:30:54,081 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:30:54,081 - __main__ - DEBUG - ATM call for AMZN: strike=202.5
2025-03-24 20:30:54,082 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:30:54,082 - __main__ - DEBUG - ATM put for AMZN: strike=202.5
2025-03-24 20:30:54,082 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:30:54,083 - __main__ - DEBUG - Volume data for AMZN: calls=46300, puts=22134
2025-03-24 20:30:54,083 - __main__ - INFO - Successfully processed expiration 2025-04-04 for AMZN
2025-03-24 20:30:54,083 - __main__ - INFO - Processing expiration date 2025-04-11 for AMZN...
2025-03-24 20:30:54,084 - __main__ - DEBUG - ATM calls shape before filtering: (32, 19)
2025-03-24 20:30:54,084 - __main__ - DEBUG - ATM puts shape before filtering: (33, 19)
2025-03-24 20:30:54,085 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:30:54,085 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:30:54,085 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:30:54,086 - __main__ - DEBUG - ATM call for AMZN: strike=205.0
2025-03-24 20:30:54,086 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:30:54,087 - __main__ - DEBUG - ATM put for AMZN: strike=205.0
2025-03-24 20:30:54,087 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:30:54,088 - __main__ - DEBUG - Volume data for AMZN: calls=13865, puts=6552
2025-03-24 20:30:54,088 - __main__ - INFO - Successfully processed expiration 2025-04-11 for AMZN
2025-03-24 20:30:54,089 - __main__ - INFO - Processing expiration date 2025-04-17 for AMZN...
2025-03-24 20:30:54,089 - __main__ - DEBUG - ATM calls shape before filtering: (56, 19)
2025-03-24 20:30:54,089 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:30:54,090 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:30:54,090 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:30:54,090 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:30:54,091 - __main__ - DEBUG - ATM call for AMZN: strike=205.0
2025-03-24 20:30:54,091 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:30:54,092 - __main__ - DEBUG - ATM put for AMZN: strike=205.0
2025-03-24 20:30:54,092 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:30:54,093 - __main__ - DEBUG - Volume data for AMZN: calls=64971, puts=28737
2025-03-24 20:30:54,093 - __main__ - INFO - Successfully processed expiration 2025-04-17 for AMZN
2025-03-24 20:30:54,093 - __main__ - INFO - Step 5: Generating analysis for AMZN...
2025-03-24 20:30:54,093 - __main__ - DEBUG - Calling get_stock_analysis_prompt for AMZN with args: stock_analysis_data, market_context
2025-03-24 20:31:07,479 - __main__ - INFO - Market alignment for AMZN: contrary
2025-03-24 20:31:07,480 - __main__ - INFO - Creating stock analysis result for AMZN...
2025-03-24 20:31:07,480 - __main__ - INFO - Successfully added AMZN to stock analyses
2025-03-24 20:31:07,480 - __main__ - INFO - Updating Notion with analysis for AMZN...
2025-03-24 20:31:07,480 - __main__ - INFO - Sending Discord notification for AMZN...
2025-03-24 20:31:07,481 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2809 chars). Splitting into parts.
2025-03-24 20:31:07,482 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:31:07,817 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:31:07,819 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:31:07,820 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:31:08,079 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:31:08,080 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:31:08,081 - __main__ - INFO - Successfully sent Discord notification for AMZN
2025-03-24 20:31:08,081 - __main__ - INFO - Analyzing MSTR...
2025-03-24 20:31:08,081 - __main__ - INFO - Step 1: Getting stock data for MSTR...
2025-03-24 20:31:08,081 - yfinance - DEBUG - Entering download()
2025-03-24 20:31:08,082 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:31:08,082 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:08,082 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 20:31:08,083 - yfinance - DEBUG -   Entering history()
2025-03-24 20:31:08,083 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:08,083 - yfinance - DEBUG -    Entering get()
2025-03-24 20:31:08,083 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:31:08,083 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 20:31:08,084 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:08,084 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:31:08,084 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:08,084 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,084 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:08,084 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:08,084 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,085 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:31:08,216 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1742
2025-03-24 20:31:08,217 - yfinance - DEBUG - response code=200
2025-03-24 20:31:08,217 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:31:08,217 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:31:08,218 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:31:08,223 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:08,225 - yfinance - DEBUG - MSTR: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:08,228 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:08,229 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:31:08,229 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:08,231 - yfinance - DEBUG - Exiting download()
2025-03-24 20:31:08,231 - yfinance_client - INFO - Downloaded data for MSTR, shape: (35, 5)
2025-03-24 20:31:08,231 - yfinance - DEBUG - Entering download()
2025-03-24 20:31:08,231 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:31:08,231 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:08,232 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 20:31:08,232 - yfinance - DEBUG -   Entering history()
2025-03-24 20:31:08,232 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:08,232 - yfinance - DEBUG -    Entering get()
2025-03-24 20:31:08,233 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:31:08,233 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 20:31:08,233 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:08,233 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:31:08,234 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:08,234 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,234 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:08,234 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:08,234 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,234 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:31:08,292 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2212
2025-03-24 20:31:08,293 - yfinance - DEBUG - response code=200
2025-03-24 20:31:08,293 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:31:08,294 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:31:08,295 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:31:08,296 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:31:08,298 - yfinance - DEBUG - MSTR: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:31:08,302 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:31:08,302 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:31:08,302 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:08,304 - yfinance - DEBUG - Exiting download()
2025-03-24 20:31:08,304 - yfinance_client - INFO - Downloaded data for MSTR, shape: (59, 5)
2025-03-24 20:31:08,310 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:31:08,313 - __main__ - INFO - Step 2: Getting options chain data for MSTR...
2025-03-24 20:31:08,313 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for MSTR
2025-03-24 20:31:08,313 - yfinance - DEBUG - Entering history()
2025-03-24 20:31:08,314 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 20:31:08,314 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:08,314 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:08,314 - yfinance - DEBUG -   Entering get()
2025-03-24 20:31:08,315 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:31:08,315 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 20:31:08,315 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:08,315 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:31:08,316 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:08,316 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,316 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:08,316 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:08,316 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,317 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:31:08,373 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1218
2025-03-24 20:31:08,373 - yfinance - DEBUG - response code=200
2025-03-24 20:31:08,374 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:31:08,374 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:31:08,375 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:31:08,376 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:31:08,378 - yfinance - DEBUG - MSTR: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:31:08,381 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:31:08,381 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:08,381 - yfinance - DEBUG - Exiting history()
2025-03-24 20:31:08,382 - yfinance_client - INFO - Current price of MSTR: $335.72
2025-03-24 20:31:08,382 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:08,382 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:08,382 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR
2025-03-24 20:31:08,383 - yfinance - DEBUG - params=None
2025-03-24 20:31:08,383 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:08,383 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:08,383 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,383 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:08,384 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:08,384 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,384 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:08,474 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:08,497 - yfinance - DEBUG - response code=200
2025-03-24 20:31:08,498 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:08,498 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:08,500 - yfinance_client - INFO - Found 19 expiration dates for MSTR
2025-03-24 20:31:08,500 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:31:08,500 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:08,501 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:08,501 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1743120000
2025-03-24 20:31:08,501 - yfinance - DEBUG - params=None
2025-03-24 20:31:08,501 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:08,501 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:08,502 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,502 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:08,502 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:08,502 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,502 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:08,593 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:08,617 - yfinance - DEBUG - response code=200
2025-03-24 20:31:08,617 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:08,618 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:08,622 - yfinance_client - INFO - Retrieved 147 calls and 132 puts
2025-03-24 20:31:08,754 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:31:08,754 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:08,755 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:08,755 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1743724800
2025-03-24 20:31:08,755 - yfinance - DEBUG - params=None
2025-03-24 20:31:08,755 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:08,756 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:08,756 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,756 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:08,756 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:08,757 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,757 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:08,857 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:08,880 - yfinance - DEBUG - response code=200
2025-03-24 20:31:08,880 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:08,880 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:08,885 - yfinance_client - INFO - Retrieved 120 calls and 99 puts
2025-03-24 20:31:08,989 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:31:08,990 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:08,990 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:08,990 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1744329600
2025-03-24 20:31:08,991 - yfinance - DEBUG - params=None
2025-03-24 20:31:08,991 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:08,991 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:08,991 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,992 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:08,992 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:08,992 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:08,992 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:09,071 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:09,072 - yfinance - DEBUG - response code=200
2025-03-24 20:31:09,072 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:09,072 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:09,076 - yfinance_client - INFO - Retrieved 80 calls and 67 puts
2025-03-24 20:31:09,147 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:31:09,148 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:09,148 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:09,148 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1744848000
2025-03-24 20:31:09,148 - yfinance - DEBUG - params=None
2025-03-24 20:31:09,148 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:09,149 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:09,149 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:09,149 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:09,149 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:09,149 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:09,149 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:09,247 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:09,252 - yfinance - DEBUG - response code=200
2025-03-24 20:31:09,252 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:09,253 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:09,257 - yfinance_client - INFO - Retrieved 150 calls and 147 puts
2025-03-24 20:31:09,399 - yfinance_client - INFO - Successfully fetched 4 option chains for MSTR
2025-03-24 20:31:09,399 - __main__ - INFO - Step 3: Preparing analysis data for MSTR...
2025-03-24 20:31:09,399 - __main__ - INFO - Step 4: Processing options data for MSTR...
2025-03-24 20:31:09,400 - __main__ - INFO - Found 4 expiration dates for MSTR
2025-03-24 20:31:09,400 - __main__ - INFO - Processing expiration date 2025-03-28 for MSTR...
2025-03-24 20:31:09,401 - __main__ - DEBUG - ATM calls shape before filtering: (147, 19)
2025-03-24 20:31:09,401 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 20:31:09,401 - __main__ - DEBUG - ATM calls shape after filtering: (14, 19)
2025-03-24 20:31:09,402 - __main__ - DEBUG - ATM puts shape after filtering: (14, 19)
2025-03-24 20:31:09,402 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:31:09,403 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:31:09,403 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:31:09,404 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:31:09,404 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:31:09,405 - __main__ - DEBUG - Volume data for MSTR: calls=397515, puts=125987
2025-03-24 20:31:09,405 - __main__ - INFO - Successfully processed expiration 2025-03-28 for MSTR
2025-03-24 20:31:09,406 - __main__ - INFO - Processing expiration date 2025-04-04 for MSTR...
2025-03-24 20:31:09,406 - __main__ - DEBUG - ATM calls shape before filtering: (120, 19)
2025-03-24 20:31:09,406 - __main__ - DEBUG - ATM puts shape before filtering: (99, 19)
2025-03-24 20:31:09,407 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:31:09,407 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:31:09,407 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:31:09,408 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:31:09,408 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:31:09,409 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:31:09,409 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:31:09,410 - __main__ - DEBUG - Volume data for MSTR: calls=41937, puts=28580
2025-03-24 20:31:09,410 - __main__ - INFO - Successfully processed expiration 2025-04-04 for MSTR
2025-03-24 20:31:09,410 - __main__ - INFO - Processing expiration date 2025-04-11 for MSTR...
2025-03-24 20:31:09,411 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:31:09,411 - __main__ - DEBUG - ATM puts shape before filtering: (67, 19)
2025-03-24 20:31:09,411 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:31:09,412 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:31:09,412 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:31:09,413 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:31:09,413 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:31:09,414 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:31:09,414 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:31:09,414 - __main__ - DEBUG - Volume data for MSTR: calls=10284, puts=4740
2025-03-24 20:31:09,415 - __main__ - INFO - Successfully processed expiration 2025-04-11 for MSTR
2025-03-24 20:31:09,415 - __main__ - INFO - Processing expiration date 2025-04-17 for MSTR...
2025-03-24 20:31:09,415 - __main__ - DEBUG - ATM calls shape before filtering: (150, 19)
2025-03-24 20:31:09,415 - __main__ - DEBUG - ATM puts shape before filtering: (147, 19)
2025-03-24 20:31:09,416 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:31:09,416 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:31:09,417 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:31:09,417 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:31:09,418 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:31:09,418 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:31:09,418 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:31:09,419 - __main__ - DEBUG - Volume data for MSTR: calls=34874, puts=20197
2025-03-24 20:31:09,419 - __main__ - INFO - Successfully processed expiration 2025-04-17 for MSTR
2025-03-24 20:31:09,419 - __main__ - INFO - Step 5: Generating analysis for MSTR...
2025-03-24 20:31:09,419 - __main__ - DEBUG - Calling get_stock_analysis_prompt for MSTR with args: stock_analysis_data, market_context
2025-03-24 20:31:23,701 - __main__ - INFO - Market alignment for MSTR: aligned
2025-03-24 20:31:23,702 - __main__ - INFO - Creating stock analysis result for MSTR...
2025-03-24 20:31:23,702 - __main__ - INFO - Successfully added MSTR to stock analyses
2025-03-24 20:31:23,702 - __main__ - INFO - Updating Notion with analysis for MSTR...
2025-03-24 20:31:23,702 - __main__ - INFO - Sending Discord notification for MSTR...
2025-03-24 20:31:23,703 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2583 chars). Splitting into parts.
2025-03-24 20:31:23,704 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:31:24,039 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:31:24,040 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:31:24,041 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:31:24,378 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:31:24,379 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:31:24,379 - __main__ - INFO - Successfully sent Discord notification for MSTR
2025-03-24 20:31:24,380 - __main__ - INFO - Analyzing MSFT...
2025-03-24 20:31:24,380 - __main__ - INFO - Step 1: Getting stock data for MSFT...
2025-03-24 20:31:24,380 - yfinance - DEBUG - Entering download()
2025-03-24 20:31:24,380 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:31:24,380 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:24,381 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 20:31:24,381 - yfinance - DEBUG -   Entering history()
2025-03-24 20:31:24,381 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:24,381 - yfinance - DEBUG -    Entering get()
2025-03-24 20:31:24,382 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:31:24,382 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 20:31:24,382 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:24,382 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:31:24,382 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:24,382 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,383 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:24,383 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:24,383 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,383 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:31:24,453 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1670
2025-03-24 20:31:24,454 - yfinance - DEBUG - response code=200
2025-03-24 20:31:24,454 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:31:24,454 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:31:24,455 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:31:24,460 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:24,461 - yfinance - DEBUG - MSFT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:24,465 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:24,466 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:31:24,466 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:24,468 - yfinance - DEBUG - Exiting download()
2025-03-24 20:31:24,468 - yfinance_client - INFO - Downloaded data for MSFT, shape: (35, 5)
2025-03-24 20:31:24,468 - yfinance - DEBUG - Entering download()
2025-03-24 20:31:24,469 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:31:24,469 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:24,469 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 20:31:24,470 - yfinance - DEBUG -   Entering history()
2025-03-24 20:31:24,470 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:24,470 - yfinance - DEBUG -    Entering get()
2025-03-24 20:31:24,470 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:31:24,470 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 20:31:24,471 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:24,471 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:31:24,471 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:24,471 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,471 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:24,472 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:24,472 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,472 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:31:24,549 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2470
2025-03-24 20:31:24,550 - yfinance - DEBUG - response code=200
2025-03-24 20:31:24,550 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:31:24,551 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:31:24,552 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:31:24,553 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:31:24,557 - yfinance - DEBUG - MSFT: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:31:24,561 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:31:24,562 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:31:24,562 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:24,564 - yfinance - DEBUG - Exiting download()
2025-03-24 20:31:24,564 - yfinance_client - INFO - Downloaded data for MSFT, shape: (59, 5)
2025-03-24 20:31:24,570 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:31:24,573 - __main__ - INFO - Step 2: Getting options chain data for MSFT...
2025-03-24 20:31:24,573 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for MSFT
2025-03-24 20:31:24,573 - yfinance - DEBUG - Entering history()
2025-03-24 20:31:24,573 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 20:31:24,574 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:24,574 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:24,574 - yfinance - DEBUG -   Entering get()
2025-03-24 20:31:24,574 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:31:24,575 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 20:31:24,575 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:24,575 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:31:24,575 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:24,575 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,575 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:24,575 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:24,576 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,576 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:31:24,657 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1211
2025-03-24 20:31:24,657 - yfinance - DEBUG - response code=200
2025-03-24 20:31:24,658 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:31:24,658 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:31:24,659 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:31:24,660 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:31:24,661 - yfinance - DEBUG - MSFT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:31:24,665 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:31:24,665 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:24,666 - yfinance - DEBUG - Exiting history()
2025-03-24 20:31:24,666 - yfinance_client - INFO - Current price of MSFT: $393.08
2025-03-24 20:31:24,666 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:24,666 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:24,666 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT
2025-03-24 20:31:24,667 - yfinance - DEBUG - params=None
2025-03-24 20:31:24,667 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:24,667 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:24,667 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,667 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:24,667 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:24,668 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,668 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:24,752 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:24,760 - yfinance - DEBUG - response code=200
2025-03-24 20:31:24,760 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:24,760 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:24,761 - yfinance_client - INFO - Found 20 expiration dates for MSFT
2025-03-24 20:31:24,762 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:31:24,762 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:24,763 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:24,763 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1743120000
2025-03-24 20:31:24,763 - yfinance - DEBUG - params=None
2025-03-24 20:31:24,763 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:24,763 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:24,764 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,764 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:24,764 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:24,764 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,764 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:24,854 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:24,856 - yfinance - DEBUG - response code=200
2025-03-24 20:31:24,857 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:24,857 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:24,861 - yfinance_client - INFO - Retrieved 74 calls and 68 puts
2025-03-24 20:31:24,929 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:31:24,929 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:24,929 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:24,930 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1743724800
2025-03-24 20:31:24,930 - yfinance - DEBUG - params=None
2025-03-24 20:31:24,930 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:24,930 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:24,931 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,931 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:24,931 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:24,931 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:24,931 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:25,014 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:25,016 - yfinance - DEBUG - response code=200
2025-03-24 20:31:25,016 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:25,016 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:25,020 - yfinance_client - INFO - Retrieved 55 calls and 52 puts
2025-03-24 20:31:25,073 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:31:25,073 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:25,074 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:25,074 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1744329600
2025-03-24 20:31:25,074 - yfinance - DEBUG - params=None
2025-03-24 20:31:25,075 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:25,075 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:25,075 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:25,075 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:25,075 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:25,075 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:25,075 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:25,157 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:25,158 - yfinance - DEBUG - response code=200
2025-03-24 20:31:25,158 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:25,158 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:25,162 - yfinance_client - INFO - Retrieved 42 calls and 43 puts
2025-03-24 20:31:25,205 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:31:25,206 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:25,206 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:25,206 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1744848000
2025-03-24 20:31:25,207 - yfinance - DEBUG - params=None
2025-03-24 20:31:25,207 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:25,207 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:25,207 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:25,207 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:25,207 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:25,209 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:25,209 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:25,338 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:25,339 - yfinance - DEBUG - response code=200
2025-03-24 20:31:25,340 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:25,340 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:25,343 - yfinance_client - INFO - Retrieved 84 calls and 73 puts
2025-03-24 20:31:25,422 - yfinance_client - INFO - Successfully fetched 4 option chains for MSFT
2025-03-24 20:31:25,422 - __main__ - INFO - Step 3: Preparing analysis data for MSFT...
2025-03-24 20:31:25,422 - __main__ - INFO - Step 4: Processing options data for MSFT...
2025-03-24 20:31:25,423 - __main__ - INFO - Found 4 expiration dates for MSFT
2025-03-24 20:31:25,423 - __main__ - INFO - Processing expiration date 2025-03-28 for MSFT...
2025-03-24 20:31:25,423 - __main__ - DEBUG - ATM calls shape before filtering: (74, 19)
2025-03-24 20:31:25,424 - __main__ - DEBUG - ATM puts shape before filtering: (68, 19)
2025-03-24 20:31:25,424 - __main__ - DEBUG - ATM calls shape after filtering: (16, 19)
2025-03-24 20:31:25,425 - __main__ - DEBUG - ATM puts shape after filtering: (16, 19)
2025-03-24 20:31:25,425 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:31:25,426 - __main__ - DEBUG - ATM call for MSFT: strike=392.5
2025-03-24 20:31:25,426 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:31:25,427 - __main__ - DEBUG - ATM put for MSFT: strike=392.5
2025-03-24 20:31:25,427 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:31:25,427 - __main__ - DEBUG - Volume data for MSFT: calls=94850, puts=32115
2025-03-24 20:31:25,428 - __main__ - INFO - Successfully processed expiration 2025-03-28 for MSFT
2025-03-24 20:31:25,428 - __main__ - INFO - Processing expiration date 2025-04-04 for MSFT...
2025-03-24 20:31:25,428 - __main__ - DEBUG - ATM calls shape before filtering: (55, 19)
2025-03-24 20:31:25,429 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:31:25,429 - __main__ - DEBUG - ATM calls shape after filtering: (15, 19)
2025-03-24 20:31:25,430 - __main__ - DEBUG - ATM puts shape after filtering: (15, 19)
2025-03-24 20:31:25,430 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:31:25,431 - __main__ - DEBUG - ATM call for MSFT: strike=392.5
2025-03-24 20:31:25,431 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:31:25,431 - __main__ - DEBUG - ATM put for MSFT: strike=392.5
2025-03-24 20:31:25,432 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:31:25,432 - __main__ - DEBUG - Volume data for MSFT: calls=17426, puts=7902
2025-03-24 20:31:25,432 - __main__ - INFO - Successfully processed expiration 2025-04-04 for MSFT
2025-03-24 20:31:25,432 - __main__ - INFO - Processing expiration date 2025-04-11 for MSFT...
2025-03-24 20:31:25,433 - __main__ - DEBUG - ATM calls shape before filtering: (42, 19)
2025-03-24 20:31:25,433 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:31:25,434 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:31:25,434 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:31:25,434 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:31:25,435 - __main__ - DEBUG - ATM call for MSFT: strike=395.0
2025-03-24 20:31:25,435 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:31:25,436 - __main__ - DEBUG - ATM put for MSFT: strike=395.0
2025-03-24 20:31:25,436 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:31:25,437 - __main__ - DEBUG - Volume data for MSFT: calls=11844, puts=2280
2025-03-24 20:31:25,437 - __main__ - INFO - Successfully processed expiration 2025-04-11 for MSFT
2025-03-24 20:31:25,437 - __main__ - INFO - Processing expiration date 2025-04-17 for MSFT...
2025-03-24 20:31:25,438 - __main__ - DEBUG - ATM calls shape before filtering: (84, 19)
2025-03-24 20:31:25,438 - __main__ - DEBUG - ATM puts shape before filtering: (73, 19)
2025-03-24 20:31:25,438 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:31:25,439 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:31:25,439 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:31:25,440 - __main__ - DEBUG - ATM call for MSFT: strike=395.0
2025-03-24 20:31:25,440 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:31:25,440 - __main__ - DEBUG - ATM put for MSFT: strike=395.0
2025-03-24 20:31:25,441 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:31:25,441 - __main__ - DEBUG - Volume data for MSFT: calls=30034, puts=23975
2025-03-24 20:31:25,441 - __main__ - INFO - Successfully processed expiration 2025-04-17 for MSFT
2025-03-24 20:31:25,441 - __main__ - INFO - Step 5: Generating analysis for MSFT...
2025-03-24 20:31:25,442 - __main__ - DEBUG - Calling get_stock_analysis_prompt for MSFT with args: stock_analysis_data, market_context
2025-03-24 20:31:42,445 - __main__ - INFO - Market alignment for MSFT: contrary
2025-03-24 20:31:42,446 - __main__ - INFO - Creating stock analysis result for MSFT...
2025-03-24 20:31:42,446 - __main__ - INFO - Successfully added MSFT to stock analyses
2025-03-24 20:31:42,446 - __main__ - INFO - Updating Notion with analysis for MSFT...
2025-03-24 20:31:42,447 - __main__ - INFO - Sending Discord notification for MSFT...
2025-03-24 20:31:42,447 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2871 chars). Splitting into parts.
2025-03-24 20:31:42,448 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:31:42,837 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:31:42,838 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:31:42,839 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:31:43,107 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:31:43,108 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:31:43,108 - __main__ - INFO - Successfully sent Discord notification for MSFT
2025-03-24 20:31:43,109 - __main__ - INFO - Analyzing META...
2025-03-24 20:31:43,109 - __main__ - INFO - Step 1: Getting stock data for META...
2025-03-24 20:31:43,109 - yfinance - DEBUG - Entering download()
2025-03-24 20:31:43,109 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:31:43,109 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:43,110 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 20:31:43,110 - yfinance - DEBUG -   Entering history()
2025-03-24 20:31:43,110 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:43,110 - yfinance - DEBUG -    Entering get()
2025-03-24 20:31:43,110 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:31:43,111 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 20:31:43,111 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:43,111 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:31:43,111 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:43,112 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,112 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:43,112 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:43,112 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,112 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:31:43,190 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1718
2025-03-24 20:31:43,191 - yfinance - DEBUG - response code=200
2025-03-24 20:31:43,191 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:31:43,191 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:31:43,192 - yfinance - DEBUG - META: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:31:43,196 - yfinance - DEBUG - META: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:43,198 - yfinance - DEBUG - META: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:43,202 - yfinance - DEBUG - META: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:31:43,202 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:31:43,202 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:43,204 - yfinance - DEBUG - Exiting download()
2025-03-24 20:31:43,204 - yfinance_client - INFO - Downloaded data for META, shape: (35, 5)
2025-03-24 20:31:43,204 - yfinance - DEBUG - Entering download()
2025-03-24 20:31:43,204 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:31:43,205 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:43,205 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 20:31:43,205 - yfinance - DEBUG -   Entering history()
2025-03-24 20:31:43,205 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:43,206 - yfinance - DEBUG -    Entering get()
2025-03-24 20:31:43,206 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:31:43,206 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 20:31:43,206 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:43,207 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:31:43,207 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:43,207 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,207 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:43,207 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:43,207 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,208 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:31:43,308 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2623
2025-03-24 20:31:43,310 - yfinance - DEBUG - response code=200
2025-03-24 20:31:43,310 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:31:43,310 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:31:43,312 - yfinance - DEBUG - META: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:31:43,313 - yfinance - DEBUG - META: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:31:43,317 - yfinance - DEBUG - META: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:31:43,323 - yfinance - DEBUG - META: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:31:43,323 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:31:43,323 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:43,325 - yfinance - DEBUG - Exiting download()
2025-03-24 20:31:43,325 - yfinance_client - INFO - Downloaded data for META, shape: (59, 5)
2025-03-24 20:31:43,332 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:31:43,336 - __main__ - INFO - Step 2: Getting options chain data for META...
2025-03-24 20:31:43,337 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for META
2025-03-24 20:31:43,337 - yfinance - DEBUG - Entering history()
2025-03-24 20:31:43,337 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 20:31:43,338 - yfinance - DEBUG -  Entering history()
2025-03-24 20:31:43,338 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:43,338 - yfinance - DEBUG -   Entering get()
2025-03-24 20:31:43,339 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:31:43,339 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 20:31:43,339 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:31:43,339 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:31:43,339 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:43,340 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,340 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:43,340 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:43,340 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,340 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:31:43,394 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1207
2025-03-24 20:31:43,395 - yfinance - DEBUG - response code=200
2025-03-24 20:31:43,395 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:31:43,395 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:31:43,396 - yfinance - DEBUG - META: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:31:43,397 - yfinance - DEBUG - META: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:31:43,399 - yfinance - DEBUG - META: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:31:43,403 - yfinance - DEBUG - META: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:31:43,404 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:31:43,404 - yfinance - DEBUG - Exiting history()
2025-03-24 20:31:43,404 - yfinance_client - INFO - Current price of META: $618.85
2025-03-24 20:31:43,404 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:43,405 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:43,405 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META
2025-03-24 20:31:43,405 - yfinance - DEBUG - params=None
2025-03-24 20:31:43,405 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:43,405 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:43,405 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,406 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:43,406 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:43,406 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,406 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:43,504 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:43,527 - yfinance - DEBUG - response code=200
2025-03-24 20:31:43,527 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:43,528 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:43,529 - yfinance_client - INFO - Found 19 expiration dates for META
2025-03-24 20:31:43,530 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:31:43,530 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:43,530 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:43,530 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1743120000
2025-03-24 20:31:43,530 - yfinance - DEBUG - params=None
2025-03-24 20:31:43,531 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:43,531 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:43,531 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,531 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:43,531 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:43,531 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,531 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:43,626 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:43,628 - yfinance - DEBUG - response code=200
2025-03-24 20:31:43,628 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:43,629 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:43,633 - yfinance_client - INFO - Retrieved 143 calls and 138 puts
2025-03-24 20:31:43,771 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:31:43,771 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:43,771 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:43,772 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1743724800
2025-03-24 20:31:43,772 - yfinance - DEBUG - params=None
2025-03-24 20:31:43,772 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:43,773 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:43,773 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,773 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:43,773 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:43,773 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,773 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:43,869 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:43,871 - yfinance - DEBUG - response code=200
2025-03-24 20:31:43,871 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:43,871 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:43,875 - yfinance_client - INFO - Retrieved 101 calls and 100 puts
2025-03-24 20:31:43,975 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:31:43,975 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:43,976 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:43,976 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1744329600
2025-03-24 20:31:43,976 - yfinance - DEBUG - params=None
2025-03-24 20:31:43,976 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:43,976 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:43,976 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,976 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:43,977 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:43,977 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:43,977 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:44,072 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:44,074 - yfinance - DEBUG - response code=200
2025-03-24 20:31:44,074 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:44,074 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:44,078 - yfinance_client - INFO - Retrieved 84 calls and 85 puts
2025-03-24 20:31:44,164 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:31:44,164 - yfinance - DEBUG - Entering get()
2025-03-24 20:31:44,164 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:31:44,165 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1744848000
2025-03-24 20:31:44,165 - yfinance - DEBUG - params=None
2025-03-24 20:31:44,165 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:31:44,165 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:31:44,165 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:31:44,166 - yfinance - DEBUG - reusing cookie
2025-03-24 20:31:44,166 - yfinance - DEBUG - reusing crumb
2025-03-24 20:31:44,166 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:31:44,166 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:31:44,273 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:31:44,277 - yfinance - DEBUG - response code=200
2025-03-24 20:31:44,277 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:31:44,277 - yfinance - DEBUG - Exiting get()
2025-03-24 20:31:44,282 - yfinance_client - INFO - Retrieved 167 calls and 143 puts
2025-03-24 20:31:44,436 - yfinance_client - INFO - Successfully fetched 4 option chains for META
2025-03-24 20:31:44,437 - __main__ - INFO - Step 3: Preparing analysis data for META...
2025-03-24 20:31:44,437 - __main__ - INFO - Step 4: Processing options data for META...
2025-03-24 20:31:44,437 - __main__ - INFO - Found 4 expiration dates for META
2025-03-24 20:31:44,437 - __main__ - INFO - Processing expiration date 2025-03-28 for META...
2025-03-24 20:31:44,437 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 20:31:44,438 - __main__ - DEBUG - ATM puts shape before filtering: (138, 19)
2025-03-24 20:31:44,438 - __main__ - DEBUG - ATM calls shape after filtering: (24, 19)
2025-03-24 20:31:44,439 - __main__ - DEBUG - ATM puts shape after filtering: (24, 19)
2025-03-24 20:31:44,439 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:31:44,440 - __main__ - DEBUG - ATM call for META: strike=617.5
2025-03-24 20:31:44,440 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:31:44,441 - __main__ - DEBUG - ATM put for META: strike=617.5
2025-03-24 20:31:44,441 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:31:44,441 - __main__ - DEBUG - Volume data for META: calls=168297, puts=87887
2025-03-24 20:31:44,442 - __main__ - INFO - Successfully processed expiration 2025-03-28 for META
2025-03-24 20:31:44,442 - __main__ - INFO - Processing expiration date 2025-04-04 for META...
2025-03-24 20:31:44,442 - __main__ - DEBUG - ATM calls shape before filtering: (101, 19)
2025-03-24 20:31:44,442 - __main__ - DEBUG - ATM puts shape before filtering: (100, 19)
2025-03-24 20:31:44,443 - __main__ - DEBUG - ATM calls shape after filtering: (20, 19)
2025-03-24 20:31:44,443 - __main__ - DEBUG - ATM puts shape after filtering: (20, 19)
2025-03-24 20:31:44,444 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:31:44,444 - __main__ - DEBUG - ATM call for META: strike=617.5
2025-03-24 20:31:44,444 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:31:44,445 - __main__ - DEBUG - ATM put for META: strike=617.5
2025-03-24 20:31:44,445 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:31:44,446 - __main__ - DEBUG - Volume data for META: calls=26182, puts=14274
2025-03-24 20:31:44,446 - __main__ - INFO - Successfully processed expiration 2025-04-04 for META
2025-03-24 20:31:44,446 - __main__ - INFO - Processing expiration date 2025-04-11 for META...
2025-03-24 20:31:44,447 - __main__ - DEBUG - ATM calls shape before filtering: (84, 19)
2025-03-24 20:31:44,447 - __main__ - DEBUG - ATM puts shape before filtering: (85, 19)
2025-03-24 20:31:44,447 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:31:44,448 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:31:44,448 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:31:44,449 - __main__ - DEBUG - ATM call for META: strike=620.0
2025-03-24 20:31:44,449 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:31:44,450 - __main__ - DEBUG - ATM put for META: strike=620.0
2025-03-24 20:31:44,450 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:31:44,451 - __main__ - DEBUG - Volume data for META: calls=7759, puts=6104
2025-03-24 20:31:44,451 - __main__ - INFO - Successfully processed expiration 2025-04-11 for META
2025-03-24 20:31:44,451 - __main__ - INFO - Processing expiration date 2025-04-17 for META...
2025-03-24 20:31:44,451 - __main__ - DEBUG - ATM calls shape before filtering: (167, 19)
2025-03-24 20:31:44,451 - __main__ - DEBUG - ATM puts shape before filtering: (143, 19)
2025-03-24 20:31:44,452 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:31:44,453 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:31:44,453 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:31:44,454 - __main__ - DEBUG - ATM call for META: strike=620.0
2025-03-24 20:31:44,454 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:31:44,455 - __main__ - DEBUG - ATM put for META: strike=620.0
2025-03-24 20:31:44,455 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:31:44,455 - __main__ - DEBUG - Volume data for META: calls=34328, puts=15734
2025-03-24 20:31:44,455 - __main__ - INFO - Successfully processed expiration 2025-04-17 for META
2025-03-24 20:31:44,456 - __main__ - INFO - Step 5: Generating analysis for META...
2025-03-24 20:31:44,456 - __main__ - DEBUG - Calling get_stock_analysis_prompt for META with args: stock_analysis_data, market_context
2025-03-24 20:32:00,821 - __main__ - INFO - Market alignment for META: contrary
2025-03-24 20:32:00,821 - __main__ - INFO - Creating stock analysis result for META...
2025-03-24 20:32:00,822 - __main__ - INFO - Successfully added META to stock analyses
2025-03-24 20:32:00,822 - __main__ - INFO - Updating Notion with analysis for META...
2025-03-24 20:32:00,822 - __main__ - INFO - Sending Discord notification for META...
2025-03-24 20:32:00,822 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2594 chars). Splitting into parts.
2025-03-24 20:32:00,823 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:01,083 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:01,084 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:01,085 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:01,401 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:01,402 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:01,402 - __main__ - INFO - Successfully sent Discord notification for META
2025-03-24 20:32:01,402 - __main__ - INFO - Analyzing TSM...
2025-03-24 20:32:01,403 - __main__ - INFO - Step 1: Getting stock data for TSM...
2025-03-24 20:32:01,403 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:01,403 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:01,403 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:01,404 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 20:32:01,404 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:01,404 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:01,404 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:01,404 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:01,405 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 20:32:01,405 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:01,405 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:01,405 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:01,406 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,406 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:01,406 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:01,406 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,406 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:01,480 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1639
2025-03-24 20:32:01,481 - yfinance - DEBUG - response code=200
2025-03-24 20:32:01,482 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:01,482 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:01,483 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:32:01,488 - yfinance - DEBUG - TSM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:01,491 - yfinance - DEBUG - TSM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:01,494 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:01,495 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:01,495 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:01,497 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:01,497 - yfinance_client - INFO - Downloaded data for TSM, shape: (35, 5)
2025-03-24 20:32:01,498 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:01,498 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:01,498 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:01,499 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 20:32:01,499 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:01,499 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:01,499 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:01,500 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:01,500 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 20:32:01,500 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:01,500 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:01,500 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:01,500 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,501 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:01,501 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:01,501 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,501 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:01,594 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2676
2025-03-24 20:32:01,594 - yfinance - DEBUG - response code=200
2025-03-24 20:32:01,595 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:01,595 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:01,596 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:32:01,597 - yfinance - DEBUG - TSM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:32:01,600 - yfinance - DEBUG - TSM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:01,604 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:01,605 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:01,605 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:01,606 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:01,607 - yfinance_client - INFO - Downloaded data for TSM, shape: (59, 5)
2025-03-24 20:32:01,612 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:32:01,615 - __main__ - INFO - Step 2: Getting options chain data for TSM...
2025-03-24 20:32:01,615 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for TSM
2025-03-24 20:32:01,616 - yfinance - DEBUG - Entering history()
2025-03-24 20:32:01,616 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 20:32:01,616 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:01,616 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:01,617 - yfinance - DEBUG -   Entering get()
2025-03-24 20:32:01,617 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:32:01,617 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 20:32:01,617 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:01,617 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:32:01,618 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:01,618 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,618 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:01,618 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:01,618 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,619 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:32:01,703 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1251
2025-03-24 20:32:01,703 - yfinance - DEBUG - response code=200
2025-03-24 20:32:01,704 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:32:01,704 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:32:01,705 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:32:01,706 - yfinance - DEBUG - TSM: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:32:01,708 - yfinance - DEBUG - TSM: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:01,711 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:01,711 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:01,711 - yfinance - DEBUG - Exiting history()
2025-03-24 20:32:01,712 - yfinance_client - INFO - Current price of TSM: $181.16
2025-03-24 20:32:01,712 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:01,712 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:01,712 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM
2025-03-24 20:32:01,713 - yfinance - DEBUG - params=None
2025-03-24 20:32:01,713 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:01,713 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:01,713 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,713 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:01,713 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:01,713 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,714 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:01,780 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:01,781 - yfinance - DEBUG - response code=200
2025-03-24 20:32:01,782 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:01,782 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:01,783 - yfinance_client - INFO - Found 19 expiration dates for TSM
2025-03-24 20:32:01,783 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:32:01,784 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:01,784 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:01,784 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1743120000
2025-03-24 20:32:01,784 - yfinance - DEBUG - params=None
2025-03-24 20:32:01,785 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:01,785 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:01,785 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,785 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:01,785 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:01,785 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,785 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:01,856 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:01,856 - yfinance - DEBUG - response code=200
2025-03-24 20:32:01,857 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:01,857 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:01,860 - yfinance_client - INFO - Retrieved 47 calls and 46 puts
2025-03-24 20:32:01,907 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:32:01,907 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:01,907 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:01,908 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1743724800
2025-03-24 20:32:01,908 - yfinance - DEBUG - params=None
2025-03-24 20:32:01,908 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:01,908 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:01,908 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,909 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:01,909 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:01,909 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:01,909 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:01,979 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:01,980 - yfinance - DEBUG - response code=200
2025-03-24 20:32:01,980 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:01,981 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:01,984 - yfinance_client - INFO - Retrieved 42 calls and 37 puts
2025-03-24 20:32:02,026 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:32:02,026 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:02,027 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:02,027 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1744329600
2025-03-24 20:32:02,027 - yfinance - DEBUG - params=None
2025-03-24 20:32:02,028 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:02,028 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:02,028 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:02,028 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:02,029 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:02,029 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:02,029 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:02,097 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:02,098 - yfinance - DEBUG - response code=200
2025-03-24 20:32:02,098 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:02,098 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:02,102 - yfinance_client - INFO - Retrieved 30 calls and 27 puts
2025-03-24 20:32:02,132 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:32:02,132 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:02,132 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:02,133 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1744848000
2025-03-24 20:32:02,134 - yfinance - DEBUG - params=None
2025-03-24 20:32:02,134 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:02,134 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:02,134 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:02,135 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:02,135 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:02,135 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:02,135 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:02,222 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:02,223 - yfinance - DEBUG - response code=200
2025-03-24 20:32:02,223 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:02,223 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:02,226 - yfinance_client - INFO - Retrieved 38 calls and 36 puts
2025-03-24 20:32:02,265 - yfinance_client - INFO - Successfully fetched 4 option chains for TSM
2025-03-24 20:32:02,266 - __main__ - INFO - Step 3: Preparing analysis data for TSM...
2025-03-24 20:32:02,266 - __main__ - INFO - Step 4: Processing options data for TSM...
2025-03-24 20:32:02,267 - __main__ - INFO - Found 4 expiration dates for TSM
2025-03-24 20:32:02,267 - __main__ - INFO - Processing expiration date 2025-03-28 for TSM...
2025-03-24 20:32:02,268 - __main__ - DEBUG - ATM calls shape before filtering: (47, 19)
2025-03-24 20:32:02,268 - __main__ - DEBUG - ATM puts shape before filtering: (46, 19)
2025-03-24 20:32:02,268 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:32:02,269 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:32:02,269 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:32:02,270 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:32:02,270 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:32:02,270 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:32:02,271 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:32:02,271 - __main__ - DEBUG - Volume data for TSM: calls=24126, puts=15611
2025-03-24 20:32:02,271 - __main__ - INFO - Successfully processed expiration 2025-03-28 for TSM
2025-03-24 20:32:02,272 - __main__ - INFO - Processing expiration date 2025-04-04 for TSM...
2025-03-24 20:32:02,272 - __main__ - DEBUG - ATM calls shape before filtering: (42, 19)
2025-03-24 20:32:02,272 - __main__ - DEBUG - ATM puts shape before filtering: (37, 19)
2025-03-24 20:32:02,273 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:32:02,273 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:32:02,273 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:32:02,274 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:32:02,274 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:32:02,275 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:32:02,275 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:32:02,276 - __main__ - DEBUG - Volume data for TSM: calls=6346, puts=8542
2025-03-24 20:32:02,276 - __main__ - INFO - Successfully processed expiration 2025-04-04 for TSM
2025-03-24 20:32:02,276 - __main__ - INFO - Processing expiration date 2025-04-11 for TSM...
2025-03-24 20:32:02,278 - __main__ - DEBUG - ATM calls shape before filtering: (30, 19)
2025-03-24 20:32:02,278 - __main__ - DEBUG - ATM puts shape before filtering: (27, 19)
2025-03-24 20:32:02,279 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:32:02,279 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:32:02,279 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:32:02,280 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:32:02,280 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:32:02,281 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:32:02,281 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:32:02,282 - __main__ - DEBUG - Volume data for TSM: calls=1910, puts=2080
2025-03-24 20:32:02,282 - __main__ - INFO - Successfully processed expiration 2025-04-11 for TSM
2025-03-24 20:32:02,282 - __main__ - INFO - Processing expiration date 2025-04-17 for TSM...
2025-03-24 20:32:02,282 - __main__ - DEBUG - ATM calls shape before filtering: (38, 19)
2025-03-24 20:32:02,283 - __main__ - DEBUG - ATM puts shape before filtering: (36, 19)
2025-03-24 20:32:02,283 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:32:02,284 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:32:02,284 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:32:02,285 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:32:02,285 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:32:02,285 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:32:02,286 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:32:02,286 - __main__ - DEBUG - Volume data for TSM: calls=9842, puts=5486
2025-03-24 20:32:02,286 - __main__ - INFO - Successfully processed expiration 2025-04-17 for TSM
2025-03-24 20:32:02,286 - __main__ - INFO - Step 5: Generating analysis for TSM...
2025-03-24 20:32:02,287 - __main__ - DEBUG - Calling get_stock_analysis_prompt for TSM with args: stock_analysis_data, market_context
2025-03-24 20:32:17,575 - __main__ - INFO - Market alignment for TSM: **
the overall market trend is bullish (as stated in market context). the stock trend is bearish. therefore, the stock trend is contrary to the spy trend.
2025-03-24 20:32:17,575 - __main__ - INFO - Creating stock analysis result for TSM...
2025-03-24 20:32:17,576 - __main__ - INFO - Successfully added TSM to stock analyses
2025-03-24 20:32:17,576 - __main__ - INFO - Updating Notion with analysis for TSM...
2025-03-24 20:32:17,576 - __main__ - INFO - Sending Discord notification for TSM...
2025-03-24 20:32:17,576 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2933 chars). Splitting into parts.
2025-03-24 20:32:17,577 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:17,903 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:17,904 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:17,906 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:18,177 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:18,178 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:18,179 - __main__ - INFO - Successfully sent Discord notification for TSM
2025-03-24 20:32:18,179 - __main__ - INFO - Analyzing LLY...
2025-03-24 20:32:18,179 - __main__ - INFO - Step 1: Getting stock data for LLY...
2025-03-24 20:32:18,179 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:18,179 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:18,179 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:18,180 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 20:32:18,180 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:18,180 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:18,180 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:18,181 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:18,181 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 20:32:18,181 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:18,181 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:18,181 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:18,181 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,182 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:18,182 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:18,182 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,182 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:18,246 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1661
2025-03-24 20:32:18,247 - yfinance - DEBUG - response code=200
2025-03-24 20:32:18,247 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:18,247 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:18,248 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:32:18,253 - yfinance - DEBUG - LLY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:18,255 - yfinance - DEBUG - LLY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:18,258 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:18,259 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:18,259 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:18,261 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:18,261 - yfinance_client - INFO - Downloaded data for LLY, shape: (35, 5)
2025-03-24 20:32:18,261 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:18,261 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:18,262 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:18,262 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 20:32:18,262 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:18,262 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:18,263 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:18,263 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:18,263 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 20:32:18,263 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:18,263 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:18,264 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:18,264 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,264 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:18,264 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:18,264 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,264 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:18,432 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2450
2025-03-24 20:32:18,433 - yfinance - DEBUG - response code=200
2025-03-24 20:32:18,433 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:18,433 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:18,434 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:32:18,435 - yfinance - DEBUG - LLY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:32:18,439 - yfinance - DEBUG - LLY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:18,443 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:18,444 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:18,444 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:18,446 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:18,446 - yfinance_client - INFO - Downloaded data for LLY, shape: (59, 5)
2025-03-24 20:32:18,452 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:32:18,454 - __main__ - INFO - Step 2: Getting options chain data for LLY...
2025-03-24 20:32:18,455 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for LLY
2025-03-24 20:32:18,455 - yfinance - DEBUG - Entering history()
2025-03-24 20:32:18,455 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 20:32:18,456 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:18,456 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:18,456 - yfinance - DEBUG -   Entering get()
2025-03-24 20:32:18,456 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:32:18,457 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 20:32:18,457 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:18,457 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:32:18,457 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:18,457 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,458 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:18,458 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:18,458 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,458 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:32:18,599 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1200
2025-03-24 20:32:18,599 - yfinance - DEBUG - response code=200
2025-03-24 20:32:18,599 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:32:18,600 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:32:18,601 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:32:18,601 - yfinance - DEBUG - LLY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:32:18,603 - yfinance - DEBUG - LLY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:18,607 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:18,607 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:18,607 - yfinance - DEBUG - Exiting history()
2025-03-24 20:32:18,607 - yfinance_client - INFO - Current price of LLY: $864.90
2025-03-24 20:32:18,607 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:18,608 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:18,608 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY
2025-03-24 20:32:18,608 - yfinance - DEBUG - params=None
2025-03-24 20:32:18,608 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:18,608 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:18,608 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,609 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:18,609 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:18,609 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,609 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:18,701 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:18,710 - yfinance - DEBUG - response code=200
2025-03-24 20:32:18,710 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:18,710 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:18,712 - yfinance_client - INFO - Found 19 expiration dates for LLY
2025-03-24 20:32:18,712 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:32:18,713 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:18,713 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:18,713 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1743120000
2025-03-24 20:32:18,713 - yfinance - DEBUG - params=None
2025-03-24 20:32:18,713 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:18,714 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:18,714 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,714 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:18,714 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:18,714 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,714 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:18,799 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:18,801 - yfinance - DEBUG - response code=200
2025-03-24 20:32:18,801 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:18,801 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:18,805 - yfinance_client - INFO - Retrieved 83 calls and 81 puts
2025-03-24 20:32:18,886 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:32:18,886 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:18,887 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:18,887 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1743724800
2025-03-24 20:32:18,887 - yfinance - DEBUG - params=None
2025-03-24 20:32:18,887 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:18,888 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:18,888 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,888 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:18,888 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:18,888 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:18,889 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:18,981 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:18,983 - yfinance - DEBUG - response code=200
2025-03-24 20:32:18,984 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:18,984 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:18,988 - yfinance_client - INFO - Retrieved 74 calls and 72 puts
2025-03-24 20:32:19,060 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:32:19,061 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:19,061 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:19,061 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1744329600
2025-03-24 20:32:19,061 - yfinance - DEBUG - params=None
2025-03-24 20:32:19,061 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:19,062 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:19,062 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:19,062 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:19,062 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:19,062 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:19,063 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:19,196 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:19,197 - yfinance - DEBUG - response code=200
2025-03-24 20:32:19,197 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:19,197 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:19,201 - yfinance_client - INFO - Retrieved 51 calls and 51 puts
2025-03-24 20:32:19,252 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:32:19,253 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:19,253 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:19,253 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1744848000
2025-03-24 20:32:19,253 - yfinance - DEBUG - params=None
2025-03-24 20:32:19,254 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:19,254 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:19,254 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:19,254 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:19,254 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:19,254 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:19,255 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:19,351 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:19,352 - yfinance - DEBUG - response code=200
2025-03-24 20:32:19,352 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:19,352 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:19,356 - yfinance_client - INFO - Retrieved 72 calls and 62 puts
2025-03-24 20:32:19,423 - yfinance_client - INFO - Successfully fetched 4 option chains for LLY
2025-03-24 20:32:19,424 - __main__ - INFO - Step 3: Preparing analysis data for LLY...
2025-03-24 20:32:19,424 - __main__ - INFO - Step 4: Processing options data for LLY...
2025-03-24 20:32:19,424 - __main__ - INFO - Found 4 expiration dates for LLY
2025-03-24 20:32:19,425 - __main__ - INFO - Processing expiration date 2025-03-28 for LLY...
2025-03-24 20:32:19,425 - __main__ - DEBUG - ATM calls shape before filtering: (83, 19)
2025-03-24 20:32:19,426 - __main__ - DEBUG - ATM puts shape before filtering: (81, 19)
2025-03-24 20:32:19,426 - __main__ - DEBUG - ATM calls shape after filtering: (25, 19)
2025-03-24 20:32:19,427 - __main__ - DEBUG - ATM puts shape after filtering: (24, 19)
2025-03-24 20:32:19,427 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:32:19,428 - __main__ - DEBUG - ATM call for LLY: strike=865.0
2025-03-24 20:32:19,428 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:32:19,429 - __main__ - DEBUG - ATM put for LLY: strike=865.0
2025-03-24 20:32:19,429 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:32:19,430 - __main__ - DEBUG - Volume data for LLY: calls=9837, puts=6102
2025-03-24 20:32:19,430 - __main__ - INFO - Successfully processed expiration 2025-03-28 for LLY
2025-03-24 20:32:19,430 - __main__ - INFO - Processing expiration date 2025-04-04 for LLY...
2025-03-24 20:32:19,431 - __main__ - DEBUG - ATM calls shape before filtering: (74, 19)
2025-03-24 20:32:19,431 - __main__ - DEBUG - ATM puts shape before filtering: (72, 19)
2025-03-24 20:32:19,431 - __main__ - DEBUG - ATM calls shape after filtering: (20, 19)
2025-03-24 20:32:19,432 - __main__ - DEBUG - ATM puts shape after filtering: (20, 19)
2025-03-24 20:32:19,432 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:32:19,433 - __main__ - DEBUG - ATM call for LLY: strike=865.0
2025-03-24 20:32:19,433 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:32:19,433 - __main__ - DEBUG - ATM put for LLY: strike=865.0
2025-03-24 20:32:19,434 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:32:19,434 - __main__ - DEBUG - Volume data for LLY: calls=2205, puts=1211
2025-03-24 20:32:19,434 - __main__ - INFO - Successfully processed expiration 2025-04-04 for LLY
2025-03-24 20:32:19,434 - __main__ - INFO - Processing expiration date 2025-04-11 for LLY...
2025-03-24 20:32:19,435 - __main__ - DEBUG - ATM calls shape before filtering: (51, 19)
2025-03-24 20:32:19,435 - __main__ - DEBUG - ATM puts shape before filtering: (51, 19)
2025-03-24 20:32:19,436 - __main__ - DEBUG - ATM calls shape after filtering: (17, 19)
2025-03-24 20:32:19,436 - __main__ - DEBUG - ATM puts shape after filtering: (17, 19)
2025-03-24 20:32:19,436 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:32:19,437 - __main__ - DEBUG - ATM call for LLY: strike=865.0
2025-03-24 20:32:19,437 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:32:19,438 - __main__ - DEBUG - ATM put for LLY: strike=865.0
2025-03-24 20:32:19,438 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:32:19,439 - __main__ - DEBUG - Volume data for LLY: calls=305, puts=321
2025-03-24 20:32:19,439 - __main__ - INFO - Successfully processed expiration 2025-04-11 for LLY
2025-03-24 20:32:19,439 - __main__ - INFO - Processing expiration date 2025-04-17 for LLY...
2025-03-24 20:32:19,439 - __main__ - DEBUG - ATM calls shape before filtering: (72, 19)
2025-03-24 20:32:19,440 - __main__ - DEBUG - ATM puts shape before filtering: (62, 19)
2025-03-24 20:32:19,440 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:32:19,441 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:32:19,441 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:32:19,442 - __main__ - DEBUG - ATM call for LLY: strike=860.0
2025-03-24 20:32:19,442 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:32:19,443 - __main__ - DEBUG - ATM put for LLY: strike=860.0
2025-03-24 20:32:19,443 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:32:19,443 - __main__ - DEBUG - Volume data for LLY: calls=2055, puts=1517
2025-03-24 20:32:19,444 - __main__ - INFO - Successfully processed expiration 2025-04-17 for LLY
2025-03-24 20:32:19,444 - __main__ - INFO - Step 5: Generating analysis for LLY...
2025-03-24 20:32:19,444 - __main__ - DEBUG - Calling get_stock_analysis_prompt for LLY with args: stock_analysis_data, market_context
2025-03-24 20:32:32,028 - __main__ - INFO - Market alignment for LLY: contrary
2025-03-24 20:32:32,029 - __main__ - INFO - Creating stock analysis result for LLY...
2025-03-24 20:32:32,029 - __main__ - INFO - Successfully added LLY to stock analyses
2025-03-24 20:32:32,029 - __main__ - INFO - Updating Notion with analysis for LLY...
2025-03-24 20:32:32,030 - __main__ - INFO - Sending Discord notification for LLY...
2025-03-24 20:32:32,030 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2725 chars). Splitting into parts.
2025-03-24 20:32:32,031 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:32,412 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:32,413 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:32,414 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:32,679 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:32,680 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:32,681 - __main__ - INFO - Successfully sent Discord notification for LLY
2025-03-24 20:32:32,681 - __main__ - INFO - Analyzing MU...
2025-03-24 20:32:32,681 - __main__ - INFO - Step 1: Getting stock data for MU...
2025-03-24 20:32:32,681 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:32,681 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:32,682 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:32,682 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 20:32:32,682 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:32,682 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:32,683 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:32,683 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:32,683 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 20:32:32,683 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:32,683 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:32,684 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:32,684 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,684 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:32,684 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:32,684 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,684 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:32,751 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1685
2025-03-24 20:32:32,751 - yfinance - DEBUG - response code=200
2025-03-24 20:32:32,752 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:32,752 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:32,753 - yfinance - DEBUG - MU: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:32:32,758 - yfinance - DEBUG - MU: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:32,760 - yfinance - DEBUG - MU: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:32,764 - yfinance - DEBUG - MU: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:32,764 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:32,765 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:32,767 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:32,767 - yfinance_client - INFO - Downloaded data for MU, shape: (35, 5)
2025-03-24 20:32:32,767 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:32,767 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:32,767 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:32,768 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 20:32:32,768 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:32,768 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:32,769 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:32,769 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:32,769 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 20:32:32,769 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:32,770 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:32,770 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:32,770 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,770 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:32,770 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:32,771 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,771 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:32,864 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2121
2025-03-24 20:32:32,865 - yfinance - DEBUG - response code=200
2025-03-24 20:32:32,865 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:32,865 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:32,866 - yfinance - DEBUG - MU: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:32:32,867 - yfinance - DEBUG - MU: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:32:32,871 - yfinance - DEBUG - MU: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:32,875 - yfinance - DEBUG - MU: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:32,875 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:32,875 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:32,877 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:32,877 - yfinance_client - INFO - Downloaded data for MU, shape: (59, 5)
2025-03-24 20:32:32,883 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:32:32,886 - __main__ - INFO - Step 2: Getting options chain data for MU...
2025-03-24 20:32:32,886 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for MU
2025-03-24 20:32:32,887 - yfinance - DEBUG - Entering history()
2025-03-24 20:32:32,887 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 20:32:32,887 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:32,888 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:32,888 - yfinance - DEBUG -   Entering get()
2025-03-24 20:32:32,888 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:32:32,888 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 20:32:32,889 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:32,889 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:32:32,889 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:32,889 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,889 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:32,889 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:32,890 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,890 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:32:32,981 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1208
2025-03-24 20:32:32,982 - yfinance - DEBUG - response code=200
2025-03-24 20:32:32,982 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:32:32,982 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:32:32,983 - yfinance - DEBUG - MU: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:32:32,984 - yfinance - DEBUG - MU: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:32:32,985 - yfinance - DEBUG - MU: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:32,989 - yfinance - DEBUG - MU: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:32,990 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:32,990 - yfinance - DEBUG - Exiting history()
2025-03-24 20:32:32,990 - yfinance_client - INFO - Current price of MU: $96.94
2025-03-24 20:32:32,990 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:32,990 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:32,990 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU
2025-03-24 20:32:32,991 - yfinance - DEBUG - params=None
2025-03-24 20:32:32,991 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:32,991 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:32,991 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,991 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:32,991 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:32,992 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:32,992 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:33,081 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:33,082 - yfinance - DEBUG - response code=200
2025-03-24 20:32:33,082 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:33,083 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:33,084 - yfinance_client - INFO - Found 20 expiration dates for MU
2025-03-24 20:32:33,084 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:32:33,084 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:33,085 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:33,085 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1743120000
2025-03-24 20:32:33,085 - yfinance - DEBUG - params=None
2025-03-24 20:32:33,085 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:33,086 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:33,086 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,086 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:33,086 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:33,086 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,086 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:33,176 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:33,177 - yfinance - DEBUG - response code=200
2025-03-24 20:32:33,177 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:33,178 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:33,181 - yfinance_client - INFO - Retrieved 73 calls and 64 puts
2025-03-24 20:32:33,247 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:32:33,249 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:33,249 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:33,249 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1743724800
2025-03-24 20:32:33,250 - yfinance - DEBUG - params=None
2025-03-24 20:32:33,250 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:33,250 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:33,250 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,250 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:33,250 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:33,251 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,251 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:33,333 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:33,334 - yfinance - DEBUG - response code=200
2025-03-24 20:32:33,335 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:33,335 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:33,338 - yfinance_client - INFO - Retrieved 54 calls and 50 puts
2025-03-24 20:32:33,390 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:32:33,391 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:33,391 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:33,392 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1744329600
2025-03-24 20:32:33,392 - yfinance - DEBUG - params=None
2025-03-24 20:32:33,392 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:33,392 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:33,392 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,392 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:33,392 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:33,392 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,392 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:33,469 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:33,470 - yfinance - DEBUG - response code=200
2025-03-24 20:32:33,470 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:33,470 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:33,473 - yfinance_client - INFO - Retrieved 44 calls and 43 puts
2025-03-24 20:32:33,520 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:32:33,520 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:33,520 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:33,521 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1744848000
2025-03-24 20:32:33,521 - yfinance - DEBUG - params=None
2025-03-24 20:32:33,521 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:33,522 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:33,522 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,522 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:33,522 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:33,522 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:33,522 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:33,596 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:33,597 - yfinance - DEBUG - response code=200
2025-03-24 20:32:33,597 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:33,597 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:33,601 - yfinance_client - INFO - Retrieved 34 calls and 27 puts
2025-03-24 20:32:33,633 - yfinance_client - INFO - Successfully fetched 4 option chains for MU
2025-03-24 20:32:33,634 - __main__ - INFO - Step 3: Preparing analysis data for MU...
2025-03-24 20:32:33,634 - __main__ - INFO - Step 4: Processing options data for MU...
2025-03-24 20:32:33,634 - __main__ - INFO - Found 4 expiration dates for MU
2025-03-24 20:32:33,635 - __main__ - INFO - Processing expiration date 2025-03-28 for MU...
2025-03-24 20:32:33,635 - __main__ - DEBUG - ATM calls shape before filtering: (73, 19)
2025-03-24 20:32:33,636 - __main__ - DEBUG - ATM puts shape before filtering: (64, 19)
2025-03-24 20:32:33,636 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:32:33,637 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:32:33,637 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:32:33,638 - __main__ - DEBUG - ATM call for MU: strike=97.0
2025-03-24 20:32:33,638 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:32:33,639 - __main__ - DEBUG - ATM put for MU: strike=97.0
2025-03-24 20:32:33,639 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:32:33,640 - __main__ - DEBUG - Volume data for MU: calls=63965, puts=24831
2025-03-24 20:32:33,640 - __main__ - INFO - Successfully processed expiration 2025-03-28 for MU
2025-03-24 20:32:33,640 - __main__ - INFO - Processing expiration date 2025-04-04 for MU...
2025-03-24 20:32:33,641 - __main__ - DEBUG - ATM calls shape before filtering: (54, 19)
2025-03-24 20:32:33,641 - __main__ - DEBUG - ATM puts shape before filtering: (50, 19)
2025-03-24 20:32:33,641 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:32:33,642 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:32:33,642 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:32:33,643 - __main__ - DEBUG - ATM call for MU: strike=97.0
2025-03-24 20:32:33,643 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:32:33,644 - __main__ - DEBUG - ATM put for MU: strike=97.0
2025-03-24 20:32:33,644 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:32:33,644 - __main__ - DEBUG - Volume data for MU: calls=13506, puts=5476
2025-03-24 20:32:33,644 - __main__ - INFO - Successfully processed expiration 2025-04-04 for MU
2025-03-24 20:32:33,645 - __main__ - INFO - Processing expiration date 2025-04-11 for MU...
2025-03-24 20:32:33,645 - __main__ - DEBUG - ATM calls shape before filtering: (44, 19)
2025-03-24 20:32:33,645 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:32:33,645 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:32:33,646 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:32:33,646 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:32:33,647 - __main__ - DEBUG - ATM call for MU: strike=97.0
2025-03-24 20:32:33,647 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:32:33,648 - __main__ - DEBUG - ATM put for MU: strike=97.0
2025-03-24 20:32:33,648 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:32:33,648 - __main__ - DEBUG - Volume data for MU: calls=5871, puts=1950
2025-03-24 20:32:33,648 - __main__ - INFO - Successfully processed expiration 2025-04-11 for MU
2025-03-24 20:32:33,649 - __main__ - INFO - Processing expiration date 2025-04-17 for MU...
2025-03-24 20:32:33,649 - __main__ - DEBUG - ATM calls shape before filtering: (34, 19)
2025-03-24 20:32:33,649 - __main__ - DEBUG - ATM puts shape before filtering: (27, 19)
2025-03-24 20:32:33,650 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:32:33,650 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:32:33,650 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:32:33,651 - __main__ - DEBUG - ATM call for MU: strike=95.0
2025-03-24 20:32:33,651 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:32:33,652 - __main__ - DEBUG - ATM put for MU: strike=95.0
2025-03-24 20:32:33,652 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:32:33,653 - __main__ - DEBUG - Volume data for MU: calls=23600, puts=6119
2025-03-24 20:32:33,653 - __main__ - INFO - Successfully processed expiration 2025-04-17 for MU
2025-03-24 20:32:33,653 - __main__ - INFO - Step 5: Generating analysis for MU...
2025-03-24 20:32:33,653 - __main__ - DEBUG - Calling get_stock_analysis_prompt for MU with args: stock_analysis_data, market_context
2025-03-24 20:32:45,347 - __main__ - INFO - Market alignment for MU: aligned
2025-03-24 20:32:45,347 - __main__ - INFO - Creating stock analysis result for MU...
2025-03-24 20:32:45,348 - __main__ - INFO - Successfully added MU to stock analyses
2025-03-24 20:32:45,348 - __main__ - INFO - Updating Notion with analysis for MU...
2025-03-24 20:32:45,348 - __main__ - INFO - Sending Discord notification for MU...
2025-03-24 20:32:45,348 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2599 chars). Splitting into parts.
2025-03-24 20:32:45,349 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:45,665 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:45,666 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:45,667 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:45,963 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:45,965 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:45,965 - __main__ - INFO - Successfully sent Discord notification for MU
2025-03-24 20:32:45,965 - __main__ - INFO - Analyzing PLTR...
2025-03-24 20:32:45,965 - __main__ - INFO - Step 1: Getting stock data for PLTR...
2025-03-24 20:32:45,965 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:45,965 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:45,966 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:45,966 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 20:32:45,966 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:45,966 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:45,967 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:45,967 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:45,967 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 20:32:45,967 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:45,967 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:45,968 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:45,968 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:45,968 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:45,968 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:45,968 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:45,968 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:46,043 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1729
2025-03-24 20:32:46,043 - yfinance - DEBUG - response code=200
2025-03-24 20:32:46,044 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:46,044 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:46,045 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:32:46,049 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:46,051 - yfinance - DEBUG - PLTR: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:46,055 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:46,055 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:46,055 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:46,057 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:46,057 - yfinance_client - INFO - Downloaded data for PLTR, shape: (35, 5)
2025-03-24 20:32:46,057 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:46,058 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:46,058 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:46,058 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 20:32:46,058 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:46,059 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:46,059 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:46,059 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:46,059 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 20:32:46,059 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:46,060 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:46,060 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:46,060 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,060 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:46,060 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:46,060 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,060 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:46,116 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2202
2025-03-24 20:32:46,117 - yfinance - DEBUG - response code=200
2025-03-24 20:32:46,117 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:46,118 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:46,119 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:32:46,120 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:32:46,122 - yfinance - DEBUG - PLTR: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:46,126 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:46,126 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:46,126 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:46,128 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:46,128 - yfinance_client - INFO - Downloaded data for PLTR, shape: (59, 5)
2025-03-24 20:32:46,134 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:32:46,137 - __main__ - INFO - Step 2: Getting options chain data for PLTR...
2025-03-24 20:32:46,137 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for PLTR
2025-03-24 20:32:46,138 - yfinance - DEBUG - Entering history()
2025-03-24 20:32:46,138 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 20:32:46,139 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:46,139 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:46,139 - yfinance - DEBUG -   Entering get()
2025-03-24 20:32:46,139 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:32:46,139 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 20:32:46,140 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:46,140 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:32:46,140 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:46,140 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,140 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:46,141 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:46,141 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,141 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:32:46,191 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1188
2025-03-24 20:32:46,192 - yfinance - DEBUG - response code=200
2025-03-24 20:32:46,192 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:32:46,192 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:32:46,193 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:32:46,194 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:32:46,196 - yfinance - DEBUG - PLTR: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:46,200 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:32:46,200 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:46,201 - yfinance - DEBUG - Exiting history()
2025-03-24 20:32:46,201 - yfinance_client - INFO - Current price of PLTR: $96.75
2025-03-24 20:32:46,201 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:46,201 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:46,202 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR
2025-03-24 20:32:46,202 - yfinance - DEBUG - params=None
2025-03-24 20:32:46,202 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:46,202 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:46,202 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,202 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:46,203 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:46,203 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,203 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:46,307 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:46,357 - yfinance - DEBUG - response code=200
2025-03-24 20:32:46,358 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:46,358 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:46,359 - yfinance_client - INFO - Found 21 expiration dates for PLTR
2025-03-24 20:32:46,360 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:32:46,360 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:46,360 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:46,361 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1743120000
2025-03-24 20:32:46,361 - yfinance - DEBUG - params=None
2025-03-24 20:32:46,361 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:46,361 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:46,361 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,362 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:46,362 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:46,362 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,362 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:46,499 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:46,501 - yfinance - DEBUG - response code=200
2025-03-24 20:32:46,502 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:46,502 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:46,506 - yfinance_client - INFO - Retrieved 93 calls and 86 puts
2025-03-24 20:32:46,591 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:32:46,592 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:46,592 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:46,592 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1743724800
2025-03-24 20:32:46,592 - yfinance - DEBUG - params=None
2025-03-24 20:32:46,593 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:46,593 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:46,593 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,593 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:46,593 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:46,593 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:46,594 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:46,702 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:47,010 - yfinance - DEBUG - response code=200
2025-03-24 20:32:47,010 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:47,010 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:47,014 - yfinance_client - INFO - Retrieved 92 calls and 84 puts
2025-03-24 20:32:47,099 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:32:47,099 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:47,100 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:47,100 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1744329600
2025-03-24 20:32:47,100 - yfinance - DEBUG - params=None
2025-03-24 20:32:47,100 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:47,100 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:47,101 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:47,101 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:47,101 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:47,101 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:47,101 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:47,192 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:47,193 - yfinance - DEBUG - response code=200
2025-03-24 20:32:47,193 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:47,193 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:47,197 - yfinance_client - INFO - Retrieved 53 calls and 52 puts
2025-03-24 20:32:47,250 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:32:47,251 - yfinance - DEBUG - Entering get()
2025-03-24 20:32:47,251 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:32:47,251 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1744848000
2025-03-24 20:32:47,251 - yfinance - DEBUG - params=None
2025-03-24 20:32:47,251 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:32:47,252 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:47,252 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:47,252 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:47,252 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:47,252 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:47,253 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:32:47,369 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:32:47,369 - yfinance - DEBUG - response code=200
2025-03-24 20:32:47,369 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:32:47,370 - yfinance - DEBUG - Exiting get()
2025-03-24 20:32:47,373 - yfinance_client - INFO - Retrieved 65 calls and 64 puts
2025-03-24 20:32:47,439 - yfinance_client - INFO - Successfully fetched 4 option chains for PLTR
2025-03-24 20:32:47,440 - __main__ - INFO - Step 3: Preparing analysis data for PLTR...
2025-03-24 20:32:47,440 - __main__ - INFO - Step 4: Processing options data for PLTR...
2025-03-24 20:32:47,440 - __main__ - INFO - Found 4 expiration dates for PLTR
2025-03-24 20:32:47,440 - __main__ - INFO - Processing expiration date 2025-03-28 for PLTR...
2025-03-24 20:32:47,441 - __main__ - DEBUG - ATM calls shape before filtering: (93, 19)
2025-03-24 20:32:47,441 - __main__ - DEBUG - ATM puts shape before filtering: (86, 19)
2025-03-24 20:32:47,442 - __main__ - DEBUG - ATM calls shape after filtering: (10, 19)
2025-03-24 20:32:47,442 - __main__ - DEBUG - ATM puts shape after filtering: (10, 19)
2025-03-24 20:32:47,443 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:32:47,443 - __main__ - DEBUG - ATM call for PLTR: strike=97.0
2025-03-24 20:32:47,444 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:32:47,444 - __main__ - DEBUG - ATM put for PLTR: strike=97.0
2025-03-24 20:32:47,444 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:32:47,445 - __main__ - DEBUG - Volume data for PLTR: calls=294092, puts=175401
2025-03-24 20:32:47,445 - __main__ - INFO - Successfully processed expiration 2025-03-28 for PLTR
2025-03-24 20:32:47,445 - __main__ - INFO - Processing expiration date 2025-04-04 for PLTR...
2025-03-24 20:32:47,446 - __main__ - DEBUG - ATM calls shape before filtering: (92, 19)
2025-03-24 20:32:47,446 - __main__ - DEBUG - ATM puts shape before filtering: (84, 19)
2025-03-24 20:32:47,447 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:32:47,447 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:32:47,447 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:32:47,448 - __main__ - DEBUG - ATM call for PLTR: strike=97.0
2025-03-24 20:32:47,448 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:32:47,449 - __main__ - DEBUG - ATM put for PLTR: strike=97.0
2025-03-24 20:32:47,449 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:32:47,450 - __main__ - DEBUG - Volume data for PLTR: calls=54135, puts=26893
2025-03-24 20:32:47,450 - __main__ - INFO - Successfully processed expiration 2025-04-04 for PLTR
2025-03-24 20:32:47,450 - __main__ - INFO - Processing expiration date 2025-04-11 for PLTR...
2025-03-24 20:32:47,451 - __main__ - DEBUG - ATM calls shape before filtering: (53, 19)
2025-03-24 20:32:47,451 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:32:47,451 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:32:47,452 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:32:47,452 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:32:47,453 - __main__ - DEBUG - ATM call for PLTR: strike=97.0
2025-03-24 20:32:47,453 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:32:47,454 - __main__ - DEBUG - ATM put for PLTR: strike=97.0
2025-03-24 20:32:47,454 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:32:47,454 - __main__ - DEBUG - Volume data for PLTR: calls=15066, puts=5909
2025-03-24 20:32:47,454 - __main__ - INFO - Successfully processed expiration 2025-04-11 for PLTR
2025-03-24 20:32:47,455 - __main__ - INFO - Processing expiration date 2025-04-17 for PLTR...
2025-03-24 20:32:47,455 - __main__ - DEBUG - ATM calls shape before filtering: (65, 19)
2025-03-24 20:32:47,455 - __main__ - DEBUG - ATM puts shape before filtering: (64, 19)
2025-03-24 20:32:47,456 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:32:47,456 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:32:47,457 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:32:47,457 - __main__ - DEBUG - ATM call for PLTR: strike=95.0
2025-03-24 20:32:47,457 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:32:47,458 - __main__ - DEBUG - ATM put for PLTR: strike=95.0
2025-03-24 20:32:47,458 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:32:47,459 - __main__ - DEBUG - Volume data for PLTR: calls=54319, puts=33563
2025-03-24 20:32:47,459 - __main__ - INFO - Successfully processed expiration 2025-04-17 for PLTR
2025-03-24 20:32:47,459 - __main__ - INFO - Step 5: Generating analysis for PLTR...
2025-03-24 20:32:47,459 - __main__ - DEBUG - Calling get_stock_analysis_prompt for PLTR with args: stock_analysis_data, market_context
2025-03-24 20:32:59,121 - __main__ - INFO - Market alignment for PLTR: contrary
2025-03-24 20:32:59,121 - __main__ - INFO - Creating stock analysis result for PLTR...
2025-03-24 20:32:59,121 - __main__ - INFO - Successfully added PLTR to stock analyses
2025-03-24 20:32:59,122 - __main__ - INFO - Updating Notion with analysis for PLTR...
2025-03-24 20:32:59,122 - __main__ - INFO - Sending Discord notification for PLTR...
2025-03-24 20:32:59,122 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2506 chars). Splitting into parts.
2025-03-24 20:32:59,123 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:59,556 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:59,557 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:59,558 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:32:59,830 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:32:59,831 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:32:59,832 - __main__ - INFO - Successfully sent Discord notification for PLTR
2025-03-24 20:32:59,832 - __main__ - INFO - Analyzing HOOD...
2025-03-24 20:32:59,832 - __main__ - INFO - Step 1: Getting stock data for HOOD...
2025-03-24 20:32:59,832 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:59,832 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:59,833 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:59,833 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 20:32:59,833 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:59,833 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:59,834 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:59,834 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:59,834 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 20:32:59,834 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:59,834 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:59,834 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:59,835 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:59,835 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:59,835 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:59,835 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:59,835 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:59,909 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1711
2025-03-24 20:32:59,909 - yfinance - DEBUG - response code=200
2025-03-24 20:32:59,909 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:59,910 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:59,911 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:32:59,915 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:59,917 - yfinance - DEBUG - HOOD: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:59,921 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:32:59,921 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:59,921 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:59,923 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:59,923 - yfinance_client - INFO - Downloaded data for HOOD, shape: (35, 5)
2025-03-24 20:32:59,923 - yfinance - DEBUG - Entering download()
2025-03-24 20:32:59,924 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:32:59,924 - yfinance - DEBUG -  Entering history()
2025-03-24 20:32:59,924 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 20:32:59,924 - yfinance - DEBUG -   Entering history()
2025-03-24 20:32:59,925 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:59,925 - yfinance - DEBUG -    Entering get()
2025-03-24 20:32:59,925 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:32:59,925 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 20:32:59,926 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:32:59,926 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:32:59,926 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:32:59,926 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:32:59,926 - yfinance - DEBUG - reusing cookie
2025-03-24 20:32:59,927 - yfinance - DEBUG - reusing crumb
2025-03-24 20:32:59,927 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:32:59,927 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:32:59,979 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2227
2025-03-24 20:32:59,980 - yfinance - DEBUG - response code=200
2025-03-24 20:32:59,980 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:32:59,981 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:32:59,982 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:32:59,983 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:32:59,985 - yfinance - DEBUG - HOOD: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:59,988 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:32:59,989 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:32:59,989 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:32:59,991 - yfinance - DEBUG - Exiting download()
2025-03-24 20:32:59,991 - yfinance_client - INFO - Downloaded data for HOOD, shape: (59, 5)
2025-03-24 20:32:59,997 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:33:00,000 - __main__ - INFO - Step 2: Getting options chain data for HOOD...
2025-03-24 20:33:00,000 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for HOOD
2025-03-24 20:33:00,000 - yfinance - DEBUG - Entering history()
2025-03-24 20:33:00,000 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 20:33:00,000 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:00,000 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:00,001 - yfinance - DEBUG -   Entering get()
2025-03-24 20:33:00,001 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:33:00,001 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 20:33:00,001 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:00,002 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:33:00,002 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:00,002 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,002 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:00,002 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:00,002 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,003 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:33:00,051 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1204
2025-03-24 20:33:00,052 - yfinance - DEBUG - response code=200
2025-03-24 20:33:00,052 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:33:00,052 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:33:00,053 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:33:00,054 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:33:00,056 - yfinance - DEBUG - HOOD: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:00,059 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:00,060 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:00,060 - yfinance - DEBUG - Exiting history()
2025-03-24 20:33:00,060 - yfinance_client - INFO - Current price of HOOD: $48.36
2025-03-24 20:33:00,060 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:00,060 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:00,061 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD
2025-03-24 20:33:00,061 - yfinance - DEBUG - params=None
2025-03-24 20:33:00,061 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:00,061 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:00,061 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,061 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:00,062 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:00,062 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,062 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:00,146 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:00,164 - yfinance - DEBUG - response code=200
2025-03-24 20:33:00,164 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:00,165 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:00,166 - yfinance_client - INFO - Found 15 expiration dates for HOOD
2025-03-24 20:33:00,166 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:33:00,167 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:00,167 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:00,167 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1743120000
2025-03-24 20:33:00,168 - yfinance - DEBUG - params=None
2025-03-24 20:33:00,168 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:00,168 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:00,168 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,169 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:00,169 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:00,169 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,169 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:00,259 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:00,261 - yfinance - DEBUG - response code=200
2025-03-24 20:33:00,261 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:00,261 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:00,265 - yfinance_client - INFO - Retrieved 91 calls and 77 puts
2025-03-24 20:33:00,347 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:33:00,347 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:00,348 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:00,348 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1743724800
2025-03-24 20:33:00,348 - yfinance - DEBUG - params=None
2025-03-24 20:33:00,349 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:00,349 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:00,349 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,349 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:00,349 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:00,350 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,350 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:00,430 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:00,431 - yfinance - DEBUG - response code=200
2025-03-24 20:33:00,431 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:00,431 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:00,435 - yfinance_client - INFO - Retrieved 77 calls and 63 puts
2025-03-24 20:33:00,507 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:33:00,507 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:00,507 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:00,508 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1744329600
2025-03-24 20:33:00,508 - yfinance - DEBUG - params=None
2025-03-24 20:33:00,508 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:00,508 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:00,510 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,510 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:00,510 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:00,510 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,510 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:00,584 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:00,585 - yfinance - DEBUG - response code=200
2025-03-24 20:33:00,585 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:00,585 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:00,588 - yfinance_client - INFO - Retrieved 48 calls and 43 puts
2025-03-24 20:33:00,635 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:33:00,636 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:00,636 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:00,636 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1744848000
2025-03-24 20:33:00,636 - yfinance - DEBUG - params=None
2025-03-24 20:33:00,637 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:00,637 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:00,637 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,637 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:00,637 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:00,637 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:00,638 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:00,726 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:00,727 - yfinance - DEBUG - response code=200
2025-03-24 20:33:00,727 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:00,727 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:00,731 - yfinance_client - INFO - Retrieved 43 calls and 40 puts
2025-03-24 20:33:00,773 - yfinance_client - INFO - Successfully fetched 4 option chains for HOOD
2025-03-24 20:33:00,774 - __main__ - INFO - Step 3: Preparing analysis data for HOOD...
2025-03-24 20:33:00,774 - __main__ - INFO - Step 4: Processing options data for HOOD...
2025-03-24 20:33:00,774 - __main__ - INFO - Found 4 expiration dates for HOOD
2025-03-24 20:33:00,774 - __main__ - INFO - Processing expiration date 2025-03-28 for HOOD...
2025-03-24 20:33:00,775 - __main__ - DEBUG - ATM calls shape before filtering: (91, 19)
2025-03-24 20:33:00,775 - __main__ - DEBUG - ATM puts shape before filtering: (77, 19)
2025-03-24 20:33:00,776 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:33:00,776 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:33:00,777 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:33:00,777 - __main__ - DEBUG - ATM call for HOOD: strike=48.5
2025-03-24 20:33:00,777 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:33:00,778 - __main__ - DEBUG - ATM put for HOOD: strike=48.5
2025-03-24 20:33:00,778 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:33:00,779 - __main__ - DEBUG - Volume data for HOOD: calls=111032, puts=55368
2025-03-24 20:33:00,779 - __main__ - INFO - Successfully processed expiration 2025-03-28 for HOOD
2025-03-24 20:33:00,779 - __main__ - INFO - Processing expiration date 2025-04-04 for HOOD...
2025-03-24 20:33:00,780 - __main__ - DEBUG - ATM calls shape before filtering: (77, 19)
2025-03-24 20:33:00,780 - __main__ - DEBUG - ATM puts shape before filtering: (63, 19)
2025-03-24 20:33:00,780 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:33:00,782 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:33:00,782 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:33:00,783 - __main__ - DEBUG - ATM call for HOOD: strike=48.0
2025-03-24 20:33:00,783 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:33:00,784 - __main__ - DEBUG - ATM put for HOOD: strike=48.0
2025-03-24 20:33:00,784 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:33:00,785 - __main__ - DEBUG - Volume data for HOOD: calls=25872, puts=14793
2025-03-24 20:33:00,785 - __main__ - INFO - Successfully processed expiration 2025-04-04 for HOOD
2025-03-24 20:33:00,785 - __main__ - INFO - Processing expiration date 2025-04-11 for HOOD...
2025-03-24 20:33:00,785 - __main__ - DEBUG - ATM calls shape before filtering: (48, 19)
2025-03-24 20:33:00,786 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:33:00,786 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:33:00,787 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:33:00,787 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:33:00,787 - __main__ - DEBUG - ATM call for HOOD: strike=48.0
2025-03-24 20:33:00,788 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:33:00,788 - __main__ - DEBUG - ATM put for HOOD: strike=48.0
2025-03-24 20:33:00,788 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:33:00,789 - __main__ - DEBUG - Volume data for HOOD: calls=7506, puts=6348
2025-03-24 20:33:00,789 - __main__ - INFO - Successfully processed expiration 2025-04-11 for HOOD
2025-03-24 20:33:00,789 - __main__ - INFO - Processing expiration date 2025-04-17 for HOOD...
2025-03-24 20:33:00,790 - __main__ - DEBUG - ATM calls shape before filtering: (43, 19)
2025-03-24 20:33:00,790 - __main__ - DEBUG - ATM puts shape before filtering: (40, 19)
2025-03-24 20:33:00,791 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:33:00,791 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:33:00,791 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:33:00,792 - __main__ - DEBUG - ATM call for HOOD: strike=48.0
2025-03-24 20:33:00,792 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:33:00,793 - __main__ - DEBUG - ATM put for HOOD: strike=48.0
2025-03-24 20:33:00,793 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:33:00,793 - __main__ - DEBUG - Volume data for HOOD: calls=36193, puts=20351
2025-03-24 20:33:00,793 - __main__ - INFO - Successfully processed expiration 2025-04-17 for HOOD
2025-03-24 20:33:00,794 - __main__ - INFO - Step 5: Generating analysis for HOOD...
2025-03-24 20:33:00,794 - __main__ - DEBUG - Calling get_stock_analysis_prompt for HOOD with args: stock_analysis_data, market_context
2025-03-24 20:33:12,892 - __main__ - INFO - Market alignment for HOOD: contrary
2025-03-24 20:33:12,893 - __main__ - INFO - Creating stock analysis result for HOOD...
2025-03-24 20:33:12,893 - __main__ - INFO - Successfully added HOOD to stock analyses
2025-03-24 20:33:12,893 - __main__ - INFO - Updating Notion with analysis for HOOD...
2025-03-24 20:33:12,894 - __main__ - INFO - Sending Discord notification for HOOD...
2025-03-24 20:33:12,894 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2636 chars). Splitting into parts.
2025-03-24 20:33:12,895 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:13,159 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:13,160 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:13,162 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:13,407 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:13,408 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:13,408 - __main__ - INFO - Successfully sent Discord notification for HOOD
2025-03-24 20:33:13,409 - __main__ - INFO - Analyzing TSLL...
2025-03-24 20:33:13,409 - __main__ - INFO - Step 1: Getting stock data for TSLL...
2025-03-24 20:33:13,409 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:13,409 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:13,409 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:13,410 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 20:33:13,410 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:13,410 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:13,410 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:13,411 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:13,411 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 20:33:13,411 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:13,411 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:13,411 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:13,412 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,412 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:13,412 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:13,412 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,412 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:13,491 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1791
2025-03-24 20:33:13,492 - yfinance - DEBUG - response code=200
2025-03-24 20:33:13,492 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:13,492 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:13,493 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:33:13,500 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:13,502 - yfinance - DEBUG - TSLL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:13,507 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:13,507 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:13,507 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:13,509 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:13,509 - yfinance_client - INFO - Downloaded data for TSLL, shape: (35, 5)
2025-03-24 20:33:13,509 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:13,509 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:13,510 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:13,510 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 20:33:13,510 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:13,511 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:13,511 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:13,511 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:13,511 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 20:33:13,512 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:13,512 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:13,512 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:13,512 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,512 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:13,513 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:13,513 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,513 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:13,571 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2257
2025-03-24 20:33:13,572 - yfinance - DEBUG - response code=200
2025-03-24 20:33:13,572 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:13,572 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:13,574 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:33:13,574 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:33:13,577 - yfinance - DEBUG - TSLL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:13,581 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:13,581 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:13,582 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:13,583 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:13,584 - yfinance_client - INFO - Downloaded data for TSLL, shape: (59, 5)
2025-03-24 20:33:13,589 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:33:13,592 - __main__ - INFO - Step 2: Getting options chain data for TSLL...
2025-03-24 20:33:13,592 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for TSLL
2025-03-24 20:33:13,592 - yfinance - DEBUG - Entering history()
2025-03-24 20:33:13,592 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 20:33:13,593 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:13,593 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:13,593 - yfinance - DEBUG -   Entering get()
2025-03-24 20:33:13,594 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:33:13,594 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 20:33:13,594 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:13,594 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:33:13,595 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:13,595 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,595 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:13,595 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:13,595 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,595 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:33:13,652 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1217
2025-03-24 20:33:13,653 - yfinance - DEBUG - response code=200
2025-03-24 20:33:13,653 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:33:13,653 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:33:13,654 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:33:13,655 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:33:13,657 - yfinance - DEBUG - TSLL: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:13,661 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:13,661 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:13,662 - yfinance - DEBUG - Exiting history()
2025-03-24 20:33:13,662 - yfinance_client - INFO - Current price of TSLL: $11.16
2025-03-24 20:33:13,662 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:13,662 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:13,662 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL
2025-03-24 20:33:13,663 - yfinance - DEBUG - params=None
2025-03-24 20:33:13,663 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:13,663 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:13,663 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,663 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:13,664 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:13,664 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,664 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:13,761 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:13,762 - yfinance - DEBUG - response code=200
2025-03-24 20:33:13,762 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:13,762 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:13,763 - yfinance_client - INFO - Found 11 expiration dates for TSLL
2025-03-24 20:33:13,764 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:33:13,764 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:13,764 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:13,764 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1743120000
2025-03-24 20:33:13,765 - yfinance - DEBUG - params=None
2025-03-24 20:33:13,765 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:13,765 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:13,765 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,765 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:13,765 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:13,766 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,766 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:13,852 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:13,853 - yfinance - DEBUG - response code=200
2025-03-24 20:33:13,853 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:13,853 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:13,857 - yfinance_client - INFO - Retrieved 58 calls and 58 puts
2025-03-24 20:33:13,915 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:33:13,916 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:13,916 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:13,916 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1743724800
2025-03-24 20:33:13,916 - yfinance - DEBUG - params=None
2025-03-24 20:33:13,916 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:13,917 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:13,917 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,917 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:13,917 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:13,917 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:13,917 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:13,991 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:13,992 - yfinance - DEBUG - response code=200
2025-03-24 20:33:13,992 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:13,993 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:13,996 - yfinance_client - INFO - Retrieved 52 calls and 52 puts
2025-03-24 20:33:14,050 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:33:14,050 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:14,051 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:14,051 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1744329600
2025-03-24 20:33:14,051 - yfinance - DEBUG - params=None
2025-03-24 20:33:14,051 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:14,052 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:14,052 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:14,052 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:14,052 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:14,052 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:14,052 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:14,121 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:14,122 - yfinance - DEBUG - response code=200
2025-03-24 20:33:14,122 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:14,122 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:14,125 - yfinance_client - INFO - Retrieved 37 calls and 37 puts
2025-03-24 20:33:14,165 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:33:14,165 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:14,165 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:14,166 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1744848000
2025-03-24 20:33:14,166 - yfinance - DEBUG - params=None
2025-03-24 20:33:14,166 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:14,166 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:14,166 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:14,167 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:14,167 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:14,167 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:14,167 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:14,235 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:14,236 - yfinance - DEBUG - response code=200
2025-03-24 20:33:14,236 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:14,236 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:14,239 - yfinance_client - INFO - Retrieved 28 calls and 29 puts
2025-03-24 20:33:14,270 - yfinance_client - INFO - Successfully fetched 4 option chains for TSLL
2025-03-24 20:33:14,270 - __main__ - INFO - Step 3: Preparing analysis data for TSLL...
2025-03-24 20:33:14,271 - __main__ - INFO - Step 4: Processing options data for TSLL...
2025-03-24 20:33:14,272 - __main__ - INFO - Found 4 expiration dates for TSLL
2025-03-24 20:33:14,272 - __main__ - INFO - Processing expiration date 2025-03-28 for TSLL...
2025-03-24 20:33:14,272 - __main__ - DEBUG - ATM calls shape before filtering: (58, 19)
2025-03-24 20:33:14,273 - __main__ - DEBUG - ATM puts shape before filtering: (58, 19)
2025-03-24 20:33:14,273 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:14,274 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:14,274 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:33:14,274 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:33:14,275 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:33:14,275 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:33:14,275 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:33:14,276 - __main__ - DEBUG - Volume data for TSLL: calls=85831, puts=59670
2025-03-24 20:33:14,276 - __main__ - INFO - Successfully processed expiration 2025-03-28 for TSLL
2025-03-24 20:33:14,277 - __main__ - INFO - Processing expiration date 2025-04-04 for TSLL...
2025-03-24 20:33:14,277 - __main__ - DEBUG - ATM calls shape before filtering: (52, 19)
2025-03-24 20:33:14,277 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:33:14,278 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:14,278 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:14,279 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:33:14,279 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:33:14,279 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:33:14,280 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:33:14,280 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:33:14,281 - __main__ - DEBUG - Volume data for TSLL: calls=27211, puts=23776
2025-03-24 20:33:14,281 - __main__ - INFO - Successfully processed expiration 2025-04-04 for TSLL
2025-03-24 20:33:14,281 - __main__ - INFO - Processing expiration date 2025-04-11 for TSLL...
2025-03-24 20:33:14,282 - __main__ - DEBUG - ATM calls shape before filtering: (37, 19)
2025-03-24 20:33:14,282 - __main__ - DEBUG - ATM puts shape before filtering: (37, 19)
2025-03-24 20:33:14,282 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:14,283 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:14,283 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:33:14,284 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:33:14,284 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:33:14,285 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:33:14,285 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:33:14,286 - __main__ - DEBUG - Volume data for TSLL: calls=6504, puts=2876
2025-03-24 20:33:14,286 - __main__ - INFO - Successfully processed expiration 2025-04-11 for TSLL
2025-03-24 20:33:14,286 - __main__ - INFO - Processing expiration date 2025-04-17 for TSLL...
2025-03-24 20:33:14,286 - __main__ - DEBUG - ATM calls shape before filtering: (28, 19)
2025-03-24 20:33:14,287 - __main__ - DEBUG - ATM puts shape before filtering: (29, 19)
2025-03-24 20:33:14,287 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:33:14,288 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:33:14,288 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:33:14,288 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:33:14,289 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:33:14,289 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:33:14,289 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:33:14,290 - __main__ - DEBUG - Volume data for TSLL: calls=13620, puts=8091
2025-03-24 20:33:14,290 - __main__ - INFO - Successfully processed expiration 2025-04-17 for TSLL
2025-03-24 20:33:14,290 - __main__ - INFO - Step 5: Generating analysis for TSLL...
2025-03-24 20:33:14,290 - __main__ - DEBUG - Calling get_stock_analysis_prompt for TSLL with args: stock_analysis_data, market_context
2025-03-24 20:33:27,214 - __main__ - INFO - Market alignment for TSLL: **
2025-03-24 20:33:27,214 - __main__ - INFO - Creating stock analysis result for TSLL...
2025-03-24 20:33:27,215 - __main__ - INFO - Successfully added TSLL to stock analyses
2025-03-24 20:33:27,215 - __main__ - INFO - Updating Notion with analysis for TSLL...
2025-03-24 20:33:27,215 - __main__ - INFO - Sending Discord notification for TSLL...
2025-03-24 20:33:27,215 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2698 chars). Splitting into parts.
2025-03-24 20:33:27,216 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:27,544 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:27,545 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:27,546 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:27,855 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:27,856 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:27,857 - __main__ - INFO - Successfully sent Discord notification for TSLL
2025-03-24 20:33:27,857 - __main__ - INFO - Analyzing BBAI...
2025-03-24 20:33:27,857 - __main__ - INFO - Step 1: Getting stock data for BBAI...
2025-03-24 20:33:27,857 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:27,857 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:27,858 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:27,858 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 20:33:27,858 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:27,858 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:27,859 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:27,859 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:27,859 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 20:33:27,859 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:27,859 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:27,860 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:27,860 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:27,860 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:27,860 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:27,860 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:27,860 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:27,934 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1589
2025-03-24 20:33:27,935 - yfinance - DEBUG - response code=200
2025-03-24 20:33:27,935 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:27,936 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:27,936 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:33:27,941 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:27,943 - yfinance - DEBUG - BBAI: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:27,947 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:27,947 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:27,947 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:27,949 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:27,949 - yfinance_client - INFO - Downloaded data for BBAI, shape: (35, 5)
2025-03-24 20:33:27,949 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:27,949 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:27,949 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:27,950 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 20:33:27,950 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:27,950 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:27,950 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:27,951 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:27,951 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 20:33:27,951 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:27,951 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:27,951 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:27,951 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:27,952 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:27,952 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:27,952 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:27,952 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:28,004 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2159
2025-03-24 20:33:28,005 - yfinance - DEBUG - response code=200
2025-03-24 20:33:28,005 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:28,005 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:28,006 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:33:28,007 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:33:28,009 - yfinance - DEBUG - BBAI: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:28,013 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:28,013 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:28,013 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:28,015 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:28,015 - yfinance_client - INFO - Downloaded data for BBAI, shape: (59, 5)
2025-03-24 20:33:28,021 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:33:28,024 - __main__ - INFO - Step 2: Getting options chain data for BBAI...
2025-03-24 20:33:28,024 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BBAI
2025-03-24 20:33:28,025 - yfinance - DEBUG - Entering history()
2025-03-24 20:33:28,025 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 20:33:28,025 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:28,025 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:28,026 - yfinance - DEBUG -   Entering get()
2025-03-24 20:33:28,026 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:33:28,026 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 20:33:28,026 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:28,026 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:33:28,027 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:28,027 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,027 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:28,027 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:28,027 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,027 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:33:28,078 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1195
2025-03-24 20:33:28,078 - yfinance - DEBUG - response code=200
2025-03-24 20:33:28,078 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:33:28,079 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:33:28,079 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:33:28,080 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:33:28,082 - yfinance - DEBUG - BBAI: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:28,086 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:28,086 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:28,087 - yfinance - DEBUG - Exiting history()
2025-03-24 20:33:28,087 - yfinance_client - INFO - Current price of BBAI: $3.54
2025-03-24 20:33:28,087 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:28,087 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:28,087 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI
2025-03-24 20:33:28,088 - yfinance - DEBUG - params=None
2025-03-24 20:33:28,088 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:28,088 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:28,088 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,088 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:28,088 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:28,088 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,088 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:28,153 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:28,154 - yfinance - DEBUG - response code=200
2025-03-24 20:33:28,154 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:28,154 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:28,154 - yfinance_client - INFO - Found 11 expiration dates for BBAI
2025-03-24 20:33:28,155 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:33:28,155 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:28,155 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:28,155 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1743120000
2025-03-24 20:33:28,156 - yfinance - DEBUG - params=None
2025-03-24 20:33:28,156 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:28,156 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:28,156 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,156 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:28,156 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:28,157 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,157 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:28,218 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:28,219 - yfinance - DEBUG - response code=200
2025-03-24 20:33:28,219 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:28,220 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:28,223 - yfinance_client - INFO - Retrieved 29 calls and 28 puts
2025-03-24 20:33:28,253 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:33:28,253 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:28,253 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:28,253 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1743724800
2025-03-24 20:33:28,254 - yfinance - DEBUG - params=None
2025-03-24 20:33:28,254 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:28,254 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:28,254 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,254 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:28,255 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:28,255 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,255 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:28,320 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:28,321 - yfinance - DEBUG - response code=200
2025-03-24 20:33:28,321 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:28,321 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:28,324 - yfinance_client - INFO - Retrieved 32 calls and 22 puts
2025-03-24 20:33:28,353 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:33:28,354 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:28,354 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:28,354 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1744329600
2025-03-24 20:33:28,354 - yfinance - DEBUG - params=None
2025-03-24 20:33:28,354 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:28,355 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:28,355 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,355 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:28,355 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:28,355 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,356 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:28,417 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:28,418 - yfinance - DEBUG - response code=200
2025-03-24 20:33:28,418 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:28,418 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:28,421 - yfinance_client - INFO - Retrieved 20 calls and 18 puts
2025-03-24 20:33:28,443 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:33:28,443 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:28,443 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:28,444 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1744848000
2025-03-24 20:33:28,444 - yfinance - DEBUG - params=None
2025-03-24 20:33:28,444 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:28,444 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:28,444 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,444 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:28,445 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:28,445 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:28,445 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:28,506 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:28,507 - yfinance - DEBUG - response code=200
2025-03-24 20:33:28,507 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:28,507 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:28,510 - yfinance_client - INFO - Retrieved 24 calls and 24 puts
2025-03-24 20:33:28,537 - yfinance_client - INFO - Successfully fetched 4 option chains for BBAI
2025-03-24 20:33:28,537 - __main__ - INFO - Step 3: Preparing analysis data for BBAI...
2025-03-24 20:33:28,538 - __main__ - INFO - Step 4: Processing options data for BBAI...
2025-03-24 20:33:28,538 - __main__ - INFO - Found 4 expiration dates for BBAI
2025-03-24 20:33:28,538 - __main__ - INFO - Processing expiration date 2025-03-28 for BBAI...
2025-03-24 20:33:28,539 - __main__ - DEBUG - ATM calls shape before filtering: (29, 19)
2025-03-24 20:33:28,539 - __main__ - DEBUG - ATM puts shape before filtering: (28, 19)
2025-03-24 20:33:28,539 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:33:28,540 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:33:28,540 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:33:28,541 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:33:28,541 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:33:28,541 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:33:28,542 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:33:28,542 - __main__ - DEBUG - Volume data for BBAI: calls=25149, puts=2938
2025-03-24 20:33:28,542 - __main__ - INFO - Successfully processed expiration 2025-03-28 for BBAI
2025-03-24 20:33:28,543 - __main__ - INFO - Processing expiration date 2025-04-04 for BBAI...
2025-03-24 20:33:28,543 - __main__ - DEBUG - ATM calls shape before filtering: (32, 19)
2025-03-24 20:33:28,543 - __main__ - DEBUG - ATM puts shape before filtering: (22, 19)
2025-03-24 20:33:28,544 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:33:28,545 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:33:28,545 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:33:28,545 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:33:28,545 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:33:28,546 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:33:28,546 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:33:28,546 - __main__ - DEBUG - Volume data for BBAI: calls=12708, puts=1231
2025-03-24 20:33:28,547 - __main__ - INFO - Successfully processed expiration 2025-04-04 for BBAI
2025-03-24 20:33:28,547 - __main__ - INFO - Processing expiration date 2025-04-11 for BBAI...
2025-03-24 20:33:28,547 - __main__ - DEBUG - ATM calls shape before filtering: (20, 19)
2025-03-24 20:33:28,547 - __main__ - DEBUG - ATM puts shape before filtering: (18, 19)
2025-03-24 20:33:28,548 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:33:28,548 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:33:28,549 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:33:28,549 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:33:28,550 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:33:28,550 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:33:28,551 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:33:28,551 - __main__ - DEBUG - Volume data for BBAI: calls=2876, puts=636
2025-03-24 20:33:28,551 - __main__ - INFO - Successfully processed expiration 2025-04-11 for BBAI
2025-03-24 20:33:28,551 - __main__ - INFO - Processing expiration date 2025-04-17 for BBAI...
2025-03-24 20:33:28,552 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:33:28,552 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:33:28,553 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:33:28,553 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:33:28,553 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:33:28,554 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:33:28,554 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:33:28,555 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:33:28,555 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:33:28,555 - __main__ - DEBUG - Volume data for BBAI: calls=5327, puts=1941
2025-03-24 20:33:28,556 - __main__ - INFO - Successfully processed expiration 2025-04-17 for BBAI
2025-03-24 20:33:28,556 - __main__ - INFO - Step 5: Generating analysis for BBAI...
2025-03-24 20:33:28,556 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BBAI with args: stock_analysis_data, market_context
2025-03-24 20:33:41,155 - __main__ - INFO - Market alignment for BBAI: contrary
2025-03-24 20:33:41,157 - __main__ - INFO - Creating stock analysis result for BBAI...
2025-03-24 20:33:41,157 - __main__ - INFO - Successfully added BBAI to stock analyses
2025-03-24 20:33:41,157 - __main__ - INFO - Updating Notion with analysis for BBAI...
2025-03-24 20:33:41,157 - __main__ - INFO - Sending Discord notification for BBAI...
2025-03-24 20:33:41,158 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2799 chars). Splitting into parts.
2025-03-24 20:33:41,159 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:41,617 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:41,618 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:41,620 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:41,909 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:41,910 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:41,910 - __main__ - INFO - Successfully sent Discord notification for BBAI
2025-03-24 20:33:41,911 - __main__ - INFO - Analyzing SNAP...
2025-03-24 20:33:41,911 - __main__ - INFO - Step 1: Getting stock data for SNAP...
2025-03-24 20:33:41,911 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:41,911 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:41,911 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:41,912 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 20:33:41,912 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:41,912 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:41,913 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:41,913 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:41,913 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 20:33:41,913 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:41,913 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:41,914 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:41,914 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:41,914 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:41,914 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:41,914 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:41,914 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:41,978 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1589
2025-03-24 20:33:41,979 - yfinance - DEBUG - response code=200
2025-03-24 20:33:41,979 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:41,979 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:41,980 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:33:41,985 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:41,987 - yfinance - DEBUG - SNAP: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:41,991 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:41,991 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:41,991 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:41,993 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:41,993 - yfinance_client - INFO - Downloaded data for SNAP, shape: (35, 5)
2025-03-24 20:33:41,993 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:41,994 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:41,994 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:41,994 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 20:33:41,995 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:41,995 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:41,995 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:41,996 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:41,996 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 20:33:41,996 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:41,996 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:41,997 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:41,997 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:41,997 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:41,997 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:41,997 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:41,997 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:42,049 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1998
2025-03-24 20:33:42,050 - yfinance - DEBUG - response code=200
2025-03-24 20:33:42,051 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:42,052 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:42,052 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:33:42,053 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:33:42,055 - yfinance - DEBUG - SNAP: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:42,059 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:42,059 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:42,059 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:42,061 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:42,061 - yfinance_client - INFO - Downloaded data for SNAP, shape: (59, 5)
2025-03-24 20:33:42,067 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:33:42,070 - __main__ - INFO - Step 2: Getting options chain data for SNAP...
2025-03-24 20:33:42,070 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SNAP
2025-03-24 20:33:42,070 - yfinance - DEBUG - Entering history()
2025-03-24 20:33:42,071 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 20:33:42,071 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:42,071 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:42,072 - yfinance - DEBUG -   Entering get()
2025-03-24 20:33:42,072 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:33:42,072 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 20:33:42,073 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:42,073 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:33:42,073 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:42,073 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,073 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:42,073 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:42,073 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,073 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:33:42,128 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1173
2025-03-24 20:33:42,129 - yfinance - DEBUG - response code=200
2025-03-24 20:33:42,129 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:33:42,129 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:33:42,130 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:33:42,131 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:33:42,133 - yfinance - DEBUG - SNAP: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:42,137 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:42,138 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:42,138 - yfinance - DEBUG - Exiting history()
2025-03-24 20:33:42,138 - yfinance_client - INFO - Current price of SNAP: $9.54
2025-03-24 20:33:42,138 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:42,138 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:42,139 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP
2025-03-24 20:33:42,139 - yfinance - DEBUG - params=None
2025-03-24 20:33:42,139 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:42,139 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:42,139 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,139 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:42,140 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:42,140 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,140 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:42,203 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:42,204 - yfinance - DEBUG - response code=200
2025-03-24 20:33:42,204 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:42,204 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:42,205 - yfinance_client - INFO - Found 14 expiration dates for SNAP
2025-03-24 20:33:42,205 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:33:42,205 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:42,206 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:42,206 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1743120000
2025-03-24 20:33:42,206 - yfinance - DEBUG - params=None
2025-03-24 20:33:42,206 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:42,206 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:42,206 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,207 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:42,207 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:42,207 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,207 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:42,270 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:42,271 - yfinance - DEBUG - response code=200
2025-03-24 20:33:42,271 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:42,271 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:42,274 - yfinance_client - INFO - Retrieved 20 calls and 19 puts
2025-03-24 20:33:42,296 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:33:42,297 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:42,297 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:42,297 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1743724800
2025-03-24 20:33:42,297 - yfinance - DEBUG - params=None
2025-03-24 20:33:42,298 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:42,298 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:42,298 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,298 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:42,298 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:42,298 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,298 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:42,417 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:42,417 - yfinance - DEBUG - response code=200
2025-03-24 20:33:42,417 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:42,417 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:42,420 - yfinance_client - INFO - Retrieved 19 calls and 16 puts
2025-03-24 20:33:42,441 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:33:42,441 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:42,441 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:42,441 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1744329600
2025-03-24 20:33:42,442 - yfinance - DEBUG - params=None
2025-03-24 20:33:42,442 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:42,442 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:42,442 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,443 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:42,443 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:42,443 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,443 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:42,519 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:42,520 - yfinance - DEBUG - response code=200
2025-03-24 20:33:42,520 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:42,520 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:42,523 - yfinance_client - INFO - Retrieved 16 calls and 12 puts
2025-03-24 20:33:42,541 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:33:42,541 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:42,542 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:42,542 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1744848000
2025-03-24 20:33:42,542 - yfinance - DEBUG - params=None
2025-03-24 20:33:42,543 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:42,543 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:42,543 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,543 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:42,543 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:42,544 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:42,544 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:42,613 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:42,614 - yfinance - DEBUG - response code=200
2025-03-24 20:33:42,614 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:42,614 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:42,617 - yfinance_client - INFO - Retrieved 24 calls and 21 puts
2025-03-24 20:33:42,642 - yfinance_client - INFO - Successfully fetched 4 option chains for SNAP
2025-03-24 20:33:42,643 - __main__ - INFO - Step 3: Preparing analysis data for SNAP...
2025-03-24 20:33:42,643 - __main__ - INFO - Step 4: Processing options data for SNAP...
2025-03-24 20:33:42,643 - __main__ - INFO - Found 4 expiration dates for SNAP
2025-03-24 20:33:42,643 - __main__ - INFO - Processing expiration date 2025-03-28 for SNAP...
2025-03-24 20:33:42,644 - __main__ - DEBUG - ATM calls shape before filtering: (20, 19)
2025-03-24 20:33:42,644 - __main__ - DEBUG - ATM puts shape before filtering: (19, 19)
2025-03-24 20:33:42,644 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:42,645 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:42,645 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:33:42,646 - __main__ - DEBUG - ATM call for SNAP: strike=9.5
2025-03-24 20:33:42,646 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:33:42,647 - __main__ - DEBUG - ATM put for SNAP: strike=9.5
2025-03-24 20:33:42,647 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:33:42,647 - __main__ - DEBUG - Volume data for SNAP: calls=25555, puts=3066
2025-03-24 20:33:42,648 - __main__ - INFO - Successfully processed expiration 2025-03-28 for SNAP
2025-03-24 20:33:42,648 - __main__ - INFO - Processing expiration date 2025-04-04 for SNAP...
2025-03-24 20:33:42,648 - __main__ - DEBUG - ATM calls shape before filtering: (19, 19)
2025-03-24 20:33:42,649 - __main__ - DEBUG - ATM puts shape before filtering: (16, 19)
2025-03-24 20:33:42,649 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:42,650 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:42,650 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:33:42,651 - __main__ - DEBUG - ATM call for SNAP: strike=9.5
2025-03-24 20:33:42,651 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:33:42,652 - __main__ - DEBUG - ATM put for SNAP: strike=9.5
2025-03-24 20:33:42,652 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:33:42,653 - __main__ - DEBUG - Volume data for SNAP: calls=2584, puts=1132
2025-03-24 20:33:42,653 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SNAP
2025-03-24 20:33:42,653 - __main__ - INFO - Processing expiration date 2025-04-11 for SNAP...
2025-03-24 20:33:42,653 - __main__ - DEBUG - ATM calls shape before filtering: (16, 19)
2025-03-24 20:33:42,654 - __main__ - DEBUG - ATM puts shape before filtering: (12, 19)
2025-03-24 20:33:42,654 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:42,655 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:42,655 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:33:42,656 - __main__ - DEBUG - ATM call for SNAP: strike=9.5
2025-03-24 20:33:42,656 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:33:42,657 - __main__ - DEBUG - ATM put for SNAP: strike=9.5
2025-03-24 20:33:42,657 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:33:42,658 - __main__ - DEBUG - Volume data for SNAP: calls=1042, puts=4486
2025-03-24 20:33:42,658 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SNAP
2025-03-24 20:33:42,658 - __main__ - INFO - Processing expiration date 2025-04-17 for SNAP...
2025-03-24 20:33:42,659 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:33:42,659 - __main__ - DEBUG - ATM puts shape before filtering: (21, 19)
2025-03-24 20:33:42,659 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:33:42,660 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:33:42,660 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:33:42,661 - __main__ - DEBUG - ATM call for SNAP: strike=10.0
2025-03-24 20:33:42,661 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:33:42,661 - __main__ - DEBUG - ATM put for SNAP: strike=10.0
2025-03-24 20:33:42,661 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:33:42,662 - __main__ - DEBUG - Volume data for SNAP: calls=6806, puts=2693
2025-03-24 20:33:42,662 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SNAP
2025-03-24 20:33:42,662 - __main__ - INFO - Step 5: Generating analysis for SNAP...
2025-03-24 20:33:42,663 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SNAP with args: stock_analysis_data, market_context
2025-03-24 20:33:55,039 - __main__ - INFO - Market alignment for SNAP: contrary
2025-03-24 20:33:55,039 - __main__ - INFO - Creating stock analysis result for SNAP...
2025-03-24 20:33:55,039 - __main__ - INFO - Successfully added SNAP to stock analyses
2025-03-24 20:33:55,040 - __main__ - INFO - Updating Notion with analysis for SNAP...
2025-03-24 20:33:55,040 - __main__ - INFO - Sending Discord notification for SNAP...
2025-03-24 20:33:55,040 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2669 chars). Splitting into parts.
2025-03-24 20:33:55,041 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:55,327 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:55,329 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:55,330 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:33:55,610 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:33:55,611 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:33:55,611 - __main__ - INFO - Successfully sent Discord notification for SNAP
2025-03-24 20:33:55,611 - __main__ - INFO - Analyzing QUBT...
2025-03-24 20:33:55,611 - __main__ - INFO - Step 1: Getting stock data for QUBT...
2025-03-24 20:33:55,612 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:55,612 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:55,612 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:55,612 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 20:33:55,613 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:55,613 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:55,613 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:55,613 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:55,613 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 20:33:55,614 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:55,614 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:55,614 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:55,614 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,614 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:55,614 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:55,615 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,615 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:55,728 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1706
2025-03-24 20:33:55,728 - yfinance - DEBUG - response code=200
2025-03-24 20:33:55,728 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:55,729 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:55,730 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:33:55,734 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:55,735 - yfinance - DEBUG - QUBT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:55,739 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:33:55,739 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:55,740 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:55,741 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:55,742 - yfinance_client - INFO - Downloaded data for QUBT, shape: (35, 5)
2025-03-24 20:33:55,742 - yfinance - DEBUG - Entering download()
2025-03-24 20:33:55,742 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:33:55,742 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:55,742 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 20:33:55,743 - yfinance - DEBUG -   Entering history()
2025-03-24 20:33:55,743 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:55,743 - yfinance - DEBUG -    Entering get()
2025-03-24 20:33:55,743 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:33:55,743 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 20:33:55,744 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:55,744 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:33:55,744 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:55,744 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,744 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:55,744 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:55,745 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,745 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:33:55,811 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2188
2025-03-24 20:33:55,811 - yfinance - DEBUG - response code=200
2025-03-24 20:33:55,812 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:33:55,812 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:33:55,813 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:33:55,814 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:33:55,816 - yfinance - DEBUG - QUBT: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:55,820 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:33:55,821 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:33:55,821 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:55,823 - yfinance - DEBUG - Exiting download()
2025-03-24 20:33:55,823 - yfinance_client - INFO - Downloaded data for QUBT, shape: (59, 5)
2025-03-24 20:33:55,833 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:33:55,839 - __main__ - INFO - Step 2: Getting options chain data for QUBT...
2025-03-24 20:33:55,839 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QUBT
2025-03-24 20:33:55,839 - yfinance - DEBUG - Entering history()
2025-03-24 20:33:55,840 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 20:33:55,841 - yfinance - DEBUG -  Entering history()
2025-03-24 20:33:55,841 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:55,841 - yfinance - DEBUG -   Entering get()
2025-03-24 20:33:55,841 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:33:55,842 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 20:33:55,842 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:33:55,842 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:33:55,842 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:55,842 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,843 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:55,843 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:55,843 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,843 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:33:55,897 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1165
2025-03-24 20:33:55,898 - yfinance - DEBUG - response code=200
2025-03-24 20:33:55,898 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:33:55,898 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:33:55,899 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:33:55,900 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:33:55,903 - yfinance - DEBUG - QUBT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:55,908 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:33:55,909 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:33:55,909 - yfinance - DEBUG - Exiting history()
2025-03-24 20:33:55,909 - yfinance_client - INFO - Current price of QUBT: $8.75
2025-03-24 20:33:55,909 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:55,910 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:55,910 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT
2025-03-24 20:33:55,910 - yfinance - DEBUG - params=None
2025-03-24 20:33:55,910 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:55,910 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:55,911 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,911 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:55,911 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:55,911 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,911 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:55,985 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:55,986 - yfinance - DEBUG - response code=200
2025-03-24 20:33:55,986 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:55,986 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:55,987 - yfinance_client - INFO - Found 11 expiration dates for QUBT
2025-03-24 20:33:55,987 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:33:55,987 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:55,988 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:55,988 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1743120000
2025-03-24 20:33:55,988 - yfinance - DEBUG - params=None
2025-03-24 20:33:55,988 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:55,988 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:55,988 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,989 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:55,989 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:55,989 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:55,989 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:56,064 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:56,065 - yfinance - DEBUG - response code=200
2025-03-24 20:33:56,065 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:56,065 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:56,068 - yfinance_client - INFO - Retrieved 35 calls and 31 puts
2025-03-24 20:33:56,104 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:33:56,104 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:56,104 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:56,104 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1743724800
2025-03-24 20:33:56,105 - yfinance - DEBUG - params=None
2025-03-24 20:33:56,105 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:56,105 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:56,105 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:56,105 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:56,105 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:56,106 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:56,106 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:56,174 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:56,174 - yfinance - DEBUG - response code=200
2025-03-24 20:33:56,174 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:56,175 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:56,178 - yfinance_client - INFO - Retrieved 30 calls and 26 puts
2025-03-24 20:33:56,208 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:33:56,208 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:56,208 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:56,208 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1744329600
2025-03-24 20:33:56,209 - yfinance - DEBUG - params=None
2025-03-24 20:33:56,209 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:56,209 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:56,209 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:56,209 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:56,209 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:56,209 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:56,210 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:56,275 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:56,276 - yfinance - DEBUG - response code=200
2025-03-24 20:33:56,276 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:56,276 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:56,279 - yfinance_client - INFO - Retrieved 24 calls and 24 puts
2025-03-24 20:33:56,306 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:33:56,306 - yfinance - DEBUG - Entering get()
2025-03-24 20:33:56,307 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:33:56,307 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1744848000
2025-03-24 20:33:56,308 - yfinance - DEBUG - params=None
2025-03-24 20:33:56,308 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:33:56,308 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:33:56,308 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:33:56,309 - yfinance - DEBUG - reusing cookie
2025-03-24 20:33:56,309 - yfinance - DEBUG - reusing crumb
2025-03-24 20:33:56,309 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:33:56,309 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:33:56,384 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:33:56,385 - yfinance - DEBUG - response code=200
2025-03-24 20:33:56,385 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:33:56,385 - yfinance - DEBUG - Exiting get()
2025-03-24 20:33:56,389 - yfinance_client - INFO - Retrieved 41 calls and 41 puts
2025-03-24 20:33:56,432 - yfinance_client - INFO - Successfully fetched 4 option chains for QUBT
2025-03-24 20:33:56,432 - __main__ - INFO - Step 3: Preparing analysis data for QUBT...
2025-03-24 20:33:56,432 - __main__ - INFO - Step 4: Processing options data for QUBT...
2025-03-24 20:33:56,433 - __main__ - INFO - Found 4 expiration dates for QUBT
2025-03-24 20:33:56,433 - __main__ - INFO - Processing expiration date 2025-03-28 for QUBT...
2025-03-24 20:33:56,434 - __main__ - DEBUG - ATM calls shape before filtering: (35, 19)
2025-03-24 20:33:56,434 - __main__ - DEBUG - ATM puts shape before filtering: (31, 19)
2025-03-24 20:33:56,434 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:56,434 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:56,435 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:33:56,436 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:33:56,436 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:33:56,437 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:33:56,437 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:33:56,437 - __main__ - DEBUG - Volume data for QUBT: calls=23633, puts=12283
2025-03-24 20:33:56,437 - __main__ - INFO - Successfully processed expiration 2025-03-28 for QUBT
2025-03-24 20:33:56,438 - __main__ - INFO - Processing expiration date 2025-04-04 for QUBT...
2025-03-24 20:33:56,438 - __main__ - DEBUG - ATM calls shape before filtering: (30, 19)
2025-03-24 20:33:56,438 - __main__ - DEBUG - ATM puts shape before filtering: (26, 19)
2025-03-24 20:33:56,439 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:56,439 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:56,439 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:33:56,440 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:33:56,440 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:33:56,441 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:33:56,441 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:33:56,441 - __main__ - DEBUG - Volume data for QUBT: calls=6522, puts=5535
2025-03-24 20:33:56,442 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QUBT
2025-03-24 20:33:56,442 - __main__ - INFO - Processing expiration date 2025-04-11 for QUBT...
2025-03-24 20:33:56,443 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:33:56,443 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:33:56,443 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:33:56,444 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:33:56,444 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:33:56,445 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:33:56,445 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:33:56,446 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:33:56,446 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:33:56,446 - __main__ - DEBUG - Volume data for QUBT: calls=2035, puts=5344
2025-03-24 20:33:56,447 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QUBT
2025-03-24 20:33:56,447 - __main__ - INFO - Processing expiration date 2025-04-17 for QUBT...
2025-03-24 20:33:56,447 - __main__ - DEBUG - ATM calls shape before filtering: (41, 19)
2025-03-24 20:33:56,447 - __main__ - DEBUG - ATM puts shape before filtering: (41, 19)
2025-03-24 20:33:56,448 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:33:56,448 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:33:56,448 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:33:56,449 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:33:56,449 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:33:56,450 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:33:56,450 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:33:56,451 - __main__ - DEBUG - Volume data for QUBT: calls=7939, puts=6148
2025-03-24 20:33:56,451 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QUBT
2025-03-24 20:33:56,451 - __main__ - INFO - Step 5: Generating analysis for QUBT...
2025-03-24 20:33:56,452 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QUBT with args: stock_analysis_data, market_context
2025-03-24 20:34:09,758 - __main__ - INFO - Market alignment for QUBT: **
the stock trend is bullish, and the spy trend is also bullish. 
market alignment: aligned
2025-03-24 20:34:09,759 - __main__ - INFO - Creating stock analysis result for QUBT...
2025-03-24 20:34:09,759 - __main__ - INFO - Successfully added QUBT to stock analyses
2025-03-24 20:34:09,759 - __main__ - INFO - Updating Notion with analysis for QUBT...
2025-03-24 20:34:09,760 - __main__ - INFO - Sending Discord notification for QUBT...
2025-03-24 20:34:09,760 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2766 chars). Splitting into parts.
2025-03-24 20:34:09,761 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:10,075 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:10,076 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:10,077 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:10,376 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:10,377 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:10,378 - __main__ - INFO - Successfully sent Discord notification for QUBT
2025-03-24 20:34:10,378 - __main__ - INFO - Analyzing NAK...
2025-03-24 20:34:10,378 - __main__ - INFO - Step 1: Getting stock data for NAK...
2025-03-24 20:34:10,379 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:10,379 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:10,379 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:10,379 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 20:34:10,380 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:10,380 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:10,380 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:10,380 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:10,381 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 20:34:10,381 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:10,381 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:10,381 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:10,382 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,382 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:10,382 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:10,382 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,382 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:10,450 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1786
2025-03-24 20:34:10,450 - yfinance - DEBUG - response code=200
2025-03-24 20:34:10,451 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:10,451 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:10,452 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:34:10,456 - yfinance - DEBUG - NAK: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:10,458 - yfinance - DEBUG - NAK: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:10,462 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:10,463 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:10,463 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:10,465 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:10,465 - yfinance_client - INFO - Downloaded data for NAK, shape: (35, 5)
2025-03-24 20:34:10,465 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:10,465 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:10,465 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:10,466 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 20:34:10,466 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:10,466 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:10,467 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:10,467 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:10,467 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 20:34:10,467 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:10,468 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:10,468 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:10,468 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,468 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:10,468 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:10,468 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,468 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:10,524 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1641
2025-03-24 20:34:10,524 - yfinance - DEBUG - response code=200
2025-03-24 20:34:10,524 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:10,525 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:10,526 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:34:10,526 - yfinance - DEBUG - NAK: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:34:10,528 - yfinance - DEBUG - NAK: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:10,532 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:10,533 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:10,533 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:10,534 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:10,534 - yfinance_client - INFO - Downloaded data for NAK, shape: (59, 5)
2025-03-24 20:34:10,540 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:34:10,543 - __main__ - INFO - Step 2: Getting options chain data for NAK...
2025-03-24 20:34:10,543 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for NAK
2025-03-24 20:34:10,544 - yfinance - DEBUG - Entering history()
2025-03-24 20:34:10,544 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 20:34:10,544 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:10,544 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:10,545 - yfinance - DEBUG -   Entering get()
2025-03-24 20:34:10,545 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:34:10,545 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 20:34:10,545 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:10,545 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:34:10,545 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:10,545 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,545 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:10,546 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:10,546 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,546 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:34:10,604 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1229
2025-03-24 20:34:10,605 - yfinance - DEBUG - response code=200
2025-03-24 20:34:10,605 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:34:10,605 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:34:10,607 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:34:10,608 - yfinance - DEBUG - NAK: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:34:10,610 - yfinance - DEBUG - NAK: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:10,613 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:10,614 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:10,614 - yfinance - DEBUG - Exiting history()
2025-03-24 20:34:10,614 - yfinance_client - INFO - Current price of NAK: $1.16
2025-03-24 20:34:10,614 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:10,614 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:10,615 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NAK
2025-03-24 20:34:10,615 - yfinance - DEBUG - params=None
2025-03-24 20:34:10,615 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:10,615 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:10,615 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,616 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:10,616 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:10,616 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,616 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:10,675 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NAK?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1645
2025-03-24 20:34:10,676 - yfinance - DEBUG - response code=200
2025-03-24 20:34:10,676 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:10,676 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:10,676 - yfinance_client - INFO - Found 4 expiration dates for NAK
2025-03-24 20:34:10,677 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:34:10,677 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:10,677 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:10,677 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NAK?date=1744848000
2025-03-24 20:34:10,677 - yfinance - DEBUG - params=None
2025-03-24 20:34:10,677 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:10,678 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:10,678 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,678 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:10,678 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:10,678 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:10,678 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:10,734 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NAK?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1645
2025-03-24 20:34:10,734 - yfinance - DEBUG - response code=200
2025-03-24 20:34:10,735 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:10,735 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:10,737 - yfinance_client - INFO - Retrieved 4 calls and 3 puts
2025-03-24 20:34:10,744 - yfinance_client - INFO - Successfully fetched 1 option chains for NAK
2025-03-24 20:34:10,744 - __main__ - INFO - Step 3: Preparing analysis data for NAK...
2025-03-24 20:34:10,744 - __main__ - INFO - Step 4: Processing options data for NAK...
2025-03-24 20:34:10,745 - __main__ - INFO - Found 1 expiration dates for NAK
2025-03-24 20:34:10,745 - __main__ - INFO - Processing expiration date 2025-04-17 for NAK...
2025-03-24 20:34:10,745 - __main__ - DEBUG - ATM calls shape before filtering: (4, 19)
2025-03-24 20:34:10,746 - __main__ - DEBUG - ATM puts shape before filtering: (3, 19)
2025-03-24 20:34:10,746 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:34:10,747 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:34:10,747 - __main__ - WARNING - No valid ATM options found for NAK on 2025-04-17
2025-03-24 20:34:10,747 - __main__ - INFO - Step 5: Generating analysis for NAK...
2025-03-24 20:34:10,747 - __main__ - DEBUG - Calling get_stock_analysis_prompt for NAK with args: stock_analysis_data, market_context
2025-03-24 20:34:22,128 - __main__ - INFO - Market alignment for NAK: aligned
2025-03-24 20:34:22,128 - __main__ - INFO - Creating stock analysis result for NAK...
2025-03-24 20:34:22,129 - __main__ - INFO - Successfully added NAK to stock analyses
2025-03-24 20:34:22,129 - __main__ - INFO - Updating Notion with analysis for NAK...
2025-03-24 20:34:22,129 - __main__ - INFO - Sending Discord notification for NAK...
2025-03-24 20:34:22,129 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2453 chars). Splitting into parts.
2025-03-24 20:34:22,130 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:22,383 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:22,384 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:22,385 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:22,685 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:22,685 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:22,686 - __main__ - INFO - Successfully sent Discord notification for NAK
2025-03-24 20:34:22,686 - __main__ - INFO - Analyzing T...
2025-03-24 20:34:22,686 - __main__ - INFO - Step 1: Getting stock data for T...
2025-03-24 20:34:22,686 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:22,686 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:22,686 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:22,687 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 20:34:22,687 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:22,687 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:22,688 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:22,688 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:22,688 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 20:34:22,688 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:22,688 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:22,688 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:22,689 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:22,689 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:22,689 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:22,689 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:22,689 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:22,764 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1499
2025-03-24 20:34:22,765 - yfinance - DEBUG - response code=200
2025-03-24 20:34:22,765 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:22,765 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:22,766 - yfinance - DEBUG - T: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:34:22,770 - yfinance - DEBUG - T: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:22,772 - yfinance - DEBUG - T: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:22,775 - yfinance - DEBUG - T: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:22,776 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:22,776 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:22,778 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:22,778 - yfinance_client - INFO - Downloaded data for T, shape: (35, 5)
2025-03-24 20:34:22,778 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:22,778 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:22,778 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:22,779 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 20:34:22,779 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:22,779 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:22,780 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:22,780 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:22,780 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 20:34:22,780 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:22,780 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:22,780 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:22,781 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:22,781 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:22,781 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:22,781 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:22,781 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:22,874 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2071
2025-03-24 20:34:22,876 - yfinance - DEBUG - response code=200
2025-03-24 20:34:22,877 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:22,877 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:22,879 - yfinance - DEBUG - T: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:34:22,880 - yfinance - DEBUG - T: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:34:22,886 - yfinance - DEBUG - T: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:22,893 - yfinance - DEBUG - T: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:22,893 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:22,894 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:22,897 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:22,897 - yfinance_client - INFO - Downloaded data for T, shape: (59, 5)
2025-03-24 20:34:22,904 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:34:22,908 - __main__ - INFO - Step 2: Getting options chain data for T...
2025-03-24 20:34:22,908 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for T
2025-03-24 20:34:22,908 - yfinance - DEBUG - Entering history()
2025-03-24 20:34:22,909 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 20:34:22,909 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:22,909 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:22,910 - yfinance - DEBUG -   Entering get()
2025-03-24 20:34:22,910 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:34:22,910 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 20:34:22,910 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:22,911 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:34:22,911 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:22,911 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:22,911 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:22,912 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:22,912 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:22,912 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:34:23,055 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1179
2025-03-24 20:34:23,056 - yfinance - DEBUG - response code=200
2025-03-24 20:34:23,056 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:34:23,057 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:34:23,058 - yfinance - DEBUG - T: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:34:23,059 - yfinance - DEBUG - T: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:34:23,061 - yfinance - DEBUG - T: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:23,066 - yfinance - DEBUG - T: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:23,066 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:23,066 - yfinance - DEBUG - Exiting history()
2025-03-24 20:34:23,067 - yfinance_client - INFO - Current price of T: $26.96
2025-03-24 20:34:23,067 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:23,067 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:23,067 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T
2025-03-24 20:34:23,067 - yfinance - DEBUG - params=None
2025-03-24 20:34:23,068 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:23,068 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:23,068 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,068 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:23,068 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:23,068 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,069 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:23,140 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:23,140 - yfinance - DEBUG - response code=200
2025-03-24 20:34:23,141 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:23,141 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:23,142 - yfinance_client - INFO - Found 15 expiration dates for T
2025-03-24 20:34:23,142 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:34:23,142 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:23,142 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:23,143 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1743120000
2025-03-24 20:34:23,143 - yfinance - DEBUG - params=None
2025-03-24 20:34:23,143 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:23,143 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:23,143 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,143 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:23,144 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:23,144 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,144 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:23,214 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:23,214 - yfinance - DEBUG - response code=200
2025-03-24 20:34:23,214 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:23,214 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:23,217 - yfinance_client - INFO - Retrieved 26 calls and 25 puts
2025-03-24 20:34:23,246 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:34:23,246 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:23,246 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:23,247 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1743724800
2025-03-24 20:34:23,247 - yfinance - DEBUG - params=None
2025-03-24 20:34:23,247 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:23,247 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:23,248 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,248 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:23,248 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:23,248 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,249 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:23,337 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:23,338 - yfinance - DEBUG - response code=200
2025-03-24 20:34:23,338 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:23,339 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:23,342 - yfinance_client - INFO - Retrieved 23 calls and 25 puts
2025-03-24 20:34:23,369 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:34:23,369 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:23,370 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:23,370 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1744329600
2025-03-24 20:34:23,370 - yfinance - DEBUG - params=None
2025-03-24 20:34:23,370 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:23,371 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:23,371 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,371 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:23,371 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:23,371 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,372 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:23,444 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:23,444 - yfinance - DEBUG - response code=200
2025-03-24 20:34:23,445 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:23,445 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:23,448 - yfinance_client - INFO - Retrieved 18 calls and 24 puts
2025-03-24 20:34:23,471 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:34:23,472 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:23,472 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:23,472 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1744848000
2025-03-24 20:34:23,472 - yfinance - DEBUG - params=None
2025-03-24 20:34:23,473 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:23,473 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:23,473 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,473 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:23,473 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:23,473 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:23,474 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:23,546 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:23,546 - yfinance - DEBUG - response code=200
2025-03-24 20:34:23,546 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:23,547 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:23,550 - yfinance_client - INFO - Retrieved 24 calls and 25 puts
2025-03-24 20:34:23,578 - yfinance_client - INFO - Successfully fetched 4 option chains for T
2025-03-24 20:34:23,578 - __main__ - INFO - Step 3: Preparing analysis data for T...
2025-03-24 20:34:23,578 - __main__ - INFO - Step 4: Processing options data for T...
2025-03-24 20:34:23,578 - __main__ - INFO - Found 4 expiration dates for T
2025-03-24 20:34:23,578 - __main__ - INFO - Processing expiration date 2025-03-28 for T...
2025-03-24 20:34:23,579 - __main__ - DEBUG - ATM calls shape before filtering: (26, 19)
2025-03-24 20:34:23,579 - __main__ - DEBUG - ATM puts shape before filtering: (25, 19)
2025-03-24 20:34:23,579 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:34:23,580 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:34:23,580 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:34:23,581 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:34:23,581 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:34:23,582 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:34:23,582 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:34:23,583 - __main__ - DEBUG - Volume data for T: calls=7579, puts=6957
2025-03-24 20:34:23,583 - __main__ - INFO - Successfully processed expiration 2025-03-28 for T
2025-03-24 20:34:23,583 - __main__ - INFO - Processing expiration date 2025-04-04 for T...
2025-03-24 20:34:23,583 - __main__ - DEBUG - ATM calls shape before filtering: (23, 19)
2025-03-24 20:34:23,584 - __main__ - DEBUG - ATM puts shape before filtering: (25, 19)
2025-03-24 20:34:23,584 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:34:23,585 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:34:23,585 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:34:23,586 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:34:23,586 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:34:23,587 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:34:23,587 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:34:23,587 - __main__ - DEBUG - Volume data for T: calls=2454, puts=4053
2025-03-24 20:34:23,588 - __main__ - INFO - Successfully processed expiration 2025-04-04 for T
2025-03-24 20:34:23,588 - __main__ - INFO - Processing expiration date 2025-04-11 for T...
2025-03-24 20:34:23,588 - __main__ - DEBUG - ATM calls shape before filtering: (18, 19)
2025-03-24 20:34:23,588 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:34:23,589 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:34:23,590 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:34:23,590 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:34:23,591 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:34:23,591 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:34:23,592 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:34:23,592 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:34:23,592 - __main__ - DEBUG - Volume data for T: calls=882, puts=513
2025-03-24 20:34:23,593 - __main__ - INFO - Successfully processed expiration 2025-04-11 for T
2025-03-24 20:34:23,593 - __main__ - INFO - Processing expiration date 2025-04-17 for T...
2025-03-24 20:34:23,593 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:34:23,593 - __main__ - DEBUG - ATM puts shape before filtering: (25, 19)
2025-03-24 20:34:23,594 - __main__ - DEBUG - ATM calls shape after filtering: (3, 19)
2025-03-24 20:34:23,594 - __main__ - DEBUG - ATM puts shape after filtering: (3, 19)
2025-03-24 20:34:23,595 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:34:23,595 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:34:23,596 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:34:23,596 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:34:23,596 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:34:23,597 - __main__ - DEBUG - Volume data for T: calls=6218, puts=2425
2025-03-24 20:34:23,597 - __main__ - INFO - Successfully processed expiration 2025-04-17 for T
2025-03-24 20:34:23,597 - __main__ - INFO - Step 5: Generating analysis for T...
2025-03-24 20:34:23,597 - __main__ - DEBUG - Calling get_stock_analysis_prompt for T with args: stock_analysis_data, market_context
2025-03-24 20:34:36,276 - __main__ - INFO - Market alignment for T: aligned
2025-03-24 20:34:36,277 - __main__ - INFO - Creating stock analysis result for T...
2025-03-24 20:34:36,277 - __main__ - INFO - Successfully added T to stock analyses
2025-03-24 20:34:36,277 - __main__ - INFO - Updating Notion with analysis for T...
2025-03-24 20:34:36,278 - __main__ - INFO - Sending Discord notification for T...
2025-03-24 20:34:36,278 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2678 chars). Splitting into parts.
2025-03-24 20:34:36,279 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:36,664 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:36,664 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:36,665 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:36,996 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:36,997 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:36,998 - __main__ - INFO - Successfully sent Discord notification for T
2025-03-24 20:34:36,998 - __main__ - INFO - Analyzing CMG...
2025-03-24 20:34:36,998 - __main__ - INFO - Step 1: Getting stock data for CMG...
2025-03-24 20:34:36,998 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:36,998 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:36,999 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:36,999 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 20:34:36,999 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:36,999 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:37,000 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:37,000 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:37,000 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 20:34:37,000 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:37,000 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,001 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,001 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,001 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,001 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,001 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,001 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,068 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1559
2025-03-24 20:34:37,069 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,069 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:37,069 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:37,070 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:34:37,075 - yfinance - DEBUG - CMG: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:37,076 - yfinance - DEBUG - CMG: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:37,080 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:37,080 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:37,081 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:37,082 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:37,083 - yfinance_client - INFO - Downloaded data for CMG, shape: (35, 5)
2025-03-24 20:34:37,083 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:37,083 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:37,083 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:37,083 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 20:34:37,084 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:37,084 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:37,084 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:37,084 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:37,085 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 20:34:37,085 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:37,085 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,085 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,085 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,085 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,086 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,086 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,086 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,138 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1998
2025-03-24 20:34:37,139 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,139 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:37,140 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:37,141 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:34:37,142 - yfinance - DEBUG - CMG: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:34:37,144 - yfinance - DEBUG - CMG: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:37,148 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:37,148 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:37,148 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:37,150 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:37,150 - yfinance_client - INFO - Downloaded data for CMG, shape: (59, 5)
2025-03-24 20:34:37,156 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:34:37,159 - __main__ - INFO - Step 2: Getting options chain data for CMG...
2025-03-24 20:34:37,160 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for CMG
2025-03-24 20:34:37,160 - yfinance - DEBUG - Entering history()
2025-03-24 20:34:37,161 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 20:34:37,161 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:37,161 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:37,162 - yfinance - DEBUG -   Entering get()
2025-03-24 20:34:37,162 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:34:37,162 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 20:34:37,162 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:37,163 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,163 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,163 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,163 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,163 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,164 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,164 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,226 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1219
2025-03-24 20:34:37,227 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,227 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:34:37,227 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:34:37,228 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:34:37,229 - yfinance - DEBUG - CMG: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:34:37,231 - yfinance - DEBUG - CMG: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:37,235 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:37,235 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:37,235 - yfinance - DEBUG - Exiting history()
2025-03-24 20:34:37,236 - yfinance_client - INFO - Current price of CMG: $49.60
2025-03-24 20:34:37,236 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:37,236 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:37,236 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG
2025-03-24 20:34:37,236 - yfinance - DEBUG - params=None
2025-03-24 20:34:37,237 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,237 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,237 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,237 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,237 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,238 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,238 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,306 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:37,307 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,308 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:37,308 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:37,309 - yfinance_client - INFO - Found 15 expiration dates for CMG
2025-03-24 20:34:37,310 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:34:37,310 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:37,310 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:37,310 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1743120000
2025-03-24 20:34:37,311 - yfinance - DEBUG - params=None
2025-03-24 20:34:37,311 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,311 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,311 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,311 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,311 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,312 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,312 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,385 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:37,385 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,385 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:37,386 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:37,389 - yfinance_client - INFO - Retrieved 39 calls and 37 puts
2025-03-24 20:34:37,428 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:34:37,429 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:37,429 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:37,430 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1743724800
2025-03-24 20:34:37,430 - yfinance - DEBUG - params=None
2025-03-24 20:34:37,430 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,430 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,431 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,431 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,431 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,431 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,431 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,496 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:37,497 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,497 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:37,497 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:37,501 - yfinance_client - INFO - Retrieved 36 calls and 32 puts
2025-03-24 20:34:37,538 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:34:37,538 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:37,539 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:37,539 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1744329600
2025-03-24 20:34:37,539 - yfinance - DEBUG - params=None
2025-03-24 20:34:37,540 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,540 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,540 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,540 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,540 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,541 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,541 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,602 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:37,603 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,603 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:37,603 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:37,607 - yfinance_client - INFO - Retrieved 29 calls and 24 puts
2025-03-24 20:34:37,635 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:34:37,636 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:37,636 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:37,636 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1744848000
2025-03-24 20:34:37,636 - yfinance - DEBUG - params=None
2025-03-24 20:34:37,637 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:37,637 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:37,637 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,637 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:37,637 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:37,638 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:37,638 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:37,695 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:37,695 - yfinance - DEBUG - response code=200
2025-03-24 20:34:37,696 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:37,696 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:37,699 - yfinance_client - INFO - Retrieved 11 calls and 8 puts
2025-03-24 20:34:37,711 - yfinance_client - INFO - Successfully fetched 4 option chains for CMG
2025-03-24 20:34:37,712 - __main__ - INFO - Step 3: Preparing analysis data for CMG...
2025-03-24 20:34:37,712 - __main__ - INFO - Step 4: Processing options data for CMG...
2025-03-24 20:34:37,712 - __main__ - INFO - Found 4 expiration dates for CMG
2025-03-24 20:34:37,713 - __main__ - INFO - Processing expiration date 2025-03-28 for CMG...
2025-03-24 20:34:37,713 - __main__ - DEBUG - ATM calls shape before filtering: (39, 19)
2025-03-24 20:34:37,713 - __main__ - DEBUG - ATM puts shape before filtering: (37, 19)
2025-03-24 20:34:37,714 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:34:37,715 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:34:37,715 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:34:37,716 - __main__ - DEBUG - ATM call for CMG: strike=49.5
2025-03-24 20:34:37,716 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:34:37,717 - __main__ - DEBUG - ATM put for CMG: strike=49.5
2025-03-24 20:34:37,717 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:34:37,717 - __main__ - DEBUG - Volume data for CMG: calls=7618, puts=11127
2025-03-24 20:34:37,717 - __main__ - INFO - Successfully processed expiration 2025-03-28 for CMG
2025-03-24 20:34:37,718 - __main__ - INFO - Processing expiration date 2025-04-04 for CMG...
2025-03-24 20:34:37,718 - __main__ - DEBUG - ATM calls shape before filtering: (36, 19)
2025-03-24 20:34:37,718 - __main__ - DEBUG - ATM puts shape before filtering: (32, 19)
2025-03-24 20:34:37,719 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:34:37,719 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:34:37,720 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:34:37,721 - __main__ - DEBUG - ATM call for CMG: strike=49.5
2025-03-24 20:34:37,721 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:34:37,722 - __main__ - DEBUG - ATM put for CMG: strike=49.5
2025-03-24 20:34:37,722 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:34:37,722 - __main__ - DEBUG - Volume data for CMG: calls=2860, puts=1277
2025-03-24 20:34:37,722 - __main__ - INFO - Successfully processed expiration 2025-04-04 for CMG
2025-03-24 20:34:37,723 - __main__ - INFO - Processing expiration date 2025-04-11 for CMG...
2025-03-24 20:34:37,723 - __main__ - DEBUG - ATM calls shape before filtering: (29, 19)
2025-03-24 20:34:37,723 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:34:37,724 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:34:37,724 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:34:37,724 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:34:37,725 - __main__ - DEBUG - ATM call for CMG: strike=50.0
2025-03-24 20:34:37,725 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:34:37,726 - __main__ - DEBUG - ATM put for CMG: strike=50.0
2025-03-24 20:34:37,726 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:34:37,727 - __main__ - DEBUG - Volume data for CMG: calls=985, puts=428
2025-03-24 20:34:37,727 - __main__ - INFO - Successfully processed expiration 2025-04-11 for CMG
2025-03-24 20:34:37,728 - __main__ - INFO - Processing expiration date 2025-04-17 for CMG...
2025-03-24 20:34:37,728 - __main__ - DEBUG - ATM calls shape before filtering: (11, 19)
2025-03-24 20:34:37,728 - __main__ - DEBUG - ATM puts shape before filtering: (8, 19)
2025-03-24 20:34:37,729 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:34:37,729 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:34:37,730 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:34:37,730 - __main__ - DEBUG - ATM call for CMG: strike=50.0
2025-03-24 20:34:37,730 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:34:37,731 - __main__ - DEBUG - ATM put for CMG: strike=50.0
2025-03-24 20:34:37,731 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:34:37,732 - __main__ - DEBUG - Volume data for CMG: calls=3184, puts=551
2025-03-24 20:34:37,732 - __main__ - INFO - Successfully processed expiration 2025-04-17 for CMG
2025-03-24 20:34:37,732 - __main__ - INFO - Step 5: Generating analysis for CMG...
2025-03-24 20:34:37,732 - __main__ - DEBUG - Calling get_stock_analysis_prompt for CMG with args: stock_analysis_data, market_context
2025-03-24 20:34:51,031 - __main__ - INFO - Market alignment for CMG: contrary
2025-03-24 20:34:51,031 - __main__ - INFO - Creating stock analysis result for CMG...
2025-03-24 20:34:51,032 - __main__ - INFO - Successfully added CMG to stock analyses
2025-03-24 20:34:51,032 - __main__ - INFO - Updating Notion with analysis for CMG...
2025-03-24 20:34:51,032 - __main__ - INFO - Sending Discord notification for CMG...
2025-03-24 20:34:51,033 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2950 chars). Splitting into parts.
2025-03-24 20:34:51,033 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:51,410 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:51,411 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:51,412 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:34:51,649 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:34:51,651 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:34:51,651 - __main__ - INFO - Successfully sent Discord notification for CMG
2025-03-24 20:34:51,651 - __main__ - INFO - Analyzing VZ...
2025-03-24 20:34:51,652 - __main__ - INFO - Step 1: Getting stock data for VZ...
2025-03-24 20:34:51,652 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:51,652 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:51,652 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:51,653 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 20:34:51,653 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:51,653 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:51,654 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:51,654 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:51,654 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 20:34:51,654 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:51,655 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:51,655 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:51,655 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,655 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:51,655 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:51,655 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,656 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:51,721 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1572
2025-03-24 20:34:51,722 - yfinance - DEBUG - response code=200
2025-03-24 20:34:51,722 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:51,723 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:51,724 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:34:51,729 - yfinance - DEBUG - VZ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:51,731 - yfinance - DEBUG - VZ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:51,735 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:34:51,736 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:51,736 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:51,738 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:51,738 - yfinance_client - INFO - Downloaded data for VZ, shape: (35, 5)
2025-03-24 20:34:51,738 - yfinance - DEBUG - Entering download()
2025-03-24 20:34:51,738 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:34:51,738 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:51,739 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 20:34:51,739 - yfinance - DEBUG -   Entering history()
2025-03-24 20:34:51,739 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:51,739 - yfinance - DEBUG -    Entering get()
2025-03-24 20:34:51,740 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:34:51,740 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 20:34:51,740 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:51,740 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:34:51,740 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:51,741 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,741 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:51,741 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:51,741 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,741 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:34:51,843 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2113
2025-03-24 20:34:51,844 - yfinance - DEBUG - response code=200
2025-03-24 20:34:51,844 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:34:51,845 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:34:51,846 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:34:51,847 - yfinance - DEBUG - VZ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:34:51,850 - yfinance - DEBUG - VZ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:51,855 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:34:51,855 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:34:51,855 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:51,857 - yfinance - DEBUG - Exiting download()
2025-03-24 20:34:51,857 - yfinance_client - INFO - Downloaded data for VZ, shape: (59, 5)
2025-03-24 20:34:51,863 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:34:51,866 - __main__ - INFO - Step 2: Getting options chain data for VZ...
2025-03-24 20:34:51,866 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VZ
2025-03-24 20:34:51,866 - yfinance - DEBUG - Entering history()
2025-03-24 20:34:51,867 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 20:34:51,867 - yfinance - DEBUG -  Entering history()
2025-03-24 20:34:51,867 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:51,868 - yfinance - DEBUG -   Entering get()
2025-03-24 20:34:51,868 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:34:51,868 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 20:34:51,869 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:34:51,869 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:34:51,869 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:51,869 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,869 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:51,870 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:51,870 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,870 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:34:51,975 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1215
2025-03-24 20:34:51,976 - yfinance - DEBUG - response code=200
2025-03-24 20:34:51,976 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:34:51,976 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:34:51,977 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:34:51,978 - yfinance - DEBUG - VZ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:34:51,981 - yfinance - DEBUG - VZ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:51,984 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:34:51,985 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:34:51,985 - yfinance - DEBUG - Exiting history()
2025-03-24 20:34:51,985 - yfinance_client - INFO - Current price of VZ: $43.56
2025-03-24 20:34:51,985 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:51,985 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:51,985 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ
2025-03-24 20:34:51,985 - yfinance - DEBUG - params=None
2025-03-24 20:34:51,985 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:51,986 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:51,986 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,986 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:51,986 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:51,986 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:51,986 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:52,048 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:52,049 - yfinance - DEBUG - response code=200
2025-03-24 20:34:52,049 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:52,050 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:52,051 - yfinance_client - INFO - Found 16 expiration dates for VZ
2025-03-24 20:34:52,051 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:34:52,051 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:52,052 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:52,052 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1743120000
2025-03-24 20:34:52,052 - yfinance - DEBUG - params=None
2025-03-24 20:34:52,052 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:52,052 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:52,052 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,053 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:52,053 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:52,053 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,053 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:52,121 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:52,122 - yfinance - DEBUG - response code=200
2025-03-24 20:34:52,122 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:52,122 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:52,125 - yfinance_client - INFO - Retrieved 35 calls and 27 puts
2025-03-24 20:34:52,158 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:34:52,158 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:52,159 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:52,159 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1743724800
2025-03-24 20:34:52,159 - yfinance - DEBUG - params=None
2025-03-24 20:34:52,159 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:52,160 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:52,160 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,160 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:52,160 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:52,161 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,161 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:52,228 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:52,228 - yfinance - DEBUG - response code=200
2025-03-24 20:34:52,229 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:52,229 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:52,232 - yfinance_client - INFO - Retrieved 27 calls and 24 puts
2025-03-24 20:34:52,260 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:34:52,261 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:52,261 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:52,261 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1744329600
2025-03-24 20:34:52,262 - yfinance - DEBUG - params=None
2025-03-24 20:34:52,262 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:52,262 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:52,262 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,263 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:52,263 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:52,263 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,263 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:52,339 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:52,340 - yfinance - DEBUG - response code=200
2025-03-24 20:34:52,340 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:52,340 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:52,344 - yfinance_client - INFO - Retrieved 21 calls and 18 puts
2025-03-24 20:34:52,366 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:34:52,366 - yfinance - DEBUG - Entering get()
2025-03-24 20:34:52,367 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:34:52,368 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1744848000
2025-03-24 20:34:52,368 - yfinance - DEBUG - params=None
2025-03-24 20:34:52,368 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:34:52,368 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:34:52,368 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,368 - yfinance - DEBUG - reusing cookie
2025-03-24 20:34:52,369 - yfinance - DEBUG - reusing crumb
2025-03-24 20:34:52,369 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:34:52,369 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:34:52,436 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:34:52,437 - yfinance - DEBUG - response code=200
2025-03-24 20:34:52,437 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:34:52,438 - yfinance - DEBUG - Exiting get()
2025-03-24 20:34:52,441 - yfinance_client - INFO - Retrieved 25 calls and 24 puts
2025-03-24 20:34:52,468 - yfinance_client - INFO - Successfully fetched 4 option chains for VZ
2025-03-24 20:34:52,469 - __main__ - INFO - Step 3: Preparing analysis data for VZ...
2025-03-24 20:34:52,469 - __main__ - INFO - Step 4: Processing options data for VZ...
2025-03-24 20:34:52,469 - __main__ - INFO - Found 4 expiration dates for VZ
2025-03-24 20:34:52,469 - __main__ - INFO - Processing expiration date 2025-03-28 for VZ...
2025-03-24 20:34:52,470 - __main__ - DEBUG - ATM calls shape before filtering: (35, 19)
2025-03-24 20:34:52,470 - __main__ - DEBUG - ATM puts shape before filtering: (27, 19)
2025-03-24 20:34:52,470 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:34:52,471 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:34:52,471 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:34:52,472 - __main__ - DEBUG - ATM call for VZ: strike=43.5
2025-03-24 20:34:52,472 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:34:52,473 - __main__ - DEBUG - ATM put for VZ: strike=43.5
2025-03-24 20:34:52,473 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:34:52,474 - __main__ - DEBUG - Volume data for VZ: calls=9060, puts=5060
2025-03-24 20:34:52,474 - __main__ - INFO - Successfully processed expiration 2025-03-28 for VZ
2025-03-24 20:34:52,474 - __main__ - INFO - Processing expiration date 2025-04-04 for VZ...
2025-03-24 20:34:52,474 - __main__ - DEBUG - ATM calls shape before filtering: (27, 19)
2025-03-24 20:34:52,475 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:34:52,475 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:34:52,476 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:34:52,476 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:34:52,476 - __main__ - DEBUG - ATM call for VZ: strike=43.5
2025-03-24 20:34:52,477 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:34:52,477 - __main__ - DEBUG - ATM put for VZ: strike=43.5
2025-03-24 20:34:52,477 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:34:52,478 - __main__ - DEBUG - Volume data for VZ: calls=1211, puts=994
2025-03-24 20:34:52,478 - __main__ - INFO - Successfully processed expiration 2025-04-04 for VZ
2025-03-24 20:34:52,478 - __main__ - INFO - Processing expiration date 2025-04-11 for VZ...
2025-03-24 20:34:52,479 - __main__ - DEBUG - ATM calls shape before filtering: (21, 19)
2025-03-24 20:34:52,479 - __main__ - DEBUG - ATM puts shape before filtering: (18, 19)
2025-03-24 20:34:52,479 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:34:52,480 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:34:52,480 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:34:52,481 - __main__ - DEBUG - ATM call for VZ: strike=44.0
2025-03-24 20:34:52,481 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:34:52,482 - __main__ - DEBUG - ATM put for VZ: strike=44.0
2025-03-24 20:34:52,482 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:34:52,483 - __main__ - DEBUG - Volume data for VZ: calls=1338, puts=1931
2025-03-24 20:34:52,483 - __main__ - INFO - Successfully processed expiration 2025-04-11 for VZ
2025-03-24 20:34:52,483 - __main__ - INFO - Processing expiration date 2025-04-17 for VZ...
2025-03-24 20:34:52,483 - __main__ - DEBUG - ATM calls shape before filtering: (25, 19)
2025-03-24 20:34:52,483 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:34:52,483 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:34:52,484 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:34:52,484 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:34:52,485 - __main__ - DEBUG - ATM call for VZ: strike=44.0
2025-03-24 20:34:52,485 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:34:52,486 - __main__ - DEBUG - ATM put for VZ: strike=44.0
2025-03-24 20:34:52,486 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:34:52,486 - __main__ - DEBUG - Volume data for VZ: calls=5171, puts=1327
2025-03-24 20:34:52,486 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VZ
2025-03-24 20:34:52,487 - __main__ - INFO - Step 5: Generating analysis for VZ...
2025-03-24 20:34:52,487 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VZ with args: stock_analysis_data, market_context
2025-03-24 20:54:16,337 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 20:54:16,340 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 20:54:16,340 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 20:54:16,340 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 20:54:16,675 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 20:54:16,719 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001E2C9062DE0>
2025-03-24 20:54:16,720 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001E2C9027E50> server_hostname='api.notion.com' timeout=60.0
2025-03-24 20:54:16,748 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001E29B08BA40>
2025-03-24 20:54:16,749 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:54:16,749 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:54:16,749 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:54:16,749 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:54:16,750 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:54:16,996 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:54:17 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b774f5bdfebe9-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-n87zzZB0xSS4mSAd1LkqCf9e8sE"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'1d77df1d-73b5-42fc-ac7a-5452d8781d3b'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=d2zPARuGCjveWSI7d83cur.Ehre_7XQKPgsyipaVOeQ-1742874857-1.0.1.1-BsmKYq6ECsVQJKmwHntSNwT1jAPjFZcvAWGdO.6oe9weQkiSqZ7mZ3vdaqQ1bF24wA5as58O4HRAZdDRndvP.CSf.IxrUYwnT7hnUsfrPoY; path=/; expires=Tue, 25-Mar-25 04:24:17 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=T2HatbWECs9ccWqQyuIrB1Taw6cQBDLonOgOWSfEc40-1742874857088-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:54:16,998 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:54:16,998 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:54:16,999 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:54:16,999 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:54:16,999 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:54:17,000 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:54:17,000 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:54:17,000 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:54:17,001 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:54:17,001 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:54:17,152 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:54:17 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b7750da9debe9-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-ydZvgG+8eBu7H8o8elDliILu34g"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'ba68fef8-f677-4031-b0f8-0f42ef086f97'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:54:17,153 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:54:17,154 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:54:17,154 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:54:17,155 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:54:17,155 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:54:17,155 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:54:17,155 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:54:17,155 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:54:17,156 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:54:17,156 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:54:18,750 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:54:18 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b7751de77ebe9-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-7IoTC3vOW8J/Fqp1wm6IrHPeQQc"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'6173bb4b-f314-41bb-a50a-6568f9960ce9'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:54:18,752 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:54:18,752 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:54:18,753 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:54:18,753 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:54:18,753 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:54:18,753 - __main__ - INFO - All clients initialized successfully
2025-03-24 20:54:18,753 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 20:54:18,754 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 20:54:18,754 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:18,755 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:18,755 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux i686; rv:135.0) Gecko/20100101 Firefox/135.0
2025-03-24 20:54:18,755 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:18,756 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 20:54:18,757 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:54:18,802 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:18,802 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:18,803 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:18,803 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:18,803 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:54:18,804 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:18,804 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:18,804 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:18,804 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:18,805 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 20:54:18,806 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 20:54:18,806 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 20:54:18,806 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:18,808 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 20:54:18,928 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 20:54:18,928 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 20:54:18,929 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:18,929 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:18,930 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 20:54:19,053 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1654
2025-03-24 20:54:19,054 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,054 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,055 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,056 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:54:19,064 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,069 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,073 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,073 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,074 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,076 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,076 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:54:19,079 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,080 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,080 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,080 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:54:19,081 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,081 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,081 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,082 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,082 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:54:19,082 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,082 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,082 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,083 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,083 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,083 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,083 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,083 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,171 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1652
2025-03-24 20:54:19,172 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,172 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,173 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,174 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:54:19,178 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,180 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,183 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,183 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,183 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,186 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,186 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:54:19,189 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,189 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,189 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,190 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:54:19,190 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,190 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,191 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,191 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,191 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:54:19,192 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,192 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,192 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,192 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,192 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,193 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,193 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,193 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,252 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1607
2025-03-24 20:54:19,253 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,254 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,254 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,256 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:54:19,261 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,265 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,268 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,269 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,269 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,271 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,271 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:54:19,274 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,274 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,274 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,275 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:54:19,275 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,276 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,276 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,276 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,276 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:54:19,277 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,277 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,277 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,277 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,277 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,277 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,278 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,278 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,332 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1639
2025-03-24 20:54:19,333 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,334 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,334 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,335 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:54:19,340 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,342 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,345 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,346 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,346 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,348 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,348 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:54:19,350 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,351 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,351 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,352 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:54:19,352 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,352 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,353 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,353 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,353 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:54:19,354 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,354 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,354 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,354 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,354 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,354 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,355 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,355 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,410 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1665
2025-03-24 20:54:19,411 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,411 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,412 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,412 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:54:19,417 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,419 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,424 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,424 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,424 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,427 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,427 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:54:19,430 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,430 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,430 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,431 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:54:19,431 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,431 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,431 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,432 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,432 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:54:19,432 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,432 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,432 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,433 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,433 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,433 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,433 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,433 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,491 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1667
2025-03-24 20:54:19,491 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,492 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,492 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,493 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:54:19,497 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,500 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,504 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,505 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,505 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,507 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,507 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:54:19,510 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,510 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,510 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,511 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:54:19,511 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,512 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,512 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,512 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,512 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:54:19,513 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,513 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,513 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,514 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,514 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,514 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,514 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,514 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,568 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1681
2025-03-24 20:54:19,569 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,569 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,570 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,571 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:54:19,575 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,577 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,581 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:54:19,581 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,582 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,583 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,584 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:54:19,586 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,586 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,586 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,587 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:54:19,587 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,588 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,588 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,589 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,589 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:54:19,589 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,590 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,590 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,590 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,590 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,591 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,591 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,591 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,644 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:54:19,645 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,645 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,645 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,646 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:53:00
2025-03-24 20:54:19,650 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:53:00+00:00
2025-03-24 20:54:19,652 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:53:00+00:00
2025-03-24 20:54:19,658 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:54:19,658 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,659 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,660 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,660 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:54:19,664 - yfinance - DEBUG - Entering download()
2025-03-24 20:54:19,665 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:54:19,665 - yfinance - DEBUG -  Entering history()
2025-03-24 20:54:19,665 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 20:54:19,666 - yfinance - DEBUG -   Entering history()
2025-03-24 20:54:19,667 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,667 - yfinance - DEBUG -    Entering get()
2025-03-24 20:54:19,667 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:54:19,667 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 20:54:19,668 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:54:19,668 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,668 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,668 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,668 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,669 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,669 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,669 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,733 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 926
2025-03-24 20:54:19,734 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,734 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:54:19,735 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:54:19,735 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 20:54:19,740 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:54:19,742 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:54:19,746 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:54:19,746 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:54:19,746 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:54:19,748 - yfinance - DEBUG - Exiting download()
2025-03-24 20:54:19,748 - yfinance_client - INFO - Downloaded data for ^VIX, shape: (14, 5)
2025-03-24 20:54:19,749 - yfinance_client - INFO - Current VIX price: 17.479999542236328
2025-03-24 20:54:19,749 - yfinance - DEBUG - Entering get()
2025-03-24 20:54:19,750 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:54:19,750 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:54:19,750 - yfinance - DEBUG - params=None
2025-03-24 20:54:19,750 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,751 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,751 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,751 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,751 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,751 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,752 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,843 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:54:19,845 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,845 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:54:19,845 - yfinance - DEBUG - Exiting get()
2025-03-24 20:54:19,847 - yfinance - DEBUG - Entering get()
2025-03-24 20:54:19,847 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:54:19,847 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1742860800
2025-03-24 20:54:19,847 - yfinance - DEBUG - params=None
2025-03-24 20:54:19,847 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:54:19,847 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:54:19,849 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,849 - yfinance - DEBUG - reusing cookie
2025-03-24 20:54:19,849 - yfinance - DEBUG - reusing crumb
2025-03-24 20:54:19,849 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:54:19,849 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:54:19,950 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1742860800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:54:19,951 - yfinance - DEBUG - response code=200
2025-03-24 20:54:19,952 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:54:19,952 - yfinance - DEBUG - Exiting get()
2025-03-24 20:54:19,957 - gemini_client - DEBUG - Generated prompt of length 8914
2025-03-24 20:54:48,246 - gemini_client - DEBUG - Received raw response of length 5325
2025-03-24 20:54:48,247 - __main__ - ERROR - Error analyzing market: name 'today_date' is not defined
2025-03-24 20:54:48,247 - __main__ - ERROR - Failed to analyze market conditions
2025-03-24 20:55:41,236 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 20:55:41,238 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 20:55:41,238 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 20:55:41,238 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 20:55:41,559 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 20:55:41,620 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001A3967776E0>
2025-03-24 20:55:41,620 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A39674BF50> server_hostname='api.notion.com' timeout=60.0
2025-03-24 20:55:41,642 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001A39505E570>
2025-03-24 20:55:41,642 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:55:41,643 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:55:41,643 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:55:41,643 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:55:41,643 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:55:43,446 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:55:43 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b7961fafcd03d-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-WPnre8M9N5y2V3eK8OAaqS5Z0+g"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'7487ab82-b3a3-4ca2-80e7-8d8568d783e9'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=T5Ls.XitkGzpJpvft4Z7Yr9XNAJDjpnT8Zb7_HukHXs-1742874943-1.0.1.1-RkGgmoPQUIIJZ8OYBPr5YG5UYItxB_4g5rcnw5jh7uWxkP7WVlq8gXbyWFgPaGfXfAPP3LrHTdgnlnpA.IAxMoA3Pz5niJpPeeWOdHf.Ojw; path=/; expires=Tue, 25-Mar-25 04:25:43 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=m8IBrLvTAtK2kDZD_j4XsnqDY1xVVeqZ51jnjAz7Jjc-1742874943535-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:55:43,448 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:55:43,448 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:55:43,449 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:55:43,449 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:55:43,449 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:55:43,450 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:55:43,450 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:55:43,450 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:55:43,451 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:55:43,451 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:55:44,451 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:55:44 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b796d493bd03d-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-WdkYd969wFo9NCCUaaEFzClFFH8"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'5e37f82a-5b94-4161-8e99-5109d1e1d810'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:55:44,452 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:55:44,452 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:55:44,453 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:55:44,453 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:55:44,453 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:55:44,454 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:55:44,454 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:55:44,454 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:55:44,455 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:55:44,455 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:55:45,276 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:55:45 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b7973790ed03d-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-LOWtTW3ZBUWSfxEOVNX5QF2oJiM"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'51537a1d-1f0c-4e2c-95be-f5358beee5af'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:55:45,277 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:55:45,278 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:55:45,278 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:55:45,278 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:55:45,279 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:55:45,279 - __main__ - INFO - All clients initialized successfully
2025-03-24 20:55:45,279 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 20:55:45,279 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 20:55:45,279 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:45,280 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:45,280 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
2025-03-24 20:55:45,280 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:45,282 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 20:55:45,282 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:55:45,326 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:45,327 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,327 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:45,327 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:45,328 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:55:45,328 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,328 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:45,328 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:45,328 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,330 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 20:55:45,330 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 20:55:45,331 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 20:55:45,331 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:45,333 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 20:55:45,488 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 20:55:45,488 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 20:55:45,489 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,489 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:45,490 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 20:55:45,648 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1645
2025-03-24 20:55:45,649 - yfinance - DEBUG - response code=200
2025-03-24 20:55:45,649 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:45,649 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:45,651 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:55:45,659 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,663 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,667 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,668 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:45,668 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:45,670 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:45,670 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:55:45,674 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:45,674 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:45,674 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:45,675 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:55:45,675 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:45,675 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,676 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:45,676 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:45,676 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:55:45,676 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,677 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:45,677 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:45,677 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,677 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:45,677 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:45,678 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,678 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:45,743 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1653
2025-03-24 20:55:45,744 - yfinance - DEBUG - response code=200
2025-03-24 20:55:45,744 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:45,744 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:45,745 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:55:45,750 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,752 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,756 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,756 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:45,756 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:45,758 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:45,759 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:55:45,762 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:45,762 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:45,762 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:45,762 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:55:45,763 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:45,763 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,763 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:45,764 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:45,764 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:55:45,764 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,764 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:45,764 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:45,765 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,765 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:45,765 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:45,765 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,765 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:45,838 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1616
2025-03-24 20:55:45,839 - yfinance - DEBUG - response code=200
2025-03-24 20:55:45,839 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:45,839 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:45,841 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:55:45,845 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,848 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,852 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,852 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:45,853 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:45,854 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:45,855 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:55:45,858 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:45,858 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:45,858 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:45,858 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:55:45,859 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:45,859 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,859 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:45,860 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:45,860 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:55:45,860 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:45,860 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:45,860 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:45,861 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,861 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:45,861 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:45,861 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:45,861 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:45,985 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1641
2025-03-24 20:55:45,986 - yfinance - DEBUG - response code=200
2025-03-24 20:55:45,986 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:45,986 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:45,987 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:55:45,992 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,993 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,997 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:45,998 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:45,998 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:46,000 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:46,000 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:55:46,003 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:46,003 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:46,003 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:46,004 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:55:46,004 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:46,004 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,005 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:46,005 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:46,005 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:55:46,005 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,006 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:46,006 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:46,007 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,007 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:46,007 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:46,007 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,007 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:46,073 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1672
2025-03-24 20:55:46,074 - yfinance - DEBUG - response code=200
2025-03-24 20:55:46,074 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:46,075 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:46,076 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:55:46,080 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,082 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,086 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,086 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:46,087 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:46,088 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:46,089 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:55:46,092 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:46,092 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:46,093 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:46,093 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:55:46,093 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:46,094 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,094 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:46,094 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:46,094 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:55:46,094 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,095 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:46,095 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:46,095 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,095 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:46,095 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:46,095 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,096 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:46,159 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1669
2025-03-24 20:55:46,160 - yfinance - DEBUG - response code=200
2025-03-24 20:55:46,160 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:46,160 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:46,161 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:55:46,166 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,169 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,173 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,173 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:46,173 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:46,175 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:46,176 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:55:46,178 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:46,178 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:46,179 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:46,179 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:55:46,180 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:46,180 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,180 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:46,180 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:46,181 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:55:46,181 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,181 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:46,181 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:46,182 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,182 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:46,182 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:46,182 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,182 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:46,245 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 20:55:46,245 - yfinance - DEBUG - response code=200
2025-03-24 20:55:46,246 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:46,246 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:46,247 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:55:46,251 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,253 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,257 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:55:46,257 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:46,258 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:46,260 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:46,260 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:55:46,263 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:46,263 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:46,264 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:46,264 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:55:46,264 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:46,265 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,265 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:46,265 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:46,265 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:55:46,266 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,266 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:46,266 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:46,266 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,266 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:46,267 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:46,267 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,267 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:46,316 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:55:46,317 - yfinance - DEBUG - response code=200
2025-03-24 20:55:46,317 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:46,317 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:46,319 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:54:00
2025-03-24 20:55:46,323 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:54:00+00:00
2025-03-24 20:55:46,325 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:54:00+00:00
2025-03-24 20:55:46,331 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:55:46,332 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:46,332 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:46,334 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:46,334 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:55:46,337 - yfinance - DEBUG - Entering download()
2025-03-24 20:55:46,337 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:55:46,337 - yfinance - DEBUG -  Entering history()
2025-03-24 20:55:46,338 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 20:55:46,339 - yfinance - DEBUG -   Entering history()
2025-03-24 20:55:46,339 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,339 - yfinance - DEBUG -    Entering get()
2025-03-24 20:55:46,339 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:55:46,340 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 20:55:46,340 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:55:46,340 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:55:46,340 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:46,340 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,341 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:46,341 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:46,341 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,341 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:55:46,397 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 934
2025-03-24 20:55:46,398 - yfinance - DEBUG - response code=200
2025-03-24 20:55:46,399 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:55:46,399 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:55:46,400 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 20:55:46,405 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:55:46,406 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:55:46,410 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:55:46,410 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:55:46,411 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:55:46,412 - yfinance - DEBUG - Exiting download()
2025-03-24 20:55:46,413 - yfinance_client - INFO - Downloaded data for ^VIX, shape: (14, 5)
2025-03-24 20:55:46,413 - yfinance_client - INFO - Current VIX price: 17.479999542236328
2025-03-24 20:55:46,414 - yfinance - DEBUG - Entering get()
2025-03-24 20:55:46,414 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:55:46,414 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:55:46,414 - yfinance - DEBUG - params=None
2025-03-24 20:55:46,415 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:55:46,415 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:46,415 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,415 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:46,415 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:46,415 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,416 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:55:46,519 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:55:46,538 - yfinance - DEBUG - response code=200
2025-03-24 20:55:46,538 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:55:46,538 - yfinance - DEBUG - Exiting get()
2025-03-24 20:55:46,540 - yfinance - DEBUG - Entering get()
2025-03-24 20:55:46,540 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:55:46,540 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1742860800
2025-03-24 20:55:46,541 - yfinance - DEBUG - params=None
2025-03-24 20:55:46,541 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:55:46,541 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:55:46,541 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,541 - yfinance - DEBUG - reusing cookie
2025-03-24 20:55:46,542 - yfinance - DEBUG - reusing crumb
2025-03-24 20:55:46,542 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:55:46,542 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:55:46,632 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1742860800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:55:46,634 - yfinance - DEBUG - response code=200
2025-03-24 20:55:46,634 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:55:46,634 - yfinance - DEBUG - Exiting get()
2025-03-24 20:55:46,639 - gemini_client - DEBUG - Generated prompt of length 8917
2025-03-24 20:56:12,349 - gemini_client - DEBUG - Received raw response of length 5178
2025-03-24 20:56:12,350 - gemini_client - DEBUG - Generated prompt of length 1047
2025-03-24 20:56:22,438 - gemini_client - DEBUG - Received raw response of length 1666
2025-03-24 20:56:22,438 - discord.discord_client - INFO - Content length exceeds Discord limit (5178 chars). Splitting into chunks.
2025-03-24 20:56:22,439 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:56:22,834 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:56:22,836 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:56:22,837 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:56:23,105 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:56:23,106 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:56:23,107 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:56:23,440 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:56:23,441 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:56:23,442 - __main__ - INFO - Comprehensive market analysis complete: bullish
2025-03-24 20:56:23,442 - __main__ - INFO - Starting stock analysis...
2025-03-24 20:56:23,442 - __main__ - INFO - get_stock_analysis_prompt signature: (*args, **kwargs) with params: ['args', 'kwargs']
2025-03-24 20:56:23,443 - __main__ - INFO - Found 36 symbols in watchlist
2025-03-24 20:56:23,443 - __main__ - INFO - Analyzing SPY...
2025-03-24 20:56:23,443 - __main__ - INFO - Step 1: Getting stock data for SPY...
2025-03-24 20:56:23,444 - yfinance - DEBUG - Entering download()
2025-03-24 20:56:23,444 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:56:23,444 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:23,445 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:56:23,445 - yfinance - DEBUG -   Entering history()
2025-03-24 20:56:23,445 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:23,445 - yfinance - DEBUG -    Entering get()
2025-03-24 20:56:23,445 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:56:23,446 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:56:23,446 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:23,446 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:56:23,446 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:23,446 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,446 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:23,447 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:23,447 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,447 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:56:23,519 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1653
2025-03-24 20:56:23,519 - yfinance - DEBUG - response code=200
2025-03-24 20:56:23,520 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:56:23,520 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:56:23,521 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:56:23,525 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:23,529 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:23,532 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:23,533 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:56:23,533 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:23,535 - yfinance - DEBUG - Exiting download()
2025-03-24 20:56:23,535 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:56:23,535 - yfinance - DEBUG - Entering download()
2025-03-24 20:56:23,535 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:56:23,535 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:23,536 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:56:23,536 - yfinance - DEBUG -   Entering history()
2025-03-24 20:56:23,536 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:23,536 - yfinance - DEBUG -    Entering get()
2025-03-24 20:56:23,537 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:56:23,537 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:56:23,537 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:23,537 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:56:23,537 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:23,537 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,538 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:23,538 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:23,538 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,538 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:56:23,635 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2623
2025-03-24 20:56:23,636 - yfinance - DEBUG - response code=200
2025-03-24 20:56:23,636 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:56:23,636 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:56:23,637 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:56:23,638 - yfinance - DEBUG - SPY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:56:23,643 - yfinance - DEBUG - SPY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:56:23,646 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:56:23,647 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:56:23,647 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:23,648 - yfinance - DEBUG - Exiting download()
2025-03-24 20:56:23,649 - yfinance_client - INFO - Downloaded data for SPY, shape: (59, 5)
2025-03-24 20:56:23,655 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:56:23,658 - __main__ - INFO - Step 2: Getting options chain data for SPY...
2025-03-24 20:56:23,658 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SPY
2025-03-24 20:56:23,659 - yfinance - DEBUG - Entering history()
2025-03-24 20:56:23,659 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:56:23,660 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:23,660 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:23,660 - yfinance - DEBUG -   Entering get()
2025-03-24 20:56:23,660 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:56:23,661 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:56:23,661 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:23,661 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:56:23,661 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:23,662 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,662 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:23,662 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:23,662 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,662 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:56:23,764 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1198
2025-03-24 20:56:23,765 - yfinance - DEBUG - response code=200
2025-03-24 20:56:23,765 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:56:23,765 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:56:23,767 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:56:23,768 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:56:23,770 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:56:23,773 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:56:23,774 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:23,774 - yfinance - DEBUG - Exiting history()
2025-03-24 20:56:23,774 - yfinance_client - INFO - Current price of SPY: $574.08
2025-03-24 20:56:23,775 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:23,775 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:23,775 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:56:23,775 - yfinance - DEBUG - params=None
2025-03-24 20:56:23,775 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:23,775 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:23,776 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,776 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:23,776 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:23,776 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,776 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:23,860 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:23,878 - yfinance - DEBUG - response code=200
2025-03-24 20:56:23,878 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:23,879 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:23,880 - yfinance_client - INFO - Found 32 expiration dates for SPY
2025-03-24 20:56:23,881 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:56:23,881 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:23,882 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:23,882 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743379200
2025-03-24 20:56:23,882 - yfinance - DEBUG - params=None
2025-03-24 20:56:23,883 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:23,883 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:23,883 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,883 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:23,883 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:23,883 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:23,884 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:24,002 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:24,032 - yfinance - DEBUG - response code=200
2025-03-24 20:56:24,033 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:24,033 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:24,039 - yfinance_client - INFO - Retrieved 206 calls and 201 puts
2025-03-24 20:56:24,759 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:56:24,760 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:24,760 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:24,761 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743724800
2025-03-24 20:56:24,761 - yfinance - DEBUG - params=None
2025-03-24 20:56:24,761 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:24,761 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:24,761 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:24,762 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:24,762 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:24,762 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:24,762 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:24,860 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:24,882 - yfinance - DEBUG - response code=200
2025-03-24 20:56:24,883 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:24,883 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:24,892 - yfinance_client - INFO - Retrieved 134 calls and 136 puts
2025-03-24 20:56:25,026 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:56:25,026 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:25,027 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:25,027 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744329600
2025-03-24 20:56:25,028 - yfinance - DEBUG - params=None
2025-03-24 20:56:25,028 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:25,028 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:25,028 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:25,028 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:25,029 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:25,029 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:25,029 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:25,146 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:25,164 - yfinance - DEBUG - response code=200
2025-03-24 20:56:25,164 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:25,165 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:25,169 - yfinance_client - INFO - Retrieved 143 calls and 131 puts
2025-03-24 20:56:25,303 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:56:25,304 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:25,304 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:25,304 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744848000
2025-03-24 20:56:25,304 - yfinance - DEBUG - params=None
2025-03-24 20:56:25,304 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:25,304 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:25,305 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:25,305 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:25,305 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:25,305 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:25,305 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:25,410 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:25,422 - yfinance - DEBUG - response code=200
2025-03-24 20:56:25,422 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:25,423 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:25,428 - yfinance_client - INFO - Retrieved 224 calls and 195 puts
2025-03-24 20:56:25,633 - yfinance_client - INFO - Successfully fetched 4 option chains for SPY
2025-03-24 20:56:25,633 - __main__ - INFO - Step 3: Preparing analysis data for SPY...
2025-03-24 20:56:25,633 - __main__ - INFO - Step 4: Processing options data for SPY...
2025-03-24 20:56:25,634 - __main__ - INFO - Found 4 expiration dates for SPY
2025-03-24 20:56:25,634 - __main__ - INFO - Processing expiration date 2025-03-31 for SPY...
2025-03-24 20:56:25,634 - __main__ - DEBUG - ATM calls shape before filtering: (206, 19)
2025-03-24 20:56:25,634 - __main__ - DEBUG - ATM puts shape before filtering: (201, 19)
2025-03-24 20:56:25,635 - __main__ - DEBUG - ATM calls shape after filtering: (55, 19)
2025-03-24 20:56:25,636 - __main__ - DEBUG - ATM puts shape after filtering: (55, 19)
2025-03-24 20:56:25,636 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:56:25,637 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:56:25,637 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:56:25,638 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:56:25,638 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:56:25,638 - __main__ - DEBUG - Volume data for SPY: calls=130483, puts=133470
2025-03-24 20:56:25,639 - __main__ - INFO - Successfully processed expiration 2025-03-31 for SPY
2025-03-24 20:56:25,639 - __main__ - INFO - Processing expiration date 2025-04-04 for SPY...
2025-03-24 20:56:25,639 - __main__ - DEBUG - ATM calls shape before filtering: (134, 19)
2025-03-24 20:56:25,639 - __main__ - DEBUG - ATM puts shape before filtering: (136, 19)
2025-03-24 20:56:25,640 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:56:25,640 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:56:25,640 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:56:25,641 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:56:25,641 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:56:25,642 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:56:25,643 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:56:25,643 - __main__ - DEBUG - Volume data for SPY: calls=69776, puts=96136
2025-03-24 20:56:25,643 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SPY
2025-03-24 20:56:25,644 - __main__ - INFO - Processing expiration date 2025-04-11 for SPY...
2025-03-24 20:56:25,644 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 20:56:25,644 - __main__ - DEBUG - ATM puts shape before filtering: (131, 19)
2025-03-24 20:56:25,645 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:56:25,645 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:56:25,645 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:56:25,646 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:56:25,646 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:56:25,647 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:56:25,647 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:56:25,648 - __main__ - DEBUG - Volume data for SPY: calls=38192, puts=37007
2025-03-24 20:56:25,648 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SPY
2025-03-24 20:56:25,648 - __main__ - INFO - Processing expiration date 2025-04-17 for SPY...
2025-03-24 20:56:25,649 - __main__ - DEBUG - ATM calls shape before filtering: (224, 19)
2025-03-24 20:56:25,649 - __main__ - DEBUG - ATM puts shape before filtering: (195, 19)
2025-03-24 20:56:25,650 - __main__ - DEBUG - ATM calls shape after filtering: (57, 19)
2025-03-24 20:56:25,650 - __main__ - DEBUG - ATM puts shape after filtering: (57, 19)
2025-03-24 20:56:25,650 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:56:25,651 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:56:25,651 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:56:25,652 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:56:25,652 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:56:25,653 - __main__ - DEBUG - Volume data for SPY: calls=175952, puts=311384
2025-03-24 20:56:25,653 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SPY
2025-03-24 20:56:25,653 - __main__ - INFO - Step 5: Generating analysis for SPY...
2025-03-24 20:56:25,653 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SPY with args: stock_analysis_data, market_context
2025-03-24 20:56:25,654 - gemini_client - DEBUG - Generated prompt of length 4795
2025-03-24 20:56:39,036 - gemini_client - DEBUG - Received raw response of length 2954
2025-03-24 20:56:39,037 - __main__ - INFO - Market alignment for SPY: contrary
2025-03-24 20:56:39,037 - __main__ - INFO - Creating stock analysis result for SPY...
2025-03-24 20:56:39,038 - __main__ - INFO - Successfully added SPY to stock analyses
2025-03-24 20:56:39,038 - __main__ - INFO - Updating Notion with analysis for SPY...
2025-03-24 20:56:39,038 - __main__ - INFO - Sending Discord notification for SPY...
2025-03-24 20:56:39,039 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2954 chars). Splitting into parts.
2025-03-24 20:56:39,040 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:56:39,400 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:56:39,402 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:56:39,403 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:56:39,663 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:56:39,665 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:56:39,666 - __main__ - INFO - Successfully sent Discord notification for SPY
2025-03-24 20:56:39,666 - __main__ - INFO - Analyzing QQQ...
2025-03-24 20:56:39,666 - __main__ - INFO - Step 1: Getting stock data for QQQ...
2025-03-24 20:56:39,666 - yfinance - DEBUG - Entering download()
2025-03-24 20:56:39,667 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:56:39,667 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:39,667 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:56:39,668 - yfinance - DEBUG -   Entering history()
2025-03-24 20:56:39,668 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:39,668 - yfinance - DEBUG -    Entering get()
2025-03-24 20:56:39,668 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:56:39,669 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:56:39,669 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:39,669 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:56:39,669 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:39,669 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,670 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:39,670 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:39,670 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,670 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:56:39,742 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1641
2025-03-24 20:56:39,743 - yfinance - DEBUG - response code=200
2025-03-24 20:56:39,743 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:56:39,743 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:56:39,744 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:56:39,749 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:39,751 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:39,755 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:39,756 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:56:39,756 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:39,759 - yfinance - DEBUG - Exiting download()
2025-03-24 20:56:39,760 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:56:39,760 - yfinance - DEBUG - Entering download()
2025-03-24 20:56:39,760 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:56:39,761 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:39,761 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:56:39,762 - yfinance - DEBUG -   Entering history()
2025-03-24 20:56:39,762 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:39,762 - yfinance - DEBUG -    Entering get()
2025-03-24 20:56:39,762 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:56:39,763 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:56:39,763 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:39,763 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:56:39,763 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:39,763 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,764 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:39,764 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:39,764 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,764 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:56:39,840 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2240
2025-03-24 20:56:39,841 - yfinance - DEBUG - response code=200
2025-03-24 20:56:39,841 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:56:39,841 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:56:39,842 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:56:39,843 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:56:39,845 - yfinance - DEBUG - QQQ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:56:39,849 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:56:39,850 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:56:39,850 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:39,851 - yfinance - DEBUG - Exiting download()
2025-03-24 20:56:39,852 - yfinance_client - INFO - Downloaded data for QQQ, shape: (59, 5)
2025-03-24 20:56:39,857 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:56:39,861 - __main__ - INFO - Step 2: Getting options chain data for QQQ...
2025-03-24 20:56:39,862 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QQQ
2025-03-24 20:56:39,862 - yfinance - DEBUG - Entering history()
2025-03-24 20:56:39,862 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:56:39,863 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:39,863 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:39,863 - yfinance - DEBUG -   Entering get()
2025-03-24 20:56:39,864 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:56:39,864 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:56:39,864 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:39,864 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:56:39,864 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:39,864 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,865 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:39,865 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:39,865 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,865 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:56:39,952 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1208
2025-03-24 20:56:39,953 - yfinance - DEBUG - response code=200
2025-03-24 20:56:39,953 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:56:39,953 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:56:39,954 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:56:39,955 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:56:39,957 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:56:39,961 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:56:39,961 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:39,961 - yfinance - DEBUG - Exiting history()
2025-03-24 20:56:39,961 - yfinance_client - INFO - Current price of QQQ: $490.66
2025-03-24 20:56:39,962 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:39,962 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:39,962 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ
2025-03-24 20:56:39,962 - yfinance - DEBUG - params=None
2025-03-24 20:56:39,962 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:39,963 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:39,963 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,963 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:39,963 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:39,963 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:39,963 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:40,058 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:40,075 - yfinance - DEBUG - response code=200
2025-03-24 20:56:40,075 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:40,075 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:40,077 - yfinance_client - INFO - Found 33 expiration dates for QQQ
2025-03-24 20:56:40,078 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:56:40,078 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:40,079 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:40,079 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743379200
2025-03-24 20:56:40,079 - yfinance - DEBUG - params=None
2025-03-24 20:56:40,079 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:40,079 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:40,080 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,080 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:40,080 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:40,080 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,080 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:40,179 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:40,203 - yfinance - DEBUG - response code=200
2025-03-24 20:56:40,204 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:40,204 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:40,209 - yfinance_client - INFO - Retrieved 159 calls and 145 puts
2025-03-24 20:56:40,355 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:56:40,355 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:40,356 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:40,356 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743724800
2025-03-24 20:56:40,356 - yfinance - DEBUG - params=None
2025-03-24 20:56:40,357 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:40,357 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:40,357 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,357 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:40,357 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:40,358 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,358 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:40,459 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:40,474 - yfinance - DEBUG - response code=200
2025-03-24 20:56:40,475 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:40,475 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:40,480 - yfinance_client - INFO - Retrieved 140 calls and 159 puts
2025-03-24 20:56:40,626 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:56:40,626 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:40,627 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:40,627 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744329600
2025-03-24 20:56:40,627 - yfinance - DEBUG - params=None
2025-03-24 20:56:40,627 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:40,628 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:40,628 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,628 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:40,628 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:40,628 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,629 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:40,737 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:40,755 - yfinance - DEBUG - response code=200
2025-03-24 20:56:40,756 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:40,756 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:40,763 - yfinance_client - INFO - Retrieved 136 calls and 133 puts
2025-03-24 20:56:40,894 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:56:40,894 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:40,895 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:40,895 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744848000
2025-03-24 20:56:40,895 - yfinance - DEBUG - params=None
2025-03-24 20:56:40,895 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:40,895 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:40,895 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,896 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:40,896 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:40,896 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:40,896 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:41,002 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:41,025 - yfinance - DEBUG - response code=200
2025-03-24 20:56:41,026 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:41,026 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:41,031 - yfinance_client - INFO - Retrieved 140 calls and 132 puts
2025-03-24 20:56:41,162 - yfinance_client - INFO - Successfully fetched 4 option chains for QQQ
2025-03-24 20:56:41,162 - __main__ - INFO - Step 3: Preparing analysis data for QQQ...
2025-03-24 20:56:41,163 - __main__ - INFO - Step 4: Processing options data for QQQ...
2025-03-24 20:56:41,163 - __main__ - INFO - Found 4 expiration dates for QQQ
2025-03-24 20:56:41,163 - __main__ - INFO - Processing expiration date 2025-03-31 for QQQ...
2025-03-24 20:56:41,164 - __main__ - DEBUG - ATM calls shape before filtering: (159, 19)
2025-03-24 20:56:41,164 - __main__ - DEBUG - ATM puts shape before filtering: (145, 19)
2025-03-24 20:56:41,165 - __main__ - DEBUG - ATM calls shape after filtering: (37, 19)
2025-03-24 20:56:41,165 - __main__ - DEBUG - ATM puts shape after filtering: (35, 19)
2025-03-24 20:56:41,165 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:56:41,166 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:56:41,166 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:56:41,167 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:56:41,168 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:56:41,168 - __main__ - DEBUG - Volume data for QQQ: calls=38217, puts=47709
2025-03-24 20:56:41,168 - __main__ - INFO - Successfully processed expiration 2025-03-31 for QQQ
2025-03-24 20:56:41,169 - __main__ - INFO - Processing expiration date 2025-04-04 for QQQ...
2025-03-24 20:56:41,169 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:56:41,169 - __main__ - DEBUG - ATM puts shape before filtering: (159, 19)
2025-03-24 20:56:41,170 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:56:41,171 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:56:41,171 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:56:41,172 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:56:41,172 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:56:41,173 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:56:41,173 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:56:41,173 - __main__ - DEBUG - Volume data for QQQ: calls=28545, puts=29809
2025-03-24 20:56:41,174 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QQQ
2025-03-24 20:56:41,174 - __main__ - INFO - Processing expiration date 2025-04-11 for QQQ...
2025-03-24 20:56:41,174 - __main__ - DEBUG - ATM calls shape before filtering: (136, 19)
2025-03-24 20:56:41,176 - __main__ - DEBUG - ATM puts shape before filtering: (133, 19)
2025-03-24 20:56:41,177 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:56:41,178 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:56:41,178 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:56:41,179 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:56:41,179 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:56:41,180 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:56:41,180 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:56:41,180 - __main__ - DEBUG - Volume data for QQQ: calls=16620, puts=21183
2025-03-24 20:56:41,180 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QQQ
2025-03-24 20:56:41,181 - __main__ - INFO - Processing expiration date 2025-04-17 for QQQ...
2025-03-24 20:56:41,181 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:56:41,181 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 20:56:41,182 - __main__ - DEBUG - ATM calls shape after filtering: (22, 19)
2025-03-24 20:56:41,182 - __main__ - DEBUG - ATM puts shape after filtering: (22, 19)
2025-03-24 20:56:41,183 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:56:41,183 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:56:41,184 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:56:41,184 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:56:41,184 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:56:41,185 - __main__ - DEBUG - Volume data for QQQ: calls=92414, puts=81733
2025-03-24 20:56:41,185 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QQQ
2025-03-24 20:56:41,185 - __main__ - INFO - Step 5: Generating analysis for QQQ...
2025-03-24 20:56:41,185 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QQQ with args: stock_analysis_data, market_context
2025-03-24 20:56:41,186 - gemini_client - DEBUG - Generated prompt of length 4796
2025-03-24 20:56:54,302 - gemini_client - DEBUG - Received raw response of length 2828
2025-03-24 20:56:54,302 - __main__ - INFO - Market alignment for QQQ: **
2025-03-24 20:56:54,302 - __main__ - INFO - Creating stock analysis result for QQQ...
2025-03-24 20:56:54,303 - __main__ - INFO - Successfully added QQQ to stock analyses
2025-03-24 20:56:54,303 - __main__ - INFO - Updating Notion with analysis for QQQ...
2025-03-24 20:56:54,303 - __main__ - INFO - Sending Discord notification for QQQ...
2025-03-24 20:56:54,304 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2828 chars). Splitting into parts.
2025-03-24 20:56:54,305 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:56:54,717 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:56:54,719 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:56:54,720 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:56:54,975 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:56:54,977 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:56:54,977 - __main__ - INFO - Successfully sent Discord notification for QQQ
2025-03-24 20:56:54,978 - __main__ - INFO - Analyzing IWM...
2025-03-24 20:56:54,978 - __main__ - INFO - Step 1: Getting stock data for IWM...
2025-03-24 20:56:54,978 - yfinance - DEBUG - Entering download()
2025-03-24 20:56:54,978 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:56:54,978 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:54,979 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:56:54,979 - yfinance - DEBUG -   Entering history()
2025-03-24 20:56:54,979 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:54,980 - yfinance - DEBUG -    Entering get()
2025-03-24 20:56:54,980 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:56:54,980 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:56:54,980 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:54,981 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:56:54,981 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:54,981 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:54,981 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:54,981 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:54,982 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:54,982 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:56:55,053 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1627
2025-03-24 20:56:55,054 - yfinance - DEBUG - response code=200
2025-03-24 20:56:55,055 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:56:55,055 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:56:55,056 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:56:55,061 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:55,065 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:55,069 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:56:55,070 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:56:55,070 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:55,073 - yfinance - DEBUG - Exiting download()
2025-03-24 20:56:55,073 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:56:55,073 - yfinance - DEBUG - Entering download()
2025-03-24 20:56:55,074 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:56:55,074 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:55,074 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:56:55,075 - yfinance - DEBUG -   Entering history()
2025-03-24 20:56:55,075 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:55,075 - yfinance - DEBUG -    Entering get()
2025-03-24 20:56:55,076 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:56:55,076 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:56:55,076 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:55,076 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:56:55,077 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:55,077 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,077 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:55,077 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:55,077 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,077 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:56:55,178 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2611
2025-03-24 20:56:55,179 - yfinance - DEBUG - response code=200
2025-03-24 20:56:55,180 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:56:55,180 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:56:55,181 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:56:55,182 - yfinance - DEBUG - IWM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:56:55,186 - yfinance - DEBUG - IWM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:56:55,190 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:56:55,190 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:56:55,190 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:55,192 - yfinance - DEBUG - Exiting download()
2025-03-24 20:56:55,192 - yfinance_client - INFO - Downloaded data for IWM, shape: (59, 5)
2025-03-24 20:56:55,198 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:56:55,201 - __main__ - INFO - Step 2: Getting options chain data for IWM...
2025-03-24 20:56:55,201 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for IWM
2025-03-24 20:56:55,201 - yfinance - DEBUG - Entering history()
2025-03-24 20:56:55,202 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:56:55,202 - yfinance - DEBUG -  Entering history()
2025-03-24 20:56:55,202 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:55,203 - yfinance - DEBUG -   Entering get()
2025-03-24 20:56:55,203 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:56:55,203 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:56:55,203 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:56:55,204 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:56:55,204 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:55,204 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,204 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:55,204 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:55,204 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,205 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:56:55,317 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1218
2025-03-24 20:56:55,318 - yfinance - DEBUG - response code=200
2025-03-24 20:56:55,318 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:56:55,318 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:56:55,319 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:56:55,319 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:56:55,321 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:56:55,325 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:56:55,326 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:56:55,326 - yfinance - DEBUG - Exiting history()
2025-03-24 20:56:55,326 - yfinance_client - INFO - Current price of IWM: $208.86
2025-03-24 20:56:55,326 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:55,326 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:55,326 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM
2025-03-24 20:56:55,327 - yfinance - DEBUG - params=None
2025-03-24 20:56:55,327 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:55,327 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:55,327 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,327 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:55,327 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:55,327 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,328 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:55,408 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:55,409 - yfinance - DEBUG - response code=200
2025-03-24 20:56:55,409 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:55,410 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:55,410 - yfinance_client - INFO - Found 31 expiration dates for IWM
2025-03-24 20:56:55,411 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:56:55,411 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:55,412 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:55,412 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743379200
2025-03-24 20:56:55,412 - yfinance - DEBUG - params=None
2025-03-24 20:56:55,412 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:55,413 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:55,413 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,413 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:55,414 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:55,414 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,414 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:55,511 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:55,512 - yfinance - DEBUG - response code=200
2025-03-24 20:56:55,513 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:55,513 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:55,517 - yfinance_client - INFO - Retrieved 90 calls and 86 puts
2025-03-24 20:56:55,604 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:56:55,605 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:55,605 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:55,605 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743724800
2025-03-24 20:56:55,606 - yfinance - DEBUG - params=None
2025-03-24 20:56:55,606 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:55,606 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:55,606 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,606 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:55,606 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:55,607 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,607 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:55,691 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:55,692 - yfinance - DEBUG - response code=200
2025-03-24 20:56:55,693 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:55,693 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:55,697 - yfinance_client - INFO - Retrieved 80 calls and 82 puts
2025-03-24 20:56:55,777 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:56:55,777 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:55,777 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:55,778 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744329600
2025-03-24 20:56:55,778 - yfinance - DEBUG - params=None
2025-03-24 20:56:55,778 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:55,778 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:55,779 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,779 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:55,779 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:55,779 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:55,779 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:55,929 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:55,930 - yfinance - DEBUG - response code=200
2025-03-24 20:56:55,931 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:55,931 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:55,935 - yfinance_client - INFO - Retrieved 71 calls and 80 puts
2025-03-24 20:56:56,009 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:56:56,009 - yfinance - DEBUG - Entering get()
2025-03-24 20:56:56,010 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:56:56,010 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744848000
2025-03-24 20:56:56,010 - yfinance - DEBUG - params=None
2025-03-24 20:56:56,011 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:56:56,011 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:56:56,011 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:56:56,011 - yfinance - DEBUG - reusing cookie
2025-03-24 20:56:56,012 - yfinance - DEBUG - reusing crumb
2025-03-24 20:56:56,012 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:56:56,012 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:56:56,119 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:56:56,121 - yfinance - DEBUG - response code=200
2025-03-24 20:56:56,122 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:56:56,122 - yfinance - DEBUG - Exiting get()
2025-03-24 20:56:56,126 - yfinance_client - INFO - Retrieved 101 calls and 91 puts
2025-03-24 20:56:56,221 - yfinance_client - INFO - Successfully fetched 4 option chains for IWM
2025-03-24 20:56:56,221 - __main__ - INFO - Step 3: Preparing analysis data for IWM...
2025-03-24 20:56:56,221 - __main__ - INFO - Step 4: Processing options data for IWM...
2025-03-24 20:56:56,221 - __main__ - INFO - Found 4 expiration dates for IWM
2025-03-24 20:56:56,222 - __main__ - INFO - Processing expiration date 2025-03-31 for IWM...
2025-03-24 20:56:56,222 - __main__ - DEBUG - ATM calls shape before filtering: (90, 19)
2025-03-24 20:56:56,222 - __main__ - DEBUG - ATM puts shape before filtering: (86, 19)
2025-03-24 20:56:56,223 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:56:56,223 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:56:56,224 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:56:56,224 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:56:56,225 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:56:56,225 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:56:56,225 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:56:56,226 - __main__ - DEBUG - Volume data for IWM: calls=14723, puts=18881
2025-03-24 20:56:56,226 - __main__ - INFO - Successfully processed expiration 2025-03-31 for IWM
2025-03-24 20:56:56,226 - __main__ - INFO - Processing expiration date 2025-04-04 for IWM...
2025-03-24 20:56:56,227 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:56:56,227 - __main__ - DEBUG - ATM puts shape before filtering: (82, 19)
2025-03-24 20:56:56,228 - __main__ - DEBUG - ATM calls shape after filtering: (23, 19)
2025-03-24 20:56:56,228 - __main__ - DEBUG - ATM puts shape after filtering: (23, 19)
2025-03-24 20:56:56,229 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:56:56,229 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:56:56,230 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:56:56,230 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:56:56,230 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:56:56,231 - __main__ - DEBUG - Volume data for IWM: calls=19269, puts=29074
2025-03-24 20:56:56,231 - __main__ - INFO - Successfully processed expiration 2025-04-04 for IWM
2025-03-24 20:56:56,231 - __main__ - INFO - Processing expiration date 2025-04-11 for IWM...
2025-03-24 20:56:56,232 - __main__ - DEBUG - ATM calls shape before filtering: (71, 19)
2025-03-24 20:56:56,232 - __main__ - DEBUG - ATM puts shape before filtering: (80, 19)
2025-03-24 20:56:56,233 - __main__ - DEBUG - ATM calls shape after filtering: (25, 19)
2025-03-24 20:56:56,233 - __main__ - DEBUG - ATM puts shape after filtering: (25, 19)
2025-03-24 20:56:56,233 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:56:56,234 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:56:56,234 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:56:56,235 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:56:56,235 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:56:56,236 - __main__ - DEBUG - Volume data for IWM: calls=5175, puts=10062
2025-03-24 20:56:56,236 - __main__ - INFO - Successfully processed expiration 2025-04-11 for IWM
2025-03-24 20:56:56,236 - __main__ - INFO - Processing expiration date 2025-04-17 for IWM...
2025-03-24 20:56:56,237 - __main__ - DEBUG - ATM calls shape before filtering: (101, 19)
2025-03-24 20:56:56,237 - __main__ - DEBUG - ATM puts shape before filtering: (91, 19)
2025-03-24 20:56:56,237 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:56:56,238 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:56:56,238 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:56:56,239 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:56:56,239 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:56:56,239 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:56:56,240 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:56:56,240 - __main__ - DEBUG - Volume data for IWM: calls=34485, puts=312289
2025-03-24 20:56:56,240 - __main__ - INFO - Successfully processed expiration 2025-04-17 for IWM
2025-03-24 20:56:56,241 - __main__ - INFO - Step 5: Generating analysis for IWM...
2025-03-24 20:56:56,241 - __main__ - DEBUG - Calling get_stock_analysis_prompt for IWM with args: stock_analysis_data, market_context
2025-03-24 20:56:56,241 - gemini_client - DEBUG - Generated prompt of length 4798
2025-03-24 20:57:09,181 - gemini_client - DEBUG - Received raw response of length 2712
2025-03-24 20:57:09,182 - __main__ - INFO - Market alignment for IWM: **
2025-03-24 20:57:09,182 - __main__ - INFO - Creating stock analysis result for IWM...
2025-03-24 20:57:09,182 - __main__ - INFO - Successfully added IWM to stock analyses
2025-03-24 20:57:09,183 - __main__ - INFO - Updating Notion with analysis for IWM...
2025-03-24 20:57:09,183 - __main__ - INFO - Sending Discord notification for IWM...
2025-03-24 20:57:09,183 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2712 chars). Splitting into parts.
2025-03-24 20:57:09,184 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:57:09,598 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:57:09,599 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:57:09,600 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:57:09,872 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:57:09,873 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:57:09,874 - __main__ - INFO - Successfully sent Discord notification for IWM
2025-03-24 20:57:09,874 - __main__ - INFO - Analyzing VTV...
2025-03-24 20:57:09,874 - __main__ - INFO - Step 1: Getting stock data for VTV...
2025-03-24 20:57:09,874 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:09,875 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:09,875 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:09,875 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:57:09,876 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:09,876 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:09,876 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:09,876 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:09,876 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:57:09,876 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:09,877 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:09,877 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:09,877 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:09,877 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:09,878 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:09,878 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:09,878 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:09,948 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1635
2025-03-24 20:57:09,949 - yfinance - DEBUG - response code=200
2025-03-24 20:57:09,950 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:09,950 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:09,951 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:09,955 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:09,957 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:09,962 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:09,962 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:09,962 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:09,964 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:09,964 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:57:09,965 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:09,965 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:09,966 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:09,966 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:57:09,967 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:09,968 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:09,968 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:09,968 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:09,968 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:57:09,969 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:09,969 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:09,969 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:09,969 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:09,970 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:09,970 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:09,970 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:09,970 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:10,052 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1975
2025-03-24 20:57:10,053 - yfinance - DEBUG - response code=200
2025-03-24 20:57:10,053 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:10,054 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:10,055 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:57:10,056 - yfinance - DEBUG - VTV: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:57:10,058 - yfinance - DEBUG - VTV: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:57:10,062 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:57:10,063 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:10,063 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:10,065 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:10,065 - yfinance_client - INFO - Downloaded data for VTV, shape: (59, 5)
2025-03-24 20:57:10,071 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:57:10,074 - __main__ - INFO - Step 2: Getting options chain data for VTV...
2025-03-24 20:57:10,074 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VTV
2025-03-24 20:57:10,074 - yfinance - DEBUG - Entering history()
2025-03-24 20:57:10,075 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:57:10,075 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:10,076 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:10,076 - yfinance - DEBUG -   Entering get()
2025-03-24 20:57:10,076 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:57:10,076 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:57:10,077 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:10,077 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:57:10,077 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:10,077 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:10,077 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:10,078 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:10,078 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:10,078 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:57:10,155 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1219
2025-03-24 20:57:10,155 - yfinance - DEBUG - response code=200
2025-03-24 20:57:10,156 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:57:10,156 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:57:10,157 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:57:10,158 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:57:10,159 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:57:10,163 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:57:10,164 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:10,164 - yfinance - DEBUG - Exiting history()
2025-03-24 20:57:10,164 - yfinance_client - INFO - Current price of VTV: $174.55
2025-03-24 20:57:10,164 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:10,165 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:10,165 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV
2025-03-24 20:57:10,165 - yfinance - DEBUG - params=None
2025-03-24 20:57:10,165 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:10,166 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:10,166 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:10,166 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:10,166 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:10,166 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:10,167 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:10,286 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:10,287 - yfinance - DEBUG - response code=200
2025-03-24 20:57:10,287 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:10,288 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:10,288 - yfinance_client - INFO - Found 4 expiration dates for VTV
2025-03-24 20:57:10,288 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:57:10,288 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:10,289 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:10,289 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV?date=1744848000
2025-03-24 20:57:10,289 - yfinance - DEBUG - params=None
2025-03-24 20:57:10,289 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:10,289 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:10,289 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:10,290 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:10,290 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:10,290 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:10,290 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:10,341 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:10,342 - yfinance - DEBUG - response code=200
2025-03-24 20:57:10,342 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:10,343 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:10,345 - yfinance_client - INFO - Retrieved 18 calls and 11 puts
2025-03-24 20:57:10,363 - yfinance_client - INFO - Successfully fetched 1 option chains for VTV
2025-03-24 20:57:10,363 - __main__ - INFO - Step 3: Preparing analysis data for VTV...
2025-03-24 20:57:10,364 - __main__ - INFO - Step 4: Processing options data for VTV...
2025-03-24 20:57:10,364 - __main__ - INFO - Found 1 expiration dates for VTV
2025-03-24 20:57:10,364 - __main__ - INFO - Processing expiration date 2025-04-17 for VTV...
2025-03-24 20:57:10,365 - __main__ - DEBUG - ATM calls shape before filtering: (18, 19)
2025-03-24 20:57:10,365 - __main__ - DEBUG - ATM puts shape before filtering: (11, 19)
2025-03-24 20:57:10,365 - __main__ - DEBUG - ATM calls shape after filtering: (15, 19)
2025-03-24 20:57:10,366 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:57:10,366 - __main__ - DEBUG - Finding ATM call for VTV...
2025-03-24 20:57:10,367 - __main__ - DEBUG - ATM call for VTV: strike=175.0
2025-03-24 20:57:10,367 - __main__ - DEBUG - Finding ATM put for VTV...
2025-03-24 20:57:10,368 - __main__ - DEBUG - ATM put for VTV: strike=175.0
2025-03-24 20:57:10,368 - __main__ - DEBUG - Calculating volume data for VTV...
2025-03-24 20:57:10,369 - __main__ - DEBUG - Volume data for VTV: calls=92, puts=8
2025-03-24 20:57:10,369 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VTV
2025-03-24 20:57:10,370 - __main__ - INFO - Step 5: Generating analysis for VTV...
2025-03-24 20:57:10,370 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VTV with args: stock_analysis_data, market_context
2025-03-24 20:57:10,370 - gemini_client - DEBUG - Generated prompt of length 4797
2025-03-24 20:57:24,880 - gemini_client - DEBUG - Received raw response of length 3063
2025-03-24 20:57:24,881 - __main__ - INFO - Market alignment for VTV: **
2025-03-24 20:57:24,881 - __main__ - INFO - Creating stock analysis result for VTV...
2025-03-24 20:57:24,881 - __main__ - INFO - Successfully added VTV to stock analyses
2025-03-24 20:57:24,881 - __main__ - INFO - Updating Notion with analysis for VTV...
2025-03-24 20:57:24,882 - __main__ - INFO - Sending Discord notification for VTV...
2025-03-24 20:57:24,882 - discord.discord_client - INFO - Analysis description exceeds Discord limit (3063 chars). Splitting into parts.
2025-03-24 20:57:24,883 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:57:25,185 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:57:25,186 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:57:25,187 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:57:25,485 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:57:25,486 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:57:25,487 - __main__ - INFO - Successfully sent Discord notification for VTV
2025-03-24 20:57:25,487 - __main__ - INFO - Analyzing VGLT...
2025-03-24 20:57:25,487 - __main__ - INFO - Step 1: Getting stock data for VGLT...
2025-03-24 20:57:25,487 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:25,488 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:25,488 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:25,489 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:57:25,489 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:25,489 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:25,490 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:25,490 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:25,490 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:57:25,490 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:25,491 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:25,491 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:25,491 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,491 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:25,491 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:25,491 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,492 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:25,557 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1669
2025-03-24 20:57:25,558 - yfinance - DEBUG - response code=200
2025-03-24 20:57:25,558 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:25,558 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:25,559 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:25,563 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:25,565 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:25,569 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:25,570 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:25,570 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:25,572 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:25,572 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:57:25,572 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:25,573 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:25,573 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:25,573 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:57:25,574 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:25,574 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:25,574 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:25,574 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:25,575 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:57:25,575 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:25,575 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:25,575 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:25,575 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,575 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:25,576 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:25,576 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,576 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:25,698 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2383
2025-03-24 20:57:25,699 - yfinance - DEBUG - response code=200
2025-03-24 20:57:25,699 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:25,699 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:25,701 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:57:25,702 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:57:25,704 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 20:57:25,708 - yfinance - DEBUG - VGLT: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:57:25,712 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:57:25,712 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:25,712 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:25,714 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:25,714 - yfinance_client - INFO - Downloaded data for VGLT, shape: (59, 5)
2025-03-24 20:57:25,721 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:57:25,723 - __main__ - INFO - Step 2: Getting options chain data for VGLT...
2025-03-24 20:57:25,724 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VGLT
2025-03-24 20:57:25,724 - yfinance - DEBUG - Entering history()
2025-03-24 20:57:25,724 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:57:25,725 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:25,725 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:25,725 - yfinance - DEBUG -   Entering get()
2025-03-24 20:57:25,726 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:57:25,726 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:57:25,726 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:25,726 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:57:25,726 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:25,727 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,727 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:25,727 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:25,727 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,727 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:57:25,808 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1241
2025-03-24 20:57:25,809 - yfinance - DEBUG - response code=200
2025-03-24 20:57:25,810 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:57:25,810 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:57:25,811 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:57:25,812 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:57:25,814 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:57:25,817 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:57:25,818 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:25,818 - yfinance - DEBUG - Exiting history()
2025-03-24 20:57:25,818 - yfinance_client - INFO - Current price of VGLT: $56.85
2025-03-24 20:57:25,818 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:25,818 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:25,819 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT
2025-03-24 20:57:25,819 - yfinance - DEBUG - params=None
2025-03-24 20:57:25,819 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:25,819 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:25,820 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,820 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:25,820 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:25,820 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,820 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:25,882 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1807
2025-03-24 20:57:25,882 - yfinance - DEBUG - response code=200
2025-03-24 20:57:25,883 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:25,883 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:25,883 - yfinance_client - INFO - Found 4 expiration dates for VGLT
2025-03-24 20:57:25,884 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:57:25,884 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:25,884 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:25,885 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT?date=1744848000
2025-03-24 20:57:25,885 - yfinance - DEBUG - params=None
2025-03-24 20:57:25,885 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:25,885 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:25,885 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,886 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:25,886 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:25,886 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:25,886 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:25,951 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1814
2025-03-24 20:57:25,952 - yfinance - DEBUG - response code=200
2025-03-24 20:57:25,952 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:25,953 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:25,956 - yfinance_client - INFO - Retrieved 8 calls and 8 puts
2025-03-24 20:57:25,966 - yfinance_client - INFO - Successfully fetched 1 option chains for VGLT
2025-03-24 20:57:25,967 - __main__ - INFO - Step 3: Preparing analysis data for VGLT...
2025-03-24 20:57:25,967 - __main__ - INFO - Step 4: Processing options data for VGLT...
2025-03-24 20:57:25,967 - __main__ - INFO - Found 1 expiration dates for VGLT
2025-03-24 20:57:25,967 - __main__ - INFO - Processing expiration date 2025-04-17 for VGLT...
2025-03-24 20:57:25,968 - __main__ - DEBUG - ATM calls shape before filtering: (8, 19)
2025-03-24 20:57:25,968 - __main__ - DEBUG - ATM puts shape before filtering: (8, 19)
2025-03-24 20:57:25,969 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:57:25,969 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:57:25,970 - __main__ - DEBUG - Finding ATM call for VGLT...
2025-03-24 20:57:25,971 - __main__ - DEBUG - ATM call for VGLT: strike=57.0
2025-03-24 20:57:25,971 - __main__ - DEBUG - Finding ATM put for VGLT...
2025-03-24 20:57:25,972 - __main__ - DEBUG - ATM put for VGLT: strike=57.0
2025-03-24 20:57:25,972 - __main__ - DEBUG - Calculating volume data for VGLT...
2025-03-24 20:57:25,973 - __main__ - DEBUG - Volume data for VGLT: calls=23, puts=27
2025-03-24 20:57:25,973 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VGLT
2025-03-24 20:57:25,973 - __main__ - INFO - Step 5: Generating analysis for VGLT...
2025-03-24 20:57:25,973 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VGLT with args: stock_analysis_data, market_context
2025-03-24 20:57:25,974 - gemini_client - DEBUG - Generated prompt of length 4801
2025-03-24 20:57:39,560 - gemini_client - DEBUG - Received raw response of length 2962
2025-03-24 20:57:39,560 - __main__ - INFO - Market alignment for VGLT: contrary
2025-03-24 20:57:39,561 - __main__ - INFO - Creating stock analysis result for VGLT...
2025-03-24 20:57:39,561 - __main__ - INFO - Successfully added VGLT to stock analyses
2025-03-24 20:57:39,561 - __main__ - INFO - Updating Notion with analysis for VGLT...
2025-03-24 20:57:39,561 - __main__ - INFO - Sending Discord notification for VGLT...
2025-03-24 20:57:39,562 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2962 chars). Splitting into parts.
2025-03-24 20:57:39,563 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:57:39,833 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:57:39,834 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:57:39,835 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:57:40,114 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:57:40,115 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:57:40,116 - __main__ - INFO - Successfully sent Discord notification for VGLT
2025-03-24 20:57:40,116 - __main__ - INFO - Analyzing VIX...
2025-03-24 20:57:40,116 - __main__ - INFO - Step 1: Getting stock data for VIX...
2025-03-24 20:57:40,116 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:40,117 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:40,117 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:40,117 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:57:40,117 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:40,118 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,118 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:40,118 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:40,118 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:57:40,119 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,119 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,119 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,119 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,119 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,119 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,120 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,120 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:40,181 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 801
2025-03-24 20:57:40,182 - yfinance - DEBUG - response code=200
2025-03-24 20:57:40,182 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:40,183 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:40,185 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:57:40,185 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=5d)')
2025-03-24 20:57:40,186 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=5d)

2025-03-24 20:57:40,189 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:40,189 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:57:40,189 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:40,189 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:40,190 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:40,190 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:57:40,190 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:40,191 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,191 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:40,191 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:40,191 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:57:40,191 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,192 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,192 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,192 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,192 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,192 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,192 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,192 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:40,249 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 802
2025-03-24 20:57:40,250 - yfinance - DEBUG - response code=200
2025-03-24 20:57:40,251 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:40,251 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:40,252 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:57:40,252 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=3mo)')
2025-03-24 20:57:40,253 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=3mo)

2025-03-24 20:57:40,256 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:40,256 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:57:40,256 - yfinance_client - ERROR - Failed to retrieve data for VIX
2025-03-24 20:57:40,256 - __main__ - ERROR - Failed to get stock data for VIX
2025-03-24 20:57:40,256 - __main__ - INFO - Analyzing DIA...
2025-03-24 20:57:40,257 - __main__ - INFO - Step 1: Getting stock data for DIA...
2025-03-24 20:57:40,257 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:40,257 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:40,258 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:40,258 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:57:40,259 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:40,259 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,259 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:40,259 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:40,260 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:57:40,260 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,260 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,260 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,260 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,261 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,261 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,261 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,261 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:40,325 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 20:57:40,326 - yfinance - DEBUG - response code=200
2025-03-24 20:57:40,326 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:40,326 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:40,327 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:40,332 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:40,335 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:40,339 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:40,339 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:40,339 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:40,342 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:40,342 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:57:40,342 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:40,342 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:40,343 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:40,343 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:57:40,343 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:40,343 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,344 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:40,344 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:40,344 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:57:40,344 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,345 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,345 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,345 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,345 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,345 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,346 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,346 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:40,473 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2601
2025-03-24 20:57:40,474 - yfinance - DEBUG - response code=200
2025-03-24 20:57:40,474 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:40,474 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:40,476 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:57:40,476 - yfinance - DEBUG - DIA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:57:40,481 - yfinance - DEBUG - DIA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:57:40,484 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:57:40,484 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:40,485 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:40,486 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:40,486 - yfinance_client - INFO - Downloaded data for DIA, shape: (59, 5)
2025-03-24 20:57:40,492 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:57:40,495 - __main__ - INFO - Step 2: Getting options chain data for DIA...
2025-03-24 20:57:40,496 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for DIA
2025-03-24 20:57:40,496 - yfinance - DEBUG - Entering history()
2025-03-24 20:57:40,496 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:57:40,497 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:40,497 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,497 - yfinance - DEBUG -   Entering get()
2025-03-24 20:57:40,497 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:57:40,498 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:57:40,498 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:40,498 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,498 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,498 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,499 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,499 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,499 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,499 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:57:40,587 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1236
2025-03-24 20:57:40,588 - yfinance - DEBUG - response code=200
2025-03-24 20:57:40,588 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:57:40,588 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:57:40,589 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:57:40,590 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:57:40,593 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:57:40,597 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:57:40,598 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:40,598 - yfinance - DEBUG - Exiting history()
2025-03-24 20:57:40,598 - yfinance_client - INFO - Current price of DIA: $425.49
2025-03-24 20:57:40,598 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:40,598 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:40,599 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA
2025-03-24 20:57:40,599 - yfinance - DEBUG - params=None
2025-03-24 20:57:40,599 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,599 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,599 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,599 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,600 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,600 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,600 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:40,684 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:40,700 - yfinance - DEBUG - response code=200
2025-03-24 20:57:40,700 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:40,700 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:40,701 - yfinance_client - INFO - Found 17 expiration dates for DIA
2025-03-24 20:57:40,702 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:57:40,702 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:40,702 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:40,703 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743379200
2025-03-24 20:57:40,703 - yfinance - DEBUG - params=None
2025-03-24 20:57:40,703 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,703 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,703 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,703 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,704 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,704 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,704 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:40,802 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:40,804 - yfinance - DEBUG - response code=200
2025-03-24 20:57:40,804 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:40,804 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:40,809 - yfinance_client - INFO - Retrieved 113 calls and 106 puts
2025-03-24 20:57:40,915 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:57:40,915 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:40,915 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:40,916 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743724800
2025-03-24 20:57:40,916 - yfinance - DEBUG - params=None
2025-03-24 20:57:40,916 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:40,917 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:40,917 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,917 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:40,917 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:40,918 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:40,918 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:41,011 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:41,014 - yfinance - DEBUG - response code=200
2025-03-24 20:57:41,014 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:41,014 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:41,019 - yfinance_client - INFO - Retrieved 75 calls and 67 puts
2025-03-24 20:57:41,090 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:57:41,091 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:41,091 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:41,091 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1744329600
2025-03-24 20:57:41,091 - yfinance - DEBUG - params=None
2025-03-24 20:57:41,092 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:41,092 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:41,092 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:41,092 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:41,092 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:41,093 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:41,093 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:41,170 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:41,170 - yfinance - DEBUG - response code=200
2025-03-24 20:57:41,171 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:41,171 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:41,176 - yfinance_client - INFO - Retrieved 54 calls and 54 puts
2025-03-24 20:57:46,479 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 20:57:46,480 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 20:57:46,480 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 20:57:46,480 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 20:57:46,807 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 20:57:46,838 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001BFA7687B00>
2025-03-24 20:57:46,838 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001BFA765BE50> server_hostname='api.notion.com' timeout=60.0
2025-03-24 20:57:46,862 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001BFA744EA20>
2025-03-24 20:57:46,862 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:57:46,863 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:57:46,863 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:57:46,864 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:57:46,864 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:57:47,177 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:57:47 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b7c7088ea1568-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-DCuvEM4fiWlnaM7B+OBYUCn79JA"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'a05e2614-5c22-4985-8d7d-42db1298d67c'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=tjSx7nksgv_s6aFm_.IJ4u.JommWX_rq1NXvIQ3MyT0-1742875067-1.0.1.1-8lw4XJ81wy87VMV.nQu0ykp8OmHhb934tKkPN9iVjIgVbdppQR0yKlh2rjKaqeYgfeUQtWImPYQO37DUE4_0YxBykF7ETg5kxW8jSZDSeUg; path=/; expires=Tue, 25-Mar-25 04:27:47 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=0SPQpIVw74YySw.VZwm91grSSj1nlu_C8uWLbWH4NqU-1742875067266-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:57:47,179 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:57:47,180 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:57:47,180 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:57:47,180 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:57:47,181 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:57:47,182 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:57:47,183 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:57:47,183 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:57:47,183 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:57:47,184 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:57:48,028 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:57:48 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b7c728b4b1568-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-4F71UZX5yeS4xtuj28ben8mxEX8"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'c09b98db-bb00-4865-9c8f-1336140b6b79'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:57:48,029 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:57:48,030 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:57:48,030 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:57:48,030 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:57:48,031 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:57:48,031 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:57:48,032 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:57:48,032 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:57:48,032 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:57:48,032 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:57:48,166 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:57:48 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b7c77d95d1568-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-m4QwHxgX2kY8P0XiH32ooOJZy+w"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'9f6c228e-e7b5-4ab9-8b86-fe06318b04a5'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:57:48,168 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:57:48,168 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:57:48,169 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:57:48,169 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:57:48,169 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:57:48,170 - __main__ - INFO - All clients initialized successfully
2025-03-24 20:57:48,170 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 20:57:48,170 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 20:57:48,170 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:48,170 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:48,171 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:135.0) Gecko/20100101 Firefox/135.0
2025-03-24 20:57:48,171 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:48,173 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 20:57:48,175 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:57:48,219 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:48,219 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,220 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:48,220 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:48,220 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:57:48,221 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,221 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:48,221 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:48,222 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,223 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 20:57:48,224 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 20:57:48,224 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 20:57:48,224 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:48,226 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 20:57:48,362 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 20:57:48,363 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 20:57:48,363 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,363 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:48,364 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 20:57:48,514 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1651
2025-03-24 20:57:48,515 - yfinance - DEBUG - response code=200
2025-03-24 20:57:48,515 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:48,516 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:48,517 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:48,526 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,530 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,534 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,535 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:48,535 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:48,537 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:48,537 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:57:48,541 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:48,541 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:48,541 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:48,542 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:57:48,542 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:48,542 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,542 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:48,543 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:48,543 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:57:48,543 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,543 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:48,543 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:48,543 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,543 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:48,544 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:48,544 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,544 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:48,608 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1693
2025-03-24 20:57:48,608 - yfinance - DEBUG - response code=200
2025-03-24 20:57:48,608 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:48,608 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:48,610 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:48,615 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,617 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,621 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,621 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:48,621 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:48,623 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:48,623 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:57:48,626 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:48,626 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:48,627 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:48,627 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:57:48,627 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:48,628 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,628 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:48,628 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:48,628 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:57:48,628 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,628 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:48,628 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:48,628 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,628 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:48,630 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:48,630 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,630 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:48,692 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1614
2025-03-24 20:57:48,693 - yfinance - DEBUG - response code=200
2025-03-24 20:57:48,693 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:48,694 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:48,695 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:48,699 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,703 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,707 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,707 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:48,708 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:48,709 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:48,710 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:57:48,712 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:48,713 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:48,713 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:48,713 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:57:48,714 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:48,714 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,714 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:48,714 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:48,715 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:57:48,715 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,715 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:48,716 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:48,716 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,716 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:48,716 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:48,716 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,716 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:48,833 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1646
2025-03-24 20:57:48,834 - yfinance - DEBUG - response code=200
2025-03-24 20:57:48,834 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:48,834 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:48,835 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:48,839 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,842 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,846 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,847 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:48,847 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:48,849 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:48,850 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:57:48,852 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:48,853 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:48,853 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:48,853 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:57:48,854 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:48,854 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,854 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:48,855 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:48,855 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:57:48,855 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,855 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:48,855 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:48,856 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,856 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:48,856 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:48,856 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,856 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:48,927 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1672
2025-03-24 20:57:48,927 - yfinance - DEBUG - response code=200
2025-03-24 20:57:48,928 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:48,928 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:48,929 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:48,933 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,935 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,939 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,939 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:48,939 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:48,941 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:48,941 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:57:48,944 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:48,944 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:48,945 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:48,945 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:57:48,946 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:48,946 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,946 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:48,946 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:48,946 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:57:48,947 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,947 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:48,947 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:48,947 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,947 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:48,947 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:48,948 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,948 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:48,977 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 20:57:48,977 - yfinance - DEBUG - response code=200
2025-03-24 20:57:48,977 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:48,978 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:48,979 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:48,983 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,986 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,990 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:48,991 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:48,991 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:48,993 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:48,993 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:57:48,996 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:48,996 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:48,996 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:48,997 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:57:48,997 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:48,997 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,998 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:48,998 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:48,998 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:57:48,998 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:48,998 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:48,998 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:48,999 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,999 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:48,999 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:48,999 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:48,999 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:49,078 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 20:57:49,079 - yfinance - DEBUG - response code=200
2025-03-24 20:57:49,079 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:49,079 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:49,080 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:57:49,084 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:49,086 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:49,090 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:57:49,090 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:49,091 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:49,093 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:49,093 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:57:49,096 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:49,096 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:49,096 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:49,097 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:57:49,097 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:49,097 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:49,098 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:49,098 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:49,098 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:57:49,098 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:49,099 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:49,099 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:49,099 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,099 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:49,100 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:49,100 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,100 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:49,159 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:49,160 - yfinance - DEBUG - response code=200
2025-03-24 20:57:49,160 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:49,161 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:49,162 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:55:00
2025-03-24 20:57:49,166 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:55:00+00:00
2025-03-24 20:57:49,167 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:55:00+00:00
2025-03-24 20:57:49,173 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:57:49,174 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:49,174 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:49,177 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:49,177 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:57:49,181 - yfinance - DEBUG - Entering download()
2025-03-24 20:57:49,181 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:57:49,181 - yfinance - DEBUG -  Entering history()
2025-03-24 20:57:49,182 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 20:57:49,183 - yfinance - DEBUG -   Entering history()
2025-03-24 20:57:49,183 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:49,183 - yfinance - DEBUG -    Entering get()
2025-03-24 20:57:49,183 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:57:49,184 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 20:57:49,184 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:57:49,184 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:57:49,184 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:49,184 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,184 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:49,185 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:49,185 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,185 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:57:49,247 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 931
2025-03-24 20:57:49,248 - yfinance - DEBUG - response code=200
2025-03-24 20:57:49,248 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:57:49,248 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:57:49,249 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 20:57:49,254 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:57:49,255 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:57:49,260 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:57:49,261 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:57:49,261 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:57:49,263 - yfinance - DEBUG - Exiting download()
2025-03-24 20:57:49,263 - yfinance_client - INFO - Downloaded data for ^VIX, shape: (14, 5)
2025-03-24 20:57:49,263 - yfinance_client - INFO - Current VIX price: 17.479999542236328
2025-03-24 20:57:49,264 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:49,264 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:49,264 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:57:49,264 - yfinance - DEBUG - params=None
2025-03-24 20:57:49,265 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:49,265 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:49,265 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,265 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:49,266 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:49,266 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,266 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:49,361 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:49,364 - yfinance - DEBUG - response code=200
2025-03-24 20:57:49,364 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:49,364 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:49,366 - yfinance - DEBUG - Entering get()
2025-03-24 20:57:49,366 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:57:49,366 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1742860800
2025-03-24 20:57:49,367 - yfinance - DEBUG - params=None
2025-03-24 20:57:49,367 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:57:49,367 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:57:49,367 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,367 - yfinance - DEBUG - reusing cookie
2025-03-24 20:57:49,367 - yfinance - DEBUG - reusing crumb
2025-03-24 20:57:49,368 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:57:49,368 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:57:49,449 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1742860800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:57:49,451 - yfinance - DEBUG - response code=200
2025-03-24 20:57:49,451 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:57:49,451 - yfinance - DEBUG - Exiting get()
2025-03-24 20:57:49,456 - gemini_client - DEBUG - Generated prompt of length 8916
2025-03-24 20:58:12,647 - gemini_client - DEBUG - Received raw response of length 4765
2025-03-24 20:58:12,648 - gemini_client - DEBUG - Generated prompt of length 1047
2025-03-24 20:58:25,196 - gemini_client - DEBUG - Received raw response of length 2344
2025-03-24 20:58:25,196 - discord.discord_client - INFO - Content length exceeds Discord limit (4765 chars). Splitting into chunks.
2025-03-24 20:58:25,197 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:58:25,527 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:58:25,529 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:58:25,530 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:58:25,801 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:58:25,802 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:58:25,804 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:58:26,156 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:58:26,158 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:58:26,159 - __main__ - INFO - Comprehensive market analysis complete: bullish
2025-03-24 20:58:26,160 - __main__ - INFO - Starting stock analysis...
2025-03-24 20:58:26,160 - __main__ - INFO - get_stock_analysis_prompt signature: (*args, **kwargs) with params: ['args', 'kwargs']
2025-03-24 20:58:26,161 - __main__ - INFO - Found 36 symbols in watchlist
2025-03-24 20:58:26,161 - __main__ - INFO - Analyzing SPY...
2025-03-24 20:58:26,161 - __main__ - INFO - Step 1: Getting stock data for SPY...
2025-03-24 20:58:26,162 - yfinance - DEBUG - Entering download()
2025-03-24 20:58:26,162 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:58:26,162 - yfinance - DEBUG -  Entering history()
2025-03-24 20:58:26,163 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:58:26,163 - yfinance - DEBUG -   Entering history()
2025-03-24 20:58:26,163 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:26,164 - yfinance - DEBUG -    Entering get()
2025-03-24 20:58:26,164 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:58:26,164 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:58:26,164 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:26,164 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:58:26,165 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:26,165 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,165 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:26,165 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:26,165 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,165 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:58:26,243 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1645
2025-03-24 20:58:26,243 - yfinance - DEBUG - response code=200
2025-03-24 20:58:26,244 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:58:26,244 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:58:26,245 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:58:26,249 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:58:26,253 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:58:26,257 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:58:26,257 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:58:26,258 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:58:26,259 - yfinance - DEBUG - Exiting download()
2025-03-24 20:58:26,260 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:58:26,260 - yfinance - DEBUG - Entering download()
2025-03-24 20:58:26,260 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:58:26,261 - yfinance - DEBUG -  Entering history()
2025-03-24 20:58:26,261 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:58:26,261 - yfinance - DEBUG -   Entering history()
2025-03-24 20:58:26,262 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:26,262 - yfinance - DEBUG -    Entering get()
2025-03-24 20:58:26,262 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:58:26,262 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:58:26,262 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:26,263 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:58:26,263 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:26,264 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,264 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:26,264 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:26,264 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,265 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:58:26,368 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2639
2025-03-24 20:58:26,369 - yfinance - DEBUG - response code=200
2025-03-24 20:58:26,369 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:58:26,369 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:58:26,370 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:58:26,372 - yfinance - DEBUG - SPY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:58:26,376 - yfinance - DEBUG - SPY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:58:26,379 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:58:26,380 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:58:26,380 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:58:26,382 - yfinance - DEBUG - Exiting download()
2025-03-24 20:58:26,382 - yfinance_client - INFO - Downloaded data for SPY, shape: (59, 5)
2025-03-24 20:58:26,389 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:58:26,392 - __main__ - INFO - Step 2: Getting options chain data for SPY...
2025-03-24 20:58:26,392 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SPY
2025-03-24 20:58:26,393 - yfinance - DEBUG - Entering history()
2025-03-24 20:58:26,393 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:58:26,393 - yfinance - DEBUG -  Entering history()
2025-03-24 20:58:26,394 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:26,394 - yfinance - DEBUG -   Entering get()
2025-03-24 20:58:26,394 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:58:26,394 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:58:26,394 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:26,395 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:58:26,395 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:26,395 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,395 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:26,395 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:26,396 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,396 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:58:26,490 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1198
2025-03-24 20:58:26,490 - yfinance - DEBUG - response code=200
2025-03-24 20:58:26,490 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:58:26,491 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:58:26,491 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:58:26,493 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:58:26,495 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:58:26,498 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:58:26,499 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:58:26,499 - yfinance - DEBUG - Exiting history()
2025-03-24 20:58:26,499 - yfinance_client - INFO - Current price of SPY: $574.08
2025-03-24 20:58:26,499 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:26,500 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:26,500 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:58:26,501 - yfinance - DEBUG - params=None
2025-03-24 20:58:26,501 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:26,501 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:26,501 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,501 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:26,501 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:26,501 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,502 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:26,585 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:26,601 - yfinance - DEBUG - response code=200
2025-03-24 20:58:26,601 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:26,601 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:26,602 - yfinance_client - INFO - Found 32 expiration dates for SPY
2025-03-24 20:58:26,604 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:58:26,604 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:26,604 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:26,604 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743379200
2025-03-24 20:58:26,605 - yfinance - DEBUG - params=None
2025-03-24 20:58:26,605 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:26,605 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:26,605 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,605 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:26,606 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:26,606 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:26,606 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:26,715 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:26,720 - yfinance - DEBUG - response code=200
2025-03-24 20:58:26,720 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:26,721 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:26,726 - yfinance_client - INFO - Retrieved 206 calls and 201 puts
2025-03-24 20:58:27,435 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:58:27,436 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:27,436 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:27,437 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743724800
2025-03-24 20:58:27,437 - yfinance - DEBUG - params=None
2025-03-24 20:58:27,437 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:27,437 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:27,437 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:27,438 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:27,438 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:27,438 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:27,438 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:27,546 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:27,562 - yfinance - DEBUG - response code=200
2025-03-24 20:58:27,562 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:27,563 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:27,567 - yfinance_client - INFO - Retrieved 134 calls and 136 puts
2025-03-24 20:58:27,703 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:58:27,704 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:27,704 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:27,704 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744329600
2025-03-24 20:58:27,704 - yfinance - DEBUG - params=None
2025-03-24 20:58:27,704 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:27,705 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:27,705 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:27,705 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:27,705 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:27,705 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:27,705 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:27,799 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:27,813 - yfinance - DEBUG - response code=200
2025-03-24 20:58:27,814 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:27,814 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:27,818 - yfinance_client - INFO - Retrieved 143 calls and 131 puts
2025-03-24 20:58:27,959 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:58:27,959 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:27,959 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:27,959 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744848000
2025-03-24 20:58:27,960 - yfinance - DEBUG - params=None
2025-03-24 20:58:27,960 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:27,960 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:27,960 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:27,960 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:27,961 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:27,961 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:27,961 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:28,072 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:28,096 - yfinance - DEBUG - response code=200
2025-03-24 20:58:28,096 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:28,096 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:28,102 - yfinance_client - INFO - Retrieved 224 calls and 195 puts
2025-03-24 20:58:28,308 - yfinance_client - INFO - Successfully fetched 4 option chains for SPY
2025-03-24 20:58:28,309 - __main__ - INFO - Step 3: Preparing analysis data for SPY...
2025-03-24 20:58:28,309 - __main__ - INFO - Step 4: Processing options data for SPY...
2025-03-24 20:58:28,310 - __main__ - INFO - Found 4 expiration dates for SPY
2025-03-24 20:58:28,310 - __main__ - INFO - Processing expiration date 2025-03-31 for SPY...
2025-03-24 20:58:28,310 - __main__ - DEBUG - ATM calls shape before filtering: (206, 19)
2025-03-24 20:58:28,311 - __main__ - DEBUG - ATM puts shape before filtering: (201, 19)
2025-03-24 20:58:28,311 - __main__ - DEBUG - ATM calls shape after filtering: (55, 19)
2025-03-24 20:58:28,312 - __main__ - DEBUG - ATM puts shape after filtering: (55, 19)
2025-03-24 20:58:28,312 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:58:28,313 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:58:28,313 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:58:28,314 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:58:28,314 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:58:28,315 - __main__ - DEBUG - Volume data for SPY: calls=130483, puts=133470
2025-03-24 20:58:28,315 - __main__ - INFO - Successfully processed expiration 2025-03-31 for SPY
2025-03-24 20:58:28,315 - __main__ - INFO - Processing expiration date 2025-04-04 for SPY...
2025-03-24 20:58:28,316 - __main__ - DEBUG - ATM calls shape before filtering: (134, 19)
2025-03-24 20:58:28,316 - __main__ - DEBUG - ATM puts shape before filtering: (136, 19)
2025-03-24 20:58:28,317 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:58:28,317 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:58:28,318 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:58:28,319 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:58:28,319 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:58:28,319 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:58:28,320 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:58:28,320 - __main__ - DEBUG - Volume data for SPY: calls=69776, puts=96136
2025-03-24 20:58:28,320 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SPY
2025-03-24 20:58:28,321 - __main__ - INFO - Processing expiration date 2025-04-11 for SPY...
2025-03-24 20:58:28,321 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 20:58:28,321 - __main__ - DEBUG - ATM puts shape before filtering: (131, 19)
2025-03-24 20:58:28,322 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:58:28,322 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:58:28,323 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:58:28,323 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:58:28,324 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:58:28,324 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:58:28,324 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:58:28,325 - __main__ - DEBUG - Volume data for SPY: calls=38192, puts=37007
2025-03-24 20:58:28,325 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SPY
2025-03-24 20:58:28,325 - __main__ - INFO - Processing expiration date 2025-04-17 for SPY...
2025-03-24 20:58:28,326 - __main__ - DEBUG - ATM calls shape before filtering: (224, 19)
2025-03-24 20:58:28,326 - __main__ - DEBUG - ATM puts shape before filtering: (195, 19)
2025-03-24 20:58:28,327 - __main__ - DEBUG - ATM calls shape after filtering: (57, 19)
2025-03-24 20:58:28,327 - __main__ - DEBUG - ATM puts shape after filtering: (57, 19)
2025-03-24 20:58:28,327 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:58:28,328 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:58:28,328 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:58:28,329 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:58:28,329 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:58:28,330 - __main__ - DEBUG - Volume data for SPY: calls=175952, puts=311384
2025-03-24 20:58:28,330 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SPY
2025-03-24 20:58:28,330 - __main__ - INFO - Step 5: Generating analysis for SPY...
2025-03-24 20:58:28,330 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SPY with args: stock_analysis_data, market_context
2025-03-24 20:58:28,331 - gemini_client - DEBUG - Generated prompt of length 4898
2025-03-24 20:58:40,967 - gemini_client - DEBUG - Received raw response of length 2864
2025-03-24 20:58:40,968 - __main__ - INFO - Market alignment for SPY: contrary
2025-03-24 20:58:40,968 - __main__ - INFO - Creating stock analysis result for SPY...
2025-03-24 20:58:40,968 - __main__ - INFO - Successfully added SPY to stock analyses
2025-03-24 20:58:40,969 - __main__ - INFO - Updating Notion with analysis for SPY...
2025-03-24 20:58:40,969 - __main__ - INFO - Sending Discord notification for SPY...
2025-03-24 20:58:40,969 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2864 chars). Splitting into parts.
2025-03-24 20:58:40,970 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:58:41,267 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:58:41,268 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:58:41,269 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:58:41,583 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:58:41,584 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:58:41,584 - __main__ - INFO - Successfully sent Discord notification for SPY
2025-03-24 20:58:41,585 - __main__ - INFO - Analyzing QQQ...
2025-03-24 20:58:41,585 - __main__ - INFO - Step 1: Getting stock data for QQQ...
2025-03-24 20:58:41,585 - yfinance - DEBUG - Entering download()
2025-03-24 20:58:41,585 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:58:41,586 - yfinance - DEBUG -  Entering history()
2025-03-24 20:58:41,586 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:58:41,587 - yfinance - DEBUG -   Entering history()
2025-03-24 20:58:41,587 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:41,587 - yfinance - DEBUG -    Entering get()
2025-03-24 20:58:41,587 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:58:41,587 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:58:41,588 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:41,588 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:58:41,588 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:41,588 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,588 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:41,589 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:41,589 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,589 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:58:41,715 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1694
2025-03-24 20:58:41,716 - yfinance - DEBUG - response code=200
2025-03-24 20:58:41,716 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:58:41,716 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:58:41,718 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:58:41,724 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:58:41,728 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:58:41,731 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:58:41,732 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:58:41,732 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:58:41,734 - yfinance - DEBUG - Exiting download()
2025-03-24 20:58:41,734 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:58:41,735 - yfinance - DEBUG - Entering download()
2025-03-24 20:58:41,735 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:58:41,735 - yfinance - DEBUG -  Entering history()
2025-03-24 20:58:41,735 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:58:41,736 - yfinance - DEBUG -   Entering history()
2025-03-24 20:58:41,736 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:41,736 - yfinance - DEBUG -    Entering get()
2025-03-24 20:58:41,736 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:58:41,737 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:58:41,737 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:41,737 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:58:41,737 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:41,737 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,737 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:41,738 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:41,738 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,738 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:58:41,827 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2741
2025-03-24 20:58:41,828 - yfinance - DEBUG - response code=200
2025-03-24 20:58:41,828 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:58:41,828 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:58:41,830 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:58:41,831 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:58:41,835 - yfinance - DEBUG - QQQ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:58:41,839 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:58:41,840 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:58:41,841 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:58:41,842 - yfinance - DEBUG - Exiting download()
2025-03-24 20:58:41,843 - yfinance_client - INFO - Downloaded data for QQQ, shape: (59, 5)
2025-03-24 20:58:41,851 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:58:41,855 - __main__ - INFO - Step 2: Getting options chain data for QQQ...
2025-03-24 20:58:41,855 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QQQ
2025-03-24 20:58:41,856 - yfinance - DEBUG - Entering history()
2025-03-24 20:58:41,856 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:58:41,856 - yfinance - DEBUG -  Entering history()
2025-03-24 20:58:41,857 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:41,857 - yfinance - DEBUG -   Entering get()
2025-03-24 20:58:41,857 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:58:41,857 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:58:41,858 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:58:41,858 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:58:41,858 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:41,858 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,859 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:41,859 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:41,859 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,859 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:58:41,939 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1281
2025-03-24 20:58:41,939 - yfinance - DEBUG - response code=200
2025-03-24 20:58:41,939 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:58:41,940 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:58:41,941 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:58:41,942 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:58:41,946 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:58:41,949 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:58:41,950 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:58:41,950 - yfinance - DEBUG - Exiting history()
2025-03-24 20:58:41,950 - yfinance_client - INFO - Current price of QQQ: $490.66
2025-03-24 20:58:41,950 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:41,951 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:41,951 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ
2025-03-24 20:58:41,951 - yfinance - DEBUG - params=None
2025-03-24 20:58:41,951 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:41,951 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:41,952 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,952 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:41,952 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:41,952 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:41,952 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:42,035 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:42,046 - yfinance - DEBUG - response code=200
2025-03-24 20:58:42,046 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:42,047 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:42,048 - yfinance_client - INFO - Found 33 expiration dates for QQQ
2025-03-24 20:58:42,049 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:58:42,050 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:42,050 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:42,050 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743379200
2025-03-24 20:58:42,050 - yfinance - DEBUG - params=None
2025-03-24 20:58:42,051 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:42,051 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:42,051 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,051 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:42,052 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:42,052 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,052 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:42,154 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:42,157 - yfinance - DEBUG - response code=200
2025-03-24 20:58:42,157 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:42,157 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:42,162 - yfinance_client - INFO - Retrieved 159 calls and 145 puts
2025-03-24 20:58:42,310 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:58:42,310 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:42,311 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:42,311 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743724800
2025-03-24 20:58:42,311 - yfinance - DEBUG - params=None
2025-03-24 20:58:42,311 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:42,312 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:42,312 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,312 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:42,312 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:42,312 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,312 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:42,416 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:42,439 - yfinance - DEBUG - response code=200
2025-03-24 20:58:42,439 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:42,440 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:42,445 - yfinance_client - INFO - Retrieved 140 calls and 159 puts
2025-03-24 20:58:42,591 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:58:42,591 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:42,591 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:42,592 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744329600
2025-03-24 20:58:42,592 - yfinance - DEBUG - params=None
2025-03-24 20:58:42,592 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:42,592 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:42,593 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,593 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:42,593 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:42,593 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,593 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:42,687 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:42,688 - yfinance - DEBUG - response code=200
2025-03-24 20:58:42,689 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:42,689 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:42,694 - yfinance_client - INFO - Retrieved 136 calls and 133 puts
2025-03-24 20:58:42,826 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:58:42,826 - yfinance - DEBUG - Entering get()
2025-03-24 20:58:42,826 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:58:42,827 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744848000
2025-03-24 20:58:42,827 - yfinance - DEBUG - params=None
2025-03-24 20:58:42,827 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:58:42,827 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:58:42,828 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,828 - yfinance - DEBUG - reusing cookie
2025-03-24 20:58:42,828 - yfinance - DEBUG - reusing crumb
2025-03-24 20:58:42,828 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:58:42,828 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:58:42,921 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:58:42,947 - yfinance - DEBUG - response code=200
2025-03-24 20:58:42,948 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:58:42,948 - yfinance - DEBUG - Exiting get()
2025-03-24 20:58:42,953 - yfinance_client - INFO - Retrieved 140 calls and 132 puts
2025-03-24 20:58:43,086 - yfinance_client - INFO - Successfully fetched 4 option chains for QQQ
2025-03-24 20:58:43,086 - __main__ - INFO - Step 3: Preparing analysis data for QQQ...
2025-03-24 20:58:43,086 - __main__ - INFO - Step 4: Processing options data for QQQ...
2025-03-24 20:58:43,087 - __main__ - INFO - Found 4 expiration dates for QQQ
2025-03-24 20:58:43,087 - __main__ - INFO - Processing expiration date 2025-03-31 for QQQ...
2025-03-24 20:58:43,088 - __main__ - DEBUG - ATM calls shape before filtering: (159, 19)
2025-03-24 20:58:43,088 - __main__ - DEBUG - ATM puts shape before filtering: (145, 19)
2025-03-24 20:58:43,089 - __main__ - DEBUG - ATM calls shape after filtering: (37, 19)
2025-03-24 20:58:43,089 - __main__ - DEBUG - ATM puts shape after filtering: (35, 19)
2025-03-24 20:58:43,090 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:58:43,091 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:58:43,091 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:58:43,092 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:58:43,092 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:58:43,093 - __main__ - DEBUG - Volume data for QQQ: calls=38217, puts=47709
2025-03-24 20:58:43,093 - __main__ - INFO - Successfully processed expiration 2025-03-31 for QQQ
2025-03-24 20:58:43,093 - __main__ - INFO - Processing expiration date 2025-04-04 for QQQ...
2025-03-24 20:58:43,093 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:58:43,094 - __main__ - DEBUG - ATM puts shape before filtering: (159, 19)
2025-03-24 20:58:43,094 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:58:43,095 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:58:43,095 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:58:43,096 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:58:43,097 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:58:43,098 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:58:43,099 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:58:43,099 - __main__ - DEBUG - Volume data for QQQ: calls=28545, puts=29809
2025-03-24 20:58:43,099 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QQQ
2025-03-24 20:58:43,100 - __main__ - INFO - Processing expiration date 2025-04-11 for QQQ...
2025-03-24 20:58:43,100 - __main__ - DEBUG - ATM calls shape before filtering: (136, 19)
2025-03-24 20:58:43,101 - __main__ - DEBUG - ATM puts shape before filtering: (133, 19)
2025-03-24 20:58:43,101 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:58:43,102 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:58:43,102 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:58:43,103 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:58:43,103 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:58:43,104 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:58:43,104 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:58:43,105 - __main__ - DEBUG - Volume data for QQQ: calls=16620, puts=21183
2025-03-24 20:58:43,105 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QQQ
2025-03-24 20:58:43,105 - __main__ - INFO - Processing expiration date 2025-04-17 for QQQ...
2025-03-24 20:58:43,106 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:58:43,106 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 20:58:43,106 - __main__ - DEBUG - ATM calls shape after filtering: (22, 19)
2025-03-24 20:58:43,107 - __main__ - DEBUG - ATM puts shape after filtering: (22, 19)
2025-03-24 20:58:43,107 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:58:43,108 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:58:43,108 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:58:43,109 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:58:43,109 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:58:43,109 - __main__ - DEBUG - Volume data for QQQ: calls=92414, puts=81733
2025-03-24 20:58:43,110 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QQQ
2025-03-24 20:58:43,110 - __main__ - INFO - Step 5: Generating analysis for QQQ...
2025-03-24 20:58:43,110 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QQQ with args: stock_analysis_data, market_context
2025-03-24 20:58:43,111 - gemini_client - DEBUG - Generated prompt of length 4899
