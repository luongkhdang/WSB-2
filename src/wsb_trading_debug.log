2025-03-24 20:37:04,277 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 20:37:04,277 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 20:37:04,277 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 20:37:04,278 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 20:37:04,593 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 20:37:04,747 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000215EB1BB0B0>
2025-03-24 20:37:04,747 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000215EB18B950> server_hostname='api.notion.com' timeout=60.0
2025-03-24 20:37:04,773 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000215EB05EF60>
2025-03-24 20:37:04,774 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:37:04,774 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:37:04,775 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:37:04,775 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:37:04,775 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:37:05,332 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:37:05 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b5e1dbdf8cff9-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-/sEXoN6G46G2ZRNIgLM8VTMSnbc"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'169aaf04-eb3f-46c1-9c2e-6929161c204c'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=75vQuqB5aI1QcItMMISTiXeZzybV6BUApjNZLBsIGqc-1742873825-1.0.1.1-_y9QCwVCtU1ENzopYWH.i3FhlAxbs3Uvpsr7F1kdUqfZz1oD14cKxLM089kQMStD7Tbw.1NRue..Ru3B4Sw5fOYy89xeScdyV5v9UBTpQYo; path=/; expires=Tue, 25-Mar-25 04:07:05 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=1g68O5lMymX_2AJTBUPqBiAqnNolZVsEYEpmReUDZnU-1742873825447-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:37:05,334 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:37:05,335 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:37:05,335 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:37:05,335 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:37:05,336 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:37:05,336 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:37:05,337 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:37:05,337 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:37:05,337 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:37:05,337 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:37:05,505 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:37:05 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b5e212a81cff9-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-AaekoaQJM+354qFgbJHT+mds9Z0"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'cdd6d252-7dcc-4e2b-9187-23b9e50496b6'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:37:05,506 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:37:05,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:37:05,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:37:05,507 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:37:05,507 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:37:05,507 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:37:05,508 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:37:05,508 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:37:05,508 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:37:05,508 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:37:05,689 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:37:05 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b5e224c21cff9-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-3oLxh9zi+ahTdBhT98mgp+LkRW4"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'7f86c23d-bb38-4530-a858-be36036f77bf'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:37:05,690 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:37:05,690 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:37:05,690 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:37:05,691 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:37:05,691 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:37:05,691 - __main__ - INFO - All clients initialized successfully
2025-03-24 20:37:05,691 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 20:37:05,691 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 20:37:05,691 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:05,692 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:05,692 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/131.0.2903.86
2025-03-24 20:37:05,692 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:05,694 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 20:37:05,694 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:37:05,738 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:05,739 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:05,739 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:05,739 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:05,739 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:37:05,740 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:05,741 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:05,741 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:05,741 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:05,742 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 20:37:05,743 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 20:37:05,743 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 20:37:05,743 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:05,745 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 20:37:05,875 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 20:37:05,876 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 20:37:05,876 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:05,877 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:05,878 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 20:37:06,024 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1646
2025-03-24 20:37:06,024 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,025 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,025 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,026 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:06,034 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,038 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,042 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,042 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,043 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,045 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,045 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:37:06,048 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,049 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,049 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,049 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:37:06,051 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,051 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,051 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,051 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,051 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:37:06,052 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,052 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,052 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,052 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,052 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,052 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,053 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,053 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,114 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1654
2025-03-24 20:37:06,115 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,116 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,116 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,117 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:06,121 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,123 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,127 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,127 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,127 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,129 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,129 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:37:06,132 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,133 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,133 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,133 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:37:06,134 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,134 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,134 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,134 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,134 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:37:06,134 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,135 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,135 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,135 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,135 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,135 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,135 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,135 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,202 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1627
2025-03-24 20:37:06,202 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,203 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,203 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,204 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:06,208 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,211 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,215 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,215 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,216 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,217 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,218 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:37:06,220 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,221 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,221 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,221 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:37:06,222 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,222 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,222 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,222 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,222 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:37:06,223 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,223 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,223 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,223 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,223 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,223 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,224 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,224 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,282 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1638
2025-03-24 20:37:06,283 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,283 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,284 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,285 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:06,289 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,291 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,295 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,295 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,296 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,297 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,298 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:37:06,301 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,301 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,301 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,301 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:37:06,302 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,302 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,302 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,302 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,302 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:37:06,303 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,303 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,303 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,303 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,303 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,303 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,304 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,304 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,365 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1665
2025-03-24 20:37:06,366 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,366 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,366 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,367 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:06,371 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,373 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,377 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,377 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,378 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,379 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,380 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:37:06,383 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,383 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,383 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,384 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:37:06,384 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,384 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,384 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,385 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,385 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:37:06,385 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,385 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,385 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,385 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,386 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,386 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,386 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,386 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,455 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 20:37:06,456 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,456 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,456 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,457 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:06,461 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,464 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,468 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,468 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,468 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,470 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,470 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:37:06,473 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,473 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,474 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,474 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:37:06,474 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,474 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,475 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,475 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,475 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:37:06,475 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,475 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,475 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,475 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,476 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,476 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,476 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,476 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,535 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 20:37:06,535 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,536 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,536 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,537 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:06,541 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,543 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,547 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:06,547 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,547 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,549 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,549 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:37:06,552 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,552 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,553 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,553 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:37:06,553 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,553 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,554 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,554 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,554 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:37:06,554 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,554 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,555 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,555 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,555 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,555 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,555 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,555 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,610 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:06,611 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,611 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,611 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,613 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:33:00
2025-03-24 20:37:06,616 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:33:00+00:00
2025-03-24 20:37:06,618 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:33:00+00:00
2025-03-24 20:37:06,624 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:37:06,625 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,625 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,627 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,627 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:37:06,630 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:06,631 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:06,631 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:06,632 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 20:37:06,633 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:06,633 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,633 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:06,633 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:06,634 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 20:37:06,634 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:06,634 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,634 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,634 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,634 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,635 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,635 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,635 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,697 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 934
2025-03-24 20:37:06,698 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,698 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:06,699 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:06,699 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 20:37:06,704 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:37:06,706 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:37:06,710 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:37:06,710 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:06,710 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:06,712 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:06,712 - yfinance_client - INFO - Downloaded data for ^VIX, shape: (14, 5)
2025-03-24 20:37:06,713 - yfinance_client - INFO - Current VIX price: 17.479999542236328
2025-03-24 20:37:06,713 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:06,713 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:06,714 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:37:06,714 - yfinance - DEBUG - params=None
2025-03-24 20:37:06,714 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,714 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,714 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,714 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,715 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,715 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,715 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,794 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:06,808 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,808 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:06,808 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:06,810 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:06,810 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:06,810 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1742860800
2025-03-24 20:37:06,811 - yfinance - DEBUG - params=None
2025-03-24 20:37:06,811 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:06,811 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:06,811 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,811 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:06,812 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:06,812 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:06,812 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:06,897 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1742860800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:06,898 - yfinance - DEBUG - response code=200
2025-03-24 20:37:06,898 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:06,898 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:42,554 - discord.discord_client - INFO - Content length exceeds Discord limit (4677 chars). Splitting into chunks.
2025-03-24 20:37:42,555 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:37:42,847 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:37:42,848 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:37:42,849 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:37:43,111 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:37:43,113 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:37:43,115 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:37:43,422 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:37:43,423 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:37:43,424 - __main__ - INFO - Comprehensive market analysis complete: bullish
2025-03-24 20:37:43,424 - __main__ - INFO - Starting stock analysis...
2025-03-24 20:37:43,424 - __main__ - INFO - get_stock_analysis_prompt signature: (*args, **kwargs) with params: ['args', 'kwargs']
2025-03-24 20:37:43,425 - __main__ - INFO - Found 36 symbols in watchlist
2025-03-24 20:37:43,425 - __main__ - INFO - Analyzing SPY...
2025-03-24 20:37:43,425 - __main__ - INFO - Step 1: Getting stock data for SPY...
2025-03-24 20:37:43,426 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:43,426 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:43,426 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:43,426 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:37:43,427 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:43,427 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:43,427 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:43,427 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:43,427 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:37:43,428 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:43,428 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:43,428 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:43,428 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,428 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:43,429 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:43,429 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,429 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:43,505 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1650
2025-03-24 20:37:43,506 - yfinance - DEBUG - response code=200
2025-03-24 20:37:43,506 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:43,506 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:43,507 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:43,512 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:43,515 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:43,519 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:43,519 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:43,519 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:43,521 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:43,522 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:37:43,522 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:43,522 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:43,522 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:43,522 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:37:43,523 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:43,523 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:43,523 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:43,523 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:43,523 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:37:43,524 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:43,524 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:43,524 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:43,524 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,524 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:43,524 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:43,525 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,525 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:43,641 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2616
2025-03-24 20:37:43,642 - yfinance - DEBUG - response code=200
2025-03-24 20:37:43,642 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:43,643 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:43,644 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:37:43,645 - yfinance - DEBUG - SPY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:37:43,648 - yfinance - DEBUG - SPY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:37:43,652 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:37:43,653 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:43,653 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:43,655 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:43,655 - yfinance_client - INFO - Downloaded data for SPY, shape: (59, 5)
2025-03-24 20:37:43,660 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:37:43,664 - __main__ - INFO - Step 2: Getting options chain data for SPY...
2025-03-24 20:37:43,664 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SPY
2025-03-24 20:37:43,664 - yfinance - DEBUG - Entering history()
2025-03-24 20:37:43,665 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:37:43,665 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:43,665 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:43,666 - yfinance - DEBUG -   Entering get()
2025-03-24 20:37:43,666 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:37:43,666 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:37:43,667 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:43,667 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:37:43,667 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:43,667 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,667 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:43,668 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:43,668 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,668 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:37:43,825 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1198
2025-03-24 20:37:43,826 - yfinance - DEBUG - response code=200
2025-03-24 20:37:43,826 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:37:43,826 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:37:43,827 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:37:43,828 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:37:43,830 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:37:43,834 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:37:43,834 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:43,834 - yfinance - DEBUG - Exiting history()
2025-03-24 20:37:43,834 - yfinance_client - INFO - Current price of SPY: $574.08
2025-03-24 20:37:43,835 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:43,835 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:43,835 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:37:43,835 - yfinance - DEBUG - params=None
2025-03-24 20:37:43,835 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:43,835 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:43,836 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,836 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:43,836 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:43,836 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,836 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:43,925 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:43,937 - yfinance - DEBUG - response code=200
2025-03-24 20:37:43,937 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:43,937 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:43,939 - yfinance_client - INFO - Found 32 expiration dates for SPY
2025-03-24 20:37:43,940 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:37:43,940 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:43,940 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:43,941 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743379200
2025-03-24 20:37:43,941 - yfinance - DEBUG - params=None
2025-03-24 20:37:43,941 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:43,941 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:43,941 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,941 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:43,941 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:43,942 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:43,942 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:44,055 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:44,060 - yfinance - DEBUG - response code=200
2025-03-24 20:37:44,060 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:44,060 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:44,065 - yfinance_client - INFO - Retrieved 206 calls and 201 puts
2025-03-24 20:37:44,728 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:37:44,728 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:44,729 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:44,729 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743724800
2025-03-24 20:37:44,729 - yfinance - DEBUG - params=None
2025-03-24 20:37:44,730 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:44,730 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:44,730 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:44,730 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:44,730 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:44,730 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:44,731 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:44,832 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:44,862 - yfinance - DEBUG - response code=200
2025-03-24 20:37:44,862 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:44,863 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:44,867 - yfinance_client - INFO - Retrieved 134 calls and 136 puts
2025-03-24 20:37:45,000 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:37:45,001 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:45,001 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:45,001 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744329600
2025-03-24 20:37:45,002 - yfinance - DEBUG - params=None
2025-03-24 20:37:45,002 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:45,002 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:45,002 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:45,002 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:45,003 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:45,003 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:45,003 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:45,093 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:45,117 - yfinance - DEBUG - response code=200
2025-03-24 20:37:45,117 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:45,118 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:45,122 - yfinance_client - INFO - Retrieved 143 calls and 131 puts
2025-03-24 20:37:45,255 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:37:45,256 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:45,256 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:45,256 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744848000
2025-03-24 20:37:45,256 - yfinance - DEBUG - params=None
2025-03-24 20:37:45,257 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:45,257 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:45,257 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:45,257 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:45,258 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:45,258 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:45,258 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:45,364 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:45,378 - yfinance - DEBUG - response code=200
2025-03-24 20:37:45,378 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:45,379 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:45,384 - yfinance_client - INFO - Retrieved 224 calls and 195 puts
2025-03-24 20:37:45,587 - yfinance_client - INFO - Successfully fetched 4 option chains for SPY
2025-03-24 20:37:45,588 - __main__ - INFO - Step 3: Preparing analysis data for SPY...
2025-03-24 20:37:45,588 - __main__ - INFO - Step 4: Processing options data for SPY...
2025-03-24 20:37:45,588 - __main__ - INFO - Found 4 expiration dates for SPY
2025-03-24 20:37:45,589 - __main__ - INFO - Processing expiration date 2025-03-31 for SPY...
2025-03-24 20:37:45,589 - __main__ - DEBUG - ATM calls shape before filtering: (206, 19)
2025-03-24 20:37:45,590 - __main__ - DEBUG - ATM puts shape before filtering: (201, 19)
2025-03-24 20:37:45,590 - __main__ - DEBUG - ATM calls shape after filtering: (55, 19)
2025-03-24 20:37:45,591 - __main__ - DEBUG - ATM puts shape after filtering: (55, 19)
2025-03-24 20:37:45,591 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:37:45,592 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:37:45,592 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:37:45,593 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:37:45,594 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:37:45,594 - __main__ - DEBUG - Volume data for SPY: calls=130483, puts=133470
2025-03-24 20:37:45,594 - __main__ - INFO - Successfully processed expiration 2025-03-31 for SPY
2025-03-24 20:37:45,595 - __main__ - INFO - Processing expiration date 2025-04-04 for SPY...
2025-03-24 20:37:45,595 - __main__ - DEBUG - ATM calls shape before filtering: (134, 19)
2025-03-24 20:37:45,595 - __main__ - DEBUG - ATM puts shape before filtering: (136, 19)
2025-03-24 20:37:45,596 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:37:45,597 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:37:45,597 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:37:45,598 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:37:45,598 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:37:45,598 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:37:45,599 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:37:45,599 - __main__ - DEBUG - Volume data for SPY: calls=69776, puts=96136
2025-03-24 20:37:45,599 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SPY
2025-03-24 20:37:45,600 - __main__ - INFO - Processing expiration date 2025-04-11 for SPY...
2025-03-24 20:37:45,600 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 20:37:45,600 - __main__ - DEBUG - ATM puts shape before filtering: (131, 19)
2025-03-24 20:37:45,601 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:37:45,601 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:37:45,601 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:37:45,602 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:37:45,602 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:37:45,603 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:37:45,603 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:37:45,604 - __main__ - DEBUG - Volume data for SPY: calls=38192, puts=37007
2025-03-24 20:37:45,604 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SPY
2025-03-24 20:37:45,604 - __main__ - INFO - Processing expiration date 2025-04-17 for SPY...
2025-03-24 20:37:45,604 - __main__ - DEBUG - ATM calls shape before filtering: (224, 19)
2025-03-24 20:37:45,605 - __main__ - DEBUG - ATM puts shape before filtering: (195, 19)
2025-03-24 20:37:45,605 - __main__ - DEBUG - ATM calls shape after filtering: (57, 19)
2025-03-24 20:37:45,606 - __main__ - DEBUG - ATM puts shape after filtering: (57, 19)
2025-03-24 20:37:45,606 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:37:45,607 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:37:45,607 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:37:45,607 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:37:45,608 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:37:45,608 - __main__ - DEBUG - Volume data for SPY: calls=175952, puts=311384
2025-03-24 20:37:45,608 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SPY
2025-03-24 20:37:45,609 - __main__ - INFO - Step 5: Generating analysis for SPY...
2025-03-24 20:37:45,609 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SPY with args: stock_analysis_data, market_context
2025-03-24 20:37:57,771 - __main__ - INFO - Market alignment for SPY: contrary
2025-03-24 20:37:57,772 - __main__ - INFO - Creating stock analysis result for SPY...
2025-03-24 20:37:57,772 - __main__ - INFO - Successfully added SPY to stock analyses
2025-03-24 20:37:57,773 - __main__ - INFO - Updating Notion with analysis for SPY...
2025-03-24 20:37:57,773 - __main__ - INFO - Sending Discord notification for SPY...
2025-03-24 20:37:57,773 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2644 chars). Splitting into parts.
2025-03-24 20:37:57,774 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:37:58,096 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:37:58,097 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:37:58,098 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:37:58,426 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:37:58,427 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:37:58,427 - __main__ - INFO - Successfully sent Discord notification for SPY
2025-03-24 20:37:58,428 - __main__ - INFO - Analyzing QQQ...
2025-03-24 20:37:58,428 - __main__ - INFO - Step 1: Getting stock data for QQQ...
2025-03-24 20:37:58,428 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:58,428 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:58,429 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:58,429 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:37:58,430 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:58,430 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:58,430 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:58,430 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:58,430 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:37:58,431 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:58,431 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:58,431 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:58,431 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,432 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:58,432 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:58,432 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,432 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:58,493 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1657
2025-03-24 20:37:58,494 - yfinance - DEBUG - response code=200
2025-03-24 20:37:58,494 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:58,494 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:58,495 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:37:58,500 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:58,502 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:58,506 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:37:58,506 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:58,506 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:58,508 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:58,508 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:37:58,508 - yfinance - DEBUG - Entering download()
2025-03-24 20:37:58,509 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:37:58,509 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:58,510 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:37:58,510 - yfinance - DEBUG -   Entering history()
2025-03-24 20:37:58,510 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:58,510 - yfinance - DEBUG -    Entering get()
2025-03-24 20:37:58,511 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:37:58,511 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:37:58,511 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:58,511 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:37:58,511 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:58,511 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,512 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:58,512 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:58,512 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,512 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:37:58,581 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2268
2025-03-24 20:37:58,582 - yfinance - DEBUG - response code=200
2025-03-24 20:37:58,582 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:37:58,583 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:37:58,584 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:37:58,585 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:37:58,587 - yfinance - DEBUG - QQQ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:37:58,590 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:37:58,591 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:37:58,591 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:58,593 - yfinance - DEBUG - Exiting download()
2025-03-24 20:37:58,593 - yfinance_client - INFO - Downloaded data for QQQ, shape: (59, 5)
2025-03-24 20:37:58,598 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:37:58,602 - __main__ - INFO - Step 2: Getting options chain data for QQQ...
2025-03-24 20:37:58,602 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QQQ
2025-03-24 20:37:58,602 - yfinance - DEBUG - Entering history()
2025-03-24 20:37:58,603 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:37:58,603 - yfinance - DEBUG -  Entering history()
2025-03-24 20:37:58,603 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:58,604 - yfinance - DEBUG -   Entering get()
2025-03-24 20:37:58,604 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:37:58,604 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:37:58,604 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:37:58,605 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:37:58,605 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:58,605 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,605 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:58,605 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:58,605 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,605 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:37:58,685 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1208
2025-03-24 20:37:58,686 - yfinance - DEBUG - response code=200
2025-03-24 20:37:58,686 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:37:58,686 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:37:58,687 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:37:58,688 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:37:58,690 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:37:58,693 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:37:58,694 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:37:58,694 - yfinance - DEBUG - Exiting history()
2025-03-24 20:37:58,694 - yfinance_client - INFO - Current price of QQQ: $490.66
2025-03-24 20:37:58,694 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:58,694 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:58,695 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ
2025-03-24 20:37:58,695 - yfinance - DEBUG - params=None
2025-03-24 20:37:58,695 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:58,695 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:58,695 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,695 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:58,696 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:58,696 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,696 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:58,786 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:58,787 - yfinance - DEBUG - response code=200
2025-03-24 20:37:58,788 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:58,788 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:58,789 - yfinance_client - INFO - Found 33 expiration dates for QQQ
2025-03-24 20:37:58,790 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:37:58,790 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:58,790 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:58,791 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743379200
2025-03-24 20:37:58,791 - yfinance - DEBUG - params=None
2025-03-24 20:37:58,791 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:58,791 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:58,791 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,791 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:58,792 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:58,792 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:58,792 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:58,885 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:58,888 - yfinance - DEBUG - response code=200
2025-03-24 20:37:58,889 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:58,889 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:58,893 - yfinance_client - INFO - Retrieved 159 calls and 145 puts
2025-03-24 20:37:59,040 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:37:59,041 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:59,041 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:59,041 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743724800
2025-03-24 20:37:59,042 - yfinance - DEBUG - params=None
2025-03-24 20:37:59,042 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:59,042 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:59,042 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:59,043 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:59,043 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:59,043 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:59,043 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:59,158 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:59,182 - yfinance - DEBUG - response code=200
2025-03-24 20:37:59,182 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:59,182 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:59,187 - yfinance_client - INFO - Retrieved 140 calls and 159 puts
2025-03-24 20:37:59,332 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:37:59,332 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:59,333 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:59,333 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744329600
2025-03-24 20:37:59,333 - yfinance - DEBUG - params=None
2025-03-24 20:37:59,333 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:59,333 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:59,334 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:59,334 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:59,334 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:59,334 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:59,334 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:59,425 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:59,426 - yfinance - DEBUG - response code=200
2025-03-24 20:37:59,426 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:59,427 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:59,431 - yfinance_client - INFO - Retrieved 136 calls and 133 puts
2025-03-24 20:37:59,562 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:37:59,563 - yfinance - DEBUG - Entering get()
2025-03-24 20:37:59,563 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:37:59,563 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744848000
2025-03-24 20:37:59,564 - yfinance - DEBUG - params=None
2025-03-24 20:37:59,564 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:37:59,564 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:37:59,564 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:37:59,564 - yfinance - DEBUG - reusing cookie
2025-03-24 20:37:59,565 - yfinance - DEBUG - reusing crumb
2025-03-24 20:37:59,565 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:37:59,565 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:37:59,653 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:37:59,669 - yfinance - DEBUG - response code=200
2025-03-24 20:37:59,669 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:37:59,669 - yfinance - DEBUG - Exiting get()
2025-03-24 20:37:59,674 - yfinance_client - INFO - Retrieved 140 calls and 132 puts
2025-03-24 20:37:59,809 - yfinance_client - INFO - Successfully fetched 4 option chains for QQQ
2025-03-24 20:37:59,809 - __main__ - INFO - Step 3: Preparing analysis data for QQQ...
2025-03-24 20:37:59,809 - __main__ - INFO - Step 4: Processing options data for QQQ...
2025-03-24 20:37:59,809 - __main__ - INFO - Found 4 expiration dates for QQQ
2025-03-24 20:37:59,810 - __main__ - INFO - Processing expiration date 2025-03-31 for QQQ...
2025-03-24 20:37:59,810 - __main__ - DEBUG - ATM calls shape before filtering: (159, 19)
2025-03-24 20:37:59,810 - __main__ - DEBUG - ATM puts shape before filtering: (145, 19)
2025-03-24 20:37:59,811 - __main__ - DEBUG - ATM calls shape after filtering: (37, 19)
2025-03-24 20:37:59,811 - __main__ - DEBUG - ATM puts shape after filtering: (35, 19)
2025-03-24 20:37:59,812 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:37:59,812 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:37:59,812 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:37:59,813 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:37:59,813 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:37:59,814 - __main__ - DEBUG - Volume data for QQQ: calls=38217, puts=47709
2025-03-24 20:37:59,814 - __main__ - INFO - Successfully processed expiration 2025-03-31 for QQQ
2025-03-24 20:37:59,814 - __main__ - INFO - Processing expiration date 2025-04-04 for QQQ...
2025-03-24 20:37:59,815 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:37:59,815 - __main__ - DEBUG - ATM puts shape before filtering: (159, 19)
2025-03-24 20:37:59,815 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:37:59,816 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:37:59,816 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:37:59,817 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:37:59,817 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:37:59,818 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:37:59,818 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:37:59,818 - __main__ - DEBUG - Volume data for QQQ: calls=28545, puts=29809
2025-03-24 20:37:59,819 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QQQ
2025-03-24 20:37:59,819 - __main__ - INFO - Processing expiration date 2025-04-11 for QQQ...
2025-03-24 20:37:59,819 - __main__ - DEBUG - ATM calls shape before filtering: (136, 19)
2025-03-24 20:37:59,819 - __main__ - DEBUG - ATM puts shape before filtering: (133, 19)
2025-03-24 20:37:59,820 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:37:59,821 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:37:59,821 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:37:59,822 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:37:59,822 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:37:59,822 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:37:59,823 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:37:59,823 - __main__ - DEBUG - Volume data for QQQ: calls=16620, puts=21183
2025-03-24 20:37:59,823 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QQQ
2025-03-24 20:37:59,823 - __main__ - INFO - Processing expiration date 2025-04-17 for QQQ...
2025-03-24 20:37:59,824 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:37:59,824 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 20:37:59,825 - __main__ - DEBUG - ATM calls shape after filtering: (22, 19)
2025-03-24 20:37:59,825 - __main__ - DEBUG - ATM puts shape after filtering: (22, 19)
2025-03-24 20:37:59,825 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:37:59,826 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:37:59,826 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:37:59,827 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:37:59,827 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:37:59,828 - __main__ - DEBUG - Volume data for QQQ: calls=92414, puts=81733
2025-03-24 20:37:59,828 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QQQ
2025-03-24 20:37:59,828 - __main__ - INFO - Step 5: Generating analysis for QQQ...
2025-03-24 20:37:59,828 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QQQ with args: stock_analysis_data, market_context
2025-03-24 20:38:11,508 - __main__ - INFO - Market alignment for QQQ: **
2025-03-24 20:38:11,508 - __main__ - INFO - Creating stock analysis result for QQQ...
2025-03-24 20:38:11,509 - __main__ - INFO - Successfully added QQQ to stock analyses
2025-03-24 20:38:11,509 - __main__ - INFO - Updating Notion with analysis for QQQ...
2025-03-24 20:38:11,509 - __main__ - INFO - Sending Discord notification for QQQ...
2025-03-24 20:38:11,509 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2542 chars). Splitting into parts.
2025-03-24 20:38:11,510 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:11,863 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:11,864 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:11,864 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:12,213 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:12,214 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:12,215 - __main__ - INFO - Successfully sent Discord notification for QQQ
2025-03-24 20:38:12,215 - __main__ - INFO - Analyzing IWM...
2025-03-24 20:38:12,215 - __main__ - INFO - Step 1: Getting stock data for IWM...
2025-03-24 20:38:12,215 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:12,215 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:12,216 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:12,216 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:38:12,216 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:12,216 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:12,217 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:12,217 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:12,217 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:38:12,217 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:12,217 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:12,217 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:12,217 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,218 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:12,218 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:12,218 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,218 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:12,293 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1607
2025-03-24 20:38:12,294 - yfinance - DEBUG - response code=200
2025-03-24 20:38:12,294 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:12,294 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:12,295 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:38:12,299 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:12,303 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:12,307 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:12,308 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:12,308 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:12,309 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:12,310 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:38:12,310 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:12,310 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:12,310 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:12,311 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:38:12,311 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:12,311 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:12,311 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:12,312 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:12,312 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:38:12,312 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:12,312 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:12,312 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:12,312 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,313 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:12,313 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:12,313 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,313 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:12,397 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2612
2025-03-24 20:38:12,398 - yfinance - DEBUG - response code=200
2025-03-24 20:38:12,399 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:12,399 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:12,400 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:38:12,401 - yfinance - DEBUG - IWM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:38:12,404 - yfinance - DEBUG - IWM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:12,408 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:12,408 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:12,408 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:12,410 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:12,410 - yfinance_client - INFO - Downloaded data for IWM, shape: (59, 5)
2025-03-24 20:38:12,416 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:38:12,419 - __main__ - INFO - Step 2: Getting options chain data for IWM...
2025-03-24 20:38:12,419 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for IWM
2025-03-24 20:38:12,420 - yfinance - DEBUG - Entering history()
2025-03-24 20:38:12,420 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:38:12,420 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:12,421 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:12,421 - yfinance - DEBUG -   Entering get()
2025-03-24 20:38:12,421 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:38:12,421 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:38:12,422 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:12,422 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:38:12,422 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:12,422 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,422 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:12,423 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:12,423 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,423 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:38:12,504 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1218
2025-03-24 20:38:12,505 - yfinance - DEBUG - response code=200
2025-03-24 20:38:12,506 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:38:12,506 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:38:12,507 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:38:12,508 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:38:12,510 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:12,515 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:12,515 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:12,515 - yfinance - DEBUG - Exiting history()
2025-03-24 20:38:12,516 - yfinance_client - INFO - Current price of IWM: $208.86
2025-03-24 20:38:12,516 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:12,516 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:12,516 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM
2025-03-24 20:38:12,516 - yfinance - DEBUG - params=None
2025-03-24 20:38:12,516 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:12,517 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:12,517 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,517 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:12,517 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:12,517 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,517 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:12,600 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:12,601 - yfinance - DEBUG - response code=200
2025-03-24 20:38:12,601 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:12,601 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:12,603 - yfinance_client - INFO - Found 31 expiration dates for IWM
2025-03-24 20:38:12,604 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:38:12,604 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:12,604 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:12,604 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743379200
2025-03-24 20:38:12,604 - yfinance - DEBUG - params=None
2025-03-24 20:38:12,605 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:12,605 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:12,605 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,605 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:12,605 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:12,605 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,605 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:12,707 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:12,707 - yfinance - DEBUG - response code=200
2025-03-24 20:38:12,708 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:12,708 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:12,713 - yfinance_client - INFO - Retrieved 90 calls and 86 puts
2025-03-24 20:38:12,800 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:38:12,800 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:12,801 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:12,801 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743724800
2025-03-24 20:38:12,801 - yfinance - DEBUG - params=None
2025-03-24 20:38:12,801 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:12,802 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:12,802 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,802 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:12,802 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:12,802 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,803 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:12,884 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:12,885 - yfinance - DEBUG - response code=200
2025-03-24 20:38:12,885 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:12,886 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:12,889 - yfinance_client - INFO - Retrieved 80 calls and 82 puts
2025-03-24 20:38:12,971 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:38:12,971 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:12,971 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:12,972 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744329600
2025-03-24 20:38:12,972 - yfinance - DEBUG - params=None
2025-03-24 20:38:12,972 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:12,972 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:12,972 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,972 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:12,973 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:12,973 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:12,973 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:13,060 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:13,061 - yfinance - DEBUG - response code=200
2025-03-24 20:38:13,061 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:13,062 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:13,065 - yfinance_client - INFO - Retrieved 71 calls and 80 puts
2025-03-24 20:38:13,141 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:38:13,142 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:13,142 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:13,142 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744848000
2025-03-24 20:38:13,143 - yfinance - DEBUG - params=None
2025-03-24 20:38:13,144 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:13,144 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:13,144 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:13,144 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:13,144 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:13,144 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:13,144 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:13,247 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:13,248 - yfinance - DEBUG - response code=200
2025-03-24 20:38:13,248 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:13,248 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:13,253 - yfinance_client - INFO - Retrieved 101 calls and 91 puts
2025-03-24 20:38:13,348 - yfinance_client - INFO - Successfully fetched 4 option chains for IWM
2025-03-24 20:38:13,349 - __main__ - INFO - Step 3: Preparing analysis data for IWM...
2025-03-24 20:38:13,349 - __main__ - INFO - Step 4: Processing options data for IWM...
2025-03-24 20:38:13,350 - __main__ - INFO - Found 4 expiration dates for IWM
2025-03-24 20:38:13,350 - __main__ - INFO - Processing expiration date 2025-03-31 for IWM...
2025-03-24 20:38:13,350 - __main__ - DEBUG - ATM calls shape before filtering: (90, 19)
2025-03-24 20:38:13,351 - __main__ - DEBUG - ATM puts shape before filtering: (86, 19)
2025-03-24 20:38:13,351 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:38:13,352 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:38:13,352 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:38:13,353 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:38:13,353 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:38:13,354 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:38:13,354 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:38:13,355 - __main__ - DEBUG - Volume data for IWM: calls=14723, puts=18881
2025-03-24 20:38:13,355 - __main__ - INFO - Successfully processed expiration 2025-03-31 for IWM
2025-03-24 20:38:13,355 - __main__ - INFO - Processing expiration date 2025-04-04 for IWM...
2025-03-24 20:38:13,356 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:38:13,356 - __main__ - DEBUG - ATM puts shape before filtering: (82, 19)
2025-03-24 20:38:13,356 - __main__ - DEBUG - ATM calls shape after filtering: (23, 19)
2025-03-24 20:38:13,357 - __main__ - DEBUG - ATM puts shape after filtering: (23, 19)
2025-03-24 20:38:13,357 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:38:13,358 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:38:13,358 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:38:13,359 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:38:13,359 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:38:13,359 - __main__ - DEBUG - Volume data for IWM: calls=19269, puts=29074
2025-03-24 20:38:13,360 - __main__ - INFO - Successfully processed expiration 2025-04-04 for IWM
2025-03-24 20:38:13,360 - __main__ - INFO - Processing expiration date 2025-04-11 for IWM...
2025-03-24 20:38:13,360 - __main__ - DEBUG - ATM calls shape before filtering: (71, 19)
2025-03-24 20:38:13,360 - __main__ - DEBUG - ATM puts shape before filtering: (80, 19)
2025-03-24 20:38:13,361 - __main__ - DEBUG - ATM calls shape after filtering: (25, 19)
2025-03-24 20:38:13,361 - __main__ - DEBUG - ATM puts shape after filtering: (25, 19)
2025-03-24 20:38:13,361 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:38:13,362 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:38:13,362 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:38:13,363 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:38:13,363 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:38:13,364 - __main__ - DEBUG - Volume data for IWM: calls=5175, puts=10062
2025-03-24 20:38:13,364 - __main__ - INFO - Successfully processed expiration 2025-04-11 for IWM
2025-03-24 20:38:13,364 - __main__ - INFO - Processing expiration date 2025-04-17 for IWM...
2025-03-24 20:38:13,365 - __main__ - DEBUG - ATM calls shape before filtering: (101, 19)
2025-03-24 20:38:13,365 - __main__ - DEBUG - ATM puts shape before filtering: (91, 19)
2025-03-24 20:38:13,365 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:38:13,366 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:38:13,366 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:38:13,367 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:38:13,367 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:38:13,368 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:38:13,368 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:38:13,368 - __main__ - DEBUG - Volume data for IWM: calls=34485, puts=312289
2025-03-24 20:38:13,369 - __main__ - INFO - Successfully processed expiration 2025-04-17 for IWM
2025-03-24 20:38:13,369 - __main__ - INFO - Step 5: Generating analysis for IWM...
2025-03-24 20:38:13,369 - __main__ - DEBUG - Calling get_stock_analysis_prompt for IWM with args: stock_analysis_data, market_context
2025-03-24 20:38:27,864 - __main__ - INFO - Market alignment for IWM: **
2025-03-24 20:38:27,865 - __main__ - INFO - Creating stock analysis result for IWM...
2025-03-24 20:38:27,865 - __main__ - INFO - Successfully added IWM to stock analyses
2025-03-24 20:38:27,865 - __main__ - INFO - Updating Notion with analysis for IWM...
2025-03-24 20:38:27,865 - __main__ - INFO - Sending Discord notification for IWM...
2025-03-24 20:38:27,865 - discord.discord_client - INFO - Analysis description exceeds Discord limit (3050 chars). Splitting into parts.
2025-03-24 20:38:27,866 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:28,118 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:28,119 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:28,121 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:28,373 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:28,374 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:28,374 - __main__ - INFO - Successfully sent Discord notification for IWM
2025-03-24 20:38:28,375 - __main__ - INFO - Analyzing VTV...
2025-03-24 20:38:28,375 - __main__ - INFO - Step 1: Getting stock data for VTV...
2025-03-24 20:38:28,375 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:28,375 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:28,376 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:28,376 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:38:28,377 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:28,377 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:28,377 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:28,377 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:28,377 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:38:28,378 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:28,378 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:28,378 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:28,378 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,378 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:28,379 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:28,379 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,379 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:28,444 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1637
2025-03-24 20:38:28,445 - yfinance - DEBUG - response code=200
2025-03-24 20:38:28,445 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:28,446 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:28,447 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:38:28,451 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:28,454 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:28,458 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:28,459 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:28,459 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:28,461 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:28,461 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:38:28,462 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:28,462 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:28,462 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:28,462 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:38:28,463 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:28,463 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:28,463 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:28,463 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:28,463 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:38:28,464 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:28,464 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:28,464 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:28,464 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,464 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:28,465 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:28,465 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,465 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:28,548 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1981
2025-03-24 20:38:28,548 - yfinance - DEBUG - response code=200
2025-03-24 20:38:28,548 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:28,549 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:28,549 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:38:28,550 - yfinance - DEBUG - VTV: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:38:28,552 - yfinance - DEBUG - VTV: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:28,556 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:28,556 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:28,557 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:28,558 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:28,558 - yfinance_client - INFO - Downloaded data for VTV, shape: (59, 5)
2025-03-24 20:38:28,564 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:38:28,567 - __main__ - INFO - Step 2: Getting options chain data for VTV...
2025-03-24 20:38:28,567 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VTV
2025-03-24 20:38:28,567 - yfinance - DEBUG - Entering history()
2025-03-24 20:38:28,568 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:38:28,568 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:28,568 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:28,569 - yfinance - DEBUG -   Entering get()
2025-03-24 20:38:28,569 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:38:28,569 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:38:28,569 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:28,569 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:38:28,569 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:28,570 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,570 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:28,570 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:28,570 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,570 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:38:28,650 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1219
2025-03-24 20:38:28,650 - yfinance - DEBUG - response code=200
2025-03-24 20:38:28,650 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:38:28,651 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:38:28,651 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:38:28,652 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:38:28,654 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:28,658 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:28,658 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:28,658 - yfinance - DEBUG - Exiting history()
2025-03-24 20:38:28,658 - yfinance_client - INFO - Current price of VTV: $174.55
2025-03-24 20:38:28,659 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:28,659 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:28,659 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV
2025-03-24 20:38:28,659 - yfinance - DEBUG - params=None
2025-03-24 20:38:28,659 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:28,660 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:28,660 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,660 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:28,660 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:28,660 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,660 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:28,725 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:28,726 - yfinance - DEBUG - response code=200
2025-03-24 20:38:28,726 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:28,726 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:28,728 - yfinance_client - INFO - Found 4 expiration dates for VTV
2025-03-24 20:38:28,728 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:38:28,728 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:28,728 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:28,728 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV?date=1744848000
2025-03-24 20:38:28,728 - yfinance - DEBUG - params=None
2025-03-24 20:38:28,728 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:28,728 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:28,728 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,729 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:28,729 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:28,729 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:28,729 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:28,787 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:28,788 - yfinance - DEBUG - response code=200
2025-03-24 20:38:28,788 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:28,788 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:28,791 - yfinance_client - INFO - Retrieved 18 calls and 11 puts
2025-03-24 20:38:28,809 - yfinance_client - INFO - Successfully fetched 1 option chains for VTV
2025-03-24 20:38:28,809 - __main__ - INFO - Step 3: Preparing analysis data for VTV...
2025-03-24 20:38:28,809 - __main__ - INFO - Step 4: Processing options data for VTV...
2025-03-24 20:38:28,810 - __main__ - INFO - Found 1 expiration dates for VTV
2025-03-24 20:38:28,810 - __main__ - INFO - Processing expiration date 2025-04-17 for VTV...
2025-03-24 20:38:28,810 - __main__ - DEBUG - ATM calls shape before filtering: (18, 19)
2025-03-24 20:38:28,810 - __main__ - DEBUG - ATM puts shape before filtering: (11, 19)
2025-03-24 20:38:28,811 - __main__ - DEBUG - ATM calls shape after filtering: (15, 19)
2025-03-24 20:38:28,812 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:38:28,812 - __main__ - DEBUG - Finding ATM call for VTV...
2025-03-24 20:38:28,813 - __main__ - DEBUG - ATM call for VTV: strike=175.0
2025-03-24 20:38:28,813 - __main__ - DEBUG - Finding ATM put for VTV...
2025-03-24 20:38:28,813 - __main__ - DEBUG - ATM put for VTV: strike=175.0
2025-03-24 20:38:28,814 - __main__ - DEBUG - Calculating volume data for VTV...
2025-03-24 20:38:28,814 - __main__ - DEBUG - Volume data for VTV: calls=92, puts=8
2025-03-24 20:38:28,814 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VTV
2025-03-24 20:38:28,815 - __main__ - INFO - Step 5: Generating analysis for VTV...
2025-03-24 20:38:28,815 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VTV with args: stock_analysis_data, market_context
2025-03-24 20:38:41,616 - __main__ - INFO - Market alignment for VTV: **
2025-03-24 20:38:41,616 - __main__ - INFO - Creating stock analysis result for VTV...
2025-03-24 20:38:41,616 - __main__ - INFO - Successfully added VTV to stock analyses
2025-03-24 20:38:41,616 - __main__ - INFO - Updating Notion with analysis for VTV...
2025-03-24 20:38:41,617 - __main__ - INFO - Sending Discord notification for VTV...
2025-03-24 20:38:41,617 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2819 chars). Splitting into parts.
2025-03-24 20:38:41,618 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:42,430 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:42,432 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:42,433 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:43,261 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:43,262 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:43,262 - __main__ - INFO - Successfully sent Discord notification for VTV
2025-03-24 20:38:43,262 - __main__ - INFO - Analyzing VGLT...
2025-03-24 20:38:43,263 - __main__ - INFO - Step 1: Getting stock data for VGLT...
2025-03-24 20:38:43,263 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:43,263 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:43,263 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:43,265 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:38:43,265 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:43,265 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:43,265 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:43,266 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:43,266 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:38:43,266 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:43,266 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:43,266 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:43,266 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,267 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:43,267 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:43,267 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,267 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:43,529 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1668
2025-03-24 20:38:43,530 - yfinance - DEBUG - response code=200
2025-03-24 20:38:43,530 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:43,530 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:43,531 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:38:43,535 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:43,537 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:43,542 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:43,543 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:43,543 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:43,545 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:43,545 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:38:43,545 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:43,545 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:43,546 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:43,546 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:38:43,546 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:43,546 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:43,547 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:43,547 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:43,547 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:38:43,547 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:43,547 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:43,548 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:43,548 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,548 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:43,548 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:43,548 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,548 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:43,628 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2375
2025-03-24 20:38:43,629 - yfinance - DEBUG - response code=200
2025-03-24 20:38:43,629 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:43,629 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:43,631 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:38:43,633 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:38:43,639 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 20:38:43,646 - yfinance - DEBUG - VGLT: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:43,652 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:43,652 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:43,653 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:43,656 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:43,657 - yfinance_client - INFO - Downloaded data for VGLT, shape: (59, 5)
2025-03-24 20:38:43,665 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:38:43,669 - __main__ - INFO - Step 2: Getting options chain data for VGLT...
2025-03-24 20:38:43,670 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VGLT
2025-03-24 20:38:43,670 - yfinance - DEBUG - Entering history()
2025-03-24 20:38:43,671 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:38:43,671 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:43,671 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:43,672 - yfinance - DEBUG -   Entering get()
2025-03-24 20:38:43,672 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:38:43,672 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:38:43,672 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:43,673 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:38:43,673 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:43,673 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,673 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:43,674 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:43,674 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,674 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:38:43,759 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1241
2025-03-24 20:38:43,760 - yfinance - DEBUG - response code=200
2025-03-24 20:38:43,760 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:38:43,760 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:38:43,761 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:38:43,762 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:38:43,765 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:43,769 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:43,769 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:43,770 - yfinance - DEBUG - Exiting history()
2025-03-24 20:38:43,770 - yfinance_client - INFO - Current price of VGLT: $56.85
2025-03-24 20:38:43,770 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:43,770 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:43,771 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT
2025-03-24 20:38:43,771 - yfinance - DEBUG - params=None
2025-03-24 20:38:43,771 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:43,771 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:43,771 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,772 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:43,772 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:43,772 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,772 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:43,833 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1815
2025-03-24 20:38:43,834 - yfinance - DEBUG - response code=200
2025-03-24 20:38:43,834 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:43,835 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:43,835 - yfinance_client - INFO - Found 4 expiration dates for VGLT
2025-03-24 20:38:43,835 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:38:43,836 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:43,836 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:43,836 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT?date=1744848000
2025-03-24 20:38:43,836 - yfinance - DEBUG - params=None
2025-03-24 20:38:43,836 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:43,837 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:43,837 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,837 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:43,837 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:43,837 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:43,837 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:43,943 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1813
2025-03-24 20:38:43,943 - yfinance - DEBUG - response code=200
2025-03-24 20:38:43,944 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:43,944 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:43,947 - yfinance_client - INFO - Retrieved 8 calls and 8 puts
2025-03-24 20:38:43,962 - yfinance_client - INFO - Successfully fetched 1 option chains for VGLT
2025-03-24 20:38:43,962 - __main__ - INFO - Step 3: Preparing analysis data for VGLT...
2025-03-24 20:38:43,962 - __main__ - INFO - Step 4: Processing options data for VGLT...
2025-03-24 20:38:43,962 - __main__ - INFO - Found 1 expiration dates for VGLT
2025-03-24 20:38:43,962 - __main__ - INFO - Processing expiration date 2025-04-17 for VGLT...
2025-03-24 20:38:43,963 - __main__ - DEBUG - ATM calls shape before filtering: (8, 19)
2025-03-24 20:38:43,963 - __main__ - DEBUG - ATM puts shape before filtering: (8, 19)
2025-03-24 20:38:43,964 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:38:43,964 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:38:43,965 - __main__ - DEBUG - Finding ATM call for VGLT...
2025-03-24 20:38:43,965 - __main__ - DEBUG - ATM call for VGLT: strike=57.0
2025-03-24 20:38:43,966 - __main__ - DEBUG - Finding ATM put for VGLT...
2025-03-24 20:38:43,967 - __main__ - DEBUG - ATM put for VGLT: strike=57.0
2025-03-24 20:38:43,967 - __main__ - DEBUG - Calculating volume data for VGLT...
2025-03-24 20:38:43,968 - __main__ - DEBUG - Volume data for VGLT: calls=23, puts=27
2025-03-24 20:38:43,968 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VGLT
2025-03-24 20:38:43,968 - __main__ - INFO - Step 5: Generating analysis for VGLT...
2025-03-24 20:38:43,969 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VGLT with args: stock_analysis_data, market_context
2025-03-24 20:38:58,054 - __main__ - INFO - Market alignment for VGLT: **
2025-03-24 20:38:58,054 - __main__ - INFO - Creating stock analysis result for VGLT...
2025-03-24 20:38:58,054 - __main__ - INFO - Successfully added VGLT to stock analyses
2025-03-24 20:38:58,055 - __main__ - INFO - Updating Notion with analysis for VGLT...
2025-03-24 20:38:58,055 - __main__ - INFO - Sending Discord notification for VGLT...
2025-03-24 20:38:58,055 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2946 chars). Splitting into parts.
2025-03-24 20:38:58,057 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:58,337 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:58,338 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:58,339 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:38:58,723 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:38:58,725 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:38:58,725 - __main__ - INFO - Successfully sent Discord notification for VGLT
2025-03-24 20:38:58,726 - __main__ - INFO - Analyzing VIX...
2025-03-24 20:38:58,726 - __main__ - INFO - Step 1: Getting stock data for VIX...
2025-03-24 20:38:58,726 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:58,726 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:58,727 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:58,727 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:38:58,727 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:58,727 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,728 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:58,728 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:58,728 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:38:58,728 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,728 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:58,729 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:58,729 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,729 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:58,729 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:58,729 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,729 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:58,782 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 801
2025-03-24 20:38:58,783 - yfinance - DEBUG - response code=200
2025-03-24 20:38:58,783 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:58,784 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:58,786 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:38:58,786 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=5d)')
2025-03-24 20:38:58,787 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=5d)

2025-03-24 20:38:58,789 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:58,789 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:38:58,790 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:58,790 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:58,790 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:58,791 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:38:58,791 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:58,791 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,791 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:58,791 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:58,792 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:38:58,792 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,792 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:58,792 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:58,792 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,792 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:58,793 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:58,793 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,793 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:58,851 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 802
2025-03-24 20:38:58,852 - yfinance - DEBUG - response code=200
2025-03-24 20:38:58,852 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:58,852 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:58,854 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:38:58,854 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=3mo)')
2025-03-24 20:38:58,854 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=3mo)

2025-03-24 20:38:58,857 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:58,857 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:38:58,857 - yfinance_client - ERROR - Failed to retrieve data for VIX
2025-03-24 20:38:58,857 - __main__ - ERROR - Failed to get stock data for VIX
2025-03-24 20:38:58,858 - __main__ - INFO - Analyzing DIA...
2025-03-24 20:38:58,858 - __main__ - INFO - Step 1: Getting stock data for DIA...
2025-03-24 20:38:58,858 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:58,858 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:58,858 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:58,859 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:38:58,859 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:58,859 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,860 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:58,860 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:58,860 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:38:58,860 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,860 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:58,860 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:58,861 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,861 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:58,861 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:58,861 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,861 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:58,938 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1676
2025-03-24 20:38:58,939 - yfinance - DEBUG - response code=200
2025-03-24 20:38:58,939 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:58,939 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:58,941 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:38:58,945 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:58,949 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:58,953 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:38:58,954 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:58,954 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:58,956 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:58,957 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:38:58,957 - yfinance - DEBUG - Entering download()
2025-03-24 20:38:58,957 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:38:58,957 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:58,958 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:38:58,958 - yfinance - DEBUG -   Entering history()
2025-03-24 20:38:58,959 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,959 - yfinance - DEBUG -    Entering get()
2025-03-24 20:38:58,959 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:38:58,959 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:38:58,960 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:58,960 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:38:58,960 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:58,960 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,960 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:58,961 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:58,961 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:58,961 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:38:59,061 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2593
2025-03-24 20:38:59,063 - yfinance - DEBUG - response code=200
2025-03-24 20:38:59,063 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:38:59,063 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:38:59,064 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:38:59,065 - yfinance - DEBUG - DIA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:38:59,069 - yfinance - DEBUG - DIA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:59,074 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:38:59,074 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:38:59,074 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:59,076 - yfinance - DEBUG - Exiting download()
2025-03-24 20:38:59,077 - yfinance_client - INFO - Downloaded data for DIA, shape: (59, 5)
2025-03-24 20:38:59,083 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:38:59,086 - __main__ - INFO - Step 2: Getting options chain data for DIA...
2025-03-24 20:38:59,086 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for DIA
2025-03-24 20:38:59,087 - yfinance - DEBUG - Entering history()
2025-03-24 20:38:59,087 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:38:59,087 - yfinance - DEBUG -  Entering history()
2025-03-24 20:38:59,088 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:59,088 - yfinance - DEBUG -   Entering get()
2025-03-24 20:38:59,088 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:38:59,088 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:38:59,088 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:38:59,089 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:38:59,089 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:59,089 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,089 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:59,089 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:59,089 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,090 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:38:59,194 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1236
2025-03-24 20:38:59,195 - yfinance - DEBUG - response code=200
2025-03-24 20:38:59,195 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:38:59,195 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:38:59,196 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:38:59,197 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:38:59,199 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:59,203 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:38:59,204 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:38:59,204 - yfinance - DEBUG - Exiting history()
2025-03-24 20:38:59,204 - yfinance_client - INFO - Current price of DIA: $425.49
2025-03-24 20:38:59,204 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:59,204 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:59,204 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA
2025-03-24 20:38:59,205 - yfinance - DEBUG - params=None
2025-03-24 20:38:59,205 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:59,205 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:59,205 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,205 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:59,205 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:59,205 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,206 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:59,308 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:59,318 - yfinance - DEBUG - response code=200
2025-03-24 20:38:59,319 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:59,319 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:59,320 - yfinance_client - INFO - Found 17 expiration dates for DIA
2025-03-24 20:38:59,321 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:38:59,321 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:59,321 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:59,321 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743379200
2025-03-24 20:38:59,321 - yfinance - DEBUG - params=None
2025-03-24 20:38:59,322 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:59,322 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:59,322 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,322 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:59,322 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:59,322 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,322 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:59,413 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:59,427 - yfinance - DEBUG - response code=200
2025-03-24 20:38:59,427 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:59,427 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:59,431 - yfinance_client - INFO - Retrieved 113 calls and 106 puts
2025-03-24 20:38:59,539 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:38:59,540 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:59,540 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:59,540 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743724800
2025-03-24 20:38:59,541 - yfinance - DEBUG - params=None
2025-03-24 20:38:59,541 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:59,541 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:59,541 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,542 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:59,542 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:59,542 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,542 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:59,619 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:59,627 - yfinance - DEBUG - response code=200
2025-03-24 20:38:59,628 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:59,628 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:59,632 - yfinance_client - INFO - Retrieved 75 calls and 67 puts
2025-03-24 20:38:59,703 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:38:59,703 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:59,703 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:59,704 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1744329600
2025-03-24 20:38:59,704 - yfinance - DEBUG - params=None
2025-03-24 20:38:59,705 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:59,705 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:59,705 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,705 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:59,705 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:59,705 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,706 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:59,781 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:59,781 - yfinance - DEBUG - response code=200
2025-03-24 20:38:59,782 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:59,782 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:59,786 - yfinance_client - INFO - Retrieved 54 calls and 54 puts
2025-03-24 20:38:59,842 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:38:59,842 - yfinance - DEBUG - Entering get()
2025-03-24 20:38:59,842 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:38:59,842 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1744848000
2025-03-24 20:38:59,843 - yfinance - DEBUG - params=None
2025-03-24 20:38:59,843 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:38:59,843 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:38:59,843 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,843 - yfinance - DEBUG - reusing cookie
2025-03-24 20:38:59,844 - yfinance - DEBUG - reusing crumb
2025-03-24 20:38:59,844 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:38:59,844 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:38:59,925 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:38:59,938 - yfinance - DEBUG - response code=200
2025-03-24 20:38:59,938 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:38:59,938 - yfinance - DEBUG - Exiting get()
2025-03-24 20:38:59,942 - yfinance_client - INFO - Retrieved 99 calls and 89 puts
2025-03-24 20:39:00,037 - yfinance_client - INFO - Successfully fetched 4 option chains for DIA
2025-03-24 20:39:00,037 - __main__ - INFO - Step 3: Preparing analysis data for DIA...
2025-03-24 20:39:00,038 - __main__ - INFO - Step 4: Processing options data for DIA...
2025-03-24 20:39:00,038 - __main__ - INFO - Found 4 expiration dates for DIA
2025-03-24 20:39:00,038 - __main__ - INFO - Processing expiration date 2025-03-31 for DIA...
2025-03-24 20:39:00,039 - __main__ - DEBUG - ATM calls shape before filtering: (113, 19)
2025-03-24 20:39:00,039 - __main__ - DEBUG - ATM puts shape before filtering: (106, 19)
2025-03-24 20:39:00,040 - __main__ - DEBUG - ATM calls shape after filtering: (34, 19)
2025-03-24 20:39:00,040 - __main__ - DEBUG - ATM puts shape after filtering: (34, 19)
2025-03-24 20:39:00,040 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:39:00,041 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:39:00,041 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:39:00,042 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:39:00,042 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:39:00,043 - __main__ - DEBUG - Volume data for DIA: calls=1390, puts=5714
2025-03-24 20:39:00,043 - __main__ - INFO - Successfully processed expiration 2025-03-31 for DIA
2025-03-24 20:39:00,043 - __main__ - INFO - Processing expiration date 2025-04-04 for DIA...
2025-03-24 20:39:00,044 - __main__ - DEBUG - ATM calls shape before filtering: (75, 19)
2025-03-24 20:39:00,044 - __main__ - DEBUG - ATM puts shape before filtering: (67, 19)
2025-03-24 20:39:00,044 - __main__ - DEBUG - ATM calls shape after filtering: (44, 19)
2025-03-24 20:39:00,045 - __main__ - DEBUG - ATM puts shape after filtering: (46, 19)
2025-03-24 20:39:00,045 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:39:00,046 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:39:00,046 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:39:00,046 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:39:00,047 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:39:00,047 - __main__ - DEBUG - Volume data for DIA: calls=1433, puts=2429
2025-03-24 20:39:00,047 - __main__ - INFO - Successfully processed expiration 2025-04-04 for DIA
2025-03-24 20:39:00,048 - __main__ - INFO - Processing expiration date 2025-04-11 for DIA...
2025-03-24 20:39:00,048 - __main__ - DEBUG - ATM calls shape before filtering: (54, 19)
2025-03-24 20:39:00,048 - __main__ - DEBUG - ATM puts shape before filtering: (54, 19)
2025-03-24 20:39:00,049 - __main__ - DEBUG - ATM calls shape after filtering: (41, 19)
2025-03-24 20:39:00,049 - __main__ - DEBUG - ATM puts shape after filtering: (38, 19)
2025-03-24 20:39:00,049 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:39:00,050 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:39:00,050 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:39:00,051 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:39:00,051 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:39:00,052 - __main__ - DEBUG - Volume data for DIA: calls=537, puts=5714
2025-03-24 20:39:00,052 - __main__ - INFO - Successfully processed expiration 2025-04-11 for DIA
2025-03-24 20:39:00,052 - __main__ - INFO - Processing expiration date 2025-04-17 for DIA...
2025-03-24 20:39:00,052 - __main__ - DEBUG - ATM calls shape before filtering: (99, 19)
2025-03-24 20:39:00,053 - __main__ - DEBUG - ATM puts shape before filtering: (89, 19)
2025-03-24 20:39:00,053 - __main__ - DEBUG - ATM calls shape after filtering: (42, 19)
2025-03-24 20:39:00,054 - __main__ - DEBUG - ATM puts shape after filtering: (40, 19)
2025-03-24 20:39:00,054 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:39:00,054 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:39:00,055 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:39:00,056 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:39:00,056 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:39:00,056 - __main__ - DEBUG - Volume data for DIA: calls=2018, puts=5446
2025-03-24 20:39:00,057 - __main__ - INFO - Successfully processed expiration 2025-04-17 for DIA
2025-03-24 20:39:00,057 - __main__ - INFO - Step 5: Generating analysis for DIA...
2025-03-24 20:39:00,057 - __main__ - DEBUG - Calling get_stock_analysis_prompt for DIA with args: stock_analysis_data, market_context
2025-03-24 20:39:13,350 - __main__ - INFO - Market alignment for DIA: **
2025-03-24 20:39:13,350 - __main__ - INFO - Creating stock analysis result for DIA...
2025-03-24 20:39:13,350 - __main__ - INFO - Successfully added DIA to stock analyses
2025-03-24 20:39:13,350 - __main__ - INFO - Updating Notion with analysis for DIA...
2025-03-24 20:39:13,351 - __main__ - INFO - Sending Discord notification for DIA...
2025-03-24 20:39:13,351 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2842 chars). Splitting into parts.
2025-03-24 20:39:13,352 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:39:13,659 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:39:13,661 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:39:13,662 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:39:14,039 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:39:14,040 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:39:14,040 - __main__ - INFO - Successfully sent Discord notification for DIA
2025-03-24 20:39:14,041 - __main__ - INFO - Analyzing BND...
2025-03-24 20:39:14,041 - __main__ - INFO - Step 1: Getting stock data for BND...
2025-03-24 20:39:14,041 - yfinance - DEBUG - Entering download()
2025-03-24 20:39:14,041 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:39:14,041 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:14,042 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:39:14,042 - yfinance - DEBUG -   Entering history()
2025-03-24 20:39:14,042 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:14,042 - yfinance - DEBUG -    Entering get()
2025-03-24 20:39:14,042 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:39:14,043 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:39:14,043 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:14,043 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:39:14,043 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:14,043 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,044 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:14,044 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:14,044 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,044 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:39:14,108 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1676
2025-03-24 20:39:14,109 - yfinance - DEBUG - response code=200
2025-03-24 20:39:14,109 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:39:14,110 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:39:14,110 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:39:14,115 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:39:14,117 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:39:14,121 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:39:14,121 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:39:14,121 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:14,123 - yfinance - DEBUG - Exiting download()
2025-03-24 20:39:14,123 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:39:14,123 - yfinance - DEBUG - Entering download()
2025-03-24 20:39:14,123 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:39:14,124 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:14,124 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:39:14,124 - yfinance - DEBUG -   Entering history()
2025-03-24 20:39:14,124 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:14,125 - yfinance - DEBUG -    Entering get()
2025-03-24 20:39:14,125 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:39:14,125 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:39:14,125 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:14,125 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:39:14,126 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:14,126 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,126 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:14,126 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:14,126 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,126 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:39:14,210 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2268
2025-03-24 20:39:14,210 - yfinance - DEBUG - response code=200
2025-03-24 20:39:14,211 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:39:14,211 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:39:14,212 - yfinance - DEBUG - BND: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:39:14,213 - yfinance - DEBUG - BND: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:39:14,215 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 20:39:14,219 - yfinance - DEBUG - BND: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:39:14,223 - yfinance - DEBUG - BND: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:39:14,224 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:39:14,224 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:14,226 - yfinance - DEBUG - Exiting download()
2025-03-24 20:39:14,227 - yfinance_client - INFO - Downloaded data for BND, shape: (59, 5)
2025-03-24 20:39:14,233 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:39:14,236 - __main__ - INFO - Step 2: Getting options chain data for BND...
2025-03-24 20:39:14,236 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BND
2025-03-24 20:39:14,236 - yfinance - DEBUG - Entering history()
2025-03-24 20:39:14,237 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:39:14,237 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:14,237 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:14,237 - yfinance - DEBUG -   Entering get()
2025-03-24 20:39:14,237 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:39:14,238 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:39:14,238 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:14,238 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:39:14,238 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:14,238 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,239 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:14,239 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:14,239 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,239 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:39:14,315 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1197
2025-03-24 20:39:14,316 - yfinance - DEBUG - response code=200
2025-03-24 20:39:14,316 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:39:14,316 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:39:14,317 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:39:14,318 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:39:14,320 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:39:14,323 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:39:14,324 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:14,324 - yfinance - DEBUG - Exiting history()
2025-03-24 20:39:14,324 - yfinance_client - INFO - Current price of BND: $73.00
2025-03-24 20:39:14,324 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:14,324 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:14,325 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BND
2025-03-24 20:39:14,325 - yfinance - DEBUG - params=None
2025-03-24 20:39:14,325 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:14,325 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:14,325 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,325 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:14,325 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:14,326 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,326 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:14,432 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BND?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1548
2025-03-24 20:39:14,433 - yfinance - DEBUG - response code=200
2025-03-24 20:39:14,433 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:14,433 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:14,434 - yfinance_client - INFO - Found 4 expiration dates for BND
2025-03-24 20:39:14,434 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:39:14,434 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:14,435 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:14,435 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BND?date=1744848000
2025-03-24 20:39:14,435 - yfinance - DEBUG - params=None
2025-03-24 20:39:14,435 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:14,435 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:14,436 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,436 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:14,436 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:14,436 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:14,437 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:14,494 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BND?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1547
2025-03-24 20:39:14,495 - yfinance - DEBUG - response code=200
2025-03-24 20:39:14,495 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:14,495 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:14,498 - yfinance_client - INFO - Retrieved 6 calls and 2 puts
2025-03-24 20:39:14,505 - yfinance_client - INFO - Successfully fetched 1 option chains for BND
2025-03-24 20:39:14,505 - __main__ - INFO - Step 3: Preparing analysis data for BND...
2025-03-24 20:39:14,506 - __main__ - INFO - Step 4: Processing options data for BND...
2025-03-24 20:39:14,506 - __main__ - INFO - Found 1 expiration dates for BND
2025-03-24 20:39:14,506 - __main__ - INFO - Processing expiration date 2025-04-17 for BND...
2025-03-24 20:39:14,507 - __main__ - DEBUG - ATM calls shape before filtering: (6, 19)
2025-03-24 20:39:14,507 - __main__ - DEBUG - ATM puts shape before filtering: (2, 19)
2025-03-24 20:39:14,508 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:39:14,508 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:39:14,508 - __main__ - DEBUG - Finding ATM call for BND...
2025-03-24 20:39:14,509 - __main__ - DEBUG - ATM call for BND: strike=73.0
2025-03-24 20:39:14,510 - __main__ - DEBUG - Finding ATM put for BND...
2025-03-24 20:39:14,510 - __main__ - DEBUG - ATM put for BND: strike=73.0
2025-03-24 20:39:14,511 - __main__ - DEBUG - Calculating volume data for BND...
2025-03-24 20:39:14,511 - __main__ - DEBUG - Volume data for BND: calls=87, puts=71
2025-03-24 20:39:14,511 - __main__ - INFO - Successfully processed expiration 2025-04-17 for BND
2025-03-24 20:39:14,512 - __main__ - INFO - Step 5: Generating analysis for BND...
2025-03-24 20:39:14,512 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BND with args: stock_analysis_data, market_context
2025-03-24 20:39:26,748 - __main__ - INFO - Market alignment for BND: **
2025-03-24 20:39:26,749 - __main__ - INFO - Creating stock analysis result for BND...
2025-03-24 20:39:26,749 - __main__ - INFO - Successfully added BND to stock analyses
2025-03-24 20:39:26,749 - __main__ - INFO - Updating Notion with analysis for BND...
2025-03-24 20:39:26,749 - __main__ - INFO - Sending Discord notification for BND...
2025-03-24 20:39:26,750 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2547 chars). Splitting into parts.
2025-03-24 20:39:26,751 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:39:27,134 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:39:27,135 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:39:27,136 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:39:27,390 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:39:27,391 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:39:27,392 - __main__ - INFO - Successfully sent Discord notification for BND
2025-03-24 20:39:27,392 - __main__ - INFO - Analyzing BTC-USD...
2025-03-24 20:39:27,392 - __main__ - INFO - Step 1: Getting stock data for BTC-USD...
2025-03-24 20:39:27,392 - yfinance - DEBUG - Entering download()
2025-03-24 20:39:27,393 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:39:27,393 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:27,393 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:39:27,394 - yfinance - DEBUG -   Entering history()
2025-03-24 20:39:27,394 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:27,394 - yfinance - DEBUG -    Entering get()
2025-03-24 20:39:27,394 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:39:27,394 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:39:27,394 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:27,395 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:39:27,395 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:27,395 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,395 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:27,395 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:27,396 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,396 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:39:27,453 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:39:27,454 - yfinance - DEBUG - response code=200
2025-03-24 20:39:27,454 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:39:27,455 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:39:27,456 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:37:00
2025-03-24 20:39:27,460 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:37:00+00:00
2025-03-24 20:39:27,462 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:37:00+00:00
2025-03-24 20:39:27,468 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:39:27,469 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:39:27,469 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:27,471 - yfinance - DEBUG - Exiting download()
2025-03-24 20:39:27,471 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:39:27,471 - yfinance - DEBUG - Entering download()
2025-03-24 20:39:27,471 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:39:27,471 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:27,472 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:39:27,472 - yfinance - DEBUG -   Entering history()
2025-03-24 20:39:27,472 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:27,472 - yfinance - DEBUG -    Entering get()
2025-03-24 20:39:27,473 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:39:27,473 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:39:27,473 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:27,473 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:39:27,473 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:27,474 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,474 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:27,474 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:27,474 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,474 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:39:27,534 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:39:27,535 - yfinance - DEBUG - response code=200
2025-03-24 20:39:27,535 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:39:27,536 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:39:27,537 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2024-12-25 00:00:00 -> 2025-03-25 03:37:00
2025-03-24 20:39:27,538 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2024-12-25 00:00:00+00:00 -> 2025-03-25 03:37:00+00:00
2025-03-24 20:39:27,539 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 20:39:27,543 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 20:39:27,544 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:39:27,544 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:27,546 - yfinance - DEBUG - Exiting download()
2025-03-24 20:39:27,546 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (90, 5)
2025-03-24 20:39:27,552 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (90, 5)
2025-03-24 20:39:27,556 - __main__ - INFO - Step 2: Getting options chain data for BTC-USD...
2025-03-24 20:39:27,556 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BTC-USD
2025-03-24 20:39:27,556 - yfinance - DEBUG - Entering history()
2025-03-24 20:39:27,556 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:39:27,557 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:27,557 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:27,557 - yfinance - DEBUG -   Entering get()
2025-03-24 20:39:27,557 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:39:27,557 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:39:27,558 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:27,558 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:39:27,558 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:27,558 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,559 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:27,559 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:27,559 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,559 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:39:27,610 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1158
2025-03-24 20:39:27,611 - yfinance - DEBUG - response code=200
2025-03-24 20:39:27,612 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:39:27,612 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:39:27,613 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-25 03:37:00 only
2025-03-24 20:39:27,614 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-25 03:37:00+00:00 only
2025-03-24 20:39:27,617 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:39:27,623 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:39:27,624 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:27,624 - yfinance - DEBUG - Exiting history()
2025-03-24 20:39:27,625 - yfinance_client - INFO - Current price of BTC-USD: $86679.80
2025-03-24 20:39:27,625 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:27,625 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:27,625 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BTC-USD
2025-03-24 20:39:27,626 - yfinance - DEBUG - params=None
2025-03-24 20:39:27,626 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:27,626 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:27,626 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,626 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:27,627 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:27,627 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:27,627 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:27,692 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BTC-USD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1017
2025-03-24 20:39:27,693 - yfinance - DEBUG - response code=200
2025-03-24 20:39:27,693 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:27,693 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:27,693 - yfinance_client - WARNING - No options expiration dates found for BTC-USD
2025-03-24 20:39:27,694 - __main__ - WARNING - No options chain data found for BTC-USD
2025-03-24 20:39:27,694 - __main__ - INFO - Step 3: Preparing analysis data for BTC-USD...
2025-03-24 20:39:27,694 - __main__ - INFO - Step 4: Processing options data for BTC-USD...
2025-03-24 20:39:27,694 - __main__ - INFO - Step 5: Generating analysis for BTC-USD...
2025-03-24 20:39:27,694 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BTC-USD with args: stock_analysis_data, market_context
2025-03-24 20:39:41,177 - __main__ - INFO - Market alignment for BTC-USD: **
2025-03-24 20:39:41,178 - __main__ - INFO - Creating stock analysis result for BTC-USD...
2025-03-24 20:39:41,178 - __main__ - INFO - Successfully added BTC-USD to stock analyses
2025-03-24 20:39:41,178 - __main__ - INFO - Updating Notion with analysis for BTC-USD...
2025-03-24 20:39:41,179 - __main__ - INFO - Sending Discord notification for BTC-USD...
2025-03-24 20:39:41,179 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2900 chars). Splitting into parts.
2025-03-24 20:39:41,180 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:39:41,590 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:39:41,591 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:39:41,593 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:39:41,853 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:39:41,854 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:39:41,855 - __main__ - INFO - Successfully sent Discord notification for BTC-USD
2025-03-24 20:39:41,855 - __main__ - INFO - Analyzing NVDA...
2025-03-24 20:39:41,855 - __main__ - INFO - Step 1: Getting stock data for NVDA...
2025-03-24 20:39:41,855 - yfinance - DEBUG - Entering download()
2025-03-24 20:39:41,855 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:39:41,855 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:41,856 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:39:41,856 - yfinance - DEBUG -   Entering history()
2025-03-24 20:39:41,856 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:41,856 - yfinance - DEBUG -    Entering get()
2025-03-24 20:39:41,857 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:39:41,857 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:39:41,857 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:41,857 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:39:41,857 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:41,857 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:41,858 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:41,858 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:41,858 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:41,858 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:39:41,928 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1682
2025-03-24 20:39:41,929 - yfinance - DEBUG - response code=200
2025-03-24 20:39:41,929 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:39:41,930 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:39:41,931 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:39:41,935 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:39:41,936 - yfinance - DEBUG - NVDA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:39:41,940 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:39:41,941 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:39:41,941 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:41,943 - yfinance - DEBUG - Exiting download()
2025-03-24 20:39:41,943 - yfinance_client - INFO - Downloaded data for NVDA, shape: (35, 5)
2025-03-24 20:39:41,943 - yfinance - DEBUG - Entering download()
2025-03-24 20:39:41,943 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:39:41,944 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:41,944 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:39:41,944 - yfinance - DEBUG -   Entering history()
2025-03-24 20:39:41,945 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:41,945 - yfinance - DEBUG -    Entering get()
2025-03-24 20:39:41,945 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:39:41,945 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:39:41,945 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:41,946 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:39:41,946 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:41,946 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:41,946 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:41,946 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:41,946 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:41,947 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:39:42,021 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2748
2025-03-24 20:39:42,022 - yfinance - DEBUG - response code=200
2025-03-24 20:39:42,023 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:39:42,023 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:39:42,024 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:39:42,025 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:39:42,028 - yfinance - DEBUG - NVDA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:39:42,032 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:39:42,032 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:39:42,033 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:42,034 - yfinance - DEBUG - Exiting download()
2025-03-24 20:39:42,035 - yfinance_client - INFO - Downloaded data for NVDA, shape: (59, 5)
2025-03-24 20:39:42,040 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:39:42,043 - __main__ - INFO - Step 2: Getting options chain data for NVDA...
2025-03-24 20:39:42,043 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for NVDA
2025-03-24 20:39:42,044 - yfinance - DEBUG - Entering history()
2025-03-24 20:39:42,044 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:39:42,044 - yfinance - DEBUG -  Entering history()
2025-03-24 20:39:42,045 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:42,045 - yfinance - DEBUG -   Entering get()
2025-03-24 20:39:42,045 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:39:42,045 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:39:42,045 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:39:42,045 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:39:42,046 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:42,046 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,046 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:42,046 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:42,046 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,046 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:39:42,116 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1211
2025-03-24 20:39:42,117 - yfinance - DEBUG - response code=200
2025-03-24 20:39:42,117 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:39:42,117 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:39:42,118 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:39:42,118 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:39:42,120 - yfinance - DEBUG - NVDA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:39:42,124 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:39:42,124 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:39:42,124 - yfinance - DEBUG - Exiting history()
2025-03-24 20:39:42,125 - yfinance_client - INFO - Current price of NVDA: $121.41
2025-03-24 20:39:42,125 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:42,125 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:42,125 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA
2025-03-24 20:39:42,125 - yfinance - DEBUG - params=None
2025-03-24 20:39:42,125 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:42,126 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:42,126 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,126 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:42,126 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:42,126 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,126 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:42,212 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:39:42,223 - yfinance - DEBUG - response code=200
2025-03-24 20:39:42,223 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:42,224 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:42,225 - yfinance_client - INFO - Found 21 expiration dates for NVDA
2025-03-24 20:39:42,226 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:39:42,226 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:42,226 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:42,227 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1743120000
2025-03-24 20:39:42,227 - yfinance - DEBUG - params=None
2025-03-24 20:39:42,227 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:42,227 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:42,227 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,228 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:42,228 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:42,228 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,228 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:42,315 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:39:42,327 - yfinance - DEBUG - response code=200
2025-03-24 20:39:42,327 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:42,327 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:42,331 - yfinance_client - INFO - Retrieved 89 calls and 83 puts
2025-03-24 20:39:42,417 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:39:42,418 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:42,418 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:42,418 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1743724800
2025-03-24 20:39:42,419 - yfinance - DEBUG - params=None
2025-03-24 20:39:42,419 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:42,419 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:42,419 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,420 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:42,420 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:42,420 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,420 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:42,494 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:39:42,496 - yfinance - DEBUG - response code=200
2025-03-24 20:39:42,496 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:42,496 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:42,500 - yfinance_client - INFO - Retrieved 80 calls and 73 puts
2025-03-24 20:39:42,577 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:39:42,578 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:42,578 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:42,578 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1744329600
2025-03-24 20:39:42,578 - yfinance - DEBUG - params=None
2025-03-24 20:39:42,579 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:42,579 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:42,579 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,579 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:42,580 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:42,580 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,580 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:42,657 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:39:42,658 - yfinance - DEBUG - response code=200
2025-03-24 20:39:42,658 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:42,659 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:42,662 - yfinance_client - INFO - Retrieved 74 calls and 61 puts
2025-03-24 20:39:42,730 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:39:42,730 - yfinance - DEBUG - Entering get()
2025-03-24 20:39:42,731 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:39:42,731 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1744848000
2025-03-24 20:39:42,731 - yfinance - DEBUG - params=None
2025-03-24 20:39:42,732 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:39:42,732 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:39:42,732 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,732 - yfinance - DEBUG - reusing cookie
2025-03-24 20:39:42,732 - yfinance - DEBUG - reusing crumb
2025-03-24 20:39:42,733 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:39:42,733 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:39:42,864 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:39:42,865 - yfinance - DEBUG - response code=200
2025-03-24 20:39:42,865 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:39:42,866 - yfinance - DEBUG - Exiting get()
2025-03-24 20:39:42,868 - yfinance_client - INFO - Retrieved 49 calls and 47 puts
2025-03-24 20:39:42,918 - yfinance_client - INFO - Successfully fetched 4 option chains for NVDA
2025-03-24 20:39:42,919 - __main__ - INFO - Step 3: Preparing analysis data for NVDA...
2025-03-24 20:39:42,919 - __main__ - INFO - Step 4: Processing options data for NVDA...
2025-03-24 20:39:42,919 - __main__ - INFO - Found 4 expiration dates for NVDA
2025-03-24 20:39:42,919 - __main__ - INFO - Processing expiration date 2025-03-28 for NVDA...
2025-03-24 20:39:42,920 - __main__ - DEBUG - ATM calls shape before filtering: (89, 19)
2025-03-24 20:39:42,920 - __main__ - DEBUG - ATM puts shape before filtering: (83, 19)
2025-03-24 20:39:42,920 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:39:42,921 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:39:42,921 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:39:42,922 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:39:42,922 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:39:42,923 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:39:42,923 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:39:42,923 - __main__ - DEBUG - Volume data for NVDA: calls=850359, puts=487031
2025-03-24 20:39:42,924 - __main__ - INFO - Successfully processed expiration 2025-03-28 for NVDA
2025-03-24 20:39:42,924 - __main__ - INFO - Processing expiration date 2025-04-04 for NVDA...
2025-03-24 20:39:42,924 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:39:42,925 - __main__ - DEBUG - ATM puts shape before filtering: (73, 19)
2025-03-24 20:39:42,925 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:39:42,926 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:39:42,926 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:39:42,927 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:39:42,927 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:39:42,928 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:39:42,928 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:39:42,928 - __main__ - DEBUG - Volume data for NVDA: calls=194451, puts=103108
2025-03-24 20:39:42,929 - __main__ - INFO - Successfully processed expiration 2025-04-04 for NVDA
2025-03-24 20:39:42,929 - __main__ - INFO - Processing expiration date 2025-04-11 for NVDA...
2025-03-24 20:39:42,929 - __main__ - DEBUG - ATM calls shape before filtering: (74, 19)
2025-03-24 20:39:42,929 - __main__ - DEBUG - ATM puts shape before filtering: (61, 19)
2025-03-24 20:39:42,930 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:39:42,930 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:39:42,931 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:39:42,931 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:39:42,932 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:39:42,932 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:39:42,933 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:39:42,933 - __main__ - DEBUG - Volume data for NVDA: calls=61821, puts=57068
2025-03-24 20:39:42,933 - __main__ - INFO - Successfully processed expiration 2025-04-11 for NVDA
2025-03-24 20:39:42,933 - __main__ - INFO - Processing expiration date 2025-04-17 for NVDA...
2025-03-24 20:39:42,934 - __main__ - DEBUG - ATM calls shape before filtering: (49, 19)
2025-03-24 20:39:42,934 - __main__ - DEBUG - ATM puts shape before filtering: (47, 19)
2025-03-24 20:39:42,935 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:39:42,935 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:39:42,935 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:39:42,936 - __main__ - DEBUG - ATM call for NVDA: strike=120.0
2025-03-24 20:39:42,936 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:39:42,937 - __main__ - DEBUG - ATM put for NVDA: strike=120.0
2025-03-24 20:39:42,937 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:39:42,937 - __main__ - DEBUG - Volume data for NVDA: calls=137481, puts=86940
2025-03-24 20:39:42,938 - __main__ - INFO - Successfully processed expiration 2025-04-17 for NVDA
2025-03-24 20:39:42,938 - __main__ - INFO - Step 5: Generating analysis for NVDA...
2025-03-24 20:39:42,938 - __main__ - DEBUG - Calling get_stock_analysis_prompt for NVDA with args: stock_analysis_data, market_context
2025-03-24 20:40:11,994 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 20:40:11,994 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 20:40:11,995 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 20:40:11,995 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 20:40:12,309 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 20:40:12,349 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F8A8031DF0>
2025-03-24 20:40:12,349 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F8A929B950> server_hostname='api.notion.com' timeout=60.0
2025-03-24 20:40:12,366 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F8A77B80B0>
2025-03-24 20:40:12,366 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:40:12,367 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:40:12,367 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:40:12,367 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:40:12,367 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:40:12,658 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:40:12 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b62b21a1b174b-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-yCO+GkinP4CsziteEwwIO2yBwGo"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'780e43ad-f2ee-49d0-8ee2-7b4a8ca73889'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=55d4ijDLYED3SWbumSE0T4.yHBHX_4MWmH4h8FmXKU4-1742874012-1.0.1.1-e_lcZuZOfOvwU5WqEOH9385uCFWlggR1F17ru868qTHpVtToT7LJT86_R2Ty_8iwP7r_wnKPQWMPT3L7qthhHi.XpUGInUBk4tvhj1a5oaI; path=/; expires=Tue, 25-Mar-25 04:10:12 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=FFjcP6u5dFjprGo.zKV5VcyK_vTGf__7IZM6O2NfDNc-1742874012769-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:40:12,661 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:40:12,661 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:40:12,661 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:40:12,662 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:40:12,662 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:40:12,662 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:40:12,663 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:40:12,663 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:40:12,663 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:40:12,663 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:40:12,817 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:40:12 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b62b3ec73174b-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-IaHJdlXCcVryRT8Xwd/0/iVEHpw"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'9f33b044-7169-4cd0-b691-65d93a17fdf5'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:40:12,818 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:40:12,818 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:40:12,819 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:40:12,819 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:40:12,819 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:40:12,819 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 20:40:12,820 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 20:40:12,820 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 20:40:12,820 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 20:40:12,820 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 20:40:12,956 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 03:40:13 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b62b4ee07174b-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-ev/2WmHQtE+yVeAVm7fGnA7bH2w"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'0747669a-732d-4342-856d-59c92da3ec74'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 20:40:12,957 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 20:40:12,958 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 20:40:12,958 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 20:40:12,958 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 20:40:12,958 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 20:40:12,958 - __main__ - INFO - All clients initialized successfully
2025-03-24 20:40:12,959 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 20:40:12,959 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 20:40:12,959 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:12,959 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:12,960 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.3 Safari/605.1.15
2025-03-24 20:40:12,960 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:12,961 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 20:40:12,962 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:40:13,006 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,006 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,006 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,007 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,008 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:40:13,008 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,008 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,008 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,008 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,010 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 20:40:13,010 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 20:40:13,011 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 20:40:13,011 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,012 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 20:40:13,135 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 20:40:13,135 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 20:40:13,136 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,136 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,137 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 20:40:13,265 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1649
2025-03-24 20:40:13,266 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,266 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,266 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,268 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:13,275 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,279 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,283 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,284 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,284 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,286 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,286 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:40:13,289 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,290 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,290 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,290 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:40:13,291 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,291 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,291 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,291 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,291 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:40:13,292 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,292 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,292 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,292 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,292 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,292 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,293 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,293 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,363 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1652
2025-03-24 20:40:13,364 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,364 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,364 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,365 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:13,369 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,371 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,375 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,376 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,376 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,377 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,378 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:40:13,381 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,381 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,381 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,381 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:40:13,382 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,382 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,382 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,382 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,382 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:40:13,383 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,383 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,383 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,383 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,383 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,383 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,383 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,384 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,449 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1607
2025-03-24 20:40:13,450 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,450 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,450 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,451 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:13,455 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,458 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,462 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,462 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,462 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,464 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,464 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:40:13,467 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,467 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,467 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,467 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:40:13,468 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,468 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,468 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,468 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,468 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:40:13,469 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,469 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,469 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,469 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,469 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,469 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,470 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,470 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,581 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1646
2025-03-24 20:40:13,582 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,582 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,582 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,583 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:13,587 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,589 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,593 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,593 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,593 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,595 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,595 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:40:13,598 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,598 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,598 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,598 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:40:13,599 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,599 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,599 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,600 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,600 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:40:13,600 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,600 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,600 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,600 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,601 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,601 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,601 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,601 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,661 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1659
2025-03-24 20:40:13,662 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,663 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,663 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,664 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:13,668 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,669 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,673 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,674 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,674 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,676 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,676 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:40:13,679 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,679 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,679 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,679 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:40:13,680 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,680 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,680 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,680 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,680 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:40:13,681 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,681 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,681 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,681 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,681 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,681 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,682 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,682 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,741 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1667
2025-03-24 20:40:13,742 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,742 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,742 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,744 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:13,748 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,751 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,755 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,755 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,755 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,757 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,757 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:40:13,760 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,760 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,761 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,761 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:40:13,761 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,762 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,762 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,762 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,762 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:40:13,762 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,763 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,763 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,763 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,763 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,763 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,763 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,763 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,823 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1676
2025-03-24 20:40:13,824 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,824 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,824 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,825 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:13,829 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,831 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,835 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:13,835 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,836 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,837 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,837 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:40:13,840 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,840 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,841 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,841 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:40:13,841 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,842 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,842 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,842 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,842 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:40:13,843 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,843 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,843 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,843 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,843 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,844 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,844 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,844 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,898 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:13,899 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,899 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,899 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,900 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:37:00
2025-03-24 20:40:13,904 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:37:00+00:00
2025-03-24 20:40:13,906 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:37:00+00:00
2025-03-24 20:40:13,912 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:40:13,912 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,912 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,914 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,914 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:40:13,917 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:13,918 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:13,918 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:13,918 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 20:40:13,919 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:13,920 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,920 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:13,920 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:13,920 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 20:40:13,920 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:13,921 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:13,921 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:13,921 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,921 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:13,921 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:13,921 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:13,922 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:13,985 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 934
2025-03-24 20:40:13,986 - yfinance - DEBUG - response code=200
2025-03-24 20:40:13,986 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:13,986 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:13,987 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 20:40:13,992 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:40:13,994 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:40:13,998 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 20:40:13,998 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:13,998 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:13,999 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:13,999 - yfinance_client - INFO - Downloaded data for ^VIX, shape: (14, 5)
2025-03-24 20:40:14,000 - yfinance_client - INFO - Current VIX price: 17.479999542236328
2025-03-24 20:40:14,000 - yfinance - DEBUG - Entering get()
2025-03-24 20:40:14,000 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:40:14,001 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:40:14,001 - yfinance - DEBUG - params=None
2025-03-24 20:40:14,001 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:40:14,001 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:14,001 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:14,001 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:14,002 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:14,002 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:14,002 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:40:14,104 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:14,116 - yfinance - DEBUG - response code=200
2025-03-24 20:40:14,116 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:40:14,117 - yfinance - DEBUG - Exiting get()
2025-03-24 20:40:14,118 - yfinance - DEBUG - Entering get()
2025-03-24 20:40:14,119 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:40:14,119 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1742860800
2025-03-24 20:40:14,119 - yfinance - DEBUG - params=None
2025-03-24 20:40:14,119 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:40:14,120 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:14,120 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:14,120 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:14,120 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:14,120 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:14,120 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:40:14,204 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1742860800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:14,205 - yfinance - DEBUG - response code=200
2025-03-24 20:40:14,206 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:40:14,206 - yfinance - DEBUG - Exiting get()
2025-03-24 20:40:51,975 - discord.discord_client - INFO - Content length exceeds Discord limit (4941 chars). Splitting into chunks.
2025-03-24 20:40:51,976 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:40:52,312 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:40:52,313 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:40:52,315 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:40:52,570 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:40:52,571 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:40:52,572 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:40:53,046 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:40:53,047 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:40:53,048 - __main__ - INFO - Comprehensive market analysis complete: bullish
2025-03-24 20:40:53,048 - __main__ - INFO - Starting stock analysis...
2025-03-24 20:40:53,049 - __main__ - INFO - get_stock_analysis_prompt signature: (*args, **kwargs) with params: ['args', 'kwargs']
2025-03-24 20:40:53,049 - __main__ - INFO - Found 36 symbols in watchlist
2025-03-24 20:40:53,050 - __main__ - INFO - Analyzing SPY...
2025-03-24 20:40:53,050 - __main__ - INFO - Step 1: Getting stock data for SPY...
2025-03-24 20:40:53,050 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:53,050 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:53,050 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:53,051 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:40:53,051 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:53,051 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:53,051 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:53,052 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:53,052 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:40:53,052 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:53,052 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:53,052 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:53,053 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,053 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:53,053 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:53,053 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,053 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:53,120 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1649
2025-03-24 20:40:53,121 - yfinance - DEBUG - response code=200
2025-03-24 20:40:53,121 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:53,122 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:53,123 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:40:53,127 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:53,130 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:53,134 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:40:53,135 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:53,135 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:53,137 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:53,137 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 20:40:53,137 - yfinance - DEBUG - Entering download()
2025-03-24 20:40:53,137 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:40:53,138 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:53,138 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:40:53,138 - yfinance - DEBUG -   Entering history()
2025-03-24 20:40:53,139 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:53,139 - yfinance - DEBUG -    Entering get()
2025-03-24 20:40:53,139 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:40:53,139 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:40:53,139 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:53,140 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:40:53,140 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:53,140 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,140 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:53,140 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:53,140 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,140 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:40:53,229 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2623
2025-03-24 20:40:53,230 - yfinance - DEBUG - response code=200
2025-03-24 20:40:53,230 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:40:53,230 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:40:53,231 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:40:53,232 - yfinance - DEBUG - SPY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:40:53,236 - yfinance - DEBUG - SPY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:40:53,240 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:40:53,240 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:40:53,241 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:53,243 - yfinance - DEBUG - Exiting download()
2025-03-24 20:40:53,243 - yfinance_client - INFO - Downloaded data for SPY, shape: (59, 5)
2025-03-24 20:40:53,249 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:40:53,252 - __main__ - INFO - Step 2: Getting options chain data for SPY...
2025-03-24 20:40:53,252 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SPY
2025-03-24 20:40:53,253 - yfinance - DEBUG - Entering history()
2025-03-24 20:40:53,253 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 20:40:53,253 - yfinance - DEBUG -  Entering history()
2025-03-24 20:40:53,254 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:53,254 - yfinance - DEBUG -   Entering get()
2025-03-24 20:40:53,254 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:40:53,254 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 20:40:53,254 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:40:53,255 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:40:53,255 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:53,255 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,255 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:53,255 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:53,255 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,256 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:40:53,357 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1198
2025-03-24 20:40:53,358 - yfinance - DEBUG - response code=200
2025-03-24 20:40:53,358 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:40:53,359 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:40:53,360 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:40:53,360 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:40:53,362 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:40:53,366 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:40:53,366 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:40:53,367 - yfinance - DEBUG - Exiting history()
2025-03-24 20:40:53,367 - yfinance_client - INFO - Current price of SPY: $574.08
2025-03-24 20:40:53,367 - yfinance - DEBUG - Entering get()
2025-03-24 20:40:53,367 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:40:53,367 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 20:40:53,368 - yfinance - DEBUG - params=None
2025-03-24 20:40:53,368 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:40:53,368 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:53,368 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,368 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:53,368 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:53,369 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,369 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:40:53,532 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:53,533 - yfinance - DEBUG - response code=200
2025-03-24 20:40:53,533 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:40:53,533 - yfinance - DEBUG - Exiting get()
2025-03-24 20:40:53,535 - yfinance_client - INFO - Found 32 expiration dates for SPY
2025-03-24 20:40:53,536 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:40:53,536 - yfinance - DEBUG - Entering get()
2025-03-24 20:40:53,536 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:40:53,537 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743379200
2025-03-24 20:40:53,537 - yfinance - DEBUG - params=None
2025-03-24 20:40:53,537 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:40:53,537 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:53,538 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,538 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:53,538 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:53,538 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:53,538 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:40:53,655 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:53,660 - yfinance - DEBUG - response code=200
2025-03-24 20:40:53,661 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:40:53,661 - yfinance - DEBUG - Exiting get()
2025-03-24 20:40:53,666 - yfinance_client - INFO - Retrieved 206 calls and 201 puts
2025-03-24 20:40:54,343 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:40:54,344 - yfinance - DEBUG - Entering get()
2025-03-24 20:40:54,344 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:40:54,345 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743724800
2025-03-24 20:40:54,345 - yfinance - DEBUG - params=None
2025-03-24 20:40:54,345 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:40:54,346 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:54,346 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:54,346 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:54,346 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:54,347 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:54,347 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:40:54,446 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:54,458 - yfinance - DEBUG - response code=200
2025-03-24 20:40:54,458 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:40:54,458 - yfinance - DEBUG - Exiting get()
2025-03-24 20:40:54,463 - yfinance_client - INFO - Retrieved 134 calls and 136 puts
2025-03-24 20:40:54,592 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:40:54,593 - yfinance - DEBUG - Entering get()
2025-03-24 20:40:54,593 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:40:54,593 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744329600
2025-03-24 20:40:54,594 - yfinance - DEBUG - params=None
2025-03-24 20:40:54,594 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:40:54,594 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:54,595 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:54,595 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:54,595 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:54,595 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:54,596 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:40:54,686 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:54,696 - yfinance - DEBUG - response code=200
2025-03-24 20:40:54,696 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:40:54,697 - yfinance - DEBUG - Exiting get()
2025-03-24 20:40:54,701 - yfinance_client - INFO - Retrieved 143 calls and 131 puts
2025-03-24 20:40:54,831 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:40:54,831 - yfinance - DEBUG - Entering get()
2025-03-24 20:40:54,832 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:40:54,832 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744848000
2025-03-24 20:40:54,832 - yfinance - DEBUG - params=None
2025-03-24 20:40:54,833 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:40:54,833 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:40:54,833 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:40:54,833 - yfinance - DEBUG - reusing cookie
2025-03-24 20:40:54,833 - yfinance - DEBUG - reusing crumb
2025-03-24 20:40:54,833 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:40:54,834 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:40:54,925 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:40:54,938 - yfinance - DEBUG - response code=200
2025-03-24 20:40:54,938 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:40:54,939 - yfinance - DEBUG - Exiting get()
2025-03-24 20:40:54,944 - yfinance_client - INFO - Retrieved 224 calls and 195 puts
2025-03-24 20:40:55,142 - yfinance_client - INFO - Successfully fetched 4 option chains for SPY
2025-03-24 20:40:55,142 - __main__ - INFO - Step 3: Preparing analysis data for SPY...
2025-03-24 20:40:55,143 - __main__ - INFO - Step 4: Processing options data for SPY...
2025-03-24 20:40:55,143 - __main__ - INFO - Found 4 expiration dates for SPY
2025-03-24 20:40:55,143 - __main__ - INFO - Processing expiration date 2025-03-31 for SPY...
2025-03-24 20:40:55,144 - __main__ - DEBUG - ATM calls shape before filtering: (206, 19)
2025-03-24 20:40:55,144 - __main__ - DEBUG - ATM puts shape before filtering: (201, 19)
2025-03-24 20:40:55,145 - __main__ - DEBUG - ATM calls shape after filtering: (55, 19)
2025-03-24 20:40:55,145 - __main__ - DEBUG - ATM puts shape after filtering: (55, 19)
2025-03-24 20:40:55,146 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:40:55,146 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:40:55,147 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:40:55,147 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:40:55,148 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:40:55,148 - __main__ - DEBUG - Volume data for SPY: calls=130483, puts=133470
2025-03-24 20:40:55,148 - __main__ - INFO - Successfully processed expiration 2025-03-31 for SPY
2025-03-24 20:40:55,149 - __main__ - INFO - Processing expiration date 2025-04-04 for SPY...
2025-03-24 20:40:55,149 - __main__ - DEBUG - ATM calls shape before filtering: (134, 19)
2025-03-24 20:40:55,150 - __main__ - DEBUG - ATM puts shape before filtering: (136, 19)
2025-03-24 20:40:55,150 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:40:55,151 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:40:55,151 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:40:55,152 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:40:55,152 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:40:55,153 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:40:55,153 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:40:55,153 - __main__ - DEBUG - Volume data for SPY: calls=69776, puts=96136
2025-03-24 20:40:55,154 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SPY
2025-03-24 20:40:55,154 - __main__ - INFO - Processing expiration date 2025-04-11 for SPY...
2025-03-24 20:40:55,154 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 20:40:55,154 - __main__ - DEBUG - ATM puts shape before filtering: (131, 19)
2025-03-24 20:40:55,155 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 20:40:55,156 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 20:40:55,156 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:40:55,156 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:40:55,157 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:40:55,157 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:40:55,157 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:40:55,158 - __main__ - DEBUG - Volume data for SPY: calls=38192, puts=37007
2025-03-24 20:40:55,158 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SPY
2025-03-24 20:40:55,158 - __main__ - INFO - Processing expiration date 2025-04-17 for SPY...
2025-03-24 20:40:55,159 - __main__ - DEBUG - ATM calls shape before filtering: (224, 19)
2025-03-24 20:40:55,159 - __main__ - DEBUG - ATM puts shape before filtering: (195, 19)
2025-03-24 20:40:55,159 - __main__ - DEBUG - ATM calls shape after filtering: (57, 19)
2025-03-24 20:40:55,160 - __main__ - DEBUG - ATM puts shape after filtering: (57, 19)
2025-03-24 20:40:55,160 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 20:40:55,161 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 20:40:55,161 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 20:40:55,162 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 20:40:55,162 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 20:40:55,162 - __main__ - DEBUG - Volume data for SPY: calls=175952, puts=311384
2025-03-24 20:40:55,163 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SPY
2025-03-24 20:40:55,163 - __main__ - INFO - Step 5: Generating analysis for SPY...
2025-03-24 20:40:55,163 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SPY with args: stock_analysis_data, market_context
2025-03-24 20:41:08,820 - __main__ - INFO - Market alignment for SPY: **
2025-03-24 20:41:08,820 - __main__ - INFO - Creating stock analysis result for SPY...
2025-03-24 20:41:08,820 - __main__ - INFO - Successfully added SPY to stock analyses
2025-03-24 20:41:08,821 - __main__ - INFO - Updating Notion with analysis for SPY...
2025-03-24 20:41:08,821 - __main__ - INFO - Sending Discord notification for SPY...
2025-03-24 20:41:08,821 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2768 chars). Splitting into parts.
2025-03-24 20:41:08,822 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:09,161 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:09,162 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:09,163 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:09,497 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:09,498 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:09,499 - __main__ - INFO - Successfully sent Discord notification for SPY
2025-03-24 20:41:09,499 - __main__ - INFO - Analyzing QQQ...
2025-03-24 20:41:09,499 - __main__ - INFO - Step 1: Getting stock data for QQQ...
2025-03-24 20:41:09,499 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:09,499 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:09,500 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:09,500 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:41:09,500 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:09,500 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:09,501 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:09,501 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:09,501 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:41:09,501 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:09,502 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:09,502 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:09,502 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,502 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:09,502 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:09,502 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,502 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:09,572 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1657
2025-03-24 20:41:09,573 - yfinance - DEBUG - response code=200
2025-03-24 20:41:09,573 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:09,574 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:09,575 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:41:09,579 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:09,581 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:09,584 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:09,585 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:09,585 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:09,587 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:09,587 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 20:41:09,587 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:09,588 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:09,588 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:09,588 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:41:09,589 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:09,589 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:09,589 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:09,589 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:09,589 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:41:09,590 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:09,590 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:09,590 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:09,590 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,590 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:09,590 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:09,591 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,591 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:09,676 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2268
2025-03-24 20:41:09,677 - yfinance - DEBUG - response code=200
2025-03-24 20:41:09,677 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:09,677 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:09,678 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:41:09,679 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:41:09,682 - yfinance - DEBUG - QQQ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:09,686 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:09,686 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:09,686 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:09,688 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:09,688 - yfinance_client - INFO - Downloaded data for QQQ, shape: (59, 5)
2025-03-24 20:41:09,694 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:41:09,697 - __main__ - INFO - Step 2: Getting options chain data for QQQ...
2025-03-24 20:41:09,698 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QQQ
2025-03-24 20:41:09,698 - yfinance - DEBUG - Entering history()
2025-03-24 20:41:09,698 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 20:41:09,699 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:09,699 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:09,699 - yfinance - DEBUG -   Entering get()
2025-03-24 20:41:09,700 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:41:09,700 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 20:41:09,700 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:09,700 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:41:09,700 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:09,700 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,701 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:09,701 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:09,701 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,701 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:41:09,789 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1208
2025-03-24 20:41:09,789 - yfinance - DEBUG - response code=200
2025-03-24 20:41:09,790 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:41:09,790 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:41:09,791 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:41:09,792 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:41:09,794 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:09,797 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:09,798 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:09,798 - yfinance - DEBUG - Exiting history()
2025-03-24 20:41:09,798 - yfinance_client - INFO - Current price of QQQ: $490.66
2025-03-24 20:41:09,798 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:09,798 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:09,799 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ
2025-03-24 20:41:09,799 - yfinance - DEBUG - params=None
2025-03-24 20:41:09,799 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:09,799 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:09,799 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,799 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:09,799 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:09,800 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,800 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:09,907 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:09,907 - yfinance - DEBUG - response code=200
2025-03-24 20:41:09,908 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:09,908 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:09,909 - yfinance_client - INFO - Found 33 expiration dates for QQQ
2025-03-24 20:41:09,910 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:41:09,911 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:09,911 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:09,911 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743379200
2025-03-24 20:41:09,911 - yfinance - DEBUG - params=None
2025-03-24 20:41:09,911 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:09,912 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:09,912 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,912 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:09,912 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:09,912 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:09,912 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:10,015 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:10,038 - yfinance - DEBUG - response code=200
2025-03-24 20:41:10,038 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:10,039 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:10,043 - yfinance_client - INFO - Retrieved 159 calls and 145 puts
2025-03-24 20:41:10,188 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:41:10,189 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:10,189 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:10,189 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743724800
2025-03-24 20:41:10,190 - yfinance - DEBUG - params=None
2025-03-24 20:41:10,190 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:10,190 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:10,190 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:10,190 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:10,191 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:10,191 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:10,191 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:10,281 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:10,305 - yfinance - DEBUG - response code=200
2025-03-24 20:41:10,305 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:10,306 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:10,310 - yfinance_client - INFO - Retrieved 140 calls and 159 puts
2025-03-24 20:41:10,452 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:41:10,453 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:10,453 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:10,453 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744329600
2025-03-24 20:41:10,454 - yfinance - DEBUG - params=None
2025-03-24 20:41:10,454 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:10,454 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:10,454 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:10,455 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:10,455 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:10,455 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:10,455 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:10,554 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:10,565 - yfinance - DEBUG - response code=200
2025-03-24 20:41:10,566 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:10,566 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:10,570 - yfinance_client - INFO - Retrieved 136 calls and 133 puts
2025-03-24 20:41:10,699 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:41:10,699 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:10,700 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:10,700 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744848000
2025-03-24 20:41:10,700 - yfinance - DEBUG - params=None
2025-03-24 20:41:10,701 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:10,701 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:10,701 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:10,701 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:10,701 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:10,702 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:10,702 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:10,800 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:10,823 - yfinance - DEBUG - response code=200
2025-03-24 20:41:10,824 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:10,824 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:10,829 - yfinance_client - INFO - Retrieved 140 calls and 132 puts
2025-03-24 20:41:10,958 - yfinance_client - INFO - Successfully fetched 4 option chains for QQQ
2025-03-24 20:41:10,958 - __main__ - INFO - Step 3: Preparing analysis data for QQQ...
2025-03-24 20:41:10,959 - __main__ - INFO - Step 4: Processing options data for QQQ...
2025-03-24 20:41:10,959 - __main__ - INFO - Found 4 expiration dates for QQQ
2025-03-24 20:41:10,959 - __main__ - INFO - Processing expiration date 2025-03-31 for QQQ...
2025-03-24 20:41:10,960 - __main__ - DEBUG - ATM calls shape before filtering: (159, 19)
2025-03-24 20:41:10,960 - __main__ - DEBUG - ATM puts shape before filtering: (145, 19)
2025-03-24 20:41:10,961 - __main__ - DEBUG - ATM calls shape after filtering: (37, 19)
2025-03-24 20:41:10,961 - __main__ - DEBUG - ATM puts shape after filtering: (35, 19)
2025-03-24 20:41:10,961 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:41:10,962 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:41:10,962 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:41:10,963 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:41:10,963 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:41:10,964 - __main__ - DEBUG - Volume data for QQQ: calls=38217, puts=47709
2025-03-24 20:41:10,964 - __main__ - INFO - Successfully processed expiration 2025-03-31 for QQQ
2025-03-24 20:41:10,964 - __main__ - INFO - Processing expiration date 2025-04-04 for QQQ...
2025-03-24 20:41:10,965 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:41:10,965 - __main__ - DEBUG - ATM puts shape before filtering: (159, 19)
2025-03-24 20:41:10,965 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:41:10,966 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:41:10,966 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:41:10,967 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:41:10,967 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:41:10,968 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:41:10,968 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:41:10,968 - __main__ - DEBUG - Volume data for QQQ: calls=28545, puts=29809
2025-03-24 20:41:10,968 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QQQ
2025-03-24 20:41:10,968 - __main__ - INFO - Processing expiration date 2025-04-11 for QQQ...
2025-03-24 20:41:10,969 - __main__ - DEBUG - ATM calls shape before filtering: (136, 19)
2025-03-24 20:41:10,969 - __main__ - DEBUG - ATM puts shape before filtering: (133, 19)
2025-03-24 20:41:10,970 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 20:41:10,970 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 20:41:10,970 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:41:10,971 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:41:10,971 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:41:10,972 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:41:10,972 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:41:10,973 - __main__ - DEBUG - Volume data for QQQ: calls=16620, puts=21183
2025-03-24 20:41:10,973 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QQQ
2025-03-24 20:41:10,973 - __main__ - INFO - Processing expiration date 2025-04-17 for QQQ...
2025-03-24 20:41:10,974 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 20:41:10,974 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 20:41:10,974 - __main__ - DEBUG - ATM calls shape after filtering: (22, 19)
2025-03-24 20:41:10,975 - __main__ - DEBUG - ATM puts shape after filtering: (22, 19)
2025-03-24 20:41:10,975 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 20:41:10,976 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 20:41:10,976 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 20:41:10,977 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 20:41:10,977 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 20:41:10,977 - __main__ - DEBUG - Volume data for QQQ: calls=92414, puts=81733
2025-03-24 20:41:10,977 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QQQ
2025-03-24 20:41:10,978 - __main__ - INFO - Step 5: Generating analysis for QQQ...
2025-03-24 20:41:10,978 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QQQ with args: stock_analysis_data, market_context
2025-03-24 20:41:25,133 - __main__ - INFO - Market alignment for QQQ: **
2025-03-24 20:41:25,133 - __main__ - INFO - Creating stock analysis result for QQQ...
2025-03-24 20:41:25,133 - __main__ - INFO - Successfully added QQQ to stock analyses
2025-03-24 20:41:25,134 - __main__ - INFO - Updating Notion with analysis for QQQ...
2025-03-24 20:41:25,134 - __main__ - INFO - Sending Discord notification for QQQ...
2025-03-24 20:41:25,134 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2747 chars). Splitting into parts.
2025-03-24 20:41:25,135 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:25,542 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:25,544 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:25,545 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:25,817 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:25,819 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:25,820 - __main__ - INFO - Successfully sent Discord notification for QQQ
2025-03-24 20:41:25,820 - __main__ - INFO - Analyzing IWM...
2025-03-24 20:41:25,820 - __main__ - INFO - Step 1: Getting stock data for IWM...
2025-03-24 20:41:25,821 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:25,821 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:25,821 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:25,822 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:41:25,822 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:25,822 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:25,822 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:25,822 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:25,822 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:41:25,822 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:25,822 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:25,822 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:25,822 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:25,824 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:25,824 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:25,824 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:25,824 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:25,895 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1621
2025-03-24 20:41:25,896 - yfinance - DEBUG - response code=200
2025-03-24 20:41:25,896 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:25,896 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:25,897 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:41:25,902 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:25,905 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:25,909 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:25,910 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:25,910 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:25,912 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:25,912 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 20:41:25,912 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:25,912 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:25,912 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:25,913 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:41:25,913 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:25,914 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:25,914 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:25,914 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:25,914 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:41:25,915 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:25,915 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:25,915 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:25,915 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:25,915 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:25,916 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:25,916 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:25,916 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:25,993 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2593
2025-03-24 20:41:25,994 - yfinance - DEBUG - response code=200
2025-03-24 20:41:25,994 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:25,994 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:25,996 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:41:25,997 - yfinance - DEBUG - IWM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:41:26,001 - yfinance - DEBUG - IWM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:26,006 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:26,007 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:26,007 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:26,009 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:26,010 - yfinance_client - INFO - Downloaded data for IWM, shape: (59, 5)
2025-03-24 20:41:26,017 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:41:26,020 - __main__ - INFO - Step 2: Getting options chain data for IWM...
2025-03-24 20:41:26,020 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for IWM
2025-03-24 20:41:26,021 - yfinance - DEBUG - Entering history()
2025-03-24 20:41:26,021 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 20:41:26,021 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:26,022 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:26,022 - yfinance - DEBUG -   Entering get()
2025-03-24 20:41:26,022 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:41:26,022 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 20:41:26,022 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:26,023 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:41:26,023 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:26,023 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,023 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:26,023 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:26,023 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,024 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:41:26,099 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1218
2025-03-24 20:41:26,100 - yfinance - DEBUG - response code=200
2025-03-24 20:41:26,100 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:41:26,100 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:41:26,101 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:41:26,102 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:41:26,104 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:26,109 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:26,109 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:26,110 - yfinance - DEBUG - Exiting history()
2025-03-24 20:41:26,110 - yfinance_client - INFO - Current price of IWM: $208.86
2025-03-24 20:41:26,110 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:26,111 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:26,111 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM
2025-03-24 20:41:26,111 - yfinance - DEBUG - params=None
2025-03-24 20:41:26,111 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:26,111 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:26,112 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,112 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:26,112 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:26,112 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,112 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:26,235 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:26,236 - yfinance - DEBUG - response code=200
2025-03-24 20:41:26,236 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:26,237 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:26,238 - yfinance_client - INFO - Found 31 expiration dates for IWM
2025-03-24 20:41:26,238 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:41:26,239 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:26,239 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:26,239 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743379200
2025-03-24 20:41:26,239 - yfinance - DEBUG - params=None
2025-03-24 20:41:26,239 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:26,240 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:26,240 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,240 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:26,240 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:26,240 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,241 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:26,341 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:26,343 - yfinance - DEBUG - response code=200
2025-03-24 20:41:26,343 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:26,343 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:26,347 - yfinance_client - INFO - Retrieved 90 calls and 86 puts
2025-03-24 20:41:26,432 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:41:26,432 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:26,432 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:26,434 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1743724800
2025-03-24 20:41:26,434 - yfinance - DEBUG - params=None
2025-03-24 20:41:26,434 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:26,434 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:26,434 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,434 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:26,434 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:26,434 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,434 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:26,566 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:26,568 - yfinance - DEBUG - response code=200
2025-03-24 20:41:26,568 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:26,568 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:26,572 - yfinance_client - INFO - Retrieved 80 calls and 82 puts
2025-03-24 20:41:26,652 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:41:26,653 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:26,653 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:26,653 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744329600
2025-03-24 20:41:26,653 - yfinance - DEBUG - params=None
2025-03-24 20:41:26,654 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:26,654 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:26,654 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,654 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:26,654 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:26,654 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,655 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:26,794 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:26,805 - yfinance - DEBUG - response code=200
2025-03-24 20:41:26,805 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:26,805 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:26,809 - yfinance_client - INFO - Retrieved 71 calls and 80 puts
2025-03-24 20:41:26,883 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:41:26,884 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:26,884 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:26,884 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/IWM?date=1744848000
2025-03-24 20:41:26,884 - yfinance - DEBUG - params=None
2025-03-24 20:41:26,885 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:26,885 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:26,885 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,885 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:26,885 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:26,886 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:26,886 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:26,980 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/IWM?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:26,985 - yfinance - DEBUG - response code=200
2025-03-24 20:41:26,986 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:26,986 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:26,990 - yfinance_client - INFO - Retrieved 101 calls and 91 puts
2025-03-24 20:41:27,082 - yfinance_client - INFO - Successfully fetched 4 option chains for IWM
2025-03-24 20:41:27,083 - __main__ - INFO - Step 3: Preparing analysis data for IWM...
2025-03-24 20:41:27,083 - __main__ - INFO - Step 4: Processing options data for IWM...
2025-03-24 20:41:27,083 - __main__ - INFO - Found 4 expiration dates for IWM
2025-03-24 20:41:27,084 - __main__ - INFO - Processing expiration date 2025-03-31 for IWM...
2025-03-24 20:41:27,084 - __main__ - DEBUG - ATM calls shape before filtering: (90, 19)
2025-03-24 20:41:27,084 - __main__ - DEBUG - ATM puts shape before filtering: (86, 19)
2025-03-24 20:41:27,085 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:41:27,086 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:41:27,086 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:41:27,087 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:41:27,087 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:41:27,087 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:41:27,088 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:41:27,088 - __main__ - DEBUG - Volume data for IWM: calls=14723, puts=18881
2025-03-24 20:41:27,088 - __main__ - INFO - Successfully processed expiration 2025-03-31 for IWM
2025-03-24 20:41:27,088 - __main__ - INFO - Processing expiration date 2025-04-04 for IWM...
2025-03-24 20:41:27,089 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:41:27,089 - __main__ - DEBUG - ATM puts shape before filtering: (82, 19)
2025-03-24 20:41:27,090 - __main__ - DEBUG - ATM calls shape after filtering: (23, 19)
2025-03-24 20:41:27,090 - __main__ - DEBUG - ATM puts shape after filtering: (23, 19)
2025-03-24 20:41:27,090 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:41:27,091 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:41:27,091 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:41:27,092 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:41:27,092 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:41:27,093 - __main__ - DEBUG - Volume data for IWM: calls=19269, puts=29074
2025-03-24 20:41:27,093 - __main__ - INFO - Successfully processed expiration 2025-04-04 for IWM
2025-03-24 20:41:27,093 - __main__ - INFO - Processing expiration date 2025-04-11 for IWM...
2025-03-24 20:41:27,093 - __main__ - DEBUG - ATM calls shape before filtering: (71, 19)
2025-03-24 20:41:27,094 - __main__ - DEBUG - ATM puts shape before filtering: (80, 19)
2025-03-24 20:41:27,094 - __main__ - DEBUG - ATM calls shape after filtering: (25, 19)
2025-03-24 20:41:27,095 - __main__ - DEBUG - ATM puts shape after filtering: (25, 19)
2025-03-24 20:41:27,095 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:41:27,096 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:41:27,096 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:41:27,097 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:41:27,097 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:41:27,097 - __main__ - DEBUG - Volume data for IWM: calls=5175, puts=10062
2025-03-24 20:41:27,097 - __main__ - INFO - Successfully processed expiration 2025-04-11 for IWM
2025-03-24 20:41:27,098 - __main__ - INFO - Processing expiration date 2025-04-17 for IWM...
2025-03-24 20:41:27,098 - __main__ - DEBUG - ATM calls shape before filtering: (101, 19)
2025-03-24 20:41:27,098 - __main__ - DEBUG - ATM puts shape before filtering: (91, 19)
2025-03-24 20:41:27,099 - __main__ - DEBUG - ATM calls shape after filtering: (21, 19)
2025-03-24 20:41:27,099 - __main__ - DEBUG - ATM puts shape after filtering: (21, 19)
2025-03-24 20:41:27,100 - __main__ - DEBUG - Finding ATM call for IWM...
2025-03-24 20:41:27,100 - __main__ - DEBUG - ATM call for IWM: strike=209.0
2025-03-24 20:41:27,101 - __main__ - DEBUG - Finding ATM put for IWM...
2025-03-24 20:41:27,101 - __main__ - DEBUG - ATM put for IWM: strike=209.0
2025-03-24 20:41:27,101 - __main__ - DEBUG - Calculating volume data for IWM...
2025-03-24 20:41:27,102 - __main__ - DEBUG - Volume data for IWM: calls=34485, puts=312289
2025-03-24 20:41:27,102 - __main__ - INFO - Successfully processed expiration 2025-04-17 for IWM
2025-03-24 20:41:27,102 - __main__ - INFO - Step 5: Generating analysis for IWM...
2025-03-24 20:41:27,102 - __main__ - DEBUG - Calling get_stock_analysis_prompt for IWM with args: stock_analysis_data, market_context
2025-03-24 20:41:43,119 - __main__ - INFO - Market alignment for IWM: **
2025-03-24 20:41:43,119 - __main__ - INFO - Creating stock analysis result for IWM...
2025-03-24 20:41:43,120 - __main__ - INFO - Successfully added IWM to stock analyses
2025-03-24 20:41:43,120 - __main__ - INFO - Updating Notion with analysis for IWM...
2025-03-24 20:41:43,120 - __main__ - INFO - Sending Discord notification for IWM...
2025-03-24 20:41:43,121 - discord.discord_client - INFO - Analysis description exceeds Discord limit (3044 chars). Splitting into parts.
2025-03-24 20:41:43,121 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:43,415 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:43,416 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:43,417 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:43,734 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:43,735 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:43,736 - __main__ - INFO - Successfully sent Discord notification for IWM
2025-03-24 20:41:43,736 - __main__ - INFO - Analyzing VTV...
2025-03-24 20:41:43,736 - __main__ - INFO - Step 1: Getting stock data for VTV...
2025-03-24 20:41:43,736 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:43,737 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:43,737 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:43,737 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:41:43,738 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:43,738 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:43,738 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:43,738 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:43,738 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:41:43,738 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:43,739 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:43,739 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:43,739 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:43,739 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:43,739 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:43,739 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:43,740 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:43,801 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1631
2025-03-24 20:41:43,802 - yfinance - DEBUG - response code=200
2025-03-24 20:41:43,802 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:43,802 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:43,803 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:41:43,807 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:43,809 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:43,813 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:43,813 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:43,814 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:43,815 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:43,815 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 20:41:43,816 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:43,816 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:43,816 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:43,816 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:41:43,817 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:43,817 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:43,817 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:43,818 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:43,818 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:41:43,818 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:43,818 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:43,818 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:43,819 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:43,819 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:43,819 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:43,819 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:43,819 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:43,903 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1983
2025-03-24 20:41:43,904 - yfinance - DEBUG - response code=200
2025-03-24 20:41:43,904 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:43,904 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:43,905 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:41:43,906 - yfinance - DEBUG - VTV: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:41:43,908 - yfinance - DEBUG - VTV: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:43,912 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:43,913 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:43,913 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:43,914 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:43,915 - yfinance_client - INFO - Downloaded data for VTV, shape: (59, 5)
2025-03-24 20:41:43,920 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:41:43,923 - __main__ - INFO - Step 2: Getting options chain data for VTV...
2025-03-24 20:41:43,923 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VTV
2025-03-24 20:41:43,923 - yfinance - DEBUG - Entering history()
2025-03-24 20:41:43,924 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 20:41:43,924 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:43,924 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:43,924 - yfinance - DEBUG -   Entering get()
2025-03-24 20:41:43,925 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:41:43,925 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 20:41:43,925 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:43,925 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:41:43,925 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:43,926 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:43,926 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:43,926 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:43,926 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:43,926 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:41:44,012 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1219
2025-03-24 20:41:44,013 - yfinance - DEBUG - response code=200
2025-03-24 20:41:44,013 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:41:44,013 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:41:44,014 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:41:44,015 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:41:44,017 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:44,020 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:44,021 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:44,021 - yfinance - DEBUG - Exiting history()
2025-03-24 20:41:44,021 - yfinance_client - INFO - Current price of VTV: $174.55
2025-03-24 20:41:44,021 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:44,022 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:44,022 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV
2025-03-24 20:41:44,022 - yfinance - DEBUG - params=None
2025-03-24 20:41:44,022 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:44,022 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:44,022 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:44,023 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:44,023 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:44,023 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:44,023 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:44,087 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:44,088 - yfinance - DEBUG - response code=200
2025-03-24 20:41:44,088 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:44,089 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:44,089 - yfinance_client - INFO - Found 4 expiration dates for VTV
2025-03-24 20:41:44,090 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:41:44,090 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:44,090 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:44,090 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VTV?date=1744848000
2025-03-24 20:41:44,090 - yfinance - DEBUG - params=None
2025-03-24 20:41:44,090 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:44,091 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:44,091 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:44,091 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:44,091 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:44,091 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:44,091 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:44,156 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VTV?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:41:44,156 - yfinance - DEBUG - response code=200
2025-03-24 20:41:44,156 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:44,157 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:44,159 - yfinance_client - INFO - Retrieved 18 calls and 11 puts
2025-03-24 20:41:44,176 - yfinance_client - INFO - Successfully fetched 1 option chains for VTV
2025-03-24 20:41:44,176 - __main__ - INFO - Step 3: Preparing analysis data for VTV...
2025-03-24 20:41:44,177 - __main__ - INFO - Step 4: Processing options data for VTV...
2025-03-24 20:41:44,177 - __main__ - INFO - Found 1 expiration dates for VTV
2025-03-24 20:41:44,177 - __main__ - INFO - Processing expiration date 2025-04-17 for VTV...
2025-03-24 20:41:44,178 - __main__ - DEBUG - ATM calls shape before filtering: (18, 19)
2025-03-24 20:41:44,178 - __main__ - DEBUG - ATM puts shape before filtering: (11, 19)
2025-03-24 20:41:44,178 - __main__ - DEBUG - ATM calls shape after filtering: (15, 19)
2025-03-24 20:41:44,179 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:41:44,179 - __main__ - DEBUG - Finding ATM call for VTV...
2025-03-24 20:41:44,180 - __main__ - DEBUG - ATM call for VTV: strike=175.0
2025-03-24 20:41:44,180 - __main__ - DEBUG - Finding ATM put for VTV...
2025-03-24 20:41:44,181 - __main__ - DEBUG - ATM put for VTV: strike=175.0
2025-03-24 20:41:44,181 - __main__ - DEBUG - Calculating volume data for VTV...
2025-03-24 20:41:44,182 - __main__ - DEBUG - Volume data for VTV: calls=92, puts=8
2025-03-24 20:41:44,182 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VTV
2025-03-24 20:41:44,182 - __main__ - INFO - Step 5: Generating analysis for VTV...
2025-03-24 20:41:44,182 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VTV with args: stock_analysis_data, market_context
2025-03-24 20:41:57,468 - __main__ - INFO - Market alignment for VTV: **
2025-03-24 20:41:57,468 - __main__ - INFO - Creating stock analysis result for VTV...
2025-03-24 20:41:57,468 - __main__ - INFO - Successfully added VTV to stock analyses
2025-03-24 20:41:57,469 - __main__ - INFO - Updating Notion with analysis for VTV...
2025-03-24 20:41:57,469 - __main__ - INFO - Sending Discord notification for VTV...
2025-03-24 20:41:57,469 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2595 chars). Splitting into parts.
2025-03-24 20:41:57,470 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:57,747 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:57,748 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:57,749 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:41:57,985 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:41:57,986 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:41:57,987 - __main__ - INFO - Successfully sent Discord notification for VTV
2025-03-24 20:41:57,987 - __main__ - INFO - Analyzing VGLT...
2025-03-24 20:41:57,987 - __main__ - INFO - Step 1: Getting stock data for VGLT...
2025-03-24 20:41:57,987 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:57,987 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:57,988 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:57,988 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:41:57,988 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:57,988 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:57,989 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:57,989 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:57,989 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:41:57,989 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:57,989 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:57,990 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:57,990 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:57,990 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:57,990 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:57,990 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:57,991 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:58,056 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1669
2025-03-24 20:41:58,056 - yfinance - DEBUG - response code=200
2025-03-24 20:41:58,057 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:58,057 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:58,058 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:41:58,062 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:58,064 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:58,068 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:41:58,068 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:58,068 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:58,070 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:58,070 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 20:41:58,070 - yfinance - DEBUG - Entering download()
2025-03-24 20:41:58,071 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:41:58,071 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:58,071 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:41:58,071 - yfinance - DEBUG -   Entering history()
2025-03-24 20:41:58,072 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:58,072 - yfinance - DEBUG -    Entering get()
2025-03-24 20:41:58,072 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:41:58,072 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:41:58,072 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:58,073 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:41:58,073 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:58,073 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,073 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:58,073 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:58,073 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,073 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:41:58,154 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2395
2025-03-24 20:41:58,155 - yfinance - DEBUG - response code=200
2025-03-24 20:41:58,155 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:41:58,155 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:41:58,156 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:41:58,157 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:41:58,160 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 20:41:58,163 - yfinance - DEBUG - VGLT: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:58,167 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:41:58,167 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:41:58,167 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:58,169 - yfinance - DEBUG - Exiting download()
2025-03-24 20:41:58,170 - yfinance_client - INFO - Downloaded data for VGLT, shape: (59, 5)
2025-03-24 20:41:58,175 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:41:58,178 - __main__ - INFO - Step 2: Getting options chain data for VGLT...
2025-03-24 20:41:58,179 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VGLT
2025-03-24 20:41:58,179 - yfinance - DEBUG - Entering history()
2025-03-24 20:41:58,180 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 20:41:58,180 - yfinance - DEBUG -  Entering history()
2025-03-24 20:41:58,180 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:58,180 - yfinance - DEBUG -   Entering get()
2025-03-24 20:41:58,180 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:41:58,181 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 20:41:58,181 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:41:58,181 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:41:58,181 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:58,181 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,181 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:58,182 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:58,182 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,182 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:41:58,259 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1241
2025-03-24 20:41:58,260 - yfinance - DEBUG - response code=200
2025-03-24 20:41:58,260 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:41:58,260 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:41:58,261 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:41:58,262 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:41:58,264 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:58,267 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:41:58,268 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:41:58,268 - yfinance - DEBUG - Exiting history()
2025-03-24 20:41:58,268 - yfinance_client - INFO - Current price of VGLT: $56.85
2025-03-24 20:41:58,268 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:58,268 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:58,268 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT
2025-03-24 20:41:58,269 - yfinance - DEBUG - params=None
2025-03-24 20:41:58,269 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:58,269 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:58,269 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,269 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:58,269 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:58,270 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,270 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:58,324 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1811
2025-03-24 20:41:58,324 - yfinance - DEBUG - response code=200
2025-03-24 20:41:58,324 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:58,325 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:58,325 - yfinance_client - INFO - Found 4 expiration dates for VGLT
2025-03-24 20:41:58,325 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:41:58,325 - yfinance - DEBUG - Entering get()
2025-03-24 20:41:58,326 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:41:58,326 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VGLT?date=1744848000
2025-03-24 20:41:58,326 - yfinance - DEBUG - params=None
2025-03-24 20:41:58,326 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:41:58,326 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:41:58,326 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,326 - yfinance - DEBUG - reusing cookie
2025-03-24 20:41:58,326 - yfinance - DEBUG - reusing crumb
2025-03-24 20:41:58,327 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:41:58,327 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:41:58,381 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VGLT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1811
2025-03-24 20:41:58,382 - yfinance - DEBUG - response code=200
2025-03-24 20:41:58,382 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:41:58,382 - yfinance - DEBUG - Exiting get()
2025-03-24 20:41:58,385 - yfinance_client - INFO - Retrieved 8 calls and 8 puts
2025-03-24 20:41:58,396 - yfinance_client - INFO - Successfully fetched 1 option chains for VGLT
2025-03-24 20:41:58,396 - __main__ - INFO - Step 3: Preparing analysis data for VGLT...
2025-03-24 20:41:58,396 - __main__ - INFO - Step 4: Processing options data for VGLT...
2025-03-24 20:41:58,396 - __main__ - INFO - Found 1 expiration dates for VGLT
2025-03-24 20:41:58,397 - __main__ - INFO - Processing expiration date 2025-04-17 for VGLT...
2025-03-24 20:41:58,397 - __main__ - DEBUG - ATM calls shape before filtering: (8, 19)
2025-03-24 20:41:58,398 - __main__ - DEBUG - ATM puts shape before filtering: (8, 19)
2025-03-24 20:41:58,398 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:41:58,399 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:41:58,399 - __main__ - DEBUG - Finding ATM call for VGLT...
2025-03-24 20:41:58,400 - __main__ - DEBUG - ATM call for VGLT: strike=57.0
2025-03-24 20:41:58,400 - __main__ - DEBUG - Finding ATM put for VGLT...
2025-03-24 20:41:58,400 - __main__ - DEBUG - ATM put for VGLT: strike=57.0
2025-03-24 20:41:58,401 - __main__ - DEBUG - Calculating volume data for VGLT...
2025-03-24 20:41:58,401 - __main__ - DEBUG - Volume data for VGLT: calls=23, puts=27
2025-03-24 20:41:58,401 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VGLT
2025-03-24 20:41:58,401 - __main__ - INFO - Step 5: Generating analysis for VGLT...
2025-03-24 20:41:58,402 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VGLT with args: stock_analysis_data, market_context
2025-03-24 20:42:12,222 - __main__ - INFO - Market alignment for VGLT: contrary
2025-03-24 20:42:12,222 - __main__ - INFO - Creating stock analysis result for VGLT...
2025-03-24 20:42:12,223 - __main__ - INFO - Successfully added VGLT to stock analyses
2025-03-24 20:42:12,223 - __main__ - INFO - Updating Notion with analysis for VGLT...
2025-03-24 20:42:12,223 - __main__ - INFO - Sending Discord notification for VGLT...
2025-03-24 20:42:12,224 - discord.discord_client - INFO - Analysis description exceeds Discord limit (3010 chars). Splitting into parts.
2025-03-24 20:42:12,225 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:12,614 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:12,615 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:12,616 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:12,848 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:12,850 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:12,850 - __main__ - INFO - Successfully sent Discord notification for VGLT
2025-03-24 20:42:12,850 - __main__ - INFO - Analyzing VIX...
2025-03-24 20:42:12,850 - __main__ - INFO - Step 1: Getting stock data for VIX...
2025-03-24 20:42:12,851 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:12,851 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:12,851 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:12,851 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:42:12,852 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:12,852 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:12,852 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:12,852 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:12,852 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:42:12,853 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:12,853 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:12,853 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:12,853 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:12,853 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:12,853 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:12,854 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:12,854 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:12,909 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 801
2025-03-24 20:42:12,910 - yfinance - DEBUG - response code=200
2025-03-24 20:42:12,911 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:12,911 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:12,913 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:42:12,913 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=5d)')
2025-03-24 20:42:12,914 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=5d)

2025-03-24 20:42:12,917 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:12,917 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:42:12,917 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:12,917 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:12,917 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:12,918 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 20:42:12,918 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:12,918 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:12,918 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:12,918 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:12,919 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 20:42:12,919 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:12,919 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:12,919 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:12,919 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:12,919 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:12,919 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:12,920 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:12,920 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:12,967 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 802
2025-03-24 20:42:12,968 - yfinance - DEBUG - response code=200
2025-03-24 20:42:12,968 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:12,968 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:12,969 - yfinance - ERROR - 
1 Failed download:
2025-03-24 20:42:12,969 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=3mo)')
2025-03-24 20:42:12,970 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=3mo)

2025-03-24 20:42:12,973 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:12,973 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 20:42:12,973 - yfinance_client - ERROR - Failed to retrieve data for VIX
2025-03-24 20:42:12,973 - __main__ - ERROR - Failed to get stock data for VIX
2025-03-24 20:42:12,973 - __main__ - INFO - Analyzing DIA...
2025-03-24 20:42:12,973 - __main__ - INFO - Step 1: Getting stock data for DIA...
2025-03-24 20:42:12,974 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:12,974 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:12,974 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:12,974 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:42:12,975 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:12,975 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:12,975 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:12,975 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:12,975 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:42:12,976 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:12,976 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:12,976 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:12,976 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:12,977 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:12,977 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:12,977 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:12,977 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:13,045 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1667
2025-03-24 20:42:13,046 - yfinance - DEBUG - response code=200
2025-03-24 20:42:13,046 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:13,047 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:13,048 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:42:13,052 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:13,055 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:13,059 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:13,059 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:13,060 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:13,062 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:13,062 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 20:42:13,062 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:13,062 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:13,062 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:13,063 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:42:13,063 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:13,063 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:13,063 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:13,064 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:13,064 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:42:13,064 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:13,064 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:13,064 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:13,065 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,065 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:13,065 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:13,065 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,065 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:13,168 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2591
2025-03-24 20:42:13,169 - yfinance - DEBUG - response code=200
2025-03-24 20:42:13,169 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:13,169 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:13,170 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:42:13,171 - yfinance - DEBUG - DIA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:42:13,174 - yfinance - DEBUG - DIA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:42:13,178 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:42:13,178 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:13,179 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:13,180 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:13,181 - yfinance_client - INFO - Downloaded data for DIA, shape: (59, 5)
2025-03-24 20:42:13,186 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:42:13,189 - __main__ - INFO - Step 2: Getting options chain data for DIA...
2025-03-24 20:42:13,190 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for DIA
2025-03-24 20:42:13,190 - yfinance - DEBUG - Entering history()
2025-03-24 20:42:13,190 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 20:42:13,191 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:13,191 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:13,191 - yfinance - DEBUG -   Entering get()
2025-03-24 20:42:13,192 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:42:13,192 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 20:42:13,192 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:13,193 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:42:13,193 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:13,193 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,193 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:13,193 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:13,193 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,193 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:42:13,327 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1236
2025-03-24 20:42:13,327 - yfinance - DEBUG - response code=200
2025-03-24 20:42:13,328 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:42:13,328 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:42:13,329 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:42:13,330 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:42:13,332 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:42:13,335 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:42:13,336 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:13,336 - yfinance - DEBUG - Exiting history()
2025-03-24 20:42:13,336 - yfinance_client - INFO - Current price of DIA: $425.49
2025-03-24 20:42:13,336 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:13,336 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:13,336 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA
2025-03-24 20:42:13,337 - yfinance - DEBUG - params=None
2025-03-24 20:42:13,337 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:13,337 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:13,337 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,337 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:13,338 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:13,338 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,338 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:13,422 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:13,438 - yfinance - DEBUG - response code=200
2025-03-24 20:42:13,438 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:13,438 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:13,440 - yfinance_client - INFO - Found 17 expiration dates for DIA
2025-03-24 20:42:13,440 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 20:42:13,441 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:13,441 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:13,441 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743379200
2025-03-24 20:42:13,441 - yfinance - DEBUG - params=None
2025-03-24 20:42:13,442 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:13,442 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:13,442 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,442 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:13,442 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:13,442 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,443 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:13,532 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:13,534 - yfinance - DEBUG - response code=200
2025-03-24 20:42:13,534 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:13,535 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:13,539 - yfinance_client - INFO - Retrieved 113 calls and 106 puts
2025-03-24 20:42:13,645 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:42:13,645 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:13,645 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:13,646 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1743724800
2025-03-24 20:42:13,646 - yfinance - DEBUG - params=None
2025-03-24 20:42:13,646 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:13,646 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:13,646 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,647 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:13,647 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:13,647 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,647 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:13,731 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:13,732 - yfinance - DEBUG - response code=200
2025-03-24 20:42:13,733 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:13,733 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:13,737 - yfinance_client - INFO - Retrieved 75 calls and 67 puts
2025-03-24 20:42:13,807 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:42:13,808 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:13,808 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:13,808 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1744329600
2025-03-24 20:42:13,808 - yfinance - DEBUG - params=None
2025-03-24 20:42:13,809 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:13,809 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:13,809 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,809 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:13,809 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:13,809 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,810 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:13,884 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:13,885 - yfinance - DEBUG - response code=200
2025-03-24 20:42:13,885 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:13,885 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:13,889 - yfinance_client - INFO - Retrieved 54 calls and 54 puts
2025-03-24 20:42:13,944 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:42:13,944 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:13,945 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:13,945 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/DIA?date=1744848000
2025-03-24 20:42:13,946 - yfinance - DEBUG - params=None
2025-03-24 20:42:13,946 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:13,946 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:13,946 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,946 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:13,946 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:13,947 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:13,947 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:14,031 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/DIA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:14,033 - yfinance - DEBUG - response code=200
2025-03-24 20:42:14,033 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:14,033 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:14,038 - yfinance_client - INFO - Retrieved 99 calls and 89 puts
2025-03-24 20:42:14,130 - yfinance_client - INFO - Successfully fetched 4 option chains for DIA
2025-03-24 20:42:14,131 - __main__ - INFO - Step 3: Preparing analysis data for DIA...
2025-03-24 20:42:14,131 - __main__ - INFO - Step 4: Processing options data for DIA...
2025-03-24 20:42:14,131 - __main__ - INFO - Found 4 expiration dates for DIA
2025-03-24 20:42:14,131 - __main__ - INFO - Processing expiration date 2025-03-31 for DIA...
2025-03-24 20:42:14,132 - __main__ - DEBUG - ATM calls shape before filtering: (113, 19)
2025-03-24 20:42:14,132 - __main__ - DEBUG - ATM puts shape before filtering: (106, 19)
2025-03-24 20:42:14,133 - __main__ - DEBUG - ATM calls shape after filtering: (34, 19)
2025-03-24 20:42:14,133 - __main__ - DEBUG - ATM puts shape after filtering: (34, 19)
2025-03-24 20:42:14,134 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:42:14,134 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:42:14,135 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:42:14,135 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:42:14,136 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:42:14,136 - __main__ - DEBUG - Volume data for DIA: calls=1390, puts=5714
2025-03-24 20:42:14,136 - __main__ - INFO - Successfully processed expiration 2025-03-31 for DIA
2025-03-24 20:42:14,137 - __main__ - INFO - Processing expiration date 2025-04-04 for DIA...
2025-03-24 20:42:14,137 - __main__ - DEBUG - ATM calls shape before filtering: (75, 19)
2025-03-24 20:42:14,137 - __main__ - DEBUG - ATM puts shape before filtering: (67, 19)
2025-03-24 20:42:14,138 - __main__ - DEBUG - ATM calls shape after filtering: (44, 19)
2025-03-24 20:42:14,138 - __main__ - DEBUG - ATM puts shape after filtering: (46, 19)
2025-03-24 20:42:14,138 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:42:14,139 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:42:14,139 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:42:14,140 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:42:14,140 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:42:14,141 - __main__ - DEBUG - Volume data for DIA: calls=1433, puts=2429
2025-03-24 20:42:14,141 - __main__ - INFO - Successfully processed expiration 2025-04-04 for DIA
2025-03-24 20:42:14,141 - __main__ - INFO - Processing expiration date 2025-04-11 for DIA...
2025-03-24 20:42:14,142 - __main__ - DEBUG - ATM calls shape before filtering: (54, 19)
2025-03-24 20:42:14,142 - __main__ - DEBUG - ATM puts shape before filtering: (54, 19)
2025-03-24 20:42:14,142 - __main__ - DEBUG - ATM calls shape after filtering: (41, 19)
2025-03-24 20:42:14,143 - __main__ - DEBUG - ATM puts shape after filtering: (38, 19)
2025-03-24 20:42:14,143 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:42:14,144 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:42:14,144 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:42:14,145 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:42:14,145 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:42:14,145 - __main__ - DEBUG - Volume data for DIA: calls=537, puts=5714
2025-03-24 20:42:14,146 - __main__ - INFO - Successfully processed expiration 2025-04-11 for DIA
2025-03-24 20:42:14,146 - __main__ - INFO - Processing expiration date 2025-04-17 for DIA...
2025-03-24 20:42:14,146 - __main__ - DEBUG - ATM calls shape before filtering: (99, 19)
2025-03-24 20:42:14,146 - __main__ - DEBUG - ATM puts shape before filtering: (89, 19)
2025-03-24 20:42:14,147 - __main__ - DEBUG - ATM calls shape after filtering: (42, 19)
2025-03-24 20:42:14,147 - __main__ - DEBUG - ATM puts shape after filtering: (40, 19)
2025-03-24 20:42:14,148 - __main__ - DEBUG - Finding ATM call for DIA...
2025-03-24 20:42:14,148 - __main__ - DEBUG - ATM call for DIA: strike=425.0
2025-03-24 20:42:14,149 - __main__ - DEBUG - Finding ATM put for DIA...
2025-03-24 20:42:14,149 - __main__ - DEBUG - ATM put for DIA: strike=425.0
2025-03-24 20:42:14,149 - __main__ - DEBUG - Calculating volume data for DIA...
2025-03-24 20:42:14,150 - __main__ - DEBUG - Volume data for DIA: calls=2018, puts=5446
2025-03-24 20:42:14,150 - __main__ - INFO - Successfully processed expiration 2025-04-17 for DIA
2025-03-24 20:42:14,150 - __main__ - INFO - Step 5: Generating analysis for DIA...
2025-03-24 20:42:14,150 - __main__ - DEBUG - Calling get_stock_analysis_prompt for DIA with args: stock_analysis_data, market_context
2025-03-24 20:42:27,021 - __main__ - INFO - Market alignment for DIA: contrary
2025-03-24 20:42:27,021 - __main__ - INFO - Creating stock analysis result for DIA...
2025-03-24 20:42:27,022 - __main__ - INFO - Successfully added DIA to stock analyses
2025-03-24 20:42:27,022 - __main__ - INFO - Updating Notion with analysis for DIA...
2025-03-24 20:42:27,022 - __main__ - INFO - Sending Discord notification for DIA...
2025-03-24 20:42:27,023 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2765 chars). Splitting into parts.
2025-03-24 20:42:27,024 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:27,379 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:27,380 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:27,381 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:27,610 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:27,611 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:27,612 - __main__ - INFO - Successfully sent Discord notification for DIA
2025-03-24 20:42:27,612 - __main__ - INFO - Analyzing BND...
2025-03-24 20:42:27,612 - __main__ - INFO - Step 1: Getting stock data for BND...
2025-03-24 20:42:27,613 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:27,613 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:27,613 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:27,614 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:42:27,614 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:27,614 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:27,614 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:27,614 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:27,615 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:42:27,615 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:27,615 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:27,615 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:27,615 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,616 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:27,616 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:27,616 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,616 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:27,686 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 20:42:27,687 - yfinance - DEBUG - response code=200
2025-03-24 20:42:27,688 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:27,688 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:27,689 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:42:27,693 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:27,696 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:27,702 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:27,703 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:27,704 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:27,706 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:27,706 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 20:42:27,706 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:27,706 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:27,707 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:27,707 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:42:27,707 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:27,707 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:27,708 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:27,708 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:27,708 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:42:27,708 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:27,709 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:27,709 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:27,709 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,709 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:27,709 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:27,710 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,710 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:27,790 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2265
2025-03-24 20:42:27,791 - yfinance - DEBUG - response code=200
2025-03-24 20:42:27,792 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:27,792 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:27,793 - yfinance - DEBUG - BND: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:42:27,795 - yfinance - DEBUG - BND: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:42:27,798 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 20:42:27,806 - yfinance - DEBUG - BND: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:42:27,810 - yfinance - DEBUG - BND: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:42:27,811 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:27,811 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:27,814 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:27,814 - yfinance_client - INFO - Downloaded data for BND, shape: (59, 5)
2025-03-24 20:42:27,821 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:42:27,826 - __main__ - INFO - Step 2: Getting options chain data for BND...
2025-03-24 20:42:27,826 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BND
2025-03-24 20:42:27,826 - yfinance - DEBUG - Entering history()
2025-03-24 20:42:27,827 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 20:42:27,827 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:27,827 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:27,828 - yfinance - DEBUG -   Entering get()
2025-03-24 20:42:27,828 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:42:27,828 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 20:42:27,828 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:27,829 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:42:27,829 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:27,829 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,829 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:27,829 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:27,829 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,830 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:42:27,915 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1197
2025-03-24 20:42:27,915 - yfinance - DEBUG - response code=200
2025-03-24 20:42:27,916 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:42:27,916 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:42:27,916 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:42:27,918 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:42:27,920 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:42:27,923 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:42:27,923 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:27,924 - yfinance - DEBUG - Exiting history()
2025-03-24 20:42:27,924 - yfinance_client - INFO - Current price of BND: $73.00
2025-03-24 20:42:27,924 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:27,924 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:27,924 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BND
2025-03-24 20:42:27,925 - yfinance - DEBUG - params=None
2025-03-24 20:42:27,925 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:27,925 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:27,925 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,925 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:27,926 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:27,926 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,926 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:27,991 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BND?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1548
2025-03-24 20:42:27,992 - yfinance - DEBUG - response code=200
2025-03-24 20:42:27,992 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:27,993 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:27,993 - yfinance_client - INFO - Found 4 expiration dates for BND
2025-03-24 20:42:27,994 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:42:27,994 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:27,994 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:27,994 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BND?date=1744848000
2025-03-24 20:42:27,995 - yfinance - DEBUG - params=None
2025-03-24 20:42:27,995 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:27,995 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:27,995 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,995 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:27,995 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:27,996 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:27,996 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:28,108 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BND?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1547
2025-03-24 20:42:28,109 - yfinance - DEBUG - response code=200
2025-03-24 20:42:28,109 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:28,109 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:28,112 - yfinance_client - INFO - Retrieved 6 calls and 2 puts
2025-03-24 20:42:28,119 - yfinance_client - INFO - Successfully fetched 1 option chains for BND
2025-03-24 20:42:28,119 - __main__ - INFO - Step 3: Preparing analysis data for BND...
2025-03-24 20:42:28,119 - __main__ - INFO - Step 4: Processing options data for BND...
2025-03-24 20:42:28,120 - __main__ - INFO - Found 1 expiration dates for BND
2025-03-24 20:42:28,120 - __main__ - INFO - Processing expiration date 2025-04-17 for BND...
2025-03-24 20:42:28,120 - __main__ - DEBUG - ATM calls shape before filtering: (6, 19)
2025-03-24 20:42:28,122 - __main__ - DEBUG - ATM puts shape before filtering: (2, 19)
2025-03-24 20:42:28,122 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:42:28,123 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:42:28,123 - __main__ - DEBUG - Finding ATM call for BND...
2025-03-24 20:42:28,124 - __main__ - DEBUG - ATM call for BND: strike=73.0
2025-03-24 20:42:28,124 - __main__ - DEBUG - Finding ATM put for BND...
2025-03-24 20:42:28,125 - __main__ - DEBUG - ATM put for BND: strike=73.0
2025-03-24 20:42:28,125 - __main__ - DEBUG - Calculating volume data for BND...
2025-03-24 20:42:28,126 - __main__ - DEBUG - Volume data for BND: calls=87, puts=71
2025-03-24 20:42:28,126 - __main__ - INFO - Successfully processed expiration 2025-04-17 for BND
2025-03-24 20:42:28,126 - __main__ - INFO - Step 5: Generating analysis for BND...
2025-03-24 20:42:28,126 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BND with args: stock_analysis_data, market_context
2025-03-24 20:42:40,354 - __main__ - INFO - Market alignment for BND: aligned
2025-03-24 20:42:40,354 - __main__ - INFO - Creating stock analysis result for BND...
2025-03-24 20:42:40,355 - __main__ - INFO - Successfully added BND to stock analyses
2025-03-24 20:42:40,355 - __main__ - INFO - Updating Notion with analysis for BND...
2025-03-24 20:42:40,356 - __main__ - INFO - Sending Discord notification for BND...
2025-03-24 20:42:40,356 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2544 chars). Splitting into parts.
2025-03-24 20:42:40,357 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:40,723 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:40,724 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:40,725 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:41,095 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:41,096 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:41,096 - __main__ - INFO - Successfully sent Discord notification for BND
2025-03-24 20:42:41,096 - __main__ - INFO - Analyzing BTC-USD...
2025-03-24 20:42:41,096 - __main__ - INFO - Step 1: Getting stock data for BTC-USD...
2025-03-24 20:42:41,096 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:41,097 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:41,097 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:41,097 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:42:41,097 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:41,098 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:41,098 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:41,098 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:41,098 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:42:41,098 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:41,099 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:41,099 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:41,099 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,099 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:41,099 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:41,100 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,100 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:41,159 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:41,160 - yfinance - DEBUG - response code=200
2025-03-24 20:42:41,160 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:41,160 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:41,161 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 03:40:00
2025-03-24 20:42:41,165 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:40:00+00:00
2025-03-24 20:42:41,167 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:40:00+00:00
2025-03-24 20:42:41,172 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 03:00:00+00:00
2025-03-24 20:42:41,173 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:41,173 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:41,174 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:41,175 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (100, 5)
2025-03-24 20:42:41,175 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:41,175 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:41,175 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:41,176 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:42:41,176 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:41,176 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:41,176 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:41,177 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:41,177 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:42:41,177 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:41,177 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:41,177 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:41,178 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,178 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:41,178 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:41,178 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,178 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:41,229 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:41,229 - yfinance - DEBUG - response code=200
2025-03-24 20:42:41,230 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:41,230 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:41,231 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2024-12-25 00:00:00 -> 2025-03-25 03:40:00
2025-03-24 20:42:41,232 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2024-12-25 00:00:00+00:00 -> 2025-03-25 03:40:00+00:00
2025-03-24 20:42:41,234 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 20:42:41,237 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 20:42:41,238 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:41,238 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:41,240 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:41,240 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (90, 5)
2025-03-24 20:42:41,246 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (90, 5)
2025-03-24 20:42:41,249 - __main__ - INFO - Step 2: Getting options chain data for BTC-USD...
2025-03-24 20:42:41,249 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BTC-USD
2025-03-24 20:42:41,250 - yfinance - DEBUG - Entering history()
2025-03-24 20:42:41,250 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:42:41,250 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:41,250 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:41,251 - yfinance - DEBUG -   Entering get()
2025-03-24 20:42:41,251 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:42:41,251 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:42:41,251 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:41,252 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:42:41,252 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:41,252 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,252 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:41,252 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:41,253 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,253 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:42:41,307 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1160
2025-03-24 20:42:41,308 - yfinance - DEBUG - response code=200
2025-03-24 20:42:41,308 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:42:41,308 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:42:41,309 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-25 03:40:00 only
2025-03-24 20:42:41,310 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-25 03:40:00+00:00 only
2025-03-24 20:42:41,312 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:42:41,315 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:42:41,316 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:41,316 - yfinance - DEBUG - Exiting history()
2025-03-24 20:42:41,316 - yfinance_client - INFO - Current price of BTC-USD: $86572.39
2025-03-24 20:42:41,316 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:41,317 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:41,317 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BTC-USD
2025-03-24 20:42:41,317 - yfinance - DEBUG - params=None
2025-03-24 20:42:41,317 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:41,317 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:41,317 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,318 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:41,318 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:41,318 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:41,318 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:41,368 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BTC-USD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1012
2025-03-24 20:42:41,369 - yfinance - DEBUG - response code=200
2025-03-24 20:42:41,369 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:41,369 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:41,369 - yfinance_client - WARNING - No options expiration dates found for BTC-USD
2025-03-24 20:42:41,370 - __main__ - WARNING - No options chain data found for BTC-USD
2025-03-24 20:42:41,370 - __main__ - INFO - Step 3: Preparing analysis data for BTC-USD...
2025-03-24 20:42:41,370 - __main__ - INFO - Step 4: Processing options data for BTC-USD...
2025-03-24 20:42:41,370 - __main__ - INFO - Step 5: Generating analysis for BTC-USD...
2025-03-24 20:42:41,370 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BTC-USD with args: stock_analysis_data, market_context
2025-03-24 20:42:54,907 - __main__ - INFO - Market alignment for BTC-USD: **
2025-03-24 20:42:54,908 - __main__ - INFO - Creating stock analysis result for BTC-USD...
2025-03-24 20:42:54,908 - __main__ - INFO - Successfully added BTC-USD to stock analyses
2025-03-24 20:42:54,908 - __main__ - INFO - Updating Notion with analysis for BTC-USD...
2025-03-24 20:42:54,909 - __main__ - INFO - Sending Discord notification for BTC-USD...
2025-03-24 20:42:54,909 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2884 chars). Splitting into parts.
2025-03-24 20:42:54,910 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:55,241 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:55,242 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:55,243 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:42:55,530 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:42:55,531 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:42:55,532 - __main__ - INFO - Successfully sent Discord notification for BTC-USD
2025-03-24 20:42:55,532 - __main__ - INFO - Analyzing NVDA...
2025-03-24 20:42:55,532 - __main__ - INFO - Step 1: Getting stock data for NVDA...
2025-03-24 20:42:55,532 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:55,532 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:55,532 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:55,533 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:42:55,533 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:55,533 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:55,534 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:55,534 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:55,534 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:42:55,534 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:55,534 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:55,534 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:55,534 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,535 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:55,535 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:55,535 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,535 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:55,608 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1695
2025-03-24 20:42:55,609 - yfinance - DEBUG - response code=200
2025-03-24 20:42:55,609 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:55,610 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:55,611 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:42:55,615 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:55,616 - yfinance - DEBUG - NVDA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:55,620 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:42:55,621 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:55,621 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:55,622 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:55,623 - yfinance_client - INFO - Downloaded data for NVDA, shape: (35, 5)
2025-03-24 20:42:55,623 - yfinance - DEBUG - Entering download()
2025-03-24 20:42:55,623 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:42:55,623 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:55,624 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:42:55,624 - yfinance - DEBUG -   Entering history()
2025-03-24 20:42:55,624 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:55,624 - yfinance - DEBUG -    Entering get()
2025-03-24 20:42:55,625 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:42:55,625 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:42:55,625 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:55,625 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:42:55,625 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:55,625 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,626 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:55,626 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:55,626 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,626 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:42:55,684 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2742
2025-03-24 20:42:55,685 - yfinance - DEBUG - response code=200
2025-03-24 20:42:55,686 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:42:55,686 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:42:55,687 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:42:55,688 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:42:55,691 - yfinance - DEBUG - NVDA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:42:55,695 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:42:55,695 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:42:55,696 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:55,697 - yfinance - DEBUG - Exiting download()
2025-03-24 20:42:55,698 - yfinance_client - INFO - Downloaded data for NVDA, shape: (59, 5)
2025-03-24 20:42:55,705 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:42:55,710 - __main__ - INFO - Step 2: Getting options chain data for NVDA...
2025-03-24 20:42:55,711 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for NVDA
2025-03-24 20:42:55,711 - yfinance - DEBUG - Entering history()
2025-03-24 20:42:55,712 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 20:42:55,713 - yfinance - DEBUG -  Entering history()
2025-03-24 20:42:55,713 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:55,713 - yfinance - DEBUG -   Entering get()
2025-03-24 20:42:55,714 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:42:55,714 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 20:42:55,714 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:42:55,714 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:42:55,715 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:55,715 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,715 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:55,715 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:55,716 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,716 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:42:55,780 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1211
2025-03-24 20:42:55,781 - yfinance - DEBUG - response code=200
2025-03-24 20:42:55,781 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:42:55,782 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:42:55,783 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:42:55,784 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:42:55,786 - yfinance - DEBUG - NVDA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:42:55,792 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:42:55,792 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:42:55,792 - yfinance - DEBUG - Exiting history()
2025-03-24 20:42:55,792 - yfinance_client - INFO - Current price of NVDA: $121.41
2025-03-24 20:42:55,793 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:55,793 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:55,793 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA
2025-03-24 20:42:55,793 - yfinance - DEBUG - params=None
2025-03-24 20:42:55,793 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:55,794 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:55,794 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,794 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:55,794 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:55,794 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,794 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:55,872 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:55,887 - yfinance - DEBUG - response code=200
2025-03-24 20:42:55,888 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:55,888 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:55,889 - yfinance_client - INFO - Found 21 expiration dates for NVDA
2025-03-24 20:42:55,890 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:42:55,890 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:55,890 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:55,890 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1743120000
2025-03-24 20:42:55,891 - yfinance - DEBUG - params=None
2025-03-24 20:42:55,891 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:55,891 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:55,891 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,891 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:55,891 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:55,891 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:55,892 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:55,968 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:55,969 - yfinance - DEBUG - response code=200
2025-03-24 20:42:55,970 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:55,970 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:55,974 - yfinance_client - INFO - Retrieved 89 calls and 83 puts
2025-03-24 20:42:56,057 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:42:56,057 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:56,058 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:56,058 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1743724800
2025-03-24 20:42:56,058 - yfinance - DEBUG - params=None
2025-03-24 20:42:56,058 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:56,059 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:56,059 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:56,059 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:56,059 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:56,059 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:56,059 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:56,140 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:56,141 - yfinance - DEBUG - response code=200
2025-03-24 20:42:56,142 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:56,142 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:56,146 - yfinance_client - INFO - Retrieved 80 calls and 73 puts
2025-03-24 20:42:56,219 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:42:56,220 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:56,220 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:56,220 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1744329600
2025-03-24 20:42:56,220 - yfinance - DEBUG - params=None
2025-03-24 20:42:56,221 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:56,221 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:56,221 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:56,221 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:56,221 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:56,221 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:56,223 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:56,311 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:56,312 - yfinance - DEBUG - response code=200
2025-03-24 20:42:56,312 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:56,312 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:56,316 - yfinance_client - INFO - Retrieved 74 calls and 61 puts
2025-03-24 20:42:56,383 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:42:56,383 - yfinance - DEBUG - Entering get()
2025-03-24 20:42:56,383 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:42:56,384 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NVDA?date=1744848000
2025-03-24 20:42:56,384 - yfinance - DEBUG - params=None
2025-03-24 20:42:56,384 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:42:56,385 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:42:56,385 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:42:56,385 - yfinance - DEBUG - reusing cookie
2025-03-24 20:42:56,385 - yfinance - DEBUG - reusing crumb
2025-03-24 20:42:56,385 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:42:56,386 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:42:56,458 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NVDA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:42:56,459 - yfinance - DEBUG - response code=200
2025-03-24 20:42:56,459 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:42:56,459 - yfinance - DEBUG - Exiting get()
2025-03-24 20:42:56,463 - yfinance_client - INFO - Retrieved 49 calls and 47 puts
2025-03-24 20:42:56,510 - yfinance_client - INFO - Successfully fetched 4 option chains for NVDA
2025-03-24 20:42:56,511 - __main__ - INFO - Step 3: Preparing analysis data for NVDA...
2025-03-24 20:42:56,511 - __main__ - INFO - Step 4: Processing options data for NVDA...
2025-03-24 20:42:56,511 - __main__ - INFO - Found 4 expiration dates for NVDA
2025-03-24 20:42:56,512 - __main__ - INFO - Processing expiration date 2025-03-28 for NVDA...
2025-03-24 20:42:56,512 - __main__ - DEBUG - ATM calls shape before filtering: (89, 19)
2025-03-24 20:42:56,513 - __main__ - DEBUG - ATM puts shape before filtering: (83, 19)
2025-03-24 20:42:56,513 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:42:56,514 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:42:56,514 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:42:56,515 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:42:56,515 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:42:56,516 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:42:56,516 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:42:56,516 - __main__ - DEBUG - Volume data for NVDA: calls=850359, puts=487031
2025-03-24 20:42:56,516 - __main__ - INFO - Successfully processed expiration 2025-03-28 for NVDA
2025-03-24 20:42:56,517 - __main__ - INFO - Processing expiration date 2025-04-04 for NVDA...
2025-03-24 20:42:56,517 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:42:56,517 - __main__ - DEBUG - ATM puts shape before filtering: (73, 19)
2025-03-24 20:42:56,518 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:42:56,518 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:42:56,518 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:42:56,520 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:42:56,520 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:42:56,520 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:42:56,521 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:42:56,521 - __main__ - DEBUG - Volume data for NVDA: calls=194451, puts=103108
2025-03-24 20:42:56,521 - __main__ - INFO - Successfully processed expiration 2025-04-04 for NVDA
2025-03-24 20:42:56,522 - __main__ - INFO - Processing expiration date 2025-04-11 for NVDA...
2025-03-24 20:42:56,522 - __main__ - DEBUG - ATM calls shape before filtering: (74, 19)
2025-03-24 20:42:56,522 - __main__ - DEBUG - ATM puts shape before filtering: (61, 19)
2025-03-24 20:42:56,523 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:42:56,523 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:42:56,523 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:42:56,524 - __main__ - DEBUG - ATM call for NVDA: strike=121.0
2025-03-24 20:42:56,524 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:42:56,525 - __main__ - DEBUG - ATM put for NVDA: strike=121.0
2025-03-24 20:42:56,525 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:42:56,526 - __main__ - DEBUG - Volume data for NVDA: calls=61821, puts=57068
2025-03-24 20:42:56,526 - __main__ - INFO - Successfully processed expiration 2025-04-11 for NVDA
2025-03-24 20:42:56,526 - __main__ - INFO - Processing expiration date 2025-04-17 for NVDA...
2025-03-24 20:42:56,526 - __main__ - DEBUG - ATM calls shape before filtering: (49, 19)
2025-03-24 20:42:56,527 - __main__ - DEBUG - ATM puts shape before filtering: (47, 19)
2025-03-24 20:42:56,527 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:42:56,528 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:42:56,528 - __main__ - DEBUG - Finding ATM call for NVDA...
2025-03-24 20:42:56,528 - __main__ - DEBUG - ATM call for NVDA: strike=120.0
2025-03-24 20:42:56,529 - __main__ - DEBUG - Finding ATM put for NVDA...
2025-03-24 20:42:56,529 - __main__ - DEBUG - ATM put for NVDA: strike=120.0
2025-03-24 20:42:56,529 - __main__ - DEBUG - Calculating volume data for NVDA...
2025-03-24 20:42:56,529 - __main__ - DEBUG - Volume data for NVDA: calls=137481, puts=86940
2025-03-24 20:42:56,530 - __main__ - INFO - Successfully processed expiration 2025-04-17 for NVDA
2025-03-24 20:42:56,530 - __main__ - INFO - Step 5: Generating analysis for NVDA...
2025-03-24 20:42:56,530 - __main__ - DEBUG - Calling get_stock_analysis_prompt for NVDA with args: stock_analysis_data, market_context
2025-03-24 20:43:09,636 - __main__ - INFO - Market alignment for NVDA: contrary
2025-03-24 20:43:09,636 - __main__ - INFO - Creating stock analysis result for NVDA...
2025-03-24 20:43:09,636 - __main__ - INFO - Successfully added NVDA to stock analyses
2025-03-24 20:43:09,637 - __main__ - INFO - Updating Notion with analysis for NVDA...
2025-03-24 20:43:09,637 - __main__ - INFO - Sending Discord notification for NVDA...
2025-03-24 20:43:09,637 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2814 chars). Splitting into parts.
2025-03-24 20:43:09,638 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:09,891 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:09,892 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:09,893 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:10,219 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:10,219 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:10,220 - __main__ - INFO - Successfully sent Discord notification for NVDA
2025-03-24 20:43:10,220 - __main__ - INFO - Analyzing TSLA...
2025-03-24 20:43:10,220 - __main__ - INFO - Step 1: Getting stock data for TSLA...
2025-03-24 20:43:10,221 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:10,221 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:10,221 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:10,221 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 20:43:10,222 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:10,222 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:10,222 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:10,222 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:10,222 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 20:43:10,223 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:10,223 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:10,223 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:10,223 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,223 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:10,223 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:10,224 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,224 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:10,306 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1809
2025-03-24 20:43:10,307 - yfinance - DEBUG - response code=200
2025-03-24 20:43:10,307 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:10,307 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:10,308 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:43:10,312 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:10,314 - yfinance - DEBUG - TSLA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:10,318 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:10,318 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:10,319 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:10,320 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:10,321 - yfinance_client - INFO - Downloaded data for TSLA, shape: (35, 5)
2025-03-24 20:43:10,321 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:10,321 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:10,321 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:10,322 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 20:43:10,322 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:10,322 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:10,322 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:10,322 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:10,323 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 20:43:10,323 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:10,323 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:10,323 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:10,323 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,323 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:10,324 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:10,324 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,324 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:10,373 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2304
2025-03-24 20:43:10,374 - yfinance - DEBUG - response code=200
2025-03-24 20:43:10,375 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:10,375 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:10,376 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:43:10,377 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:43:10,379 - yfinance - DEBUG - TSLA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:10,383 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:10,383 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:10,383 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:10,385 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:10,385 - yfinance_client - INFO - Downloaded data for TSLA, shape: (59, 5)
2025-03-24 20:43:10,391 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:43:10,394 - __main__ - INFO - Step 2: Getting options chain data for TSLA...
2025-03-24 20:43:10,394 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for TSLA
2025-03-24 20:43:10,395 - yfinance - DEBUG - Entering history()
2025-03-24 20:43:10,395 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 20:43:10,395 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:10,395 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:10,396 - yfinance - DEBUG -   Entering get()
2025-03-24 20:43:10,396 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:43:10,396 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 20:43:10,396 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:10,396 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:43:10,396 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:10,397 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,397 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:10,397 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:10,397 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,397 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:43:10,450 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1193
2025-03-24 20:43:10,450 - yfinance - DEBUG - response code=200
2025-03-24 20:43:10,451 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:43:10,451 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:43:10,451 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:43:10,452 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:43:10,454 - yfinance - DEBUG - TSLA: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:10,458 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:10,458 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:10,458 - yfinance - DEBUG - Exiting history()
2025-03-24 20:43:10,458 - yfinance_client - INFO - Current price of TSLA: $278.39
2025-03-24 20:43:10,458 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:10,458 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:10,459 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA
2025-03-24 20:43:10,459 - yfinance - DEBUG - params=None
2025-03-24 20:43:10,459 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:10,459 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:10,459 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,460 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:10,460 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:10,460 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,460 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:10,561 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:10,573 - yfinance - DEBUG - response code=200
2025-03-24 20:43:10,573 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:10,573 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:10,575 - yfinance_client - INFO - Found 20 expiration dates for TSLA
2025-03-24 20:43:10,576 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:43:10,576 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:10,576 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:10,576 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1743120000
2025-03-24 20:43:10,577 - yfinance - DEBUG - params=None
2025-03-24 20:43:10,577 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:10,577 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:10,577 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,577 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:10,578 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:10,578 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,578 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:10,676 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:10,679 - yfinance - DEBUG - response code=200
2025-03-24 20:43:10,680 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:10,680 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:10,684 - yfinance_client - INFO - Retrieved 141 calls and 112 puts
2025-03-24 20:43:10,807 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:43:10,807 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:10,807 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:10,808 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1743724800
2025-03-24 20:43:10,808 - yfinance - DEBUG - params=None
2025-03-24 20:43:10,808 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:10,808 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:10,808 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,808 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:10,809 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:10,809 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,809 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:10,886 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:10,889 - yfinance - DEBUG - response code=200
2025-03-24 20:43:10,889 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:10,889 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:10,893 - yfinance_client - INFO - Retrieved 119 calls and 87 puts
2025-03-24 20:43:10,993 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:43:10,993 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:10,993 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:10,994 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1744329600
2025-03-24 20:43:10,994 - yfinance - DEBUG - params=None
2025-03-24 20:43:10,994 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:10,994 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:10,994 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,994 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:10,995 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:10,995 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:10,995 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:11,072 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:11,073 - yfinance - DEBUG - response code=200
2025-03-24 20:43:11,074 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:11,074 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:11,078 - yfinance_client - INFO - Retrieved 92 calls and 69 puts
2025-03-24 20:43:11,158 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:43:11,158 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:11,158 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:11,159 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLA?date=1744848000
2025-03-24 20:43:11,159 - yfinance - DEBUG - params=None
2025-03-24 20:43:11,159 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:11,159 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:11,160 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:11,160 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:11,160 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:11,160 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:11,160 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:11,246 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLA?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:11,270 - yfinance - DEBUG - response code=200
2025-03-24 20:43:11,270 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:11,270 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:11,275 - yfinance_client - INFO - Retrieved 152 calls and 144 puts
2025-03-24 20:43:11,417 - yfinance_client - INFO - Successfully fetched 4 option chains for TSLA
2025-03-24 20:43:11,417 - __main__ - INFO - Step 3: Preparing analysis data for TSLA...
2025-03-24 20:43:11,417 - __main__ - INFO - Step 4: Processing options data for TSLA...
2025-03-24 20:43:11,418 - __main__ - INFO - Found 4 expiration dates for TSLA
2025-03-24 20:43:11,418 - __main__ - INFO - Processing expiration date 2025-03-28 for TSLA...
2025-03-24 20:43:11,418 - __main__ - DEBUG - ATM calls shape before filtering: (141, 19)
2025-03-24 20:43:11,419 - __main__ - DEBUG - ATM puts shape before filtering: (112, 19)
2025-03-24 20:43:11,419 - __main__ - DEBUG - ATM calls shape after filtering: (11, 19)
2025-03-24 20:43:11,420 - __main__ - DEBUG - ATM puts shape after filtering: (11, 19)
2025-03-24 20:43:11,420 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:43:11,421 - __main__ - DEBUG - ATM call for TSLA: strike=277.5
2025-03-24 20:43:11,421 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:43:11,422 - __main__ - DEBUG - ATM put for TSLA: strike=277.5
2025-03-24 20:43:11,422 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:43:11,423 - __main__ - DEBUG - Volume data for TSLA: calls=1129469, puts=889403
2025-03-24 20:43:11,423 - __main__ - INFO - Successfully processed expiration 2025-03-28 for TSLA
2025-03-24 20:43:11,423 - __main__ - INFO - Processing expiration date 2025-04-04 for TSLA...
2025-03-24 20:43:11,424 - __main__ - DEBUG - ATM calls shape before filtering: (119, 19)
2025-03-24 20:43:11,424 - __main__ - DEBUG - ATM puts shape before filtering: (87, 19)
2025-03-24 20:43:11,425 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:43:11,425 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:43:11,425 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:43:11,426 - __main__ - DEBUG - ATM call for TSLA: strike=280.0
2025-03-24 20:43:11,426 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:43:11,427 - __main__ - DEBUG - ATM put for TSLA: strike=280.0
2025-03-24 20:43:11,427 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:43:11,428 - __main__ - DEBUG - Volume data for TSLA: calls=151340, puts=177437
2025-03-24 20:43:11,428 - __main__ - INFO - Successfully processed expiration 2025-04-04 for TSLA
2025-03-24 20:43:11,428 - __main__ - INFO - Processing expiration date 2025-04-11 for TSLA...
2025-03-24 20:43:11,429 - __main__ - DEBUG - ATM calls shape before filtering: (92, 19)
2025-03-24 20:43:11,429 - __main__ - DEBUG - ATM puts shape before filtering: (69, 19)
2025-03-24 20:43:11,429 - __main__ - DEBUG - ATM calls shape after filtering: (6, 19)
2025-03-24 20:43:11,430 - __main__ - DEBUG - ATM puts shape after filtering: (6, 19)
2025-03-24 20:43:11,430 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:43:11,431 - __main__ - DEBUG - ATM call for TSLA: strike=280.0
2025-03-24 20:43:11,431 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:43:11,431 - __main__ - DEBUG - ATM put for TSLA: strike=280.0
2025-03-24 20:43:11,432 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:43:11,432 - __main__ - DEBUG - Volume data for TSLA: calls=47445, puts=40756
2025-03-24 20:43:11,432 - __main__ - INFO - Successfully processed expiration 2025-04-11 for TSLA
2025-03-24 20:43:11,432 - __main__ - INFO - Processing expiration date 2025-04-17 for TSLA...
2025-03-24 20:43:11,433 - __main__ - DEBUG - ATM calls shape before filtering: (152, 19)
2025-03-24 20:43:11,433 - __main__ - DEBUG - ATM puts shape before filtering: (144, 19)
2025-03-24 20:43:11,434 - __main__ - DEBUG - ATM calls shape after filtering: (6, 19)
2025-03-24 20:43:11,434 - __main__ - DEBUG - ATM puts shape after filtering: (6, 19)
2025-03-24 20:43:11,434 - __main__ - DEBUG - Finding ATM call for TSLA...
2025-03-24 20:43:11,435 - __main__ - DEBUG - ATM call for TSLA: strike=280.0
2025-03-24 20:43:11,435 - __main__ - DEBUG - Finding ATM put for TSLA...
2025-03-24 20:43:11,436 - __main__ - DEBUG - ATM put for TSLA: strike=280.0
2025-03-24 20:43:11,436 - __main__ - DEBUG - Calculating volume data for TSLA...
2025-03-24 20:43:11,437 - __main__ - DEBUG - Volume data for TSLA: calls=143763, puts=116410
2025-03-24 20:43:11,437 - __main__ - INFO - Successfully processed expiration 2025-04-17 for TSLA
2025-03-24 20:43:11,437 - __main__ - INFO - Step 5: Generating analysis for TSLA...
2025-03-24 20:43:11,437 - __main__ - DEBUG - Calling get_stock_analysis_prompt for TSLA with args: stock_analysis_data, market_context
2025-03-24 20:43:23,308 - __main__ - INFO - Market alignment for TSLA: contrary
2025-03-24 20:43:23,308 - __main__ - INFO - Creating stock analysis result for TSLA...
2025-03-24 20:43:23,309 - __main__ - INFO - Successfully added TSLA to stock analyses
2025-03-24 20:43:23,309 - __main__ - INFO - Updating Notion with analysis for TSLA...
2025-03-24 20:43:23,309 - __main__ - INFO - Sending Discord notification for TSLA...
2025-03-24 20:43:23,309 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2532 chars). Splitting into parts.
2025-03-24 20:43:23,310 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:23,627 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:23,628 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:23,629 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:23,856 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:23,857 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:23,858 - __main__ - INFO - Successfully sent Discord notification for TSLA
2025-03-24 20:43:23,858 - __main__ - INFO - Analyzing AAPL...
2025-03-24 20:43:23,858 - __main__ - INFO - Step 1: Getting stock data for AAPL...
2025-03-24 20:43:23,858 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:23,858 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:23,858 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:23,859 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 20:43:23,859 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:23,859 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:23,859 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:23,860 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:23,860 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 20:43:23,860 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:23,860 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:23,860 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:23,860 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:23,860 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:23,861 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:23,861 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:23,861 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:23,929 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1691
2025-03-24 20:43:23,930 - yfinance - DEBUG - response code=200
2025-03-24 20:43:23,930 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:23,930 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:23,931 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:43:23,935 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:23,936 - yfinance - DEBUG - AAPL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:23,940 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:23,940 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:23,941 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:23,942 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:23,942 - yfinance_client - INFO - Downloaded data for AAPL, shape: (35, 5)
2025-03-24 20:43:23,943 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:23,943 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:23,943 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:23,943 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 20:43:23,944 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:23,944 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:23,944 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:23,944 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:23,944 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 20:43:23,945 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:23,945 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:23,945 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:23,945 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:23,945 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:23,945 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:23,945 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:23,946 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:24,053 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2421
2025-03-24 20:43:24,054 - yfinance - DEBUG - response code=200
2025-03-24 20:43:24,054 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:24,055 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:24,056 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:43:24,057 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:43:24,060 - yfinance - DEBUG - AAPL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:24,065 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:24,065 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:24,066 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:24,068 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:24,068 - yfinance_client - INFO - Downloaded data for AAPL, shape: (59, 5)
2025-03-24 20:43:24,074 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:43:24,078 - __main__ - INFO - Step 2: Getting options chain data for AAPL...
2025-03-24 20:43:24,078 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for AAPL
2025-03-24 20:43:24,079 - yfinance - DEBUG - Entering history()
2025-03-24 20:43:24,079 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 20:43:24,080 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:24,080 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:24,080 - yfinance - DEBUG -   Entering get()
2025-03-24 20:43:24,081 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:43:24,081 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 20:43:24,081 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:24,081 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:43:24,082 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:24,082 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,082 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:24,082 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:24,082 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,083 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:43:24,180 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1180
2025-03-24 20:43:24,181 - yfinance - DEBUG - response code=200
2025-03-24 20:43:24,181 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:43:24,181 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:43:24,182 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:43:24,183 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:43:24,185 - yfinance - DEBUG - AAPL: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:24,188 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:24,189 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:24,189 - yfinance - DEBUG - Exiting history()
2025-03-24 20:43:24,189 - yfinance_client - INFO - Current price of AAPL: $220.73
2025-03-24 20:43:24,189 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:24,189 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:24,189 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL
2025-03-24 20:43:24,190 - yfinance - DEBUG - params=None
2025-03-24 20:43:24,190 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:24,190 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:24,190 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,190 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:24,190 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:24,191 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,191 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:24,274 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:24,275 - yfinance - DEBUG - response code=200
2025-03-24 20:43:24,275 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:24,275 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:24,276 - yfinance_client - INFO - Found 20 expiration dates for AAPL
2025-03-24 20:43:24,277 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:43:24,277 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:24,277 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:24,277 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1743120000
2025-03-24 20:43:24,278 - yfinance - DEBUG - params=None
2025-03-24 20:43:24,278 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:24,278 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:24,278 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,278 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:24,278 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:24,279 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,279 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:24,350 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:24,351 - yfinance - DEBUG - response code=200
2025-03-24 20:43:24,351 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:24,351 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:24,355 - yfinance_client - INFO - Retrieved 66 calls and 62 puts
2025-03-24 20:43:24,419 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:43:24,420 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:24,420 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:24,420 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1743724800
2025-03-24 20:43:24,421 - yfinance - DEBUG - params=None
2025-03-24 20:43:24,421 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:24,421 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:24,422 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,422 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:24,422 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:24,422 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,422 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:24,507 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:24,508 - yfinance - DEBUG - response code=200
2025-03-24 20:43:24,508 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:24,509 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:24,512 - yfinance_client - INFO - Retrieved 53 calls and 48 puts
2025-03-24 20:43:24,563 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:43:24,564 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:24,564 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:24,564 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1744329600
2025-03-24 20:43:24,565 - yfinance - DEBUG - params=None
2025-03-24 20:43:24,565 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:24,565 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:24,565 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,566 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:24,566 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:24,566 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,566 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:24,640 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:24,640 - yfinance - DEBUG - response code=200
2025-03-24 20:43:24,640 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:24,641 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:24,644 - yfinance_client - INFO - Retrieved 37 calls and 35 puts
2025-03-24 20:43:24,681 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:43:24,681 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:24,682 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:24,682 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AAPL?date=1744848000
2025-03-24 20:43:24,682 - yfinance - DEBUG - params=None
2025-03-24 20:43:24,682 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:24,682 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:24,682 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,683 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:24,683 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:24,683 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:24,683 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:24,763 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AAPL?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:24,764 - yfinance - DEBUG - response code=200
2025-03-24 20:43:24,764 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:24,764 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:24,768 - yfinance_client - INFO - Retrieved 47 calls and 47 puts
2025-03-24 20:43:24,816 - yfinance_client - INFO - Successfully fetched 4 option chains for AAPL
2025-03-24 20:43:24,816 - __main__ - INFO - Step 3: Preparing analysis data for AAPL...
2025-03-24 20:43:24,817 - __main__ - INFO - Step 4: Processing options data for AAPL...
2025-03-24 20:43:24,817 - __main__ - INFO - Found 4 expiration dates for AAPL
2025-03-24 20:43:24,818 - __main__ - INFO - Processing expiration date 2025-03-28 for AAPL...
2025-03-24 20:43:24,818 - __main__ - DEBUG - ATM calls shape before filtering: (66, 19)
2025-03-24 20:43:24,818 - __main__ - DEBUG - ATM puts shape before filtering: (62, 19)
2025-03-24 20:43:24,818 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:43:24,819 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:43:24,819 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:43:24,820 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:43:24,820 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:43:24,821 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:43:24,821 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:43:24,822 - __main__ - DEBUG - Volume data for AAPL: calls=231179, puts=132126
2025-03-24 20:43:24,822 - __main__ - INFO - Successfully processed expiration 2025-03-28 for AAPL
2025-03-24 20:43:24,822 - __main__ - INFO - Processing expiration date 2025-04-04 for AAPL...
2025-03-24 20:43:24,823 - __main__ - DEBUG - ATM calls shape before filtering: (53, 19)
2025-03-24 20:43:24,823 - __main__ - DEBUG - ATM puts shape before filtering: (48, 19)
2025-03-24 20:43:24,823 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:43:24,824 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:43:24,824 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:43:24,825 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:43:24,825 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:43:24,826 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:43:24,826 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:43:24,826 - __main__ - DEBUG - Volume data for AAPL: calls=46199, puts=19351
2025-03-24 20:43:24,827 - __main__ - INFO - Successfully processed expiration 2025-04-04 for AAPL
2025-03-24 20:43:24,827 - __main__ - INFO - Processing expiration date 2025-04-11 for AAPL...
2025-03-24 20:43:24,827 - __main__ - DEBUG - ATM calls shape before filtering: (37, 19)
2025-03-24 20:43:24,827 - __main__ - DEBUG - ATM puts shape before filtering: (35, 19)
2025-03-24 20:43:24,828 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:43:24,828 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:43:24,829 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:43:24,829 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:43:24,829 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:43:24,830 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:43:24,830 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:43:24,831 - __main__ - DEBUG - Volume data for AAPL: calls=7958, puts=17314
2025-03-24 20:43:24,831 - __main__ - INFO - Successfully processed expiration 2025-04-11 for AAPL
2025-03-24 20:43:24,831 - __main__ - INFO - Processing expiration date 2025-04-17 for AAPL...
2025-03-24 20:43:24,832 - __main__ - DEBUG - ATM calls shape before filtering: (47, 19)
2025-03-24 20:43:24,832 - __main__ - DEBUG - ATM puts shape before filtering: (47, 19)
2025-03-24 20:43:24,832 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:43:24,833 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:43:24,833 - __main__ - DEBUG - Finding ATM call for AAPL...
2025-03-24 20:43:24,834 - __main__ - DEBUG - ATM call for AAPL: strike=220.0
2025-03-24 20:43:24,835 - __main__ - DEBUG - Finding ATM put for AAPL...
2025-03-24 20:43:24,837 - __main__ - DEBUG - ATM put for AAPL: strike=220.0
2025-03-24 20:43:24,837 - __main__ - DEBUG - Calculating volume data for AAPL...
2025-03-24 20:43:24,840 - __main__ - DEBUG - Volume data for AAPL: calls=42066, puts=30131
2025-03-24 20:43:24,841 - __main__ - INFO - Successfully processed expiration 2025-04-17 for AAPL
2025-03-24 20:43:24,841 - __main__ - INFO - Step 5: Generating analysis for AAPL...
2025-03-24 20:43:24,842 - __main__ - DEBUG - Calling get_stock_analysis_prompt for AAPL with args: stock_analysis_data, market_context
2025-03-24 20:43:38,947 - __main__ - INFO - Market alignment for AAPL: contrary
2025-03-24 20:43:38,947 - __main__ - INFO - Creating stock analysis result for AAPL...
2025-03-24 20:43:38,948 - __main__ - INFO - Successfully added AAPL to stock analyses
2025-03-24 20:43:38,948 - __main__ - INFO - Updating Notion with analysis for AAPL...
2025-03-24 20:43:38,948 - __main__ - INFO - Sending Discord notification for AAPL...
2025-03-24 20:43:38,949 - discord.discord_client - INFO - Analysis description exceeds Discord limit (3096 chars). Splitting into parts.
2025-03-24 20:43:38,950 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:39,302 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:39,303 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:39,304 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:39,551 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:39,552 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:39,552 - __main__ - INFO - Successfully sent Discord notification for AAPL
2025-03-24 20:43:39,553 - __main__ - INFO - Analyzing GOOGL...
2025-03-24 20:43:39,553 - __main__ - INFO - Step 1: Getting stock data for GOOGL...
2025-03-24 20:43:39,553 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:39,553 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:39,553 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:39,554 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 20:43:39,554 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:39,554 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:39,555 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:39,555 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:39,555 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 20:43:39,555 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:39,555 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:39,555 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:39,555 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,556 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:39,556 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:39,556 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,556 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:39,663 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1657
2025-03-24 20:43:39,664 - yfinance - DEBUG - response code=200
2025-03-24 20:43:39,664 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:39,664 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:39,665 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:43:39,669 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:39,671 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:39,675 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:39,676 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:39,676 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:39,678 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:39,678 - yfinance_client - INFO - Downloaded data for GOOGL, shape: (35, 5)
2025-03-24 20:43:39,678 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:39,678 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:39,678 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:39,679 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 20:43:39,679 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:39,679 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:39,679 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:39,680 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:39,680 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 20:43:39,680 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:39,680 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:39,680 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:39,680 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,681 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:39,681 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:39,681 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,681 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:39,732 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2546
2025-03-24 20:43:39,732 - yfinance - DEBUG - response code=200
2025-03-24 20:43:39,733 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:39,733 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:39,734 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:43:39,735 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:43:39,738 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:39,742 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:39,742 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:39,743 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:39,745 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:39,745 - yfinance_client - INFO - Downloaded data for GOOGL, shape: (59, 5)
2025-03-24 20:43:39,751 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:43:39,754 - __main__ - INFO - Step 2: Getting options chain data for GOOGL...
2025-03-24 20:43:39,754 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for GOOGL
2025-03-24 20:43:39,755 - yfinance - DEBUG - Entering history()
2025-03-24 20:43:39,755 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 20:43:39,755 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:39,755 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:39,756 - yfinance - DEBUG -   Entering get()
2025-03-24 20:43:39,756 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:43:39,756 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 20:43:39,756 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:39,757 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:43:39,757 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:39,757 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,757 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:39,757 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:39,757 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,758 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:43:39,805 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1202
2025-03-24 20:43:39,805 - yfinance - DEBUG - response code=200
2025-03-24 20:43:39,806 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:43:39,806 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:43:39,806 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:43:39,807 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:43:39,809 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:39,813 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:39,813 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:39,813 - yfinance - DEBUG - Exiting history()
2025-03-24 20:43:39,813 - yfinance_client - INFO - Current price of GOOGL: $167.68
2025-03-24 20:43:39,814 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:39,814 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:39,814 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL
2025-03-24 20:43:39,814 - yfinance - DEBUG - params=None
2025-03-24 20:43:39,814 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:39,814 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:39,815 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,815 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:39,815 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:39,815 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,815 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:39,895 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:39,896 - yfinance - DEBUG - response code=200
2025-03-24 20:43:39,897 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:39,897 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:39,897 - yfinance_client - INFO - Found 20 expiration dates for GOOGL
2025-03-24 20:43:39,898 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:43:39,898 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:39,898 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:39,899 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1743120000
2025-03-24 20:43:39,899 - yfinance - DEBUG - params=None
2025-03-24 20:43:39,899 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:39,899 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:39,899 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,899 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:39,899 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:39,900 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:39,900 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:39,978 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:39,978 - yfinance - DEBUG - response code=200
2025-03-24 20:43:39,979 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:39,979 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:39,982 - yfinance_client - INFO - Retrieved 51 calls and 44 puts
2025-03-24 20:43:40,030 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:43:40,031 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:40,031 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:40,031 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1743724800
2025-03-24 20:43:40,032 - yfinance - DEBUG - params=None
2025-03-24 20:43:40,032 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:40,032 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:40,032 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:40,032 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:40,033 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:40,033 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:40,033 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:40,132 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:40,132 - yfinance - DEBUG - response code=200
2025-03-24 20:43:40,133 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:40,133 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:40,136 - yfinance_client - INFO - Retrieved 38 calls and 34 puts
2025-03-24 20:43:40,174 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:43:40,174 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:40,174 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:40,174 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1744329600
2025-03-24 20:43:40,175 - yfinance - DEBUG - params=None
2025-03-24 20:43:40,175 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:40,175 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:40,175 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:40,175 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:40,175 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:40,176 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:40,176 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:40,238 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:40,239 - yfinance - DEBUG - response code=200
2025-03-24 20:43:40,239 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:40,239 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:40,242 - yfinance_client - INFO - Retrieved 23 calls and 24 puts
2025-03-24 20:43:40,268 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:43:40,269 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:40,269 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:40,269 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/GOOGL?date=1744848000
2025-03-24 20:43:40,269 - yfinance - DEBUG - params=None
2025-03-24 20:43:40,270 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:40,270 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:40,270 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:40,270 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:40,270 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:40,270 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:40,271 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:40,356 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/GOOGL?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:40,357 - yfinance - DEBUG - response code=200
2025-03-24 20:43:40,357 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:40,357 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:40,362 - yfinance_client - INFO - Retrieved 51 calls and 44 puts
2025-03-24 20:43:40,410 - yfinance_client - INFO - Successfully fetched 4 option chains for GOOGL
2025-03-24 20:43:40,410 - __main__ - INFO - Step 3: Preparing analysis data for GOOGL...
2025-03-24 20:43:40,410 - __main__ - INFO - Step 4: Processing options data for GOOGL...
2025-03-24 20:43:40,411 - __main__ - INFO - Found 4 expiration dates for GOOGL
2025-03-24 20:43:40,411 - __main__ - INFO - Processing expiration date 2025-03-28 for GOOGL...
2025-03-24 20:43:40,412 - __main__ - DEBUG - ATM calls shape before filtering: (51, 19)
2025-03-24 20:43:40,412 - __main__ - DEBUG - ATM puts shape before filtering: (44, 19)
2025-03-24 20:43:40,413 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:43:40,413 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:43:40,413 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:43:40,414 - __main__ - DEBUG - ATM call for GOOGL: strike=167.5
2025-03-24 20:43:40,414 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:43:40,415 - __main__ - DEBUG - ATM put for GOOGL: strike=167.5
2025-03-24 20:43:40,415 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:43:40,416 - __main__ - DEBUG - Volume data for GOOGL: calls=51230, puts=21646
2025-03-24 20:43:40,416 - __main__ - INFO - Successfully processed expiration 2025-03-28 for GOOGL
2025-03-24 20:43:40,416 - __main__ - INFO - Processing expiration date 2025-04-04 for GOOGL...
2025-03-24 20:43:40,417 - __main__ - DEBUG - ATM calls shape before filtering: (38, 19)
2025-03-24 20:43:40,417 - __main__ - DEBUG - ATM puts shape before filtering: (34, 19)
2025-03-24 20:43:40,417 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:43:40,418 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:43:40,418 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:43:40,419 - __main__ - DEBUG - ATM call for GOOGL: strike=167.5
2025-03-24 20:43:40,419 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:43:40,420 - __main__ - DEBUG - ATM put for GOOGL: strike=167.5
2025-03-24 20:43:40,420 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:43:40,421 - __main__ - DEBUG - Volume data for GOOGL: calls=12789, puts=6325
2025-03-24 20:43:40,421 - __main__ - INFO - Successfully processed expiration 2025-04-04 for GOOGL
2025-03-24 20:43:40,421 - __main__ - INFO - Processing expiration date 2025-04-11 for GOOGL...
2025-03-24 20:43:40,422 - __main__ - DEBUG - ATM calls shape before filtering: (23, 19)
2025-03-24 20:43:40,422 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:43:40,422 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:43:40,423 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:43:40,423 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:43:40,424 - __main__ - DEBUG - ATM call for GOOGL: strike=170.0
2025-03-24 20:43:40,424 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:43:40,424 - __main__ - DEBUG - ATM put for GOOGL: strike=170.0
2025-03-24 20:43:40,424 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:43:40,425 - __main__ - DEBUG - Volume data for GOOGL: calls=3484, puts=6714
2025-03-24 20:43:40,425 - __main__ - INFO - Successfully processed expiration 2025-04-11 for GOOGL
2025-03-24 20:43:40,425 - __main__ - INFO - Processing expiration date 2025-04-17 for GOOGL...
2025-03-24 20:43:40,426 - __main__ - DEBUG - ATM calls shape before filtering: (51, 19)
2025-03-24 20:43:40,426 - __main__ - DEBUG - ATM puts shape before filtering: (44, 19)
2025-03-24 20:43:40,427 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:43:40,427 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:43:40,427 - __main__ - DEBUG - Finding ATM call for GOOGL...
2025-03-24 20:43:40,428 - __main__ - DEBUG - ATM call for GOOGL: strike=170.0
2025-03-24 20:43:40,428 - __main__ - DEBUG - Finding ATM put for GOOGL...
2025-03-24 20:43:40,429 - __main__ - DEBUG - ATM put for GOOGL: strike=170.0
2025-03-24 20:43:40,429 - __main__ - DEBUG - Calculating volume data for GOOGL...
2025-03-24 20:43:40,429 - __main__ - DEBUG - Volume data for GOOGL: calls=22499, puts=10322
2025-03-24 20:43:40,430 - __main__ - INFO - Successfully processed expiration 2025-04-17 for GOOGL
2025-03-24 20:43:40,430 - __main__ - INFO - Step 5: Generating analysis for GOOGL...
2025-03-24 20:43:40,430 - __main__ - DEBUG - Calling get_stock_analysis_prompt for GOOGL with args: stock_analysis_data, market_context
2025-03-24 20:43:53,044 - __main__ - INFO - Market alignment for GOOGL: **
2025-03-24 20:43:53,044 - __main__ - INFO - Creating stock analysis result for GOOGL...
2025-03-24 20:43:53,045 - __main__ - INFO - Successfully added GOOGL to stock analyses
2025-03-24 20:43:53,045 - __main__ - INFO - Updating Notion with analysis for GOOGL...
2025-03-24 20:43:53,045 - __main__ - INFO - Sending Discord notification for GOOGL...
2025-03-24 20:43:53,045 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2720 chars). Splitting into parts.
2025-03-24 20:43:53,046 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:53,529 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:53,531 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:53,532 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:43:53,842 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:43:53,843 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:43:53,844 - __main__ - INFO - Successfully sent Discord notification for GOOGL
2025-03-24 20:43:53,844 - __main__ - INFO - Analyzing AMZN...
2025-03-24 20:43:53,844 - __main__ - INFO - Step 1: Getting stock data for AMZN...
2025-03-24 20:43:53,844 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:53,845 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:53,845 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:53,845 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 20:43:53,846 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:53,846 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:53,846 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:53,846 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:53,846 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 20:43:53,847 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:53,847 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:53,847 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:53,847 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:53,847 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:53,847 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:53,848 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:53,848 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:53,917 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1692
2025-03-24 20:43:53,918 - yfinance - DEBUG - response code=200
2025-03-24 20:43:53,918 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:53,918 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:53,919 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:43:53,924 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:53,926 - yfinance - DEBUG - AMZN: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:53,930 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:43:53,930 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:53,930 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:53,932 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:53,932 - yfinance_client - INFO - Downloaded data for AMZN, shape: (35, 5)
2025-03-24 20:43:53,933 - yfinance - DEBUG - Entering download()
2025-03-24 20:43:53,933 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:43:53,933 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:53,933 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 20:43:53,934 - yfinance - DEBUG -   Entering history()
2025-03-24 20:43:53,934 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:53,934 - yfinance - DEBUG -    Entering get()
2025-03-24 20:43:53,934 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:43:53,935 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 20:43:53,935 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:53,935 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:43:53,935 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:53,935 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:53,935 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:53,936 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:53,936 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:53,936 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:43:53,992 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2138
2025-03-24 20:43:53,993 - yfinance - DEBUG - response code=200
2025-03-24 20:43:53,994 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:43:53,994 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:43:53,996 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:43:53,997 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:43:54,000 - yfinance - DEBUG - AMZN: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:54,006 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:43:54,007 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:43:54,007 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:54,010 - yfinance - DEBUG - Exiting download()
2025-03-24 20:43:54,010 - yfinance_client - INFO - Downloaded data for AMZN, shape: (59, 5)
2025-03-24 20:43:54,019 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:43:54,024 - __main__ - INFO - Step 2: Getting options chain data for AMZN...
2025-03-24 20:43:54,024 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for AMZN
2025-03-24 20:43:54,025 - yfinance - DEBUG - Entering history()
2025-03-24 20:43:54,025 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 20:43:54,026 - yfinance - DEBUG -  Entering history()
2025-03-24 20:43:54,026 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:54,026 - yfinance - DEBUG -   Entering get()
2025-03-24 20:43:54,026 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:43:54,027 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 20:43:54,027 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:43:54,027 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:43:54,027 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:54,027 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,028 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:54,028 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:54,028 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,028 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:43:54,086 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1192
2025-03-24 20:43:54,087 - yfinance - DEBUG - response code=200
2025-03-24 20:43:54,087 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:43:54,088 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:43:54,088 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:43:54,089 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:43:54,091 - yfinance - DEBUG - AMZN: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:54,095 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:43:54,095 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:43:54,096 - yfinance - DEBUG - Exiting history()
2025-03-24 20:43:54,096 - yfinance_client - INFO - Current price of AMZN: $203.26
2025-03-24 20:43:54,096 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:54,096 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:54,097 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN
2025-03-24 20:43:54,097 - yfinance - DEBUG - params=None
2025-03-24 20:43:54,097 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:54,097 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:54,097 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,098 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:54,098 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:54,098 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,098 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:54,175 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:54,176 - yfinance - DEBUG - response code=200
2025-03-24 20:43:54,176 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:54,176 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:54,177 - yfinance_client - INFO - Found 20 expiration dates for AMZN
2025-03-24 20:43:54,178 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:43:54,178 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:54,178 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:54,178 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1743120000
2025-03-24 20:43:54,179 - yfinance - DEBUG - params=None
2025-03-24 20:43:54,179 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:54,179 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:54,179 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,179 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:54,179 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:54,179 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,180 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:54,251 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:54,252 - yfinance - DEBUG - response code=200
2025-03-24 20:43:54,253 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:54,253 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:54,256 - yfinance_client - INFO - Retrieved 54 calls and 48 puts
2025-03-24 20:43:54,307 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:43:54,308 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:54,308 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:54,308 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1743724800
2025-03-24 20:43:54,309 - yfinance - DEBUG - params=None
2025-03-24 20:43:54,310 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:54,310 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:54,310 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,310 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:54,310 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:54,310 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,311 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:54,380 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:54,383 - yfinance - DEBUG - response code=200
2025-03-24 20:43:54,383 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:54,383 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:54,387 - yfinance_client - INFO - Retrieved 47 calls and 43 puts
2025-03-24 20:43:54,433 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:43:54,433 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:54,433 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:54,434 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1744329600
2025-03-24 20:43:54,434 - yfinance - DEBUG - params=None
2025-03-24 20:43:54,434 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:54,434 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:54,435 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,435 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:54,435 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:54,435 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,435 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:54,500 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:54,500 - yfinance - DEBUG - response code=200
2025-03-24 20:43:54,501 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:54,501 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:54,504 - yfinance_client - INFO - Retrieved 32 calls and 33 puts
2025-03-24 20:43:54,538 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:43:54,539 - yfinance - DEBUG - Entering get()
2025-03-24 20:43:54,539 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:43:54,539 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMZN?date=1744848000
2025-03-24 20:43:54,539 - yfinance - DEBUG - params=None
2025-03-24 20:43:54,539 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:43:54,539 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:43:54,540 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,540 - yfinance - DEBUG - reusing cookie
2025-03-24 20:43:54,540 - yfinance - DEBUG - reusing crumb
2025-03-24 20:43:54,540 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:43:54,540 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:43:54,619 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMZN?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:43:54,620 - yfinance - DEBUG - response code=200
2025-03-24 20:43:54,620 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:43:54,620 - yfinance - DEBUG - Exiting get()
2025-03-24 20:43:54,623 - yfinance_client - INFO - Retrieved 56 calls and 52 puts
2025-03-24 20:43:54,678 - yfinance_client - INFO - Successfully fetched 4 option chains for AMZN
2025-03-24 20:43:54,679 - __main__ - INFO - Step 3: Preparing analysis data for AMZN...
2025-03-24 20:43:54,679 - __main__ - INFO - Step 4: Processing options data for AMZN...
2025-03-24 20:43:54,679 - __main__ - INFO - Found 4 expiration dates for AMZN
2025-03-24 20:43:54,680 - __main__ - INFO - Processing expiration date 2025-03-28 for AMZN...
2025-03-24 20:43:54,680 - __main__ - DEBUG - ATM calls shape before filtering: (54, 19)
2025-03-24 20:43:54,681 - __main__ - DEBUG - ATM puts shape before filtering: (48, 19)
2025-03-24 20:43:54,681 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:43:54,682 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:43:54,682 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:43:54,683 - __main__ - DEBUG - ATM call for AMZN: strike=202.5
2025-03-24 20:43:54,683 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:43:54,683 - __main__ - DEBUG - ATM put for AMZN: strike=202.5
2025-03-24 20:43:54,684 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:43:54,684 - __main__ - DEBUG - Volume data for AMZN: calls=213108, puts=65725
2025-03-24 20:43:54,685 - __main__ - INFO - Successfully processed expiration 2025-03-28 for AMZN
2025-03-24 20:43:54,685 - __main__ - INFO - Processing expiration date 2025-04-04 for AMZN...
2025-03-24 20:43:54,685 - __main__ - DEBUG - ATM calls shape before filtering: (47, 19)
2025-03-24 20:43:54,686 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:43:54,686 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:43:54,687 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:43:54,687 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:43:54,688 - __main__ - DEBUG - ATM call for AMZN: strike=202.5
2025-03-24 20:43:54,688 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:43:54,688 - __main__ - DEBUG - ATM put for AMZN: strike=202.5
2025-03-24 20:43:54,689 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:43:54,689 - __main__ - DEBUG - Volume data for AMZN: calls=46300, puts=22134
2025-03-24 20:43:54,689 - __main__ - INFO - Successfully processed expiration 2025-04-04 for AMZN
2025-03-24 20:43:54,690 - __main__ - INFO - Processing expiration date 2025-04-11 for AMZN...
2025-03-24 20:43:54,690 - __main__ - DEBUG - ATM calls shape before filtering: (32, 19)
2025-03-24 20:43:54,690 - __main__ - DEBUG - ATM puts shape before filtering: (33, 19)
2025-03-24 20:43:54,691 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:43:54,691 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:43:54,691 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:43:54,692 - __main__ - DEBUG - ATM call for AMZN: strike=205.0
2025-03-24 20:43:54,692 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:43:54,693 - __main__ - DEBUG - ATM put for AMZN: strike=205.0
2025-03-24 20:43:54,693 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:43:54,694 - __main__ - DEBUG - Volume data for AMZN: calls=13865, puts=6552
2025-03-24 20:43:54,694 - __main__ - INFO - Successfully processed expiration 2025-04-11 for AMZN
2025-03-24 20:43:54,694 - __main__ - INFO - Processing expiration date 2025-04-17 for AMZN...
2025-03-24 20:43:54,695 - __main__ - DEBUG - ATM calls shape before filtering: (56, 19)
2025-03-24 20:43:54,695 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:43:54,695 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:43:54,696 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:43:54,696 - __main__ - DEBUG - Finding ATM call for AMZN...
2025-03-24 20:43:54,697 - __main__ - DEBUG - ATM call for AMZN: strike=205.0
2025-03-24 20:43:54,697 - __main__ - DEBUG - Finding ATM put for AMZN...
2025-03-24 20:43:54,698 - __main__ - DEBUG - ATM put for AMZN: strike=205.0
2025-03-24 20:43:54,698 - __main__ - DEBUG - Calculating volume data for AMZN...
2025-03-24 20:43:54,698 - __main__ - DEBUG - Volume data for AMZN: calls=64971, puts=28737
2025-03-24 20:43:54,698 - __main__ - INFO - Successfully processed expiration 2025-04-17 for AMZN
2025-03-24 20:43:54,699 - __main__ - INFO - Step 5: Generating analysis for AMZN...
2025-03-24 20:43:54,699 - __main__ - DEBUG - Calling get_stock_analysis_prompt for AMZN with args: stock_analysis_data, market_context
2025-03-24 20:44:07,582 - __main__ - INFO - Market alignment for AMZN: contrary
2025-03-24 20:44:07,582 - __main__ - INFO - Creating stock analysis result for AMZN...
2025-03-24 20:44:07,582 - __main__ - INFO - Successfully added AMZN to stock analyses
2025-03-24 20:44:07,582 - __main__ - INFO - Updating Notion with analysis for AMZN...
2025-03-24 20:44:07,583 - __main__ - INFO - Sending Discord notification for AMZN...
2025-03-24 20:44:07,583 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2881 chars). Splitting into parts.
2025-03-24 20:44:07,584 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:08,018 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:08,019 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:08,020 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:08,287 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:08,288 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:08,289 - __main__ - INFO - Successfully sent Discord notification for AMZN
2025-03-24 20:44:08,289 - __main__ - INFO - Analyzing MSTR...
2025-03-24 20:44:08,289 - __main__ - INFO - Step 1: Getting stock data for MSTR...
2025-03-24 20:44:08,289 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:08,289 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:08,290 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:08,290 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 20:44:08,290 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:08,291 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:08,291 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:08,291 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:08,291 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 20:44:08,291 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:08,291 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:08,292 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:08,292 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,292 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:08,292 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:08,292 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,292 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:08,371 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1737
2025-03-24 20:44:08,372 - yfinance - DEBUG - response code=200
2025-03-24 20:44:08,372 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:08,372 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:08,373 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:44:08,378 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:08,380 - yfinance - DEBUG - MSTR: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:08,384 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:08,384 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:08,384 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:08,386 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:08,386 - yfinance_client - INFO - Downloaded data for MSTR, shape: (35, 5)
2025-03-24 20:44:08,387 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:08,387 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:08,387 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:08,387 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 20:44:08,388 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:08,388 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:08,388 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:08,388 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:08,388 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 20:44:08,388 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:08,389 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:08,389 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:08,389 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,389 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:08,389 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:08,389 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,390 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:08,438 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2205
2025-03-24 20:44:08,438 - yfinance - DEBUG - response code=200
2025-03-24 20:44:08,439 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:08,439 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:08,440 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:44:08,441 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:44:08,443 - yfinance - DEBUG - MSTR: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:08,447 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:08,447 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:08,447 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:08,449 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:08,449 - yfinance_client - INFO - Downloaded data for MSTR, shape: (59, 5)
2025-03-24 20:44:08,455 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:44:08,458 - __main__ - INFO - Step 2: Getting options chain data for MSTR...
2025-03-24 20:44:08,458 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for MSTR
2025-03-24 20:44:08,459 - yfinance - DEBUG - Entering history()
2025-03-24 20:44:08,459 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 20:44:08,460 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:08,460 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:08,460 - yfinance - DEBUG -   Entering get()
2025-03-24 20:44:08,460 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:44:08,460 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 20:44:08,461 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:08,461 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:44:08,461 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:08,461 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,461 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:08,462 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:08,462 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,462 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:44:08,509 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1218
2025-03-24 20:44:08,509 - yfinance - DEBUG - response code=200
2025-03-24 20:44:08,510 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:44:08,510 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:44:08,511 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:44:08,511 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:44:08,513 - yfinance - DEBUG - MSTR: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:08,517 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:08,517 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:08,517 - yfinance - DEBUG - Exiting history()
2025-03-24 20:44:08,518 - yfinance_client - INFO - Current price of MSTR: $335.72
2025-03-24 20:44:08,518 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:08,518 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:08,518 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR
2025-03-24 20:44:08,518 - yfinance - DEBUG - params=None
2025-03-24 20:44:08,519 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:08,519 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:08,519 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,519 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:08,519 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:08,519 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,520 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:08,610 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:08,633 - yfinance - DEBUG - response code=200
2025-03-24 20:44:08,634 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:08,634 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:08,636 - yfinance_client - INFO - Found 19 expiration dates for MSTR
2025-03-24 20:44:08,636 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:44:08,637 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:08,637 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:08,637 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1743120000
2025-03-24 20:44:08,637 - yfinance - DEBUG - params=None
2025-03-24 20:44:08,637 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:08,637 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:08,638 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,638 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:08,638 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:08,638 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,638 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:08,729 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:08,752 - yfinance - DEBUG - response code=200
2025-03-24 20:44:08,753 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:08,753 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:08,758 - yfinance_client - INFO - Retrieved 147 calls and 132 puts
2025-03-24 20:44:08,889 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:44:08,890 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:08,890 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:08,890 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1743724800
2025-03-24 20:44:08,890 - yfinance - DEBUG - params=None
2025-03-24 20:44:08,891 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:08,891 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:08,891 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,891 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:08,891 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:08,892 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:08,892 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:08,974 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:08,977 - yfinance - DEBUG - response code=200
2025-03-24 20:44:08,977 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:08,977 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:08,981 - yfinance_client - INFO - Retrieved 120 calls and 99 puts
2025-03-24 20:44:09,087 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:44:09,087 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:09,087 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:09,087 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1744329600
2025-03-24 20:44:09,087 - yfinance - DEBUG - params=None
2025-03-24 20:44:09,088 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:09,088 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:09,088 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:09,088 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:09,088 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:09,088 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:09,089 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:09,161 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:09,163 - yfinance - DEBUG - response code=200
2025-03-24 20:44:09,163 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:09,163 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:09,167 - yfinance_client - INFO - Retrieved 80 calls and 67 puts
2025-03-24 20:44:09,239 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:44:09,239 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:09,240 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:09,240 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSTR?date=1744848000
2025-03-24 20:44:09,240 - yfinance - DEBUG - params=None
2025-03-24 20:44:09,240 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:09,241 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:09,241 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:09,242 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:09,242 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:09,242 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:09,242 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:09,332 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSTR?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:09,335 - yfinance - DEBUG - response code=200
2025-03-24 20:44:09,335 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:09,335 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:09,340 - yfinance_client - INFO - Retrieved 150 calls and 147 puts
2025-03-24 20:44:09,481 - yfinance_client - INFO - Successfully fetched 4 option chains for MSTR
2025-03-24 20:44:09,482 - __main__ - INFO - Step 3: Preparing analysis data for MSTR...
2025-03-24 20:44:09,482 - __main__ - INFO - Step 4: Processing options data for MSTR...
2025-03-24 20:44:09,482 - __main__ - INFO - Found 4 expiration dates for MSTR
2025-03-24 20:44:09,482 - __main__ - INFO - Processing expiration date 2025-03-28 for MSTR...
2025-03-24 20:44:09,483 - __main__ - DEBUG - ATM calls shape before filtering: (147, 19)
2025-03-24 20:44:09,483 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 20:44:09,483 - __main__ - DEBUG - ATM calls shape after filtering: (14, 19)
2025-03-24 20:44:09,484 - __main__ - DEBUG - ATM puts shape after filtering: (14, 19)
2025-03-24 20:44:09,484 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:44:09,485 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:44:09,485 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:44:09,486 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:44:09,486 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:44:09,487 - __main__ - DEBUG - Volume data for MSTR: calls=397515, puts=125987
2025-03-24 20:44:09,487 - __main__ - INFO - Successfully processed expiration 2025-03-28 for MSTR
2025-03-24 20:44:09,487 - __main__ - INFO - Processing expiration date 2025-04-04 for MSTR...
2025-03-24 20:44:09,487 - __main__ - DEBUG - ATM calls shape before filtering: (120, 19)
2025-03-24 20:44:09,488 - __main__ - DEBUG - ATM puts shape before filtering: (99, 19)
2025-03-24 20:44:09,488 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:44:09,489 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:44:09,489 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:44:09,490 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:44:09,490 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:44:09,491 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:44:09,491 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:44:09,491 - __main__ - DEBUG - Volume data for MSTR: calls=41937, puts=28580
2025-03-24 20:44:09,491 - __main__ - INFO - Successfully processed expiration 2025-04-04 for MSTR
2025-03-24 20:44:09,492 - __main__ - INFO - Processing expiration date 2025-04-11 for MSTR...
2025-03-24 20:44:09,492 - __main__ - DEBUG - ATM calls shape before filtering: (80, 19)
2025-03-24 20:44:09,492 - __main__ - DEBUG - ATM puts shape before filtering: (67, 19)
2025-03-24 20:44:09,493 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:44:09,493 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:44:09,493 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:44:09,494 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:44:09,494 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:44:09,495 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:44:09,495 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:44:09,496 - __main__ - DEBUG - Volume data for MSTR: calls=10284, puts=4740
2025-03-24 20:44:09,496 - __main__ - INFO - Successfully processed expiration 2025-04-11 for MSTR
2025-03-24 20:44:09,496 - __main__ - INFO - Processing expiration date 2025-04-17 for MSTR...
2025-03-24 20:44:09,497 - __main__ - DEBUG - ATM calls shape before filtering: (150, 19)
2025-03-24 20:44:09,497 - __main__ - DEBUG - ATM puts shape before filtering: (147, 19)
2025-03-24 20:44:09,497 - __main__ - DEBUG - ATM calls shape after filtering: (7, 19)
2025-03-24 20:44:09,498 - __main__ - DEBUG - ATM puts shape after filtering: (7, 19)
2025-03-24 20:44:09,498 - __main__ - DEBUG - Finding ATM call for MSTR...
2025-03-24 20:44:09,499 - __main__ - DEBUG - ATM call for MSTR: strike=335.0
2025-03-24 20:44:09,499 - __main__ - DEBUG - Finding ATM put for MSTR...
2025-03-24 20:44:09,500 - __main__ - DEBUG - ATM put for MSTR: strike=335.0
2025-03-24 20:44:09,500 - __main__ - DEBUG - Calculating volume data for MSTR...
2025-03-24 20:44:09,500 - __main__ - DEBUG - Volume data for MSTR: calls=34874, puts=20197
2025-03-24 20:44:09,500 - __main__ - INFO - Successfully processed expiration 2025-04-17 for MSTR
2025-03-24 20:44:09,501 - __main__ - INFO - Step 5: Generating analysis for MSTR...
2025-03-24 20:44:09,501 - __main__ - DEBUG - Calling get_stock_analysis_prompt for MSTR with args: stock_analysis_data, market_context
2025-03-24 20:44:21,960 - __main__ - INFO - Market alignment for MSTR: aligned
2025-03-24 20:44:21,960 - __main__ - INFO - Creating stock analysis result for MSTR...
2025-03-24 20:44:21,960 - __main__ - INFO - Successfully added MSTR to stock analyses
2025-03-24 20:44:21,961 - __main__ - INFO - Updating Notion with analysis for MSTR...
2025-03-24 20:44:21,961 - __main__ - INFO - Sending Discord notification for MSTR...
2025-03-24 20:44:21,961 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2720 chars). Splitting into parts.
2025-03-24 20:44:21,962 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:22,231 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:22,232 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:22,233 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:22,473 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:22,474 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:22,474 - __main__ - INFO - Successfully sent Discord notification for MSTR
2025-03-24 20:44:22,475 - __main__ - INFO - Analyzing MSFT...
2025-03-24 20:44:22,475 - __main__ - INFO - Step 1: Getting stock data for MSFT...
2025-03-24 20:44:22,475 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:22,475 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:22,475 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:22,476 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 20:44:22,476 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:22,476 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:22,476 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:22,477 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:22,477 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 20:44:22,477 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:22,477 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:22,477 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:22,478 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,478 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:22,478 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:22,478 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,478 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:22,551 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1663
2025-03-24 20:44:22,552 - yfinance - DEBUG - response code=200
2025-03-24 20:44:22,552 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:22,552 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:22,553 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:44:22,557 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:22,559 - yfinance - DEBUG - MSFT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:22,563 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:22,563 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:22,564 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:22,566 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:22,566 - yfinance_client - INFO - Downloaded data for MSFT, shape: (35, 5)
2025-03-24 20:44:22,566 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:22,566 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:22,567 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:22,567 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 20:44:22,568 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:22,568 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:22,568 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:22,568 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:22,568 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 20:44:22,569 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:22,569 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:22,569 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:22,569 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,569 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:22,570 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:22,570 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,570 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:22,648 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2457
2025-03-24 20:44:22,649 - yfinance - DEBUG - response code=200
2025-03-24 20:44:22,649 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:22,650 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:22,650 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:44:22,651 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:44:22,655 - yfinance - DEBUG - MSFT: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:22,659 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:22,660 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:22,660 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:22,663 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:22,663 - yfinance_client - INFO - Downloaded data for MSFT, shape: (59, 5)
2025-03-24 20:44:22,672 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:44:22,676 - __main__ - INFO - Step 2: Getting options chain data for MSFT...
2025-03-24 20:44:22,676 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for MSFT
2025-03-24 20:44:22,677 - yfinance - DEBUG - Entering history()
2025-03-24 20:44:22,677 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 20:44:22,678 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:22,678 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:22,678 - yfinance - DEBUG -   Entering get()
2025-03-24 20:44:22,679 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:44:22,679 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 20:44:22,679 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:22,679 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:44:22,680 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:22,680 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,680 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:22,680 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:22,681 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,681 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:44:22,763 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1211
2025-03-24 20:44:22,763 - yfinance - DEBUG - response code=200
2025-03-24 20:44:22,764 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:44:22,764 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:44:22,765 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:44:22,767 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:44:22,770 - yfinance - DEBUG - MSFT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:22,776 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:22,776 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:22,776 - yfinance - DEBUG - Exiting history()
2025-03-24 20:44:22,777 - yfinance_client - INFO - Current price of MSFT: $393.08
2025-03-24 20:44:22,777 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:22,777 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:22,777 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT
2025-03-24 20:44:22,778 - yfinance - DEBUG - params=None
2025-03-24 20:44:22,778 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:22,778 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:22,778 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,778 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:22,779 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:22,779 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,779 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:22,863 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:22,880 - yfinance - DEBUG - response code=200
2025-03-24 20:44:22,880 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:22,881 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:22,882 - yfinance_client - INFO - Found 20 expiration dates for MSFT
2025-03-24 20:44:22,882 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:44:22,883 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:22,883 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:22,883 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1743120000
2025-03-24 20:44:22,884 - yfinance - DEBUG - params=None
2025-03-24 20:44:22,884 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:22,884 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:22,884 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,884 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:22,884 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:22,885 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:22,886 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:22,979 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:22,980 - yfinance - DEBUG - response code=200
2025-03-24 20:44:22,981 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:22,981 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:22,985 - yfinance_client - INFO - Retrieved 74 calls and 68 puts
2025-03-24 20:44:23,054 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:44:23,054 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:23,055 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:23,055 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1743724800
2025-03-24 20:44:23,055 - yfinance - DEBUG - params=None
2025-03-24 20:44:23,055 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:23,055 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:23,055 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:23,055 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:23,056 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:23,056 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:23,056 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:23,147 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:23,148 - yfinance - DEBUG - response code=200
2025-03-24 20:44:23,148 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:23,148 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:23,152 - yfinance_client - INFO - Retrieved 55 calls and 52 puts
2025-03-24 20:44:23,207 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:44:23,207 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:23,208 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:23,208 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1744329600
2025-03-24 20:44:23,208 - yfinance - DEBUG - params=None
2025-03-24 20:44:23,208 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:23,208 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:23,209 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:23,209 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:23,209 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:23,209 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:23,209 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:23,279 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:23,280 - yfinance - DEBUG - response code=200
2025-03-24 20:44:23,280 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:23,281 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:23,284 - yfinance_client - INFO - Retrieved 42 calls and 43 puts
2025-03-24 20:44:23,327 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:44:23,328 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:23,328 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:23,328 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MSFT?date=1744848000
2025-03-24 20:44:23,329 - yfinance - DEBUG - params=None
2025-03-24 20:44:23,329 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:23,329 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:23,329 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:23,329 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:23,330 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:23,330 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:23,330 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:23,405 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MSFT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:23,406 - yfinance - DEBUG - response code=200
2025-03-24 20:44:23,407 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:23,407 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:23,410 - yfinance_client - INFO - Retrieved 84 calls and 73 puts
2025-03-24 20:44:23,490 - yfinance_client - INFO - Successfully fetched 4 option chains for MSFT
2025-03-24 20:44:23,490 - __main__ - INFO - Step 3: Preparing analysis data for MSFT...
2025-03-24 20:44:23,491 - __main__ - INFO - Step 4: Processing options data for MSFT...
2025-03-24 20:44:23,491 - __main__ - INFO - Found 4 expiration dates for MSFT
2025-03-24 20:44:23,491 - __main__ - INFO - Processing expiration date 2025-03-28 for MSFT...
2025-03-24 20:44:23,492 - __main__ - DEBUG - ATM calls shape before filtering: (74, 19)
2025-03-24 20:44:23,492 - __main__ - DEBUG - ATM puts shape before filtering: (68, 19)
2025-03-24 20:44:23,492 - __main__ - DEBUG - ATM calls shape after filtering: (16, 19)
2025-03-24 20:44:23,493 - __main__ - DEBUG - ATM puts shape after filtering: (16, 19)
2025-03-24 20:44:23,493 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:44:23,494 - __main__ - DEBUG - ATM call for MSFT: strike=392.5
2025-03-24 20:44:23,494 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:44:23,495 - __main__ - DEBUG - ATM put for MSFT: strike=392.5
2025-03-24 20:44:23,495 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:44:23,496 - __main__ - DEBUG - Volume data for MSFT: calls=94850, puts=32115
2025-03-24 20:44:23,496 - __main__ - INFO - Successfully processed expiration 2025-03-28 for MSFT
2025-03-24 20:44:23,496 - __main__ - INFO - Processing expiration date 2025-04-04 for MSFT...
2025-03-24 20:44:23,497 - __main__ - DEBUG - ATM calls shape before filtering: (55, 19)
2025-03-24 20:44:23,497 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:44:23,497 - __main__ - DEBUG - ATM calls shape after filtering: (15, 19)
2025-03-24 20:44:23,498 - __main__ - DEBUG - ATM puts shape after filtering: (15, 19)
2025-03-24 20:44:23,498 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:44:23,499 - __main__ - DEBUG - ATM call for MSFT: strike=392.5
2025-03-24 20:44:23,499 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:44:23,500 - __main__ - DEBUG - ATM put for MSFT: strike=392.5
2025-03-24 20:44:23,500 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:44:23,500 - __main__ - DEBUG - Volume data for MSFT: calls=17426, puts=7902
2025-03-24 20:44:23,500 - __main__ - INFO - Successfully processed expiration 2025-04-04 for MSFT
2025-03-24 20:44:23,501 - __main__ - INFO - Processing expiration date 2025-04-11 for MSFT...
2025-03-24 20:44:23,501 - __main__ - DEBUG - ATM calls shape before filtering: (42, 19)
2025-03-24 20:44:23,501 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:44:23,502 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:44:23,502 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:44:23,502 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:44:23,503 - __main__ - DEBUG - ATM call for MSFT: strike=395.0
2025-03-24 20:44:23,503 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:44:23,504 - __main__ - DEBUG - ATM put for MSFT: strike=395.0
2025-03-24 20:44:23,504 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:44:23,504 - __main__ - DEBUG - Volume data for MSFT: calls=11844, puts=2280
2025-03-24 20:44:23,505 - __main__ - INFO - Successfully processed expiration 2025-04-11 for MSFT
2025-03-24 20:44:23,505 - __main__ - INFO - Processing expiration date 2025-04-17 for MSFT...
2025-03-24 20:44:23,505 - __main__ - DEBUG - ATM calls shape before filtering: (84, 19)
2025-03-24 20:44:23,505 - __main__ - DEBUG - ATM puts shape before filtering: (73, 19)
2025-03-24 20:44:23,506 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:44:23,506 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:44:23,507 - __main__ - DEBUG - Finding ATM call for MSFT...
2025-03-24 20:44:23,507 - __main__ - DEBUG - ATM call for MSFT: strike=395.0
2025-03-24 20:44:23,507 - __main__ - DEBUG - Finding ATM put for MSFT...
2025-03-24 20:44:23,508 - __main__ - DEBUG - ATM put for MSFT: strike=395.0
2025-03-24 20:44:23,508 - __main__ - DEBUG - Calculating volume data for MSFT...
2025-03-24 20:44:23,509 - __main__ - DEBUG - Volume data for MSFT: calls=30034, puts=23975
2025-03-24 20:44:23,509 - __main__ - INFO - Successfully processed expiration 2025-04-17 for MSFT
2025-03-24 20:44:23,509 - __main__ - INFO - Step 5: Generating analysis for MSFT...
2025-03-24 20:44:23,509 - __main__ - DEBUG - Calling get_stock_analysis_prompt for MSFT with args: stock_analysis_data, market_context
2025-03-24 20:44:35,636 - __main__ - INFO - Market alignment for MSFT: contrary
2025-03-24 20:44:35,637 - __main__ - INFO - Creating stock analysis result for MSFT...
2025-03-24 20:44:35,637 - __main__ - INFO - Successfully added MSFT to stock analyses
2025-03-24 20:44:35,637 - __main__ - INFO - Updating Notion with analysis for MSFT...
2025-03-24 20:44:35,638 - __main__ - INFO - Sending Discord notification for MSFT...
2025-03-24 20:44:35,638 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2656 chars). Splitting into parts.
2025-03-24 20:44:35,639 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:35,904 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:35,905 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:35,906 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:36,190 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:36,191 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:36,191 - __main__ - INFO - Successfully sent Discord notification for MSFT
2025-03-24 20:44:36,192 - __main__ - INFO - Analyzing META...
2025-03-24 20:44:36,192 - __main__ - INFO - Step 1: Getting stock data for META...
2025-03-24 20:44:36,192 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:36,192 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:36,192 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:36,193 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 20:44:36,193 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:36,193 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:36,193 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:36,194 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:36,194 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 20:44:36,194 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:36,194 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:36,194 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:36,194 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,195 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:36,195 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:36,195 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,195 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:36,259 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1720
2025-03-24 20:44:36,260 - yfinance - DEBUG - response code=200
2025-03-24 20:44:36,260 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:36,260 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:36,261 - yfinance - DEBUG - META: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:44:36,266 - yfinance - DEBUG - META: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:36,268 - yfinance - DEBUG - META: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:36,272 - yfinance - DEBUG - META: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:36,272 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:36,272 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:36,274 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:36,274 - yfinance_client - INFO - Downloaded data for META, shape: (35, 5)
2025-03-24 20:44:36,274 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:36,275 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:36,275 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:36,275 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 20:44:36,276 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:36,276 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:36,276 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:36,276 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:36,276 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 20:44:36,277 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:36,277 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:36,277 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:36,277 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,277 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:36,278 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:36,278 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,278 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:36,333 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2616
2025-03-24 20:44:36,334 - yfinance - DEBUG - response code=200
2025-03-24 20:44:36,334 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:36,335 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:36,336 - yfinance - DEBUG - META: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:44:36,336 - yfinance - DEBUG - META: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:44:36,340 - yfinance - DEBUG - META: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:36,344 - yfinance - DEBUG - META: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:36,344 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:36,344 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:36,346 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:36,346 - yfinance_client - INFO - Downloaded data for META, shape: (59, 5)
2025-03-24 20:44:36,352 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:44:36,355 - __main__ - INFO - Step 2: Getting options chain data for META...
2025-03-24 20:44:36,355 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for META
2025-03-24 20:44:36,355 - yfinance - DEBUG - Entering history()
2025-03-24 20:44:36,356 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 20:44:36,356 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:36,356 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:36,357 - yfinance - DEBUG -   Entering get()
2025-03-24 20:44:36,357 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:44:36,357 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 20:44:36,357 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:36,357 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:44:36,358 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:36,358 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,358 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:36,358 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:36,358 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,358 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:44:36,412 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1207
2025-03-24 20:44:36,413 - yfinance - DEBUG - response code=200
2025-03-24 20:44:36,413 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:44:36,414 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:44:36,414 - yfinance - DEBUG - META: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:44:36,415 - yfinance - DEBUG - META: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:44:36,417 - yfinance - DEBUG - META: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:36,421 - yfinance - DEBUG - META: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:36,421 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:36,422 - yfinance - DEBUG - Exiting history()
2025-03-24 20:44:36,422 - yfinance_client - INFO - Current price of META: $618.85
2025-03-24 20:44:36,422 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:36,423 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:36,423 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META
2025-03-24 20:44:36,423 - yfinance - DEBUG - params=None
2025-03-24 20:44:36,423 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:36,424 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:36,424 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,424 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:36,424 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:36,424 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,424 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:36,522 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:36,534 - yfinance - DEBUG - response code=200
2025-03-24 20:44:36,534 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:36,534 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:36,536 - yfinance_client - INFO - Found 19 expiration dates for META
2025-03-24 20:44:36,537 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:44:36,537 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:36,537 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:36,537 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1743120000
2025-03-24 20:44:36,537 - yfinance - DEBUG - params=None
2025-03-24 20:44:36,538 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:36,538 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:36,538 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,538 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:36,538 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:36,539 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,539 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:36,636 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:36,640 - yfinance - DEBUG - response code=200
2025-03-24 20:44:36,641 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:36,641 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:36,645 - yfinance_client - INFO - Retrieved 143 calls and 138 puts
2025-03-24 20:44:36,778 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:44:36,779 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:36,779 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:36,779 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1743724800
2025-03-24 20:44:36,780 - yfinance - DEBUG - params=None
2025-03-24 20:44:36,780 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:36,780 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:36,780 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,780 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:36,780 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:36,780 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,781 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:36,863 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:36,865 - yfinance - DEBUG - response code=200
2025-03-24 20:44:36,866 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:36,866 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:36,870 - yfinance_client - INFO - Retrieved 101 calls and 100 puts
2025-03-24 20:44:36,967 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:44:36,967 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:36,968 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:36,968 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1744329600
2025-03-24 20:44:36,968 - yfinance - DEBUG - params=None
2025-03-24 20:44:36,968 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:36,968 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:36,969 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,969 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:36,969 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:36,969 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:36,969 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:37,061 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:37,063 - yfinance - DEBUG - response code=200
2025-03-24 20:44:37,063 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:37,063 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:37,067 - yfinance_client - INFO - Retrieved 84 calls and 85 puts
2025-03-24 20:44:37,150 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:44:37,150 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:37,151 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:37,151 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/META?date=1744848000
2025-03-24 20:44:37,151 - yfinance - DEBUG - params=None
2025-03-24 20:44:37,151 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:37,151 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:37,152 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:37,152 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:37,152 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:37,152 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:37,152 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:37,244 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/META?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:37,249 - yfinance - DEBUG - response code=200
2025-03-24 20:44:37,249 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:37,250 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:37,254 - yfinance_client - INFO - Retrieved 167 calls and 143 puts
2025-03-24 20:44:37,402 - yfinance_client - INFO - Successfully fetched 4 option chains for META
2025-03-24 20:44:37,402 - __main__ - INFO - Step 3: Preparing analysis data for META...
2025-03-24 20:44:37,403 - __main__ - INFO - Step 4: Processing options data for META...
2025-03-24 20:44:37,403 - __main__ - INFO - Found 4 expiration dates for META
2025-03-24 20:44:37,403 - __main__ - INFO - Processing expiration date 2025-03-28 for META...
2025-03-24 20:44:37,404 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 20:44:37,404 - __main__ - DEBUG - ATM puts shape before filtering: (138, 19)
2025-03-24 20:44:37,404 - __main__ - DEBUG - ATM calls shape after filtering: (24, 19)
2025-03-24 20:44:37,405 - __main__ - DEBUG - ATM puts shape after filtering: (24, 19)
2025-03-24 20:44:37,405 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:44:37,406 - __main__ - DEBUG - ATM call for META: strike=617.5
2025-03-24 20:44:37,406 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:44:37,407 - __main__ - DEBUG - ATM put for META: strike=617.5
2025-03-24 20:44:37,407 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:44:37,408 - __main__ - DEBUG - Volume data for META: calls=168297, puts=87887
2025-03-24 20:44:37,408 - __main__ - INFO - Successfully processed expiration 2025-03-28 for META
2025-03-24 20:44:37,408 - __main__ - INFO - Processing expiration date 2025-04-04 for META...
2025-03-24 20:44:37,408 - __main__ - DEBUG - ATM calls shape before filtering: (101, 19)
2025-03-24 20:44:37,408 - __main__ - DEBUG - ATM puts shape before filtering: (100, 19)
2025-03-24 20:44:37,409 - __main__ - DEBUG - ATM calls shape after filtering: (20, 19)
2025-03-24 20:44:37,411 - __main__ - DEBUG - ATM puts shape after filtering: (20, 19)
2025-03-24 20:44:37,411 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:44:37,411 - __main__ - DEBUG - ATM call for META: strike=617.5
2025-03-24 20:44:37,411 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:44:37,413 - __main__ - DEBUG - ATM put for META: strike=617.5
2025-03-24 20:44:37,413 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:44:37,413 - __main__ - DEBUG - Volume data for META: calls=26182, puts=14274
2025-03-24 20:44:37,413 - __main__ - INFO - Successfully processed expiration 2025-04-04 for META
2025-03-24 20:44:37,413 - __main__ - INFO - Processing expiration date 2025-04-11 for META...
2025-03-24 20:44:37,413 - __main__ - DEBUG - ATM calls shape before filtering: (84, 19)
2025-03-24 20:44:37,413 - __main__ - DEBUG - ATM puts shape before filtering: (85, 19)
2025-03-24 20:44:37,415 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:44:37,415 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:44:37,415 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:44:37,415 - __main__ - DEBUG - ATM call for META: strike=620.0
2025-03-24 20:44:37,415 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:44:37,416 - __main__ - DEBUG - ATM put for META: strike=620.0
2025-03-24 20:44:37,416 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:44:37,418 - __main__ - DEBUG - Volume data for META: calls=7759, puts=6104
2025-03-24 20:44:37,418 - __main__ - INFO - Successfully processed expiration 2025-04-11 for META
2025-03-24 20:44:37,418 - __main__ - INFO - Processing expiration date 2025-04-17 for META...
2025-03-24 20:44:37,419 - __main__ - DEBUG - ATM calls shape before filtering: (167, 19)
2025-03-24 20:44:37,419 - __main__ - DEBUG - ATM puts shape before filtering: (143, 19)
2025-03-24 20:44:37,419 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:44:37,420 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:44:37,420 - __main__ - DEBUG - Finding ATM call for META...
2025-03-24 20:44:37,420 - __main__ - DEBUG - ATM call for META: strike=620.0
2025-03-24 20:44:37,420 - __main__ - DEBUG - Finding ATM put for META...
2025-03-24 20:44:37,421 - __main__ - DEBUG - ATM put for META: strike=620.0
2025-03-24 20:44:37,421 - __main__ - DEBUG - Calculating volume data for META...
2025-03-24 20:44:37,421 - __main__ - DEBUG - Volume data for META: calls=34328, puts=15734
2025-03-24 20:44:37,422 - __main__ - INFO - Successfully processed expiration 2025-04-17 for META
2025-03-24 20:44:37,422 - __main__ - INFO - Step 5: Generating analysis for META...
2025-03-24 20:44:37,422 - __main__ - DEBUG - Calling get_stock_analysis_prompt for META with args: stock_analysis_data, market_context
2025-03-24 20:44:48,096 - __main__ - INFO - Market alignment for META: **
2025-03-24 20:44:48,096 - __main__ - INFO - Creating stock analysis result for META...
2025-03-24 20:44:48,097 - __main__ - INFO - Successfully added META to stock analyses
2025-03-24 20:44:48,097 - __main__ - INFO - Updating Notion with analysis for META...
2025-03-24 20:44:48,097 - __main__ - INFO - Sending Discord notification for META...
2025-03-24 20:44:48,097 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2390 chars). Splitting into parts.
2025-03-24 20:44:48,098 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:48,391 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:48,393 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:48,394 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:44:48,689 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:44:48,690 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:44:48,690 - __main__ - INFO - Successfully sent Discord notification for META
2025-03-24 20:44:48,691 - __main__ - INFO - Analyzing TSM...
2025-03-24 20:44:48,691 - __main__ - INFO - Step 1: Getting stock data for TSM...
2025-03-24 20:44:48,691 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:48,691 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:48,692 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:48,692 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 20:44:48,692 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:48,692 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:48,693 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:48,693 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:48,693 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 20:44:48,693 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:48,693 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:48,693 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:48,694 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,694 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:48,694 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:48,694 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,694 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:48,768 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1641
2025-03-24 20:44:48,769 - yfinance - DEBUG - response code=200
2025-03-24 20:44:48,769 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:48,769 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:48,770 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:44:48,775 - yfinance - DEBUG - TSM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:48,778 - yfinance - DEBUG - TSM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:48,781 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:44:48,782 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:48,782 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:48,784 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:48,784 - yfinance_client - INFO - Downloaded data for TSM, shape: (35, 5)
2025-03-24 20:44:48,784 - yfinance - DEBUG - Entering download()
2025-03-24 20:44:48,785 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:44:48,785 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:48,785 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 20:44:48,785 - yfinance - DEBUG -   Entering history()
2025-03-24 20:44:48,786 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:48,786 - yfinance - DEBUG -    Entering get()
2025-03-24 20:44:48,786 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:44:48,786 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 20:44:48,787 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:48,787 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:44:48,787 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:48,787 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,787 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:48,787 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:48,788 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,788 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:44:48,872 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2676
2025-03-24 20:44:48,873 - yfinance - DEBUG - response code=200
2025-03-24 20:44:48,873 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:44:48,874 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:44:48,875 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:44:48,876 - yfinance - DEBUG - TSM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:44:48,880 - yfinance - DEBUG - TSM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:48,885 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:44:48,885 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:44:48,886 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:48,888 - yfinance - DEBUG - Exiting download()
2025-03-24 20:44:48,888 - yfinance_client - INFO - Downloaded data for TSM, shape: (59, 5)
2025-03-24 20:44:48,896 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:44:48,900 - __main__ - INFO - Step 2: Getting options chain data for TSM...
2025-03-24 20:44:48,900 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for TSM
2025-03-24 20:44:48,901 - yfinance - DEBUG - Entering history()
2025-03-24 20:44:48,901 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 20:44:48,901 - yfinance - DEBUG -  Entering history()
2025-03-24 20:44:48,902 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:48,902 - yfinance - DEBUG -   Entering get()
2025-03-24 20:44:48,902 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:44:48,902 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 20:44:48,903 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:44:48,903 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:44:48,903 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:48,903 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,904 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:48,904 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:48,904 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,904 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:44:48,982 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1251
2025-03-24 20:44:48,983 - yfinance - DEBUG - response code=200
2025-03-24 20:44:48,983 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:44:48,983 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:44:48,984 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:44:48,985 - yfinance - DEBUG - TSM: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:44:48,987 - yfinance - DEBUG - TSM: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:48,991 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:44:48,991 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:44:48,991 - yfinance - DEBUG - Exiting history()
2025-03-24 20:44:48,991 - yfinance_client - INFO - Current price of TSM: $181.16
2025-03-24 20:44:48,992 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:48,992 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:48,992 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM
2025-03-24 20:44:48,992 - yfinance - DEBUG - params=None
2025-03-24 20:44:48,992 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:48,992 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:48,993 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,993 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:48,993 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:48,993 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:48,993 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:49,064 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:49,065 - yfinance - DEBUG - response code=200
2025-03-24 20:44:49,065 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:49,066 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:49,066 - yfinance_client - INFO - Found 19 expiration dates for TSM
2025-03-24 20:44:49,067 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:44:49,067 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:49,068 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:49,068 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1743120000
2025-03-24 20:44:49,068 - yfinance - DEBUG - params=None
2025-03-24 20:44:49,068 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:49,068 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:49,068 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,069 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:49,069 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:49,069 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,069 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:49,142 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:49,143 - yfinance - DEBUG - response code=200
2025-03-24 20:44:49,144 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:49,144 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:49,147 - yfinance_client - INFO - Retrieved 47 calls and 46 puts
2025-03-24 20:44:49,194 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:44:49,195 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:49,195 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:49,196 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1743724800
2025-03-24 20:44:49,196 - yfinance - DEBUG - params=None
2025-03-24 20:44:49,197 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:49,197 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:49,197 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,197 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:49,197 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:49,197 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,197 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:49,274 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:49,275 - yfinance - DEBUG - response code=200
2025-03-24 20:44:49,275 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:49,275 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:49,278 - yfinance_client - INFO - Retrieved 42 calls and 37 puts
2025-03-24 20:44:49,319 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:44:49,320 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:49,320 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:49,321 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1744329600
2025-03-24 20:44:49,321 - yfinance - DEBUG - params=None
2025-03-24 20:44:49,321 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:49,321 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:49,321 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,321 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:49,321 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:49,322 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,322 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:49,389 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:49,390 - yfinance - DEBUG - response code=200
2025-03-24 20:44:49,390 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:49,390 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:49,393 - yfinance_client - INFO - Retrieved 30 calls and 27 puts
2025-03-24 20:44:49,425 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:44:49,425 - yfinance - DEBUG - Entering get()
2025-03-24 20:44:49,425 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:44:49,425 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSM?date=1744848000
2025-03-24 20:44:49,425 - yfinance - DEBUG - params=None
2025-03-24 20:44:49,426 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:44:49,426 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:44:49,426 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,426 - yfinance - DEBUG - reusing cookie
2025-03-24 20:44:49,426 - yfinance - DEBUG - reusing crumb
2025-03-24 20:44:49,426 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:44:49,426 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:44:49,494 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSM?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:44:49,495 - yfinance - DEBUG - response code=200
2025-03-24 20:44:49,495 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:44:49,496 - yfinance - DEBUG - Exiting get()
2025-03-24 20:44:49,498 - yfinance_client - INFO - Retrieved 38 calls and 36 puts
2025-03-24 20:44:49,537 - yfinance_client - INFO - Successfully fetched 4 option chains for TSM
2025-03-24 20:44:49,538 - __main__ - INFO - Step 3: Preparing analysis data for TSM...
2025-03-24 20:44:49,538 - __main__ - INFO - Step 4: Processing options data for TSM...
2025-03-24 20:44:49,538 - __main__ - INFO - Found 4 expiration dates for TSM
2025-03-24 20:44:49,538 - __main__ - INFO - Processing expiration date 2025-03-28 for TSM...
2025-03-24 20:44:49,539 - __main__ - DEBUG - ATM calls shape before filtering: (47, 19)
2025-03-24 20:44:49,539 - __main__ - DEBUG - ATM puts shape before filtering: (46, 19)
2025-03-24 20:44:49,540 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:44:49,540 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:44:49,540 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:44:49,541 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:44:49,541 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:44:49,542 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:44:49,542 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:44:49,543 - __main__ - DEBUG - Volume data for TSM: calls=24126, puts=15611
2025-03-24 20:44:49,543 - __main__ - INFO - Successfully processed expiration 2025-03-28 for TSM
2025-03-24 20:44:49,543 - __main__ - INFO - Processing expiration date 2025-04-04 for TSM...
2025-03-24 20:44:49,544 - __main__ - DEBUG - ATM calls shape before filtering: (42, 19)
2025-03-24 20:44:49,544 - __main__ - DEBUG - ATM puts shape before filtering: (37, 19)
2025-03-24 20:44:49,544 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:44:49,545 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:44:49,545 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:44:49,546 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:44:49,546 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:44:49,547 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:44:49,547 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:44:49,548 - __main__ - DEBUG - Volume data for TSM: calls=6346, puts=8542
2025-03-24 20:44:49,548 - __main__ - INFO - Successfully processed expiration 2025-04-04 for TSM
2025-03-24 20:44:49,548 - __main__ - INFO - Processing expiration date 2025-04-11 for TSM...
2025-03-24 20:44:49,549 - __main__ - DEBUG - ATM calls shape before filtering: (30, 19)
2025-03-24 20:44:49,549 - __main__ - DEBUG - ATM puts shape before filtering: (27, 19)
2025-03-24 20:44:49,549 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:44:49,550 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:44:49,550 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:44:49,551 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:44:49,551 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:44:49,552 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:44:49,552 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:44:49,553 - __main__ - DEBUG - Volume data for TSM: calls=1910, puts=2080
2025-03-24 20:44:49,553 - __main__ - INFO - Successfully processed expiration 2025-04-11 for TSM
2025-03-24 20:44:49,553 - __main__ - INFO - Processing expiration date 2025-04-17 for TSM...
2025-03-24 20:44:49,554 - __main__ - DEBUG - ATM calls shape before filtering: (38, 19)
2025-03-24 20:44:49,554 - __main__ - DEBUG - ATM puts shape before filtering: (36, 19)
2025-03-24 20:44:49,554 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:44:49,555 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:44:49,555 - __main__ - DEBUG - Finding ATM call for TSM...
2025-03-24 20:44:49,556 - __main__ - DEBUG - ATM call for TSM: strike=180.0
2025-03-24 20:44:49,556 - __main__ - DEBUG - Finding ATM put for TSM...
2025-03-24 20:44:49,557 - __main__ - DEBUG - ATM put for TSM: strike=180.0
2025-03-24 20:44:49,557 - __main__ - DEBUG - Calculating volume data for TSM...
2025-03-24 20:44:49,557 - __main__ - DEBUG - Volume data for TSM: calls=9842, puts=5486
2025-03-24 20:44:49,558 - __main__ - INFO - Successfully processed expiration 2025-04-17 for TSM
2025-03-24 20:44:49,558 - __main__ - INFO - Step 5: Generating analysis for TSM...
2025-03-24 20:44:49,558 - __main__ - DEBUG - Calling get_stock_analysis_prompt for TSM with args: stock_analysis_data, market_context
2025-03-24 20:45:03,187 - __main__ - INFO - Market alignment for TSM: **
the stock trend is bearish, and the spy trend is bullish. therefore, the stock is operating in a contrary fashion to the broader market.
2025-03-24 20:45:03,188 - __main__ - INFO - Creating stock analysis result for TSM...
2025-03-24 20:45:03,188 - __main__ - INFO - Successfully added TSM to stock analyses
2025-03-24 20:45:03,188 - __main__ - INFO - Updating Notion with analysis for TSM...
2025-03-24 20:45:03,188 - __main__ - INFO - Sending Discord notification for TSM...
2025-03-24 20:45:03,188 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2683 chars). Splitting into parts.
2025-03-24 20:45:03,189 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:03,533 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:03,534 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:03,536 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:03,797 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:03,798 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:03,799 - __main__ - INFO - Successfully sent Discord notification for TSM
2025-03-24 20:45:03,799 - __main__ - INFO - Analyzing LLY...
2025-03-24 20:45:03,799 - __main__ - INFO - Step 1: Getting stock data for LLY...
2025-03-24 20:45:03,799 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:03,799 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:03,800 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:03,800 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 20:45:03,800 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:03,801 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:03,801 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:03,802 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:03,802 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 20:45:03,802 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:03,802 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:03,802 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:03,802 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:03,802 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:03,802 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:03,802 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:03,803 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:03,866 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1654
2025-03-24 20:45:03,867 - yfinance - DEBUG - response code=200
2025-03-24 20:45:03,867 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:03,868 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:03,869 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:45:03,873 - yfinance - DEBUG - LLY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:03,874 - yfinance - DEBUG - LLY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:03,878 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:03,878 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:03,879 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:03,880 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:03,880 - yfinance_client - INFO - Downloaded data for LLY, shape: (35, 5)
2025-03-24 20:45:03,881 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:03,881 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:03,881 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:03,881 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 20:45:03,882 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:03,882 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:03,882 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:03,882 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:03,883 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 20:45:03,883 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:03,883 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:03,883 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:03,883 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:03,884 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:03,884 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:03,884 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:03,884 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:04,124 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2450
2025-03-24 20:45:04,124 - yfinance - DEBUG - response code=200
2025-03-24 20:45:04,125 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:04,125 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:04,126 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:45:04,127 - yfinance - DEBUG - LLY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:45:04,130 - yfinance - DEBUG - LLY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:04,134 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:04,134 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:04,134 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:04,136 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:04,136 - yfinance_client - INFO - Downloaded data for LLY, shape: (59, 5)
2025-03-24 20:45:04,142 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:45:04,145 - __main__ - INFO - Step 2: Getting options chain data for LLY...
2025-03-24 20:45:04,145 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for LLY
2025-03-24 20:45:04,145 - yfinance - DEBUG - Entering history()
2025-03-24 20:45:04,146 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 20:45:04,146 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:04,146 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:04,147 - yfinance - DEBUG -   Entering get()
2025-03-24 20:45:04,147 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:45:04,147 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 20:45:04,148 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:04,148 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:45:04,148 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:04,148 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,148 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:04,148 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:04,148 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,148 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:45:04,284 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1200
2025-03-24 20:45:04,285 - yfinance - DEBUG - response code=200
2025-03-24 20:45:04,285 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:45:04,286 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:45:04,287 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:45:04,287 - yfinance - DEBUG - LLY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:45:04,289 - yfinance - DEBUG - LLY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:04,293 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:04,293 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:04,293 - yfinance - DEBUG - Exiting history()
2025-03-24 20:45:04,293 - yfinance_client - INFO - Current price of LLY: $864.90
2025-03-24 20:45:04,294 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:04,294 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:04,294 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY
2025-03-24 20:45:04,294 - yfinance - DEBUG - params=None
2025-03-24 20:45:04,294 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:04,295 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:04,295 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,295 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:04,295 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:04,295 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,295 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:04,377 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:04,390 - yfinance - DEBUG - response code=200
2025-03-24 20:45:04,390 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:04,391 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:04,392 - yfinance_client - INFO - Found 19 expiration dates for LLY
2025-03-24 20:45:04,392 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:45:04,393 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:04,393 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:04,393 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1743120000
2025-03-24 20:45:04,393 - yfinance - DEBUG - params=None
2025-03-24 20:45:04,394 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:04,394 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:04,394 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,394 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:04,394 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:04,394 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,395 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:04,473 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:04,476 - yfinance - DEBUG - response code=200
2025-03-24 20:45:04,477 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:04,477 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:04,481 - yfinance_client - INFO - Retrieved 83 calls and 81 puts
2025-03-24 20:45:04,560 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:45:04,561 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:04,561 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:04,561 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1743724800
2025-03-24 20:45:04,562 - yfinance - DEBUG - params=None
2025-03-24 20:45:04,562 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:04,562 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:04,562 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,562 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:04,563 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:04,563 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,563 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:04,647 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:04,649 - yfinance - DEBUG - response code=200
2025-03-24 20:45:04,650 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:04,650 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:04,656 - yfinance_client - INFO - Retrieved 74 calls and 72 puts
2025-03-24 20:45:04,740 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:45:04,740 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:04,741 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:04,741 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1744329600
2025-03-24 20:45:04,741 - yfinance - DEBUG - params=None
2025-03-24 20:45:04,741 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:04,741 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:04,742 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,742 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:04,742 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:04,742 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,742 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:04,828 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:04,829 - yfinance - DEBUG - response code=200
2025-03-24 20:45:04,830 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:04,830 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:04,833 - yfinance_client - INFO - Retrieved 51 calls and 51 puts
2025-03-24 20:45:04,885 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:45:04,885 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:04,886 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:04,886 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LLY?date=1744848000
2025-03-24 20:45:04,886 - yfinance - DEBUG - params=None
2025-03-24 20:45:04,886 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:04,887 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:04,887 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,887 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:04,887 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:04,887 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:04,887 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:04,968 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LLY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:04,969 - yfinance - DEBUG - response code=200
2025-03-24 20:45:04,970 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:04,970 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:04,974 - yfinance_client - INFO - Retrieved 72 calls and 62 puts
2025-03-24 20:45:05,040 - yfinance_client - INFO - Successfully fetched 4 option chains for LLY
2025-03-24 20:45:05,040 - __main__ - INFO - Step 3: Preparing analysis data for LLY...
2025-03-24 20:45:05,041 - __main__ - INFO - Step 4: Processing options data for LLY...
2025-03-24 20:45:05,041 - __main__ - INFO - Found 4 expiration dates for LLY
2025-03-24 20:45:05,041 - __main__ - INFO - Processing expiration date 2025-03-28 for LLY...
2025-03-24 20:45:05,042 - __main__ - DEBUG - ATM calls shape before filtering: (83, 19)
2025-03-24 20:45:05,043 - __main__ - DEBUG - ATM puts shape before filtering: (81, 19)
2025-03-24 20:45:05,043 - __main__ - DEBUG - ATM calls shape after filtering: (25, 19)
2025-03-24 20:45:05,043 - __main__ - DEBUG - ATM puts shape after filtering: (24, 19)
2025-03-24 20:45:05,044 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:45:05,044 - __main__ - DEBUG - ATM call for LLY: strike=865.0
2025-03-24 20:45:05,045 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:45:05,045 - __main__ - DEBUG - ATM put for LLY: strike=865.0
2025-03-24 20:45:05,046 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:45:05,046 - __main__ - DEBUG - Volume data for LLY: calls=9837, puts=6102
2025-03-24 20:45:05,046 - __main__ - INFO - Successfully processed expiration 2025-03-28 for LLY
2025-03-24 20:45:05,047 - __main__ - INFO - Processing expiration date 2025-04-04 for LLY...
2025-03-24 20:45:05,047 - __main__ - DEBUG - ATM calls shape before filtering: (74, 19)
2025-03-24 20:45:05,047 - __main__ - DEBUG - ATM puts shape before filtering: (72, 19)
2025-03-24 20:45:05,048 - __main__ - DEBUG - ATM calls shape after filtering: (20, 19)
2025-03-24 20:45:05,048 - __main__ - DEBUG - ATM puts shape after filtering: (20, 19)
2025-03-24 20:45:05,049 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:45:05,049 - __main__ - DEBUG - ATM call for LLY: strike=865.0
2025-03-24 20:45:05,050 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:45:05,050 - __main__ - DEBUG - ATM put for LLY: strike=865.0
2025-03-24 20:45:05,051 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:45:05,051 - __main__ - DEBUG - Volume data for LLY: calls=2205, puts=1211
2025-03-24 20:45:05,051 - __main__ - INFO - Successfully processed expiration 2025-04-04 for LLY
2025-03-24 20:45:05,052 - __main__ - INFO - Processing expiration date 2025-04-11 for LLY...
2025-03-24 20:45:05,052 - __main__ - DEBUG - ATM calls shape before filtering: (51, 19)
2025-03-24 20:45:05,052 - __main__ - DEBUG - ATM puts shape before filtering: (51, 19)
2025-03-24 20:45:05,053 - __main__ - DEBUG - ATM calls shape after filtering: (17, 19)
2025-03-24 20:45:05,053 - __main__ - DEBUG - ATM puts shape after filtering: (17, 19)
2025-03-24 20:45:05,054 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:45:05,054 - __main__ - DEBUG - ATM call for LLY: strike=865.0
2025-03-24 20:45:05,055 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:45:05,055 - __main__ - DEBUG - ATM put for LLY: strike=865.0
2025-03-24 20:45:05,055 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:45:05,056 - __main__ - DEBUG - Volume data for LLY: calls=305, puts=321
2025-03-24 20:45:05,056 - __main__ - INFO - Successfully processed expiration 2025-04-11 for LLY
2025-03-24 20:45:05,056 - __main__ - INFO - Processing expiration date 2025-04-17 for LLY...
2025-03-24 20:45:05,057 - __main__ - DEBUG - ATM calls shape before filtering: (72, 19)
2025-03-24 20:45:05,057 - __main__ - DEBUG - ATM puts shape before filtering: (62, 19)
2025-03-24 20:45:05,057 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:45:05,058 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:45:05,058 - __main__ - DEBUG - Finding ATM call for LLY...
2025-03-24 20:45:05,059 - __main__ - DEBUG - ATM call for LLY: strike=860.0
2025-03-24 20:45:05,059 - __main__ - DEBUG - Finding ATM put for LLY...
2025-03-24 20:45:05,060 - __main__ - DEBUG - ATM put for LLY: strike=860.0
2025-03-24 20:45:05,060 - __main__ - DEBUG - Calculating volume data for LLY...
2025-03-24 20:45:05,060 - __main__ - DEBUG - Volume data for LLY: calls=2055, puts=1517
2025-03-24 20:45:05,061 - __main__ - INFO - Successfully processed expiration 2025-04-17 for LLY
2025-03-24 20:45:05,061 - __main__ - INFO - Step 5: Generating analysis for LLY...
2025-03-24 20:45:05,061 - __main__ - DEBUG - Calling get_stock_analysis_prompt for LLY with args: stock_analysis_data, market_context
2025-03-24 20:45:17,862 - __main__ - INFO - Market alignment for LLY: contrary
2025-03-24 20:45:17,862 - __main__ - INFO - Creating stock analysis result for LLY...
2025-03-24 20:45:17,862 - __main__ - INFO - Successfully added LLY to stock analyses
2025-03-24 20:45:17,862 - __main__ - INFO - Updating Notion with analysis for LLY...
2025-03-24 20:45:17,863 - __main__ - INFO - Sending Discord notification for LLY...
2025-03-24 20:45:17,863 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2834 chars). Splitting into parts.
2025-03-24 20:45:17,864 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:18,195 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:18,196 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:18,197 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:18,551 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:18,552 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:18,553 - __main__ - INFO - Successfully sent Discord notification for LLY
2025-03-24 20:45:18,553 - __main__ - INFO - Analyzing MU...
2025-03-24 20:45:18,553 - __main__ - INFO - Step 1: Getting stock data for MU...
2025-03-24 20:45:18,553 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:18,553 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:18,554 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:18,554 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 20:45:18,554 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:18,554 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:18,555 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:18,555 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:18,555 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 20:45:18,555 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:18,555 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:18,556 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:18,556 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,556 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:18,556 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:18,556 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,556 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:18,619 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1688
2025-03-24 20:45:18,620 - yfinance - DEBUG - response code=200
2025-03-24 20:45:18,620 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:18,620 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:18,621 - yfinance - DEBUG - MU: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:45:18,625 - yfinance - DEBUG - MU: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:18,627 - yfinance - DEBUG - MU: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:18,631 - yfinance - DEBUG - MU: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:18,631 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:18,631 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:18,633 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:18,633 - yfinance_client - INFO - Downloaded data for MU, shape: (35, 5)
2025-03-24 20:45:18,633 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:18,634 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:18,634 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:18,634 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 20:45:18,635 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:18,635 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:18,635 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:18,635 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:18,635 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 20:45:18,636 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:18,636 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:18,636 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:18,636 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,636 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:18,637 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:18,637 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,637 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:18,739 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2143
2025-03-24 20:45:18,740 - yfinance - DEBUG - response code=200
2025-03-24 20:45:18,740 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:18,740 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:18,742 - yfinance - DEBUG - MU: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:45:18,743 - yfinance - DEBUG - MU: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:45:18,748 - yfinance - DEBUG - MU: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:18,754 - yfinance - DEBUG - MU: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:18,754 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:18,755 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:18,757 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:18,758 - yfinance_client - INFO - Downloaded data for MU, shape: (59, 5)
2025-03-24 20:45:18,766 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:45:18,770 - __main__ - INFO - Step 2: Getting options chain data for MU...
2025-03-24 20:45:18,771 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for MU
2025-03-24 20:45:18,771 - yfinance - DEBUG - Entering history()
2025-03-24 20:45:18,771 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 20:45:18,772 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:18,772 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:18,772 - yfinance - DEBUG -   Entering get()
2025-03-24 20:45:18,773 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:45:18,773 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 20:45:18,773 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:18,773 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:45:18,773 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:18,773 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,774 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:18,774 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:18,774 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,774 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:45:18,869 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1208
2025-03-24 20:45:18,869 - yfinance - DEBUG - response code=200
2025-03-24 20:45:18,870 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:45:18,870 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:45:18,871 - yfinance - DEBUG - MU: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:45:18,872 - yfinance - DEBUG - MU: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:45:18,874 - yfinance - DEBUG - MU: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:18,877 - yfinance - DEBUG - MU: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:18,877 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:18,878 - yfinance - DEBUG - Exiting history()
2025-03-24 20:45:18,878 - yfinance_client - INFO - Current price of MU: $96.94
2025-03-24 20:45:18,878 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:18,878 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:18,878 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU
2025-03-24 20:45:18,879 - yfinance - DEBUG - params=None
2025-03-24 20:45:18,879 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:18,879 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:18,879 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,879 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:18,880 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:18,880 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,880 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:18,957 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:18,958 - yfinance - DEBUG - response code=200
2025-03-24 20:45:18,958 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:18,959 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:18,960 - yfinance_client - INFO - Found 20 expiration dates for MU
2025-03-24 20:45:18,961 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:45:18,961 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:18,961 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:18,961 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1743120000
2025-03-24 20:45:18,962 - yfinance - DEBUG - params=None
2025-03-24 20:45:18,962 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:18,962 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:18,962 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,962 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:18,962 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:18,962 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:18,963 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:19,045 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:19,046 - yfinance - DEBUG - response code=200
2025-03-24 20:45:19,046 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:19,046 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:19,050 - yfinance_client - INFO - Retrieved 73 calls and 64 puts
2025-03-24 20:45:19,117 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:45:19,118 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:19,118 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:19,118 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1743724800
2025-03-24 20:45:19,118 - yfinance - DEBUG - params=None
2025-03-24 20:45:19,119 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:19,119 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:19,119 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:19,119 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:19,119 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:19,119 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:19,120 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:19,196 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:19,197 - yfinance - DEBUG - response code=200
2025-03-24 20:45:19,198 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:19,198 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:19,201 - yfinance_client - INFO - Retrieved 54 calls and 50 puts
2025-03-24 20:45:19,254 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:45:19,255 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:19,255 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:19,255 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1744329600
2025-03-24 20:45:19,256 - yfinance - DEBUG - params=None
2025-03-24 20:45:19,256 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:19,256 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:19,256 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:19,257 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:19,257 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:19,257 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:19,257 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:19,324 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:19,325 - yfinance - DEBUG - response code=200
2025-03-24 20:45:19,326 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:19,326 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:19,329 - yfinance_client - INFO - Retrieved 44 calls and 43 puts
2025-03-24 20:45:19,373 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:45:19,374 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:19,375 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:19,375 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MU?date=1744848000
2025-03-24 20:45:19,375 - yfinance - DEBUG - params=None
2025-03-24 20:45:19,375 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:19,375 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:19,376 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:19,376 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:19,376 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:19,376 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:19,376 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:19,440 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MU?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:19,440 - yfinance - DEBUG - response code=200
2025-03-24 20:45:19,441 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:19,441 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:19,444 - yfinance_client - INFO - Retrieved 34 calls and 27 puts
2025-03-24 20:45:19,476 - yfinance_client - INFO - Successfully fetched 4 option chains for MU
2025-03-24 20:45:19,477 - __main__ - INFO - Step 3: Preparing analysis data for MU...
2025-03-24 20:45:19,477 - __main__ - INFO - Step 4: Processing options data for MU...
2025-03-24 20:45:19,477 - __main__ - INFO - Found 4 expiration dates for MU
2025-03-24 20:45:19,478 - __main__ - INFO - Processing expiration date 2025-03-28 for MU...
2025-03-24 20:45:19,478 - __main__ - DEBUG - ATM calls shape before filtering: (73, 19)
2025-03-24 20:45:19,478 - __main__ - DEBUG - ATM puts shape before filtering: (64, 19)
2025-03-24 20:45:19,479 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:45:19,479 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:45:19,480 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:45:19,480 - __main__ - DEBUG - ATM call for MU: strike=97.0
2025-03-24 20:45:19,481 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:45:19,481 - __main__ - DEBUG - ATM put for MU: strike=97.0
2025-03-24 20:45:19,482 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:45:19,482 - __main__ - DEBUG - Volume data for MU: calls=63965, puts=24831
2025-03-24 20:45:19,482 - __main__ - INFO - Successfully processed expiration 2025-03-28 for MU
2025-03-24 20:45:19,483 - __main__ - INFO - Processing expiration date 2025-04-04 for MU...
2025-03-24 20:45:19,483 - __main__ - DEBUG - ATM calls shape before filtering: (54, 19)
2025-03-24 20:45:19,483 - __main__ - DEBUG - ATM puts shape before filtering: (50, 19)
2025-03-24 20:45:19,484 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:45:19,484 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:45:19,484 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:45:19,485 - __main__ - DEBUG - ATM call for MU: strike=97.0
2025-03-24 20:45:19,485 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:45:19,486 - __main__ - DEBUG - ATM put for MU: strike=97.0
2025-03-24 20:45:19,486 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:45:19,487 - __main__ - DEBUG - Volume data for MU: calls=13506, puts=5476
2025-03-24 20:45:19,487 - __main__ - INFO - Successfully processed expiration 2025-04-04 for MU
2025-03-24 20:45:19,487 - __main__ - INFO - Processing expiration date 2025-04-11 for MU...
2025-03-24 20:45:19,487 - __main__ - DEBUG - ATM calls shape before filtering: (44, 19)
2025-03-24 20:45:19,488 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:45:19,488 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:45:19,489 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:45:19,489 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:45:19,489 - __main__ - DEBUG - ATM call for MU: strike=97.0
2025-03-24 20:45:19,490 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:45:19,490 - __main__ - DEBUG - ATM put for MU: strike=97.0
2025-03-24 20:45:19,490 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:45:19,491 - __main__ - DEBUG - Volume data for MU: calls=5871, puts=1950
2025-03-24 20:45:19,491 - __main__ - INFO - Successfully processed expiration 2025-04-11 for MU
2025-03-24 20:45:19,492 - __main__ - INFO - Processing expiration date 2025-04-17 for MU...
2025-03-24 20:45:19,492 - __main__ - DEBUG - ATM calls shape before filtering: (34, 19)
2025-03-24 20:45:19,492 - __main__ - DEBUG - ATM puts shape before filtering: (27, 19)
2025-03-24 20:45:19,493 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:45:19,493 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:45:19,493 - __main__ - DEBUG - Finding ATM call for MU...
2025-03-24 20:45:19,494 - __main__ - DEBUG - ATM call for MU: strike=95.0
2025-03-24 20:45:19,494 - __main__ - DEBUG - Finding ATM put for MU...
2025-03-24 20:45:19,495 - __main__ - DEBUG - ATM put for MU: strike=95.0
2025-03-24 20:45:19,495 - __main__ - DEBUG - Calculating volume data for MU...
2025-03-24 20:45:19,496 - __main__ - DEBUG - Volume data for MU: calls=23600, puts=6119
2025-03-24 20:45:19,496 - __main__ - INFO - Successfully processed expiration 2025-04-17 for MU
2025-03-24 20:45:19,496 - __main__ - INFO - Step 5: Generating analysis for MU...
2025-03-24 20:45:19,496 - __main__ - DEBUG - Calling get_stock_analysis_prompt for MU with args: stock_analysis_data, market_context
2025-03-24 20:45:31,765 - __main__ - INFO - Market alignment for MU: aligned
2025-03-24 20:45:31,765 - __main__ - INFO - Creating stock analysis result for MU...
2025-03-24 20:45:31,765 - __main__ - INFO - Successfully added MU to stock analyses
2025-03-24 20:45:31,765 - __main__ - INFO - Updating Notion with analysis for MU...
2025-03-24 20:45:31,766 - __main__ - INFO - Sending Discord notification for MU...
2025-03-24 20:45:31,766 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2572 chars). Splitting into parts.
2025-03-24 20:45:31,767 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:32,068 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:32,069 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:32,070 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:32,332 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:32,333 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:32,334 - __main__ - INFO - Successfully sent Discord notification for MU
2025-03-24 20:45:32,334 - __main__ - INFO - Analyzing PLTR...
2025-03-24 20:45:32,334 - __main__ - INFO - Step 1: Getting stock data for PLTR...
2025-03-24 20:45:32,334 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:32,335 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:32,335 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:32,335 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 20:45:32,335 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:32,336 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:32,336 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:32,336 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:32,336 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 20:45:32,337 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:32,337 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:32,337 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:32,337 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,337 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:32,337 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:32,338 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,338 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:32,410 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1734
2025-03-24 20:45:32,411 - yfinance - DEBUG - response code=200
2025-03-24 20:45:32,411 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:32,411 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:32,412 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:45:32,417 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:32,418 - yfinance - DEBUG - PLTR: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:32,422 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:32,423 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:32,423 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:32,425 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:32,425 - yfinance_client - INFO - Downloaded data for PLTR, shape: (35, 5)
2025-03-24 20:45:32,425 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:32,425 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:32,426 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:32,426 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 20:45:32,426 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:32,426 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:32,427 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:32,427 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:32,427 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 20:45:32,427 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:32,427 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:32,428 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:32,428 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,428 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:32,428 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:32,428 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,428 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:32,528 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2213
2025-03-24 20:45:32,529 - yfinance - DEBUG - response code=200
2025-03-24 20:45:32,529 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:32,529 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:32,530 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:45:32,531 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:45:32,533 - yfinance - DEBUG - PLTR: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:32,537 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:32,537 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:32,538 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:32,539 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:32,539 - yfinance_client - INFO - Downloaded data for PLTR, shape: (59, 5)
2025-03-24 20:45:32,545 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:45:32,548 - __main__ - INFO - Step 2: Getting options chain data for PLTR...
2025-03-24 20:45:32,548 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for PLTR
2025-03-24 20:45:32,549 - yfinance - DEBUG - Entering history()
2025-03-24 20:45:32,549 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 20:45:32,549 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:32,550 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:32,550 - yfinance - DEBUG -   Entering get()
2025-03-24 20:45:32,550 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:45:32,550 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 20:45:32,550 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:32,551 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:45:32,551 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:32,551 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,551 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:32,551 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:32,551 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,551 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:45:32,628 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1188
2025-03-24 20:45:32,629 - yfinance - DEBUG - response code=200
2025-03-24 20:45:32,630 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:45:32,630 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:45:32,631 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:45:32,632 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:45:32,634 - yfinance - DEBUG - PLTR: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:32,637 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:32,637 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:32,638 - yfinance - DEBUG - Exiting history()
2025-03-24 20:45:32,638 - yfinance_client - INFO - Current price of PLTR: $96.75
2025-03-24 20:45:32,638 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:32,638 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:32,639 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR
2025-03-24 20:45:32,639 - yfinance - DEBUG - params=None
2025-03-24 20:45:32,639 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:32,639 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:32,639 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,639 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:32,639 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:32,640 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,640 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:32,727 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:32,742 - yfinance - DEBUG - response code=200
2025-03-24 20:45:32,742 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:32,742 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:32,744 - yfinance_client - INFO - Found 21 expiration dates for PLTR
2025-03-24 20:45:32,744 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:45:32,745 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:32,745 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:32,745 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1743120000
2025-03-24 20:45:32,745 - yfinance - DEBUG - params=None
2025-03-24 20:45:32,745 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:32,745 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:32,745 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,746 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:32,746 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:32,746 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,746 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:32,838 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:32,839 - yfinance - DEBUG - response code=200
2025-03-24 20:45:32,839 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:32,840 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:32,844 - yfinance_client - INFO - Retrieved 93 calls and 86 puts
2025-03-24 20:45:32,929 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:45:32,929 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:32,930 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:32,930 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1743724800
2025-03-24 20:45:32,930 - yfinance - DEBUG - params=None
2025-03-24 20:45:32,930 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:32,931 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:32,931 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,931 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:32,931 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:32,931 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:32,932 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:33,012 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:33,014 - yfinance - DEBUG - response code=200
2025-03-24 20:45:33,014 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:33,014 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:33,018 - yfinance_client - INFO - Retrieved 92 calls and 84 puts
2025-03-24 20:45:33,103 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:45:33,103 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:33,104 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:33,104 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1744329600
2025-03-24 20:45:33,104 - yfinance - DEBUG - params=None
2025-03-24 20:45:33,105 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:33,105 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:33,105 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:33,105 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:33,105 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:33,106 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:33,106 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:33,177 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:33,178 - yfinance - DEBUG - response code=200
2025-03-24 20:45:33,178 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:33,178 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:33,182 - yfinance_client - INFO - Retrieved 53 calls and 52 puts
2025-03-24 20:45:33,235 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:45:33,235 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:33,236 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:33,236 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/PLTR?date=1744848000
2025-03-24 20:45:33,236 - yfinance - DEBUG - params=None
2025-03-24 20:45:33,237 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:33,237 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:33,237 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:33,237 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:33,237 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:33,237 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:33,238 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:33,319 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/PLTR?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:33,320 - yfinance - DEBUG - response code=200
2025-03-24 20:45:33,320 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:33,321 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:33,324 - yfinance_client - INFO - Retrieved 65 calls and 64 puts
2025-03-24 20:45:33,389 - yfinance_client - INFO - Successfully fetched 4 option chains for PLTR
2025-03-24 20:45:33,390 - __main__ - INFO - Step 3: Preparing analysis data for PLTR...
2025-03-24 20:45:33,390 - __main__ - INFO - Step 4: Processing options data for PLTR...
2025-03-24 20:45:33,390 - __main__ - INFO - Found 4 expiration dates for PLTR
2025-03-24 20:45:33,390 - __main__ - INFO - Processing expiration date 2025-03-28 for PLTR...
2025-03-24 20:45:33,391 - __main__ - DEBUG - ATM calls shape before filtering: (93, 19)
2025-03-24 20:45:33,391 - __main__ - DEBUG - ATM puts shape before filtering: (86, 19)
2025-03-24 20:45:33,392 - __main__ - DEBUG - ATM calls shape after filtering: (10, 19)
2025-03-24 20:45:33,393 - __main__ - DEBUG - ATM puts shape after filtering: (10, 19)
2025-03-24 20:45:33,393 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:45:33,393 - __main__ - DEBUG - ATM call for PLTR: strike=97.0
2025-03-24 20:45:33,394 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:45:33,394 - __main__ - DEBUG - ATM put for PLTR: strike=97.0
2025-03-24 20:45:33,395 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:45:33,395 - __main__ - DEBUG - Volume data for PLTR: calls=294092, puts=175401
2025-03-24 20:45:33,395 - __main__ - INFO - Successfully processed expiration 2025-03-28 for PLTR
2025-03-24 20:45:33,396 - __main__ - INFO - Processing expiration date 2025-04-04 for PLTR...
2025-03-24 20:45:33,396 - __main__ - DEBUG - ATM calls shape before filtering: (92, 19)
2025-03-24 20:45:33,396 - __main__ - DEBUG - ATM puts shape before filtering: (84, 19)
2025-03-24 20:45:33,397 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:45:33,398 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:45:33,398 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:45:33,398 - __main__ - DEBUG - ATM call for PLTR: strike=97.0
2025-03-24 20:45:33,399 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:45:33,399 - __main__ - DEBUG - ATM put for PLTR: strike=97.0
2025-03-24 20:45:33,399 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:45:33,400 - __main__ - DEBUG - Volume data for PLTR: calls=54135, puts=26893
2025-03-24 20:45:33,400 - __main__ - INFO - Successfully processed expiration 2025-04-04 for PLTR
2025-03-24 20:45:33,400 - __main__ - INFO - Processing expiration date 2025-04-11 for PLTR...
2025-03-24 20:45:33,401 - __main__ - DEBUG - ATM calls shape before filtering: (53, 19)
2025-03-24 20:45:33,401 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:45:33,401 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:45:33,402 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:45:33,402 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:45:33,403 - __main__ - DEBUG - ATM call for PLTR: strike=97.0
2025-03-24 20:45:33,403 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:45:33,404 - __main__ - DEBUG - ATM put for PLTR: strike=97.0
2025-03-24 20:45:33,404 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:45:33,404 - __main__ - DEBUG - Volume data for PLTR: calls=15066, puts=5909
2025-03-24 20:45:33,404 - __main__ - INFO - Successfully processed expiration 2025-04-11 for PLTR
2025-03-24 20:45:33,405 - __main__ - INFO - Processing expiration date 2025-04-17 for PLTR...
2025-03-24 20:45:33,405 - __main__ - DEBUG - ATM calls shape before filtering: (65, 19)
2025-03-24 20:45:33,405 - __main__ - DEBUG - ATM puts shape before filtering: (64, 19)
2025-03-24 20:45:33,406 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:45:33,406 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:45:33,406 - __main__ - DEBUG - Finding ATM call for PLTR...
2025-03-24 20:45:33,407 - __main__ - DEBUG - ATM call for PLTR: strike=95.0
2025-03-24 20:45:33,407 - __main__ - DEBUG - Finding ATM put for PLTR...
2025-03-24 20:45:33,408 - __main__ - DEBUG - ATM put for PLTR: strike=95.0
2025-03-24 20:45:33,408 - __main__ - DEBUG - Calculating volume data for PLTR...
2025-03-24 20:45:33,408 - __main__ - DEBUG - Volume data for PLTR: calls=54319, puts=33563
2025-03-24 20:45:33,409 - __main__ - INFO - Successfully processed expiration 2025-04-17 for PLTR
2025-03-24 20:45:33,409 - __main__ - INFO - Step 5: Generating analysis for PLTR...
2025-03-24 20:45:33,409 - __main__ - DEBUG - Calling get_stock_analysis_prompt for PLTR with args: stock_analysis_data, market_context
2025-03-24 20:45:44,969 - __main__ - INFO - Market alignment for PLTR: contrary
2025-03-24 20:45:44,969 - __main__ - INFO - Creating stock analysis result for PLTR...
2025-03-24 20:45:44,969 - __main__ - INFO - Successfully added PLTR to stock analyses
2025-03-24 20:45:44,969 - __main__ - INFO - Updating Notion with analysis for PLTR...
2025-03-24 20:45:44,969 - __main__ - INFO - Sending Discord notification for PLTR...
2025-03-24 20:45:44,970 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2607 chars). Splitting into parts.
2025-03-24 20:45:44,970 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:45,341 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:45,342 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:45,343 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:45,642 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:45,643 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:45,644 - __main__ - INFO - Successfully sent Discord notification for PLTR
2025-03-24 20:45:45,644 - __main__ - INFO - Analyzing HOOD...
2025-03-24 20:45:45,644 - __main__ - INFO - Step 1: Getting stock data for HOOD...
2025-03-24 20:45:45,644 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:45,644 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:45,644 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:45,645 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 20:45:45,645 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:45,645 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:45,646 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:45,646 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:45,646 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 20:45:45,646 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:45,647 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:45,647 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:45,647 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,647 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:45,647 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:45,647 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,648 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:45,719 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1716
2025-03-24 20:45:45,720 - yfinance - DEBUG - response code=200
2025-03-24 20:45:45,720 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:45,720 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:45,721 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:45:45,725 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:45,727 - yfinance - DEBUG - HOOD: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:45,730 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:45,731 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:45,731 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:45,733 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:45,733 - yfinance_client - INFO - Downloaded data for HOOD, shape: (35, 5)
2025-03-24 20:45:45,733 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:45,733 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:45,734 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:45,734 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 20:45:45,734 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:45,734 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:45,735 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:45,735 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:45,735 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 20:45:45,735 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:45,735 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:45,736 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:45,736 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,736 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:45,736 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:45,736 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,736 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:45,789 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2234
2025-03-24 20:45:45,789 - yfinance - DEBUG - response code=200
2025-03-24 20:45:45,789 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:45,790 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:45,790 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:45:45,791 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:45:45,793 - yfinance - DEBUG - HOOD: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:45,797 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:45,797 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:45,797 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:45,799 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:45,799 - yfinance_client - INFO - Downloaded data for HOOD, shape: (59, 5)
2025-03-24 20:45:45,805 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:45:45,808 - __main__ - INFO - Step 2: Getting options chain data for HOOD...
2025-03-24 20:45:45,808 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for HOOD
2025-03-24 20:45:45,809 - yfinance - DEBUG - Entering history()
2025-03-24 20:45:45,809 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 20:45:45,809 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:45,810 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:45,810 - yfinance - DEBUG -   Entering get()
2025-03-24 20:45:45,810 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:45:45,810 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 20:45:45,810 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:45,810 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:45:45,811 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:45,811 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,811 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:45,811 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:45,811 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,811 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:45:45,871 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1204
2025-03-24 20:45:45,872 - yfinance - DEBUG - response code=200
2025-03-24 20:45:45,872 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:45:45,872 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:45:45,873 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:45:45,875 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:45:45,877 - yfinance - DEBUG - HOOD: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:45,881 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:45,881 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:45,882 - yfinance - DEBUG - Exiting history()
2025-03-24 20:45:45,882 - yfinance_client - INFO - Current price of HOOD: $48.36
2025-03-24 20:45:45,882 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:45,882 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:45,883 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD
2025-03-24 20:45:45,883 - yfinance - DEBUG - params=None
2025-03-24 20:45:45,883 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:45,883 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:45,883 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,884 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:45,884 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:45,884 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,884 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:45,973 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:45,974 - yfinance - DEBUG - response code=200
2025-03-24 20:45:45,974 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:45,975 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:45,976 - yfinance_client - INFO - Found 15 expiration dates for HOOD
2025-03-24 20:45:45,976 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:45:45,976 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:45,977 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:45,977 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1743120000
2025-03-24 20:45:45,977 - yfinance - DEBUG - params=None
2025-03-24 20:45:45,978 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:45,978 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:45,978 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,978 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:45,978 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:45,978 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:45,978 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:46,052 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:46,054 - yfinance - DEBUG - response code=200
2025-03-24 20:45:46,054 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:46,055 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:46,059 - yfinance_client - INFO - Retrieved 91 calls and 77 puts
2025-03-24 20:45:46,142 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:45:46,143 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:46,143 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:46,143 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1743724800
2025-03-24 20:45:46,143 - yfinance - DEBUG - params=None
2025-03-24 20:45:46,143 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:46,144 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:46,144 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:46,144 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:46,144 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:46,144 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:46,144 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:46,231 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:46,232 - yfinance - DEBUG - response code=200
2025-03-24 20:45:46,232 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:46,233 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:46,236 - yfinance_client - INFO - Retrieved 77 calls and 63 puts
2025-03-24 20:45:46,307 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:45:46,309 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:46,309 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:46,309 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1744329600
2025-03-24 20:45:46,310 - yfinance - DEBUG - params=None
2025-03-24 20:45:46,310 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:46,310 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:46,310 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:46,310 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:46,311 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:46,311 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:46,311 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:46,385 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:46,386 - yfinance - DEBUG - response code=200
2025-03-24 20:45:46,386 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:46,386 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:46,390 - yfinance_client - INFO - Retrieved 48 calls and 43 puts
2025-03-24 20:45:46,436 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:45:46,437 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:46,437 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:46,438 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/HOOD?date=1744848000
2025-03-24 20:45:46,438 - yfinance - DEBUG - params=None
2025-03-24 20:45:46,438 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:46,438 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:46,438 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:46,439 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:46,439 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:46,439 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:46,439 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:46,513 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/HOOD?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:46,514 - yfinance - DEBUG - response code=200
2025-03-24 20:45:46,514 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:46,514 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:46,518 - yfinance_client - INFO - Retrieved 43 calls and 40 puts
2025-03-24 20:45:46,561 - yfinance_client - INFO - Successfully fetched 4 option chains for HOOD
2025-03-24 20:45:46,561 - __main__ - INFO - Step 3: Preparing analysis data for HOOD...
2025-03-24 20:45:46,561 - __main__ - INFO - Step 4: Processing options data for HOOD...
2025-03-24 20:45:46,562 - __main__ - INFO - Found 4 expiration dates for HOOD
2025-03-24 20:45:46,562 - __main__ - INFO - Processing expiration date 2025-03-28 for HOOD...
2025-03-24 20:45:46,562 - __main__ - DEBUG - ATM calls shape before filtering: (91, 19)
2025-03-24 20:45:46,562 - __main__ - DEBUG - ATM puts shape before filtering: (77, 19)
2025-03-24 20:45:46,563 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:45:46,563 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:45:46,564 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:45:46,564 - __main__ - DEBUG - ATM call for HOOD: strike=48.5
2025-03-24 20:45:46,564 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:45:46,565 - __main__ - DEBUG - ATM put for HOOD: strike=48.5
2025-03-24 20:45:46,565 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:45:46,566 - __main__ - DEBUG - Volume data for HOOD: calls=111032, puts=55368
2025-03-24 20:45:46,566 - __main__ - INFO - Successfully processed expiration 2025-03-28 for HOOD
2025-03-24 20:45:46,566 - __main__ - INFO - Processing expiration date 2025-04-04 for HOOD...
2025-03-24 20:45:46,567 - __main__ - DEBUG - ATM calls shape before filtering: (77, 19)
2025-03-24 20:45:46,567 - __main__ - DEBUG - ATM puts shape before filtering: (63, 19)
2025-03-24 20:45:46,567 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:45:46,568 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:45:46,568 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:45:46,569 - __main__ - DEBUG - ATM call for HOOD: strike=48.0
2025-03-24 20:45:46,569 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:45:46,570 - __main__ - DEBUG - ATM put for HOOD: strike=48.0
2025-03-24 20:45:46,570 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:45:46,570 - __main__ - DEBUG - Volume data for HOOD: calls=25872, puts=14793
2025-03-24 20:45:46,570 - __main__ - INFO - Successfully processed expiration 2025-04-04 for HOOD
2025-03-24 20:45:46,570 - __main__ - INFO - Processing expiration date 2025-04-11 for HOOD...
2025-03-24 20:45:46,571 - __main__ - DEBUG - ATM calls shape before filtering: (48, 19)
2025-03-24 20:45:46,571 - __main__ - DEBUG - ATM puts shape before filtering: (43, 19)
2025-03-24 20:45:46,572 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:45:46,572 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:45:46,572 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:45:46,573 - __main__ - DEBUG - ATM call for HOOD: strike=48.0
2025-03-24 20:45:46,573 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:45:46,574 - __main__ - DEBUG - ATM put for HOOD: strike=48.0
2025-03-24 20:45:46,574 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:45:46,575 - __main__ - DEBUG - Volume data for HOOD: calls=7506, puts=6348
2025-03-24 20:45:46,575 - __main__ - INFO - Successfully processed expiration 2025-04-11 for HOOD
2025-03-24 20:45:46,575 - __main__ - INFO - Processing expiration date 2025-04-17 for HOOD...
2025-03-24 20:45:46,576 - __main__ - DEBUG - ATM calls shape before filtering: (43, 19)
2025-03-24 20:45:46,576 - __main__ - DEBUG - ATM puts shape before filtering: (40, 19)
2025-03-24 20:45:46,576 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:45:46,577 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:45:46,577 - __main__ - DEBUG - Finding ATM call for HOOD...
2025-03-24 20:45:46,578 - __main__ - DEBUG - ATM call for HOOD: strike=48.0
2025-03-24 20:45:46,578 - __main__ - DEBUG - Finding ATM put for HOOD...
2025-03-24 20:45:46,579 - __main__ - DEBUG - ATM put for HOOD: strike=48.0
2025-03-24 20:45:46,579 - __main__ - DEBUG - Calculating volume data for HOOD...
2025-03-24 20:45:46,579 - __main__ - DEBUG - Volume data for HOOD: calls=36193, puts=20351
2025-03-24 20:45:46,579 - __main__ - INFO - Successfully processed expiration 2025-04-17 for HOOD
2025-03-24 20:45:46,580 - __main__ - INFO - Step 5: Generating analysis for HOOD...
2025-03-24 20:45:46,580 - __main__ - DEBUG - Calling get_stock_analysis_prompt for HOOD with args: stock_analysis_data, market_context
2025-03-24 20:45:58,504 - __main__ - INFO - Market alignment for HOOD: contrary
2025-03-24 20:45:58,504 - __main__ - INFO - Creating stock analysis result for HOOD...
2025-03-24 20:45:58,504 - __main__ - INFO - Successfully added HOOD to stock analyses
2025-03-24 20:45:58,504 - __main__ - INFO - Updating Notion with analysis for HOOD...
2025-03-24 20:45:58,505 - __main__ - INFO - Sending Discord notification for HOOD...
2025-03-24 20:45:58,505 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2585 chars). Splitting into parts.
2025-03-24 20:45:58,506 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:58,849 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:58,850 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:58,851 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:45:59,123 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:45:59,124 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:45:59,125 - __main__ - INFO - Successfully sent Discord notification for HOOD
2025-03-24 20:45:59,125 - __main__ - INFO - Analyzing TSLL...
2025-03-24 20:45:59,125 - __main__ - INFO - Step 1: Getting stock data for TSLL...
2025-03-24 20:45:59,125 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:59,125 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:59,126 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:59,126 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 20:45:59,127 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:59,127 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:59,127 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:59,127 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:59,128 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 20:45:59,128 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:59,128 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,128 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,128 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,129 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,129 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,129 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,129 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,202 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1786
2025-03-24 20:45:59,203 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,203 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:59,203 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:59,205 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:45:59,210 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:59,213 - yfinance - DEBUG - TSLL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:59,218 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:45:59,218 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:59,219 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:59,220 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:59,221 - yfinance_client - INFO - Downloaded data for TSLL, shape: (35, 5)
2025-03-24 20:45:59,221 - yfinance - DEBUG - Entering download()
2025-03-24 20:45:59,221 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:45:59,221 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:59,222 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 20:45:59,222 - yfinance - DEBUG -   Entering history()
2025-03-24 20:45:59,222 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:59,222 - yfinance - DEBUG -    Entering get()
2025-03-24 20:45:59,222 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:45:59,223 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 20:45:59,223 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:59,223 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,223 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,223 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,223 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,224 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,224 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,224 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,286 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2291
2025-03-24 20:45:59,287 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,287 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:45:59,288 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:45:59,289 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:45:59,290 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:45:59,292 - yfinance - DEBUG - TSLL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:59,298 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:45:59,299 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:45:59,299 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:59,302 - yfinance - DEBUG - Exiting download()
2025-03-24 20:45:59,302 - yfinance_client - INFO - Downloaded data for TSLL, shape: (59, 5)
2025-03-24 20:45:59,308 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:45:59,312 - __main__ - INFO - Step 2: Getting options chain data for TSLL...
2025-03-24 20:45:59,312 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for TSLL
2025-03-24 20:45:59,312 - yfinance - DEBUG - Entering history()
2025-03-24 20:45:59,313 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 20:45:59,313 - yfinance - DEBUG -  Entering history()
2025-03-24 20:45:59,313 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:59,313 - yfinance - DEBUG -   Entering get()
2025-03-24 20:45:59,314 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:45:59,314 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 20:45:59,314 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:45:59,314 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,315 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,315 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,315 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,315 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,315 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,315 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,372 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1217
2025-03-24 20:45:59,373 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,373 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:45:59,374 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:45:59,374 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:45:59,375 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:45:59,377 - yfinance - DEBUG - TSLL: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:59,380 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:45:59,381 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:45:59,381 - yfinance - DEBUG - Exiting history()
2025-03-24 20:45:59,381 - yfinance_client - INFO - Current price of TSLL: $11.16
2025-03-24 20:45:59,381 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:59,382 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:59,382 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL
2025-03-24 20:45:59,382 - yfinance - DEBUG - params=None
2025-03-24 20:45:59,382 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,382 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,382 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,383 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,383 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,383 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,383 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,465 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:59,465 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,465 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:59,465 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:59,466 - yfinance_client - INFO - Found 11 expiration dates for TSLL
2025-03-24 20:45:59,467 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:45:59,467 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:59,467 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:59,467 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1743120000
2025-03-24 20:45:59,468 - yfinance - DEBUG - params=None
2025-03-24 20:45:59,468 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,468 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,468 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,468 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,468 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,468 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,469 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,550 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:59,551 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,551 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:59,551 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:59,555 - yfinance_client - INFO - Retrieved 58 calls and 58 puts
2025-03-24 20:45:59,613 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:45:59,613 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:59,613 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:59,614 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1743724800
2025-03-24 20:45:59,614 - yfinance - DEBUG - params=None
2025-03-24 20:45:59,614 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,614 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,614 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,614 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,615 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,615 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,615 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,683 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:59,684 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,684 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:59,684 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:59,688 - yfinance_client - INFO - Retrieved 52 calls and 52 puts
2025-03-24 20:45:59,741 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:45:59,741 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:59,741 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:59,742 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1744329600
2025-03-24 20:45:59,742 - yfinance - DEBUG - params=None
2025-03-24 20:45:59,742 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,742 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,743 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,743 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,743 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,743 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,743 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,820 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:59,821 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,821 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:59,821 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:59,824 - yfinance_client - INFO - Retrieved 37 calls and 37 puts
2025-03-24 20:45:59,864 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:45:59,865 - yfinance - DEBUG - Entering get()
2025-03-24 20:45:59,865 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:45:59,865 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TSLL?date=1744848000
2025-03-24 20:45:59,866 - yfinance - DEBUG - params=None
2025-03-24 20:45:59,866 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:45:59,866 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:45:59,866 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,866 - yfinance - DEBUG - reusing cookie
2025-03-24 20:45:59,867 - yfinance - DEBUG - reusing crumb
2025-03-24 20:45:59,867 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:45:59,867 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:45:59,935 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TSLL?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:45:59,936 - yfinance - DEBUG - response code=200
2025-03-24 20:45:59,936 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:45:59,936 - yfinance - DEBUG - Exiting get()
2025-03-24 20:45:59,939 - yfinance_client - INFO - Retrieved 28 calls and 29 puts
2025-03-24 20:45:59,971 - yfinance_client - INFO - Successfully fetched 4 option chains for TSLL
2025-03-24 20:45:59,971 - __main__ - INFO - Step 3: Preparing analysis data for TSLL...
2025-03-24 20:45:59,971 - __main__ - INFO - Step 4: Processing options data for TSLL...
2025-03-24 20:45:59,972 - __main__ - INFO - Found 4 expiration dates for TSLL
2025-03-24 20:45:59,972 - __main__ - INFO - Processing expiration date 2025-03-28 for TSLL...
2025-03-24 20:45:59,972 - __main__ - DEBUG - ATM calls shape before filtering: (58, 19)
2025-03-24 20:45:59,972 - __main__ - DEBUG - ATM puts shape before filtering: (58, 19)
2025-03-24 20:45:59,973 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:45:59,973 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:45:59,974 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:45:59,974 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:45:59,975 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:45:59,975 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:45:59,976 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:45:59,976 - __main__ - DEBUG - Volume data for TSLL: calls=85831, puts=59670
2025-03-24 20:45:59,976 - __main__ - INFO - Successfully processed expiration 2025-03-28 for TSLL
2025-03-24 20:45:59,977 - __main__ - INFO - Processing expiration date 2025-04-04 for TSLL...
2025-03-24 20:45:59,977 - __main__ - DEBUG - ATM calls shape before filtering: (52, 19)
2025-03-24 20:45:59,977 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:45:59,978 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:45:59,978 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:45:59,979 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:45:59,979 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:45:59,979 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:45:59,980 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:45:59,980 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:45:59,981 - __main__ - DEBUG - Volume data for TSLL: calls=27211, puts=23776
2025-03-24 20:45:59,981 - __main__ - INFO - Successfully processed expiration 2025-04-04 for TSLL
2025-03-24 20:45:59,981 - __main__ - INFO - Processing expiration date 2025-04-11 for TSLL...
2025-03-24 20:45:59,981 - __main__ - DEBUG - ATM calls shape before filtering: (37, 19)
2025-03-24 20:45:59,982 - __main__ - DEBUG - ATM puts shape before filtering: (37, 19)
2025-03-24 20:45:59,982 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:45:59,983 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:45:59,983 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:45:59,984 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:45:59,984 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:45:59,985 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:45:59,985 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:45:59,985 - __main__ - DEBUG - Volume data for TSLL: calls=6504, puts=2876
2025-03-24 20:45:59,985 - __main__ - INFO - Successfully processed expiration 2025-04-11 for TSLL
2025-03-24 20:45:59,986 - __main__ - INFO - Processing expiration date 2025-04-17 for TSLL...
2025-03-24 20:45:59,986 - __main__ - DEBUG - ATM calls shape before filtering: (28, 19)
2025-03-24 20:45:59,986 - __main__ - DEBUG - ATM puts shape before filtering: (29, 19)
2025-03-24 20:45:59,987 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:45:59,987 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:45:59,987 - __main__ - DEBUG - Finding ATM call for TSLL...
2025-03-24 20:45:59,988 - __main__ - DEBUG - ATM call for TSLL: strike=11.0
2025-03-24 20:45:59,988 - __main__ - DEBUG - Finding ATM put for TSLL...
2025-03-24 20:45:59,989 - __main__ - DEBUG - ATM put for TSLL: strike=11.0
2025-03-24 20:45:59,989 - __main__ - DEBUG - Calculating volume data for TSLL...
2025-03-24 20:45:59,990 - __main__ - DEBUG - Volume data for TSLL: calls=13620, puts=8091
2025-03-24 20:45:59,990 - __main__ - INFO - Successfully processed expiration 2025-04-17 for TSLL
2025-03-24 20:45:59,990 - __main__ - INFO - Step 5: Generating analysis for TSLL...
2025-03-24 20:45:59,990 - __main__ - DEBUG - Calling get_stock_analysis_prompt for TSLL with args: stock_analysis_data, market_context
2025-03-24 20:46:13,053 - __main__ - INFO - Market alignment for TSLL: contrary
2025-03-24 20:46:13,054 - __main__ - INFO - Creating stock analysis result for TSLL...
2025-03-24 20:46:13,054 - __main__ - INFO - Successfully added TSLL to stock analyses
2025-03-24 20:46:13,055 - __main__ - INFO - Updating Notion with analysis for TSLL...
2025-03-24 20:46:13,055 - __main__ - INFO - Sending Discord notification for TSLL...
2025-03-24 20:46:13,055 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2676 chars). Splitting into parts.
2025-03-24 20:46:13,056 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:13,420 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:13,422 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:13,423 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:13,735 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:13,736 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:13,737 - __main__ - INFO - Successfully sent Discord notification for TSLL
2025-03-24 20:46:13,737 - __main__ - INFO - Analyzing BBAI...
2025-03-24 20:46:13,737 - __main__ - INFO - Step 1: Getting stock data for BBAI...
2025-03-24 20:46:13,737 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:13,737 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:13,737 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:13,738 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 20:46:13,738 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:13,738 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:13,738 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:13,739 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:13,739 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 20:46:13,739 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:13,739 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:13,739 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:13,739 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,740 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:13,740 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:13,740 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,740 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:13,804 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1591
2025-03-24 20:46:13,805 - yfinance - DEBUG - response code=200
2025-03-24 20:46:13,805 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:13,806 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:13,807 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:46:13,811 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:13,813 - yfinance - DEBUG - BBAI: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:13,817 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:13,817 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:13,817 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:13,819 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:13,819 - yfinance_client - INFO - Downloaded data for BBAI, shape: (35, 5)
2025-03-24 20:46:13,820 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:13,820 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:13,820 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:13,820 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 20:46:13,821 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:13,821 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:13,821 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:13,821 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:13,822 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 20:46:13,822 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:13,822 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:13,822 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:13,822 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,823 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:13,823 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:13,823 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,823 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:13,877 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2159
2025-03-24 20:46:13,877 - yfinance - DEBUG - response code=200
2025-03-24 20:46:13,878 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:13,878 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:13,879 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:46:13,880 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:46:13,882 - yfinance - DEBUG - BBAI: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:13,885 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:13,886 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:13,886 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:13,888 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:13,888 - yfinance_client - INFO - Downloaded data for BBAI, shape: (59, 5)
2025-03-24 20:46:13,897 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:46:13,902 - __main__ - INFO - Step 2: Getting options chain data for BBAI...
2025-03-24 20:46:13,902 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for BBAI
2025-03-24 20:46:13,903 - yfinance - DEBUG - Entering history()
2025-03-24 20:46:13,903 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 20:46:13,904 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:13,904 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:13,905 - yfinance - DEBUG -   Entering get()
2025-03-24 20:46:13,905 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:46:13,905 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 20:46:13,905 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:13,905 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:46:13,906 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:13,906 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,906 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:13,906 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:13,907 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,907 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:46:13,957 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1195
2025-03-24 20:46:13,958 - yfinance - DEBUG - response code=200
2025-03-24 20:46:13,958 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:46:13,958 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:46:13,959 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:46:13,960 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:46:13,962 - yfinance - DEBUG - BBAI: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:13,966 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:13,968 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:13,968 - yfinance - DEBUG - Exiting history()
2025-03-24 20:46:13,968 - yfinance_client - INFO - Current price of BBAI: $3.54
2025-03-24 20:46:13,968 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:13,968 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:13,968 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI
2025-03-24 20:46:13,968 - yfinance - DEBUG - params=None
2025-03-24 20:46:13,968 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:13,969 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:13,969 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,969 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:13,969 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:13,969 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:13,970 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:14,045 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:14,046 - yfinance - DEBUG - response code=200
2025-03-24 20:46:14,046 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:14,047 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:14,048 - yfinance_client - INFO - Found 11 expiration dates for BBAI
2025-03-24 20:46:14,048 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:46:14,048 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:14,049 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:14,049 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1743120000
2025-03-24 20:46:14,049 - yfinance - DEBUG - params=None
2025-03-24 20:46:14,049 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:14,049 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:14,050 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,050 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:14,050 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:14,050 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,050 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:14,126 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:14,127 - yfinance - DEBUG - response code=200
2025-03-24 20:46:14,127 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:14,127 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:14,130 - yfinance_client - INFO - Retrieved 29 calls and 28 puts
2025-03-24 20:46:14,160 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:46:14,161 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:14,161 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:14,161 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1743724800
2025-03-24 20:46:14,161 - yfinance - DEBUG - params=None
2025-03-24 20:46:14,162 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:14,162 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:14,162 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,162 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:14,162 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:14,162 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,163 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:14,342 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:14,343 - yfinance - DEBUG - response code=200
2025-03-24 20:46:14,343 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:14,343 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:14,346 - yfinance_client - INFO - Retrieved 32 calls and 22 puts
2025-03-24 20:46:14,375 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:46:14,376 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:14,376 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:14,376 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1744329600
2025-03-24 20:46:14,376 - yfinance - DEBUG - params=None
2025-03-24 20:46:14,377 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:14,377 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:14,377 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,377 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:14,377 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:14,377 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,378 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:14,440 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:14,449 - yfinance - DEBUG - response code=200
2025-03-24 20:46:14,449 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:14,449 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:14,452 - yfinance_client - INFO - Retrieved 20 calls and 18 puts
2025-03-24 20:46:14,474 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:46:14,475 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:14,475 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:14,475 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BBAI?date=1744848000
2025-03-24 20:46:14,475 - yfinance - DEBUG - params=None
2025-03-24 20:46:14,476 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:14,476 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:14,476 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,476 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:14,476 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:14,476 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:14,477 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:14,542 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BBAI?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:14,543 - yfinance - DEBUG - response code=200
2025-03-24 20:46:14,543 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:14,543 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:14,546 - yfinance_client - INFO - Retrieved 24 calls and 24 puts
2025-03-24 20:46:14,574 - yfinance_client - INFO - Successfully fetched 4 option chains for BBAI
2025-03-24 20:46:14,575 - __main__ - INFO - Step 3: Preparing analysis data for BBAI...
2025-03-24 20:46:14,575 - __main__ - INFO - Step 4: Processing options data for BBAI...
2025-03-24 20:46:14,575 - __main__ - INFO - Found 4 expiration dates for BBAI
2025-03-24 20:46:14,575 - __main__ - INFO - Processing expiration date 2025-03-28 for BBAI...
2025-03-24 20:46:14,576 - __main__ - DEBUG - ATM calls shape before filtering: (29, 19)
2025-03-24 20:46:14,577 - __main__ - DEBUG - ATM puts shape before filtering: (28, 19)
2025-03-24 20:46:14,577 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:46:14,578 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:46:14,578 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:46:14,579 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:46:14,579 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:46:14,580 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:46:14,580 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:46:14,581 - __main__ - DEBUG - Volume data for BBAI: calls=25149, puts=2938
2025-03-24 20:46:14,581 - __main__ - INFO - Successfully processed expiration 2025-03-28 for BBAI
2025-03-24 20:46:14,581 - __main__ - INFO - Processing expiration date 2025-04-04 for BBAI...
2025-03-24 20:46:14,581 - __main__ - DEBUG - ATM calls shape before filtering: (32, 19)
2025-03-24 20:46:14,582 - __main__ - DEBUG - ATM puts shape before filtering: (22, 19)
2025-03-24 20:46:14,582 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:46:14,583 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:46:14,583 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:46:14,584 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:46:14,584 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:46:14,585 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:46:14,585 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:46:14,585 - __main__ - DEBUG - Volume data for BBAI: calls=12708, puts=1231
2025-03-24 20:46:14,586 - __main__ - INFO - Successfully processed expiration 2025-04-04 for BBAI
2025-03-24 20:46:14,586 - __main__ - INFO - Processing expiration date 2025-04-11 for BBAI...
2025-03-24 20:46:14,586 - __main__ - DEBUG - ATM calls shape before filtering: (20, 19)
2025-03-24 20:46:14,586 - __main__ - DEBUG - ATM puts shape before filtering: (18, 19)
2025-03-24 20:46:14,587 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:46:14,587 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:46:14,587 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:46:14,589 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:46:14,589 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:46:14,589 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:46:14,590 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:46:14,590 - __main__ - DEBUG - Volume data for BBAI: calls=2876, puts=636
2025-03-24 20:46:14,590 - __main__ - INFO - Successfully processed expiration 2025-04-11 for BBAI
2025-03-24 20:46:14,590 - __main__ - INFO - Processing expiration date 2025-04-17 for BBAI...
2025-03-24 20:46:14,591 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:46:14,591 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:46:14,592 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:46:14,592 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:46:14,592 - __main__ - DEBUG - Finding ATM call for BBAI...
2025-03-24 20:46:14,593 - __main__ - DEBUG - ATM call for BBAI: strike=3.5
2025-03-24 20:46:14,593 - __main__ - DEBUG - Finding ATM put for BBAI...
2025-03-24 20:46:14,594 - __main__ - DEBUG - ATM put for BBAI: strike=3.5
2025-03-24 20:46:14,594 - __main__ - DEBUG - Calculating volume data for BBAI...
2025-03-24 20:46:14,594 - __main__ - DEBUG - Volume data for BBAI: calls=5327, puts=1941
2025-03-24 20:46:14,595 - __main__ - INFO - Successfully processed expiration 2025-04-17 for BBAI
2025-03-24 20:46:14,595 - __main__ - INFO - Step 5: Generating analysis for BBAI...
2025-03-24 20:46:14,595 - __main__ - DEBUG - Calling get_stock_analysis_prompt for BBAI with args: stock_analysis_data, market_context
2025-03-24 20:46:27,672 - __main__ - INFO - Market alignment for BBAI: contrary
2025-03-24 20:46:27,672 - __main__ - INFO - Creating stock analysis result for BBAI...
2025-03-24 20:46:27,673 - __main__ - INFO - Successfully added BBAI to stock analyses
2025-03-24 20:46:27,673 - __main__ - INFO - Updating Notion with analysis for BBAI...
2025-03-24 20:46:27,673 - __main__ - INFO - Sending Discord notification for BBAI...
2025-03-24 20:46:27,673 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2828 chars). Splitting into parts.
2025-03-24 20:46:27,674 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:27,952 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:27,953 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:27,954 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:28,242 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:28,243 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:28,244 - __main__ - INFO - Successfully sent Discord notification for BBAI
2025-03-24 20:46:28,244 - __main__ - INFO - Analyzing SNAP...
2025-03-24 20:46:28,244 - __main__ - INFO - Step 1: Getting stock data for SNAP...
2025-03-24 20:46:28,244 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:28,245 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:28,245 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:28,245 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 20:46:28,246 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:28,246 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:28,246 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:28,246 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:28,246 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 20:46:28,247 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:28,247 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,247 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,247 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,247 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,248 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,248 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,248 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,323 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1592
2025-03-24 20:46:28,324 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,324 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:28,325 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:28,326 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:46:28,330 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:28,332 - yfinance - DEBUG - SNAP: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:28,335 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:28,336 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:28,336 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:28,338 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:28,338 - yfinance_client - INFO - Downloaded data for SNAP, shape: (35, 5)
2025-03-24 20:46:28,338 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:28,339 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:28,339 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:28,339 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 20:46:28,340 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:28,340 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:28,340 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:28,340 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:28,340 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 20:46:28,341 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:28,341 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,341 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,341 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,342 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,342 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,342 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,342 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,399 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2004
2025-03-24 20:46:28,400 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,401 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:28,401 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:28,402 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:46:28,403 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:46:28,405 - yfinance - DEBUG - SNAP: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:28,409 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:28,409 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:28,409 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:28,411 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:28,411 - yfinance_client - INFO - Downloaded data for SNAP, shape: (59, 5)
2025-03-24 20:46:28,417 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:46:28,420 - __main__ - INFO - Step 2: Getting options chain data for SNAP...
2025-03-24 20:46:28,420 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SNAP
2025-03-24 20:46:28,420 - yfinance - DEBUG - Entering history()
2025-03-24 20:46:28,421 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 20:46:28,421 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:28,421 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:28,421 - yfinance - DEBUG -   Entering get()
2025-03-24 20:46:28,421 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:46:28,422 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 20:46:28,422 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:28,422 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,422 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,422 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,422 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,423 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,423 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,423 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,479 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1173
2025-03-24 20:46:28,480 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,480 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:46:28,480 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:46:28,481 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:46:28,482 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:46:28,484 - yfinance - DEBUG - SNAP: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:28,487 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:28,488 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:28,488 - yfinance - DEBUG - Exiting history()
2025-03-24 20:46:28,488 - yfinance_client - INFO - Current price of SNAP: $9.54
2025-03-24 20:46:28,488 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:28,488 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:28,488 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP
2025-03-24 20:46:28,489 - yfinance - DEBUG - params=None
2025-03-24 20:46:28,489 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,489 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,489 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,489 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,489 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,490 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,490 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,560 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:28,560 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,560 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:28,561 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:28,561 - yfinance_client - INFO - Found 14 expiration dates for SNAP
2025-03-24 20:46:28,562 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:46:28,562 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:28,562 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:28,563 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1743120000
2025-03-24 20:46:28,563 - yfinance - DEBUG - params=None
2025-03-24 20:46:28,563 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,563 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,564 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,564 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,564 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,564 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,564 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,639 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:28,640 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,640 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:28,641 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:28,643 - yfinance_client - INFO - Retrieved 20 calls and 19 puts
2025-03-24 20:46:28,664 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:46:28,665 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:28,665 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:28,666 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1743724800
2025-03-24 20:46:28,666 - yfinance - DEBUG - params=None
2025-03-24 20:46:28,666 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,666 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,666 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,667 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,667 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,667 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,667 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,778 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:28,779 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,779 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:28,779 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:28,782 - yfinance_client - INFO - Retrieved 19 calls and 16 puts
2025-03-24 20:46:28,803 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:46:28,803 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:28,803 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:28,804 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1744329600
2025-03-24 20:46:28,804 - yfinance - DEBUG - params=None
2025-03-24 20:46:28,804 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,805 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,805 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,805 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,805 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,805 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,805 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,872 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:28,872 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,873 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:28,873 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:28,876 - yfinance_client - INFO - Retrieved 16 calls and 12 puts
2025-03-24 20:46:28,892 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:46:28,893 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:28,893 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:28,893 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SNAP?date=1744848000
2025-03-24 20:46:28,893 - yfinance - DEBUG - params=None
2025-03-24 20:46:28,895 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:28,895 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:28,895 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,895 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:28,895 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:28,896 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:28,896 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:28,973 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SNAP?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:28,974 - yfinance - DEBUG - response code=200
2025-03-24 20:46:28,975 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:28,975 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:28,978 - yfinance_client - INFO - Retrieved 24 calls and 21 puts
2025-03-24 20:46:29,003 - yfinance_client - INFO - Successfully fetched 4 option chains for SNAP
2025-03-24 20:46:29,003 - __main__ - INFO - Step 3: Preparing analysis data for SNAP...
2025-03-24 20:46:29,004 - __main__ - INFO - Step 4: Processing options data for SNAP...
2025-03-24 20:46:29,004 - __main__ - INFO - Found 4 expiration dates for SNAP
2025-03-24 20:46:29,004 - __main__ - INFO - Processing expiration date 2025-03-28 for SNAP...
2025-03-24 20:46:29,005 - __main__ - DEBUG - ATM calls shape before filtering: (20, 19)
2025-03-24 20:46:29,005 - __main__ - DEBUG - ATM puts shape before filtering: (19, 19)
2025-03-24 20:46:29,005 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:46:29,006 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:46:29,006 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:46:29,007 - __main__ - DEBUG - ATM call for SNAP: strike=9.5
2025-03-24 20:46:29,007 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:46:29,008 - __main__ - DEBUG - ATM put for SNAP: strike=9.5
2025-03-24 20:46:29,008 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:46:29,008 - __main__ - DEBUG - Volume data for SNAP: calls=25555, puts=3066
2025-03-24 20:46:29,008 - __main__ - INFO - Successfully processed expiration 2025-03-28 for SNAP
2025-03-24 20:46:29,009 - __main__ - INFO - Processing expiration date 2025-04-04 for SNAP...
2025-03-24 20:46:29,009 - __main__ - DEBUG - ATM calls shape before filtering: (19, 19)
2025-03-24 20:46:29,009 - __main__ - DEBUG - ATM puts shape before filtering: (16, 19)
2025-03-24 20:46:29,010 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:46:29,010 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:46:29,011 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:46:29,011 - __main__ - DEBUG - ATM call for SNAP: strike=9.5
2025-03-24 20:46:29,012 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:46:29,012 - __main__ - DEBUG - ATM put for SNAP: strike=9.5
2025-03-24 20:46:29,012 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:46:29,013 - __main__ - DEBUG - Volume data for SNAP: calls=2584, puts=1132
2025-03-24 20:46:29,013 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SNAP
2025-03-24 20:46:29,013 - __main__ - INFO - Processing expiration date 2025-04-11 for SNAP...
2025-03-24 20:46:29,014 - __main__ - DEBUG - ATM calls shape before filtering: (16, 19)
2025-03-24 20:46:29,014 - __main__ - DEBUG - ATM puts shape before filtering: (12, 19)
2025-03-24 20:46:29,014 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:46:29,015 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:46:29,015 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:46:29,016 - __main__ - DEBUG - ATM call for SNAP: strike=9.5
2025-03-24 20:46:29,016 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:46:29,017 - __main__ - DEBUG - ATM put for SNAP: strike=9.5
2025-03-24 20:46:29,017 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:46:29,017 - __main__ - DEBUG - Volume data for SNAP: calls=1042, puts=4486
2025-03-24 20:46:29,018 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SNAP
2025-03-24 20:46:29,018 - __main__ - INFO - Processing expiration date 2025-04-17 for SNAP...
2025-03-24 20:46:29,018 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:46:29,018 - __main__ - DEBUG - ATM puts shape before filtering: (21, 19)
2025-03-24 20:46:29,019 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:46:29,019 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:46:29,019 - __main__ - DEBUG - Finding ATM call for SNAP...
2025-03-24 20:46:29,020 - __main__ - DEBUG - ATM call for SNAP: strike=10.0
2025-03-24 20:46:29,020 - __main__ - DEBUG - Finding ATM put for SNAP...
2025-03-24 20:46:29,021 - __main__ - DEBUG - ATM put for SNAP: strike=10.0
2025-03-24 20:46:29,021 - __main__ - DEBUG - Calculating volume data for SNAP...
2025-03-24 20:46:29,021 - __main__ - DEBUG - Volume data for SNAP: calls=6806, puts=2693
2025-03-24 20:46:29,022 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SNAP
2025-03-24 20:46:29,022 - __main__ - INFO - Step 5: Generating analysis for SNAP...
2025-03-24 20:46:29,022 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SNAP with args: stock_analysis_data, market_context
2025-03-24 20:46:41,548 - __main__ - INFO - Market alignment for SNAP: contrary
2025-03-24 20:46:41,548 - __main__ - INFO - Creating stock analysis result for SNAP...
2025-03-24 20:46:41,548 - __main__ - INFO - Successfully added SNAP to stock analyses
2025-03-24 20:46:41,549 - __main__ - INFO - Updating Notion with analysis for SNAP...
2025-03-24 20:46:41,549 - __main__ - INFO - Sending Discord notification for SNAP...
2025-03-24 20:46:41,549 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2569 chars). Splitting into parts.
2025-03-24 20:46:41,550 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:41,855 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:41,856 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:41,857 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:42,182 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:42,183 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:42,184 - __main__ - INFO - Successfully sent Discord notification for SNAP
2025-03-24 20:46:42,184 - __main__ - INFO - Analyzing QUBT...
2025-03-24 20:46:42,184 - __main__ - INFO - Step 1: Getting stock data for QUBT...
2025-03-24 20:46:42,184 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:42,184 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:42,185 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:42,185 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 20:46:42,185 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:42,185 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:42,186 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:42,186 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:42,186 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 20:46:42,186 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:42,186 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,186 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,187 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,187 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,187 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,187 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,187 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,247 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1711
2025-03-24 20:46:42,248 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,248 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:42,248 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:42,249 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:46:42,253 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:42,255 - yfinance - DEBUG - QUBT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:42,259 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:42,260 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:42,260 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:42,262 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:42,262 - yfinance_client - INFO - Downloaded data for QUBT, shape: (35, 5)
2025-03-24 20:46:42,262 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:42,262 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:42,262 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:42,263 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 20:46:42,263 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:42,263 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:42,263 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:42,264 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:42,264 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 20:46:42,264 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:42,264 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,264 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,264 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,265 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,265 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,265 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,265 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,315 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2187
2025-03-24 20:46:42,316 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,317 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:42,317 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:42,318 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:46:42,319 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:46:42,321 - yfinance - DEBUG - QUBT: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:42,324 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:42,325 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:42,325 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:42,327 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:42,327 - yfinance_client - INFO - Downloaded data for QUBT, shape: (59, 5)
2025-03-24 20:46:42,333 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:46:42,335 - __main__ - INFO - Step 2: Getting options chain data for QUBT...
2025-03-24 20:46:42,336 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QUBT
2025-03-24 20:46:42,336 - yfinance - DEBUG - Entering history()
2025-03-24 20:46:42,336 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 20:46:42,337 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:42,337 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:42,337 - yfinance - DEBUG -   Entering get()
2025-03-24 20:46:42,337 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:46:42,338 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 20:46:42,338 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:42,338 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,338 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,338 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,339 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,339 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,339 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,339 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,390 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1165
2025-03-24 20:46:42,390 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,391 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:46:42,391 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:46:42,392 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:46:42,392 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:46:42,394 - yfinance - DEBUG - QUBT: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:42,398 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:42,398 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:42,398 - yfinance - DEBUG - Exiting history()
2025-03-24 20:46:42,399 - yfinance_client - INFO - Current price of QUBT: $8.75
2025-03-24 20:46:42,399 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:42,399 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:42,399 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT
2025-03-24 20:46:42,400 - yfinance - DEBUG - params=None
2025-03-24 20:46:42,400 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,400 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,400 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,400 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,400 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,401 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,401 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,466 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:42,467 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,467 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:42,467 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:42,468 - yfinance_client - INFO - Found 11 expiration dates for QUBT
2025-03-24 20:46:42,468 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:46:42,468 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:42,469 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:42,469 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1743120000
2025-03-24 20:46:42,469 - yfinance - DEBUG - params=None
2025-03-24 20:46:42,469 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,469 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,469 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,469 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,470 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,470 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,470 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,534 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:42,535 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,535 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:42,535 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:42,538 - yfinance_client - INFO - Retrieved 35 calls and 31 puts
2025-03-24 20:46:42,573 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:46:42,574 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:42,574 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:42,574 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1743724800
2025-03-24 20:46:42,575 - yfinance - DEBUG - params=None
2025-03-24 20:46:42,575 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,575 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,575 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,575 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,575 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,576 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,576 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,641 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:42,642 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,642 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:42,643 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:42,646 - yfinance_client - INFO - Retrieved 30 calls and 26 puts
2025-03-24 20:46:42,676 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:46:42,676 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:42,677 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:42,677 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1744329600
2025-03-24 20:46:42,677 - yfinance - DEBUG - params=None
2025-03-24 20:46:42,677 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,678 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,678 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,678 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,678 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,678 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,679 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,742 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:42,743 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,743 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:42,744 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:42,747 - yfinance_client - INFO - Retrieved 24 calls and 24 puts
2025-03-24 20:46:42,773 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:46:42,773 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:42,774 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:42,774 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QUBT?date=1744848000
2025-03-24 20:46:42,774 - yfinance - DEBUG - params=None
2025-03-24 20:46:42,775 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:42,775 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:42,775 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,775 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:42,775 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:42,776 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:42,776 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:42,850 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QUBT?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:46:42,851 - yfinance - DEBUG - response code=200
2025-03-24 20:46:42,851 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:42,851 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:42,854 - yfinance_client - INFO - Retrieved 41 calls and 41 puts
2025-03-24 20:46:42,899 - yfinance_client - INFO - Successfully fetched 4 option chains for QUBT
2025-03-24 20:46:42,900 - __main__ - INFO - Step 3: Preparing analysis data for QUBT...
2025-03-24 20:46:42,900 - __main__ - INFO - Step 4: Processing options data for QUBT...
2025-03-24 20:46:42,900 - __main__ - INFO - Found 4 expiration dates for QUBT
2025-03-24 20:46:42,901 - __main__ - INFO - Processing expiration date 2025-03-28 for QUBT...
2025-03-24 20:46:42,901 - __main__ - DEBUG - ATM calls shape before filtering: (35, 19)
2025-03-24 20:46:42,902 - __main__ - DEBUG - ATM puts shape before filtering: (31, 19)
2025-03-24 20:46:42,902 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:46:42,903 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:46:42,903 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:46:42,904 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:46:42,904 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:46:42,905 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:46:42,905 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:46:42,905 - __main__ - DEBUG - Volume data for QUBT: calls=23633, puts=12283
2025-03-24 20:46:42,906 - __main__ - INFO - Successfully processed expiration 2025-03-28 for QUBT
2025-03-24 20:46:42,906 - __main__ - INFO - Processing expiration date 2025-04-04 for QUBT...
2025-03-24 20:46:42,906 - __main__ - DEBUG - ATM calls shape before filtering: (30, 19)
2025-03-24 20:46:42,906 - __main__ - DEBUG - ATM puts shape before filtering: (26, 19)
2025-03-24 20:46:42,907 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:46:42,907 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:46:42,908 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:46:42,908 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:46:42,909 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:46:42,909 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:46:42,910 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:46:42,910 - __main__ - DEBUG - Volume data for QUBT: calls=6522, puts=5535
2025-03-24 20:46:42,910 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QUBT
2025-03-24 20:46:42,910 - __main__ - INFO - Processing expiration date 2025-04-11 for QUBT...
2025-03-24 20:46:42,911 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:46:42,911 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:46:42,912 - __main__ - DEBUG - ATM calls shape after filtering: (2, 19)
2025-03-24 20:46:42,912 - __main__ - DEBUG - ATM puts shape after filtering: (2, 19)
2025-03-24 20:46:42,912 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:46:42,913 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:46:42,913 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:46:42,914 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:46:42,914 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:46:42,915 - __main__ - DEBUG - Volume data for QUBT: calls=2035, puts=5344
2025-03-24 20:46:42,915 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QUBT
2025-03-24 20:46:42,915 - __main__ - INFO - Processing expiration date 2025-04-17 for QUBT...
2025-03-24 20:46:42,916 - __main__ - DEBUG - ATM calls shape before filtering: (41, 19)
2025-03-24 20:46:42,916 - __main__ - DEBUG - ATM puts shape before filtering: (41, 19)
2025-03-24 20:46:42,917 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:46:42,918 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:46:42,918 - __main__ - DEBUG - Finding ATM call for QUBT...
2025-03-24 20:46:42,918 - __main__ - DEBUG - ATM call for QUBT: strike=9.0
2025-03-24 20:46:42,918 - __main__ - DEBUG - Finding ATM put for QUBT...
2025-03-24 20:46:42,919 - __main__ - DEBUG - ATM put for QUBT: strike=9.0
2025-03-24 20:46:42,919 - __main__ - DEBUG - Calculating volume data for QUBT...
2025-03-24 20:46:42,920 - __main__ - DEBUG - Volume data for QUBT: calls=7939, puts=6148
2025-03-24 20:46:42,920 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QUBT
2025-03-24 20:46:42,920 - __main__ - INFO - Step 5: Generating analysis for QUBT...
2025-03-24 20:46:42,920 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QUBT with args: stock_analysis_data, market_context
2025-03-24 20:46:54,931 - __main__ - INFO - Market alignment for QUBT: aligned
2025-03-24 20:46:54,932 - __main__ - INFO - Creating stock analysis result for QUBT...
2025-03-24 20:46:54,932 - __main__ - INFO - Successfully added QUBT to stock analyses
2025-03-24 20:46:54,933 - __main__ - INFO - Updating Notion with analysis for QUBT...
2025-03-24 20:46:54,933 - __main__ - INFO - Sending Discord notification for QUBT...
2025-03-24 20:46:54,933 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2469 chars). Splitting into parts.
2025-03-24 20:46:54,934 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:55,237 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:55,238 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:55,239 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:46:55,518 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:46:55,519 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:46:55,519 - __main__ - INFO - Successfully sent Discord notification for QUBT
2025-03-24 20:46:55,519 - __main__ - INFO - Analyzing NAK...
2025-03-24 20:46:55,519 - __main__ - INFO - Step 1: Getting stock data for NAK...
2025-03-24 20:46:55,519 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:55,520 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:55,520 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:55,520 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 20:46:55,521 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:55,521 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:55,521 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:55,521 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:55,521 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 20:46:55,521 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:55,522 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:55,522 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:55,522 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,522 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:55,522 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:55,522 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,522 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:55,586 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1791
2025-03-24 20:46:55,587 - yfinance - DEBUG - response code=200
2025-03-24 20:46:55,587 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:55,588 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:55,589 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:46:55,593 - yfinance - DEBUG - NAK: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:55,594 - yfinance - DEBUG - NAK: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:55,598 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:46:55,598 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:55,599 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:55,600 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:55,601 - yfinance_client - INFO - Downloaded data for NAK, shape: (35, 5)
2025-03-24 20:46:55,601 - yfinance - DEBUG - Entering download()
2025-03-24 20:46:55,601 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:46:55,601 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:55,602 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 20:46:55,602 - yfinance - DEBUG -   Entering history()
2025-03-24 20:46:55,602 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:55,603 - yfinance - DEBUG -    Entering get()
2025-03-24 20:46:55,603 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:46:55,603 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 20:46:55,603 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:55,603 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:46:55,604 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:55,604 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,604 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:55,604 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:55,604 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,604 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:46:55,656 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1631
2025-03-24 20:46:55,657 - yfinance - DEBUG - response code=200
2025-03-24 20:46:55,657 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:46:55,658 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:46:55,659 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:46:55,660 - yfinance - DEBUG - NAK: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:46:55,662 - yfinance - DEBUG - NAK: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:55,665 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:46:55,666 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:46:55,666 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:55,668 - yfinance - DEBUG - Exiting download()
2025-03-24 20:46:55,668 - yfinance_client - INFO - Downloaded data for NAK, shape: (59, 5)
2025-03-24 20:46:55,674 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:46:55,676 - __main__ - INFO - Step 2: Getting options chain data for NAK...
2025-03-24 20:46:55,676 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for NAK
2025-03-24 20:46:55,677 - yfinance - DEBUG - Entering history()
2025-03-24 20:46:55,677 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 20:46:55,677 - yfinance - DEBUG -  Entering history()
2025-03-24 20:46:55,678 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:55,678 - yfinance - DEBUG -   Entering get()
2025-03-24 20:46:55,678 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:46:55,678 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 20:46:55,679 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:46:55,679 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:46:55,679 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:55,679 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,679 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:55,680 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:55,680 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,680 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:46:55,742 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1229
2025-03-24 20:46:55,743 - yfinance - DEBUG - response code=200
2025-03-24 20:46:55,743 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:46:55,743 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:46:55,744 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:46:55,745 - yfinance - DEBUG - NAK: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:46:55,747 - yfinance - DEBUG - NAK: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:55,751 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:46:55,751 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:46:55,751 - yfinance - DEBUG - Exiting history()
2025-03-24 20:46:55,752 - yfinance_client - INFO - Current price of NAK: $1.16
2025-03-24 20:46:55,752 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:55,752 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:55,752 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NAK
2025-03-24 20:46:55,752 - yfinance - DEBUG - params=None
2025-03-24 20:46:55,753 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:55,753 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:55,753 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,753 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:55,753 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:55,753 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,753 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:55,808 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NAK?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1639
2025-03-24 20:46:55,808 - yfinance - DEBUG - response code=200
2025-03-24 20:46:55,808 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:55,809 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:55,809 - yfinance_client - INFO - Found 4 expiration dates for NAK
2025-03-24 20:46:55,809 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:46:55,810 - yfinance - DEBUG - Entering get()
2025-03-24 20:46:55,810 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:46:55,810 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/NAK?date=1744848000
2025-03-24 20:46:55,810 - yfinance - DEBUG - params=None
2025-03-24 20:46:55,810 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:46:55,810 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:46:55,811 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,811 - yfinance - DEBUG - reusing cookie
2025-03-24 20:46:55,811 - yfinance - DEBUG - reusing crumb
2025-03-24 20:46:55,811 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:46:55,811 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:46:55,875 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/NAK?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1639
2025-03-24 20:46:55,876 - yfinance - DEBUG - response code=200
2025-03-24 20:46:55,876 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:46:55,876 - yfinance - DEBUG - Exiting get()
2025-03-24 20:46:55,879 - yfinance_client - INFO - Retrieved 4 calls and 3 puts
2025-03-24 20:46:55,885 - yfinance_client - INFO - Successfully fetched 1 option chains for NAK
2025-03-24 20:46:55,885 - __main__ - INFO - Step 3: Preparing analysis data for NAK...
2025-03-24 20:46:55,885 - __main__ - INFO - Step 4: Processing options data for NAK...
2025-03-24 20:46:55,886 - __main__ - INFO - Found 1 expiration dates for NAK
2025-03-24 20:46:55,886 - __main__ - INFO - Processing expiration date 2025-04-17 for NAK...
2025-03-24 20:46:55,887 - __main__ - DEBUG - ATM calls shape before filtering: (4, 19)
2025-03-24 20:46:55,887 - __main__ - DEBUG - ATM puts shape before filtering: (3, 19)
2025-03-24 20:46:55,888 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:46:55,888 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:46:55,888 - __main__ - WARNING - No valid ATM options found for NAK on 2025-04-17
2025-03-24 20:46:55,888 - __main__ - INFO - Step 5: Generating analysis for NAK...
2025-03-24 20:46:55,889 - __main__ - DEBUG - Calling get_stock_analysis_prompt for NAK with args: stock_analysis_data, market_context
2025-03-24 20:47:20,498 - __main__ - INFO - Market alignment for NAK: aligned
2025-03-24 20:47:20,498 - __main__ - INFO - Creating stock analysis result for NAK...
2025-03-24 20:47:20,499 - __main__ - INFO - Successfully added NAK to stock analyses
2025-03-24 20:47:20,499 - __main__ - INFO - Updating Notion with analysis for NAK...
2025-03-24 20:47:20,499 - __main__ - INFO - Sending Discord notification for NAK...
2025-03-24 20:47:20,499 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2479 chars). Splitting into parts.
2025-03-24 20:47:20,500 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:47:20,764 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:47:20,765 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:47:20,766 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:47:21,046 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:47:21,046 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:47:21,047 - __main__ - INFO - Successfully sent Discord notification for NAK
2025-03-24 20:47:21,047 - __main__ - INFO - Analyzing T...
2025-03-24 20:47:21,047 - __main__ - INFO - Step 1: Getting stock data for T...
2025-03-24 20:47:21,047 - yfinance - DEBUG - Entering download()
2025-03-24 20:47:21,048 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:47:21,048 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:21,048 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 20:47:21,048 - yfinance - DEBUG -   Entering history()
2025-03-24 20:47:21,049 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:21,049 - yfinance - DEBUG -    Entering get()
2025-03-24 20:47:21,049 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:47:21,049 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 20:47:21,049 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:21,049 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,050 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,050 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,050 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,050 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,050 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,050 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,116 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1503
2025-03-24 20:47:21,117 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,117 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:47:21,117 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:47:21,118 - yfinance - DEBUG - T: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:47:21,122 - yfinance - DEBUG - T: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:21,124 - yfinance - DEBUG - T: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:21,128 - yfinance - DEBUG - T: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:21,128 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:47:21,129 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:21,130 - yfinance - DEBUG - Exiting download()
2025-03-24 20:47:21,130 - yfinance_client - INFO - Downloaded data for T, shape: (35, 5)
2025-03-24 20:47:21,131 - yfinance - DEBUG - Entering download()
2025-03-24 20:47:21,131 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:47:21,131 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:21,132 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 20:47:21,132 - yfinance - DEBUG -   Entering history()
2025-03-24 20:47:21,132 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:21,133 - yfinance - DEBUG -    Entering get()
2025-03-24 20:47:21,133 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:47:21,133 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 20:47:21,133 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:21,133 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,133 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,134 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,134 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,134 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,134 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,134 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,245 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2070
2025-03-24 20:47:21,246 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,246 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:47:21,247 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:47:21,248 - yfinance - DEBUG - T: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:47:21,249 - yfinance - DEBUG - T: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:47:21,253 - yfinance - DEBUG - T: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:47:21,258 - yfinance - DEBUG - T: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:47:21,259 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:47:21,259 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:21,261 - yfinance - DEBUG - Exiting download()
2025-03-24 20:47:21,261 - yfinance_client - INFO - Downloaded data for T, shape: (59, 5)
2025-03-24 20:47:21,270 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:47:21,273 - __main__ - INFO - Step 2: Getting options chain data for T...
2025-03-24 20:47:21,274 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for T
2025-03-24 20:47:21,274 - yfinance - DEBUG - Entering history()
2025-03-24 20:47:21,274 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 20:47:21,275 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:21,275 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:21,275 - yfinance - DEBUG -   Entering get()
2025-03-24 20:47:21,276 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:47:21,276 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 20:47:21,276 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:21,276 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,277 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,277 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,277 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,277 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,277 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,277 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,381 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1179
2025-03-24 20:47:21,381 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,381 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:47:21,382 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:47:21,382 - yfinance - DEBUG - T: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:47:21,383 - yfinance - DEBUG - T: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:47:21,385 - yfinance - DEBUG - T: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:47:21,389 - yfinance - DEBUG - T: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:47:21,390 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:21,390 - yfinance - DEBUG - Exiting history()
2025-03-24 20:47:21,390 - yfinance_client - INFO - Current price of T: $26.96
2025-03-24 20:47:21,390 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:21,391 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:21,391 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T
2025-03-24 20:47:21,391 - yfinance - DEBUG - params=None
2025-03-24 20:47:21,391 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,391 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,392 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,392 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,392 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,392 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,392 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,466 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:21,466 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,467 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:21,467 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:21,467 - yfinance_client - INFO - Found 15 expiration dates for T
2025-03-24 20:47:21,468 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:47:21,468 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:21,468 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:21,469 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1743120000
2025-03-24 20:47:21,469 - yfinance - DEBUG - params=None
2025-03-24 20:47:21,469 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,469 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,469 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,470 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,470 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,470 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,470 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,535 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:21,535 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,536 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:21,536 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:21,539 - yfinance_client - INFO - Retrieved 26 calls and 25 puts
2025-03-24 20:47:21,567 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:47:21,568 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:21,568 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:21,569 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1743724800
2025-03-24 20:47:21,569 - yfinance - DEBUG - params=None
2025-03-24 20:47:21,569 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,569 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,569 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,569 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,570 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,570 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,570 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,632 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:21,633 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,633 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:21,634 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:21,637 - yfinance_client - INFO - Retrieved 23 calls and 25 puts
2025-03-24 20:47:21,664 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:47:21,664 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:21,665 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:21,665 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1744329600
2025-03-24 20:47:21,665 - yfinance - DEBUG - params=None
2025-03-24 20:47:21,665 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,666 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,666 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,666 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,666 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,666 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,666 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,728 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:21,729 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,729 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:21,730 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:21,732 - yfinance_client - INFO - Retrieved 18 calls and 24 puts
2025-03-24 20:47:21,757 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:47:21,757 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:21,757 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:21,757 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/T?date=1744848000
2025-03-24 20:47:21,758 - yfinance - DEBUG - params=None
2025-03-24 20:47:21,758 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:21,758 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:21,758 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,758 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:21,758 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:21,759 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:21,759 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:21,822 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/T?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:21,823 - yfinance - DEBUG - response code=200
2025-03-24 20:47:21,823 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:21,823 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:21,826 - yfinance_client - INFO - Retrieved 24 calls and 25 puts
2025-03-24 20:47:21,853 - yfinance_client - INFO - Successfully fetched 4 option chains for T
2025-03-24 20:47:21,854 - __main__ - INFO - Step 3: Preparing analysis data for T...
2025-03-24 20:47:21,854 - __main__ - INFO - Step 4: Processing options data for T...
2025-03-24 20:47:21,854 - __main__ - INFO - Found 4 expiration dates for T
2025-03-24 20:47:21,854 - __main__ - INFO - Processing expiration date 2025-03-28 for T...
2025-03-24 20:47:21,855 - __main__ - DEBUG - ATM calls shape before filtering: (26, 19)
2025-03-24 20:47:21,855 - __main__ - DEBUG - ATM puts shape before filtering: (25, 19)
2025-03-24 20:47:21,856 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:47:21,856 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:47:21,857 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:47:21,857 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:47:21,857 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:47:21,857 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:47:21,858 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:47:21,858 - __main__ - DEBUG - Volume data for T: calls=7579, puts=6957
2025-03-24 20:47:21,858 - __main__ - INFO - Successfully processed expiration 2025-03-28 for T
2025-03-24 20:47:21,859 - __main__ - INFO - Processing expiration date 2025-04-04 for T...
2025-03-24 20:47:21,859 - __main__ - DEBUG - ATM calls shape before filtering: (23, 19)
2025-03-24 20:47:21,859 - __main__ - DEBUG - ATM puts shape before filtering: (25, 19)
2025-03-24 20:47:21,860 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:47:21,860 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:47:21,860 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:47:21,861 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:47:21,861 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:47:21,863 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:47:21,863 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:47:21,863 - __main__ - DEBUG - Volume data for T: calls=2454, puts=4053
2025-03-24 20:47:21,864 - __main__ - INFO - Successfully processed expiration 2025-04-04 for T
2025-03-24 20:47:21,864 - __main__ - INFO - Processing expiration date 2025-04-11 for T...
2025-03-24 20:47:21,864 - __main__ - DEBUG - ATM calls shape before filtering: (18, 19)
2025-03-24 20:47:21,864 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:47:21,865 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:47:21,865 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:47:21,865 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:47:21,866 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:47:21,866 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:47:21,867 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:47:21,867 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:47:21,868 - __main__ - DEBUG - Volume data for T: calls=882, puts=513
2025-03-24 20:47:21,868 - __main__ - INFO - Successfully processed expiration 2025-04-11 for T
2025-03-24 20:47:21,868 - __main__ - INFO - Processing expiration date 2025-04-17 for T...
2025-03-24 20:47:21,869 - __main__ - DEBUG - ATM calls shape before filtering: (24, 19)
2025-03-24 20:47:21,869 - __main__ - DEBUG - ATM puts shape before filtering: (25, 19)
2025-03-24 20:47:21,869 - __main__ - DEBUG - ATM calls shape after filtering: (3, 19)
2025-03-24 20:47:21,870 - __main__ - DEBUG - ATM puts shape after filtering: (3, 19)
2025-03-24 20:47:21,870 - __main__ - DEBUG - Finding ATM call for T...
2025-03-24 20:47:21,871 - __main__ - DEBUG - ATM call for T: strike=27.0
2025-03-24 20:47:21,871 - __main__ - DEBUG - Finding ATM put for T...
2025-03-24 20:47:21,872 - __main__ - DEBUG - ATM put for T: strike=27.0
2025-03-24 20:47:21,872 - __main__ - DEBUG - Calculating volume data for T...
2025-03-24 20:47:21,872 - __main__ - DEBUG - Volume data for T: calls=6218, puts=2425
2025-03-24 20:47:21,872 - __main__ - INFO - Successfully processed expiration 2025-04-17 for T
2025-03-24 20:47:21,873 - __main__ - INFO - Step 5: Generating analysis for T...
2025-03-24 20:47:21,873 - __main__ - DEBUG - Calling get_stock_analysis_prompt for T with args: stock_analysis_data, market_context
2025-03-24 20:47:34,119 - __main__ - INFO - Market alignment for T: aligned
2025-03-24 20:47:34,120 - __main__ - INFO - Creating stock analysis result for T...
2025-03-24 20:47:34,120 - __main__ - INFO - Successfully added T to stock analyses
2025-03-24 20:47:34,120 - __main__ - INFO - Updating Notion with analysis for T...
2025-03-24 20:47:34,120 - __main__ - INFO - Sending Discord notification for T...
2025-03-24 20:47:34,121 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2631 chars). Splitting into parts.
2025-03-24 20:47:34,122 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:47:34,402 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:47:34,403 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:47:34,404 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:47:34,642 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:47:34,643 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:47:34,644 - __main__ - INFO - Successfully sent Discord notification for T
2025-03-24 20:47:34,644 - __main__ - INFO - Analyzing CMG...
2025-03-24 20:47:34,644 - __main__ - INFO - Step 1: Getting stock data for CMG...
2025-03-24 20:47:34,645 - yfinance - DEBUG - Entering download()
2025-03-24 20:47:34,645 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:47:34,645 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:34,646 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 20:47:34,646 - yfinance - DEBUG -   Entering history()
2025-03-24 20:47:34,647 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:34,647 - yfinance - DEBUG -    Entering get()
2025-03-24 20:47:34,647 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:47:34,647 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 20:47:34,648 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:34,648 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:47:34,648 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:34,648 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,648 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:34,649 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:34,649 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,649 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:47:34,720 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1550
2025-03-24 20:47:34,721 - yfinance - DEBUG - response code=200
2025-03-24 20:47:34,721 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:47:34,721 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:47:34,722 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:47:34,727 - yfinance - DEBUG - CMG: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:34,728 - yfinance - DEBUG - CMG: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:34,732 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:34,732 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:47:34,733 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:34,734 - yfinance - DEBUG - Exiting download()
2025-03-24 20:47:34,734 - yfinance_client - INFO - Downloaded data for CMG, shape: (35, 5)
2025-03-24 20:47:34,735 - yfinance - DEBUG - Entering download()
2025-03-24 20:47:34,735 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:47:34,735 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:34,736 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 20:47:34,736 - yfinance - DEBUG -   Entering history()
2025-03-24 20:47:34,736 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:34,737 - yfinance - DEBUG -    Entering get()
2025-03-24 20:47:34,737 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:47:34,737 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 20:47:34,737 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:34,737 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:47:34,737 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:34,738 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,738 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:34,738 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:34,738 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,738 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:47:34,793 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2020
2025-03-24 20:47:34,794 - yfinance - DEBUG - response code=200
2025-03-24 20:47:34,794 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:47:34,794 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:47:34,795 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:47:34,796 - yfinance - DEBUG - CMG: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:47:34,798 - yfinance - DEBUG - CMG: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:47:34,802 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:47:34,802 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:47:34,802 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:34,804 - yfinance - DEBUG - Exiting download()
2025-03-24 20:47:34,804 - yfinance_client - INFO - Downloaded data for CMG, shape: (59, 5)
2025-03-24 20:47:34,810 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:47:34,813 - __main__ - INFO - Step 2: Getting options chain data for CMG...
2025-03-24 20:47:34,813 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for CMG
2025-03-24 20:47:34,814 - yfinance - DEBUG - Entering history()
2025-03-24 20:47:34,814 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 20:47:34,814 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:34,815 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:34,815 - yfinance - DEBUG -   Entering get()
2025-03-24 20:47:34,815 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:47:34,815 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 20:47:34,815 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:34,816 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:47:34,816 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:34,816 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,816 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:34,816 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:34,816 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,816 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:47:34,880 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1219
2025-03-24 20:47:34,881 - yfinance - DEBUG - response code=200
2025-03-24 20:47:34,881 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:47:34,881 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:47:34,882 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:47:34,883 - yfinance - DEBUG - CMG: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:47:34,885 - yfinance - DEBUG - CMG: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:47:34,889 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:47:34,889 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:34,889 - yfinance - DEBUG - Exiting history()
2025-03-24 20:47:34,889 - yfinance_client - INFO - Current price of CMG: $49.60
2025-03-24 20:47:34,890 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:34,890 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:34,890 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG
2025-03-24 20:47:34,890 - yfinance - DEBUG - params=None
2025-03-24 20:47:34,890 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:34,890 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:34,891 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,891 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:34,891 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:34,891 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,891 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:34,960 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:34,961 - yfinance - DEBUG - response code=200
2025-03-24 20:47:34,961 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:34,961 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:34,962 - yfinance_client - INFO - Found 15 expiration dates for CMG
2025-03-24 20:47:34,963 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:47:34,963 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:34,963 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:34,964 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1743120000
2025-03-24 20:47:34,964 - yfinance - DEBUG - params=None
2025-03-24 20:47:34,964 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:34,964 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:34,964 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,965 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:34,965 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:34,965 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:34,965 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:35,036 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:35,037 - yfinance - DEBUG - response code=200
2025-03-24 20:47:35,037 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:35,037 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:35,040 - yfinance_client - INFO - Retrieved 39 calls and 37 puts
2025-03-24 20:47:35,081 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:47:35,081 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:35,081 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:35,082 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1743724800
2025-03-24 20:47:35,082 - yfinance - DEBUG - params=None
2025-03-24 20:47:35,082 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:35,082 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:35,082 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:35,082 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:35,083 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:35,083 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:35,083 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:35,167 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:35,168 - yfinance - DEBUG - response code=200
2025-03-24 20:47:35,168 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:35,169 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:35,172 - yfinance_client - INFO - Retrieved 36 calls and 32 puts
2025-03-24 20:47:35,208 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:47:35,209 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:35,209 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:35,209 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1744329600
2025-03-24 20:47:35,209 - yfinance - DEBUG - params=None
2025-03-24 20:47:35,210 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:35,210 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:35,210 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:35,210 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:35,210 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:35,210 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:35,210 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:35,276 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:35,276 - yfinance - DEBUG - response code=200
2025-03-24 20:47:35,277 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:35,277 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:35,280 - yfinance_client - INFO - Retrieved 29 calls and 24 puts
2025-03-24 20:47:35,309 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:47:35,310 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:35,310 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:35,310 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/CMG?date=1744848000
2025-03-24 20:47:35,310 - yfinance - DEBUG - params=None
2025-03-24 20:47:35,310 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:35,311 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:35,311 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:35,311 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:35,311 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:35,311 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:35,311 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:35,366 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/CMG?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:35,367 - yfinance - DEBUG - response code=200
2025-03-24 20:47:35,367 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:35,367 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:35,370 - yfinance_client - INFO - Retrieved 11 calls and 8 puts
2025-03-24 20:47:35,383 - yfinance_client - INFO - Successfully fetched 4 option chains for CMG
2025-03-24 20:47:35,383 - __main__ - INFO - Step 3: Preparing analysis data for CMG...
2025-03-24 20:47:35,383 - __main__ - INFO - Step 4: Processing options data for CMG...
2025-03-24 20:47:35,384 - __main__ - INFO - Found 4 expiration dates for CMG
2025-03-24 20:47:35,384 - __main__ - INFO - Processing expiration date 2025-03-28 for CMG...
2025-03-24 20:47:35,384 - __main__ - DEBUG - ATM calls shape before filtering: (39, 19)
2025-03-24 20:47:35,385 - __main__ - DEBUG - ATM puts shape before filtering: (37, 19)
2025-03-24 20:47:35,385 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:47:35,386 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:47:35,386 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:47:35,386 - __main__ - DEBUG - ATM call for CMG: strike=49.5
2025-03-24 20:47:35,387 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:47:35,387 - __main__ - DEBUG - ATM put for CMG: strike=49.5
2025-03-24 20:47:35,387 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:47:35,388 - __main__ - DEBUG - Volume data for CMG: calls=7618, puts=11127
2025-03-24 20:47:35,388 - __main__ - INFO - Successfully processed expiration 2025-03-28 for CMG
2025-03-24 20:47:35,388 - __main__ - INFO - Processing expiration date 2025-04-04 for CMG...
2025-03-24 20:47:35,389 - __main__ - DEBUG - ATM calls shape before filtering: (36, 19)
2025-03-24 20:47:35,389 - __main__ - DEBUG - ATM puts shape before filtering: (32, 19)
2025-03-24 20:47:35,390 - __main__ - DEBUG - ATM calls shape after filtering: (8, 19)
2025-03-24 20:47:35,390 - __main__ - DEBUG - ATM puts shape after filtering: (8, 19)
2025-03-24 20:47:35,390 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:47:35,391 - __main__ - DEBUG - ATM call for CMG: strike=49.5
2025-03-24 20:47:35,391 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:47:35,392 - __main__ - DEBUG - ATM put for CMG: strike=49.5
2025-03-24 20:47:35,392 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:47:35,393 - __main__ - DEBUG - Volume data for CMG: calls=2860, puts=1277
2025-03-24 20:47:35,393 - __main__ - INFO - Successfully processed expiration 2025-04-04 for CMG
2025-03-24 20:47:35,393 - __main__ - INFO - Processing expiration date 2025-04-11 for CMG...
2025-03-24 20:47:35,394 - __main__ - DEBUG - ATM calls shape before filtering: (29, 19)
2025-03-24 20:47:35,394 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:47:35,395 - __main__ - DEBUG - ATM calls shape after filtering: (5, 19)
2025-03-24 20:47:35,395 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:47:35,395 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:47:35,396 - __main__ - DEBUG - ATM call for CMG: strike=50.0
2025-03-24 20:47:35,396 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:47:35,397 - __main__ - DEBUG - ATM put for CMG: strike=50.0
2025-03-24 20:47:35,397 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:47:35,398 - __main__ - DEBUG - Volume data for CMG: calls=985, puts=428
2025-03-24 20:47:35,398 - __main__ - INFO - Successfully processed expiration 2025-04-11 for CMG
2025-03-24 20:47:35,398 - __main__ - INFO - Processing expiration date 2025-04-17 for CMG...
2025-03-24 20:47:35,398 - __main__ - DEBUG - ATM calls shape before filtering: (11, 19)
2025-03-24 20:47:35,399 - __main__ - DEBUG - ATM puts shape before filtering: (8, 19)
2025-03-24 20:47:35,399 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:47:35,400 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:47:35,400 - __main__ - DEBUG - Finding ATM call for CMG...
2025-03-24 20:47:35,400 - __main__ - DEBUG - ATM call for CMG: strike=50.0
2025-03-24 20:47:35,401 - __main__ - DEBUG - Finding ATM put for CMG...
2025-03-24 20:47:35,401 - __main__ - DEBUG - ATM put for CMG: strike=50.0
2025-03-24 20:47:35,401 - __main__ - DEBUG - Calculating volume data for CMG...
2025-03-24 20:47:35,402 - __main__ - DEBUG - Volume data for CMG: calls=3184, puts=551
2025-03-24 20:47:35,402 - __main__ - INFO - Successfully processed expiration 2025-04-17 for CMG
2025-03-24 20:47:35,402 - __main__ - INFO - Step 5: Generating analysis for CMG...
2025-03-24 20:47:35,402 - __main__ - DEBUG - Calling get_stock_analysis_prompt for CMG with args: stock_analysis_data, market_context
2025-03-24 20:47:48,890 - __main__ - INFO - Market alignment for CMG: **
2025-03-24 20:47:48,891 - __main__ - INFO - Creating stock analysis result for CMG...
2025-03-24 20:47:48,891 - __main__ - INFO - Successfully added CMG to stock analyses
2025-03-24 20:47:48,891 - __main__ - INFO - Updating Notion with analysis for CMG...
2025-03-24 20:47:48,892 - __main__ - INFO - Sending Discord notification for CMG...
2025-03-24 20:47:48,892 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2895 chars). Splitting into parts.
2025-03-24 20:47:48,893 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:47:49,160 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:47:49,161 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:47:49,162 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:47:49,427 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:47:49,429 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:47:49,429 - __main__ - INFO - Successfully sent Discord notification for CMG
2025-03-24 20:47:49,429 - __main__ - INFO - Analyzing VZ...
2025-03-24 20:47:49,429 - __main__ - INFO - Step 1: Getting stock data for VZ...
2025-03-24 20:47:49,429 - yfinance - DEBUG - Entering download()
2025-03-24 20:47:49,430 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:47:49,430 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:49,430 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 20:47:49,431 - yfinance - DEBUG -   Entering history()
2025-03-24 20:47:49,431 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:49,431 - yfinance - DEBUG -    Entering get()
2025-03-24 20:47:49,431 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:47:49,431 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 20:47:49,432 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:49,432 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:47:49,432 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:49,432 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,432 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:49,432 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:49,433 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,433 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:47:49,494 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1565
2025-03-24 20:47:49,495 - yfinance - DEBUG - response code=200
2025-03-24 20:47:49,495 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:47:49,495 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:47:49,496 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:47:49,500 - yfinance - DEBUG - VZ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:49,502 - yfinance - DEBUG - VZ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:49,506 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:47:49,506 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:47:49,506 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:49,508 - yfinance - DEBUG - Exiting download()
2025-03-24 20:47:49,508 - yfinance_client - INFO - Downloaded data for VZ, shape: (35, 5)
2025-03-24 20:47:49,508 - yfinance - DEBUG - Entering download()
2025-03-24 20:47:49,508 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:47:49,509 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:49,509 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 20:47:49,509 - yfinance - DEBUG -   Entering history()
2025-03-24 20:47:49,509 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:49,510 - yfinance - DEBUG -    Entering get()
2025-03-24 20:47:49,510 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:47:49,510 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 20:47:49,510 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:49,510 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:47:49,510 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:49,511 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,511 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:49,511 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:49,511 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,511 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:47:49,612 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2115
2025-03-24 20:47:49,613 - yfinance - DEBUG - response code=200
2025-03-24 20:47:49,613 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:47:49,613 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:47:49,614 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:47:49,615 - yfinance - DEBUG - VZ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:47:49,619 - yfinance - DEBUG - VZ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:47:49,622 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:47:49,623 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:47:49,623 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:49,625 - yfinance - DEBUG - Exiting download()
2025-03-24 20:47:49,625 - yfinance_client - INFO - Downloaded data for VZ, shape: (59, 5)
2025-03-24 20:47:49,630 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:47:49,633 - __main__ - INFO - Step 2: Getting options chain data for VZ...
2025-03-24 20:47:49,633 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for VZ
2025-03-24 20:47:49,634 - yfinance - DEBUG - Entering history()
2025-03-24 20:47:49,634 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 20:47:49,635 - yfinance - DEBUG -  Entering history()
2025-03-24 20:47:49,635 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:49,635 - yfinance - DEBUG -   Entering get()
2025-03-24 20:47:49,635 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:47:49,635 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 20:47:49,636 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:47:49,636 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:47:49,636 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:49,636 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,636 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:49,636 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:49,637 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,637 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:47:49,774 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1215
2025-03-24 20:47:49,775 - yfinance - DEBUG - response code=200
2025-03-24 20:47:49,775 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:47:49,775 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:47:49,776 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:47:49,777 - yfinance - DEBUG - VZ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:47:49,779 - yfinance - DEBUG - VZ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:47:49,782 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:47:49,783 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:47:49,783 - yfinance - DEBUG - Exiting history()
2025-03-24 20:47:49,783 - yfinance_client - INFO - Current price of VZ: $43.56
2025-03-24 20:47:49,783 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:49,784 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:49,784 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ
2025-03-24 20:47:49,784 - yfinance - DEBUG - params=None
2025-03-24 20:47:49,784 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:49,784 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:49,784 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,784 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:49,785 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:49,785 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,785 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:49,878 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:49,879 - yfinance - DEBUG - response code=200
2025-03-24 20:47:49,879 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:49,880 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:49,880 - yfinance_client - INFO - Found 16 expiration dates for VZ
2025-03-24 20:47:49,881 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:47:49,882 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:49,882 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:49,882 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1743120000
2025-03-24 20:47:49,882 - yfinance - DEBUG - params=None
2025-03-24 20:47:49,883 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:49,883 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:49,883 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,883 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:49,883 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:49,883 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:49,883 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:49,966 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:49,967 - yfinance - DEBUG - response code=200
2025-03-24 20:47:49,967 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:49,967 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:49,970 - yfinance_client - INFO - Retrieved 35 calls and 27 puts
2025-03-24 20:47:50,002 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:47:50,002 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:50,003 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:50,003 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1743724800
2025-03-24 20:47:50,003 - yfinance - DEBUG - params=None
2025-03-24 20:47:50,004 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:50,004 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:50,004 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:50,004 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:50,004 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:50,005 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:50,005 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:50,072 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:50,072 - yfinance - DEBUG - response code=200
2025-03-24 20:47:50,073 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:50,073 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:50,076 - yfinance_client - INFO - Retrieved 27 calls and 24 puts
2025-03-24 20:47:50,104 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:47:50,105 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:50,105 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:50,105 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1744329600
2025-03-24 20:47:50,105 - yfinance - DEBUG - params=None
2025-03-24 20:47:50,106 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:50,106 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:50,106 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:50,106 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:50,106 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:50,106 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:50,106 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:50,223 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:50,224 - yfinance - DEBUG - response code=200
2025-03-24 20:47:50,224 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:50,224 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:50,227 - yfinance_client - INFO - Retrieved 21 calls and 18 puts
2025-03-24 20:47:50,249 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:47:50,250 - yfinance - DEBUG - Entering get()
2025-03-24 20:47:50,250 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:47:50,250 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/VZ?date=1744848000
2025-03-24 20:47:50,251 - yfinance - DEBUG - params=None
2025-03-24 20:47:50,251 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:47:50,251 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:47:50,251 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:47:50,251 - yfinance - DEBUG - reusing cookie
2025-03-24 20:47:50,252 - yfinance - DEBUG - reusing crumb
2025-03-24 20:47:50,252 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:47:50,252 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:47:50,319 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/VZ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:47:50,320 - yfinance - DEBUG - response code=200
2025-03-24 20:47:50,320 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:47:50,320 - yfinance - DEBUG - Exiting get()
2025-03-24 20:47:50,323 - yfinance_client - INFO - Retrieved 25 calls and 24 puts
2025-03-24 20:47:50,350 - yfinance_client - INFO - Successfully fetched 4 option chains for VZ
2025-03-24 20:47:50,350 - __main__ - INFO - Step 3: Preparing analysis data for VZ...
2025-03-24 20:47:50,351 - __main__ - INFO - Step 4: Processing options data for VZ...
2025-03-24 20:47:50,351 - __main__ - INFO - Found 4 expiration dates for VZ
2025-03-24 20:47:50,351 - __main__ - INFO - Processing expiration date 2025-03-28 for VZ...
2025-03-24 20:47:50,352 - __main__ - DEBUG - ATM calls shape before filtering: (35, 19)
2025-03-24 20:47:50,352 - __main__ - DEBUG - ATM puts shape before filtering: (27, 19)
2025-03-24 20:47:50,353 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:47:50,353 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:47:50,353 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:47:50,354 - __main__ - DEBUG - ATM call for VZ: strike=43.5
2025-03-24 20:47:50,354 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:47:50,355 - __main__ - DEBUG - ATM put for VZ: strike=43.5
2025-03-24 20:47:50,355 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:47:50,356 - __main__ - DEBUG - Volume data for VZ: calls=9060, puts=5060
2025-03-24 20:47:50,356 - __main__ - INFO - Successfully processed expiration 2025-03-28 for VZ
2025-03-24 20:47:50,356 - __main__ - INFO - Processing expiration date 2025-04-04 for VZ...
2025-03-24 20:47:50,357 - __main__ - DEBUG - ATM calls shape before filtering: (27, 19)
2025-03-24 20:47:50,357 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:47:50,357 - __main__ - DEBUG - ATM calls shape after filtering: (9, 19)
2025-03-24 20:47:50,358 - __main__ - DEBUG - ATM puts shape after filtering: (9, 19)
2025-03-24 20:47:50,358 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:47:50,359 - __main__ - DEBUG - ATM call for VZ: strike=43.5
2025-03-24 20:47:50,359 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:47:50,360 - __main__ - DEBUG - ATM put for VZ: strike=43.5
2025-03-24 20:47:50,360 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:47:50,361 - __main__ - DEBUG - Volume data for VZ: calls=1211, puts=994
2025-03-24 20:47:50,361 - __main__ - INFO - Successfully processed expiration 2025-04-04 for VZ
2025-03-24 20:47:50,361 - __main__ - INFO - Processing expiration date 2025-04-11 for VZ...
2025-03-24 20:47:50,361 - __main__ - DEBUG - ATM calls shape before filtering: (21, 19)
2025-03-24 20:47:50,362 - __main__ - DEBUG - ATM puts shape before filtering: (18, 19)
2025-03-24 20:47:50,362 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:47:50,363 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:47:50,363 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:47:50,363 - __main__ - DEBUG - ATM call for VZ: strike=44.0
2025-03-24 20:47:50,364 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:47:50,364 - __main__ - DEBUG - ATM put for VZ: strike=44.0
2025-03-24 20:47:50,364 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:47:50,365 - __main__ - DEBUG - Volume data for VZ: calls=1338, puts=1931
2025-03-24 20:47:50,365 - __main__ - INFO - Successfully processed expiration 2025-04-11 for VZ
2025-03-24 20:47:50,365 - __main__ - INFO - Processing expiration date 2025-04-17 for VZ...
2025-03-24 20:47:50,366 - __main__ - DEBUG - ATM calls shape before filtering: (25, 19)
2025-03-24 20:47:50,366 - __main__ - DEBUG - ATM puts shape before filtering: (24, 19)
2025-03-24 20:47:50,367 - __main__ - DEBUG - ATM calls shape after filtering: (4, 19)
2025-03-24 20:47:50,367 - __main__ - DEBUG - ATM puts shape after filtering: (4, 19)
2025-03-24 20:47:50,367 - __main__ - DEBUG - Finding ATM call for VZ...
2025-03-24 20:47:50,368 - __main__ - DEBUG - ATM call for VZ: strike=44.0
2025-03-24 20:47:50,368 - __main__ - DEBUG - Finding ATM put for VZ...
2025-03-24 20:47:50,369 - __main__ - DEBUG - ATM put for VZ: strike=44.0
2025-03-24 20:47:50,369 - __main__ - DEBUG - Calculating volume data for VZ...
2025-03-24 20:47:50,370 - __main__ - DEBUG - Volume data for VZ: calls=5171, puts=1327
2025-03-24 20:47:50,370 - __main__ - INFO - Successfully processed expiration 2025-04-17 for VZ
2025-03-24 20:47:50,370 - __main__ - INFO - Step 5: Generating analysis for VZ...
2025-03-24 20:47:50,370 - __main__ - DEBUG - Calling get_stock_analysis_prompt for VZ with args: stock_analysis_data, market_context
2025-03-24 20:48:03,963 - __main__ - INFO - Market alignment for VZ: aligned
2025-03-24 20:48:03,963 - __main__ - INFO - Creating stock analysis result for VZ...
2025-03-24 20:48:03,963 - __main__ - INFO - Successfully added VZ to stock analyses
2025-03-24 20:48:03,964 - __main__ - INFO - Updating Notion with analysis for VZ...
2025-03-24 20:48:03,964 - __main__ - INFO - Sending Discord notification for VZ...
2025-03-24 20:48:03,964 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2692 chars). Splitting into parts.
2025-03-24 20:48:03,965 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:04,264 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:04,265 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:04,266 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:04,551 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:04,552 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:04,552 - __main__ - INFO - Successfully sent Discord notification for VZ
2025-03-24 20:48:04,552 - __main__ - INFO - Analyzing AMDL...
2025-03-24 20:48:04,553 - __main__ - INFO - Step 1: Getting stock data for AMDL...
2025-03-24 20:48:04,553 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:04,553 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:04,553 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:04,554 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMDL', 1, 0])
2025-03-24 20:48:04,554 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:04,554 - yfinance - DEBUG - AMDL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:04,555 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:04,555 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:04,555 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMDL
2025-03-24 20:48:04,555 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:04,555 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:04,555 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:04,556 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,556 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:04,556 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:04,556 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,556 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:04,662 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMDL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1793
2025-03-24 20:48:04,663 - yfinance - DEBUG - response code=200
2025-03-24 20:48:04,664 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:04,664 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:04,665 - yfinance - DEBUG - AMDL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:48:04,669 - yfinance - DEBUG - AMDL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:04,671 - yfinance - DEBUG - AMDL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:04,675 - yfinance - DEBUG - AMDL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:04,675 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:04,676 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:04,677 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:04,677 - yfinance_client - INFO - Downloaded data for AMDL, shape: (35, 5)
2025-03-24 20:48:04,678 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:04,678 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:04,678 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:04,678 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMDL', 1, 0])
2025-03-24 20:48:04,679 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:04,679 - yfinance - DEBUG - AMDL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:04,679 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:04,679 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:04,680 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMDL
2025-03-24 20:48:04,680 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:04,680 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:04,680 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:04,680 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,681 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:04,681 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:04,681 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,681 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:04,784 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMDL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2113
2025-03-24 20:48:04,785 - yfinance - DEBUG - response code=200
2025-03-24 20:48:04,786 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:04,786 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:04,787 - yfinance - DEBUG - AMDL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:48:04,788 - yfinance - DEBUG - AMDL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:48:04,790 - yfinance - DEBUG - AMDL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:04,794 - yfinance - DEBUG - AMDL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:04,794 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:04,794 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:04,796 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:04,796 - yfinance_client - INFO - Downloaded data for AMDL, shape: (59, 5)
2025-03-24 20:48:04,802 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:48:04,805 - __main__ - INFO - Step 2: Getting options chain data for AMDL...
2025-03-24 20:48:04,805 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for AMDL
2025-03-24 20:48:04,805 - yfinance - DEBUG - Entering history()
2025-03-24 20:48:04,806 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMDL', 1, 0])
2025-03-24 20:48:04,806 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:04,806 - yfinance - DEBUG - AMDL: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:04,806 - yfinance - DEBUG -   Entering get()
2025-03-24 20:48:04,807 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:48:04,807 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMDL
2025-03-24 20:48:04,807 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:04,807 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:48:04,807 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:04,808 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,808 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:04,808 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:04,808 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,808 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:48:04,863 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMDL?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1211
2025-03-24 20:48:04,864 - yfinance - DEBUG - response code=200
2025-03-24 20:48:04,864 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:48:04,864 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:48:04,865 - yfinance - DEBUG - AMDL: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:48:04,866 - yfinance - DEBUG - AMDL: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:48:04,868 - yfinance - DEBUG - AMDL: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:04,871 - yfinance - DEBUG - AMDL: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:04,872 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:04,872 - yfinance - DEBUG - Exiting history()
2025-03-24 20:48:04,872 - yfinance_client - INFO - Current price of AMDL: $6.37
2025-03-24 20:48:04,872 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:04,873 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:04,873 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMDL
2025-03-24 20:48:04,873 - yfinance - DEBUG - params=None
2025-03-24 20:48:04,873 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:04,873 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:04,873 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,874 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:04,874 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:04,874 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,874 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:04,938 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMDL?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1934
2025-03-24 20:48:04,938 - yfinance - DEBUG - response code=200
2025-03-24 20:48:04,939 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:04,939 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:04,940 - yfinance_client - INFO - Found 4 expiration dates for AMDL
2025-03-24 20:48:04,940 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:48:04,940 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:04,940 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:04,941 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/AMDL?date=1744848000
2025-03-24 20:48:04,941 - yfinance - DEBUG - params=None
2025-03-24 20:48:04,941 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:04,941 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:04,941 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,942 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:04,942 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:04,942 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:04,942 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:05,006 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/AMDL?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1937
2025-03-24 20:48:05,006 - yfinance - DEBUG - response code=200
2025-03-24 20:48:05,007 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:05,007 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:05,010 - yfinance_client - INFO - Retrieved 9 calls and 8 puts
2025-03-24 20:48:05,020 - yfinance_client - INFO - Successfully fetched 1 option chains for AMDL
2025-03-24 20:48:05,021 - __main__ - INFO - Step 3: Preparing analysis data for AMDL...
2025-03-24 20:48:05,021 - __main__ - INFO - Step 4: Processing options data for AMDL...
2025-03-24 20:48:05,021 - __main__ - INFO - Found 1 expiration dates for AMDL
2025-03-24 20:48:05,022 - __main__ - INFO - Processing expiration date 2025-04-17 for AMDL...
2025-03-24 20:48:05,022 - __main__ - DEBUG - ATM calls shape before filtering: (9, 19)
2025-03-24 20:48:05,023 - __main__ - DEBUG - ATM puts shape before filtering: (8, 19)
2025-03-24 20:48:05,024 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:48:05,024 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:48:05,024 - __main__ - WARNING - No valid ATM options found for AMDL on 2025-04-17
2025-03-24 20:48:05,025 - __main__ - INFO - Step 5: Generating analysis for AMDL...
2025-03-24 20:48:05,025 - __main__ - DEBUG - Calling get_stock_analysis_prompt for AMDL with args: stock_analysis_data, market_context
2025-03-24 20:48:16,822 - __main__ - INFO - Market alignment for AMDL: aligned
2025-03-24 20:48:16,822 - __main__ - INFO - Creating stock analysis result for AMDL...
2025-03-24 20:48:16,822 - __main__ - INFO - Successfully added AMDL to stock analyses
2025-03-24 20:48:16,823 - __main__ - INFO - Updating Notion with analysis for AMDL...
2025-03-24 20:48:16,823 - __main__ - INFO - Sending Discord notification for AMDL...
2025-03-24 20:48:16,823 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2481 chars). Splitting into parts.
2025-03-24 20:48:16,824 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:17,071 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:17,072 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:17,074 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:17,416 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:17,417 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:17,417 - __main__ - INFO - Successfully sent Discord notification for AMDL
2025-03-24 20:48:17,417 - __main__ - INFO - Analyzing OKLO...
2025-03-24 20:48:17,418 - __main__ - INFO - Step 1: Getting stock data for OKLO...
2025-03-24 20:48:17,418 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:17,418 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:17,418 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:17,419 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['OKLO', 1, 0])
2025-03-24 20:48:17,419 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:17,419 - yfinance - DEBUG - OKLO: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:17,419 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:17,419 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:17,420 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/OKLO
2025-03-24 20:48:17,420 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:17,420 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:17,420 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:17,420 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,421 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:17,421 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:17,421 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,421 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:17,484 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/OKLO?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1644
2025-03-24 20:48:17,484 - yfinance - DEBUG - response code=200
2025-03-24 20:48:17,485 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:17,485 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:17,486 - yfinance - DEBUG - OKLO: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:48:17,490 - yfinance - DEBUG - OKLO: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:17,492 - yfinance - DEBUG - OKLO: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:17,496 - yfinance - DEBUG - OKLO: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:17,496 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:17,496 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:17,498 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:17,498 - yfinance_client - INFO - Downloaded data for OKLO, shape: (35, 5)
2025-03-24 20:48:17,499 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:17,499 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:17,499 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:17,500 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['OKLO', 1, 0])
2025-03-24 20:48:17,500 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:17,500 - yfinance - DEBUG - OKLO: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:17,501 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:17,501 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:17,501 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/OKLO
2025-03-24 20:48:17,501 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:17,502 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:17,502 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:17,502 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,502 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:17,502 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:17,502 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,503 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:17,560 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/OKLO?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2248
2025-03-24 20:48:17,561 - yfinance - DEBUG - response code=200
2025-03-24 20:48:17,561 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:17,561 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:17,562 - yfinance - DEBUG - OKLO: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:48:17,563 - yfinance - DEBUG - OKLO: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:48:17,566 - yfinance - DEBUG - OKLO: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:17,569 - yfinance - DEBUG - OKLO: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:17,569 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:17,570 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:17,571 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:17,572 - yfinance_client - INFO - Downloaded data for OKLO, shape: (59, 5)
2025-03-24 20:48:17,579 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:48:17,585 - __main__ - INFO - Step 2: Getting options chain data for OKLO...
2025-03-24 20:48:17,585 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for OKLO
2025-03-24 20:48:17,586 - yfinance - DEBUG - Entering history()
2025-03-24 20:48:17,586 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['OKLO', 1, 0])
2025-03-24 20:48:17,587 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:17,587 - yfinance - DEBUG - OKLO: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:17,587 - yfinance - DEBUG -   Entering get()
2025-03-24 20:48:17,588 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:48:17,588 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/OKLO
2025-03-24 20:48:17,588 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:17,588 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:48:17,589 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:17,589 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,589 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:17,589 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:17,589 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,590 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:48:17,639 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/OKLO?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1174
2025-03-24 20:48:17,639 - yfinance - DEBUG - response code=200
2025-03-24 20:48:17,640 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:48:17,640 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:48:17,641 - yfinance - DEBUG - OKLO: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:48:17,642 - yfinance - DEBUG - OKLO: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:48:17,645 - yfinance - DEBUG - OKLO: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:17,650 - yfinance - DEBUG - OKLO: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:17,651 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:17,651 - yfinance - DEBUG - Exiting history()
2025-03-24 20:48:17,651 - yfinance_client - INFO - Current price of OKLO: $30.91
2025-03-24 20:48:17,651 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:17,652 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:17,652 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/OKLO
2025-03-24 20:48:17,652 - yfinance - DEBUG - params=None
2025-03-24 20:48:17,652 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:17,652 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:17,653 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,653 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:17,653 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:17,653 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,653 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:17,745 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/OKLO?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:17,757 - yfinance - DEBUG - response code=200
2025-03-24 20:48:17,758 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:17,758 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:17,759 - yfinance_client - INFO - Found 13 expiration dates for OKLO
2025-03-24 20:48:17,760 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:48:17,760 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:17,760 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:17,760 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/OKLO?date=1743120000
2025-03-24 20:48:17,761 - yfinance - DEBUG - params=None
2025-03-24 20:48:17,761 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:17,761 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:17,761 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,761 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:17,761 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:17,761 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,762 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:17,857 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/OKLO?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:17,859 - yfinance - DEBUG - response code=200
2025-03-24 20:48:17,859 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:17,860 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:17,863 - yfinance_client - INFO - Retrieved 95 calls and 84 puts
2025-03-24 20:48:17,951 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:48:17,951 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:17,952 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:17,952 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/OKLO?date=1743724800
2025-03-24 20:48:17,952 - yfinance - DEBUG - params=None
2025-03-24 20:48:17,952 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:17,952 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:17,952 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,953 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:17,953 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:17,953 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:17,953 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:18,033 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/OKLO?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:18,034 - yfinance - DEBUG - response code=200
2025-03-24 20:48:18,034 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:18,035 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:18,038 - yfinance_client - INFO - Retrieved 85 calls and 76 puts
2025-03-24 20:48:18,117 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:48:18,118 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:18,118 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:18,118 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/OKLO?date=1744329600
2025-03-24 20:48:18,118 - yfinance - DEBUG - params=None
2025-03-24 20:48:18,119 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:18,119 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:18,119 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:18,119 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:18,119 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:18,120 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:18,120 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:18,196 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/OKLO?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:18,197 - yfinance - DEBUG - response code=200
2025-03-24 20:48:18,198 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:18,198 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:18,201 - yfinance_client - INFO - Retrieved 50 calls and 52 puts
2025-03-24 20:48:18,253 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:48:18,253 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:18,254 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:18,254 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/OKLO?date=1744848000
2025-03-24 20:48:18,254 - yfinance - DEBUG - params=None
2025-03-24 20:48:18,255 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:18,255 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:18,255 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:18,255 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:18,255 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:18,256 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:18,256 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:18,332 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/OKLO?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:18,333 - yfinance - DEBUG - response code=200
2025-03-24 20:48:18,333 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:18,333 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:18,337 - yfinance_client - INFO - Retrieved 40 calls and 38 puts
2025-03-24 20:48:18,378 - yfinance_client - INFO - Successfully fetched 4 option chains for OKLO
2025-03-24 20:48:18,379 - __main__ - INFO - Step 3: Preparing analysis data for OKLO...
2025-03-24 20:48:18,379 - __main__ - INFO - Step 4: Processing options data for OKLO...
2025-03-24 20:48:18,379 - __main__ - INFO - Found 4 expiration dates for OKLO
2025-03-24 20:48:18,379 - __main__ - INFO - Processing expiration date 2025-03-28 for OKLO...
2025-03-24 20:48:18,380 - __main__ - DEBUG - ATM calls shape before filtering: (95, 19)
2025-03-24 20:48:18,380 - __main__ - DEBUG - ATM puts shape before filtering: (84, 19)
2025-03-24 20:48:18,381 - __main__ - DEBUG - ATM calls shape after filtering: (6, 19)
2025-03-24 20:48:18,381 - __main__ - DEBUG - ATM puts shape after filtering: (6, 19)
2025-03-24 20:48:18,382 - __main__ - DEBUG - Finding ATM call for OKLO...
2025-03-24 20:48:18,383 - __main__ - DEBUG - ATM call for OKLO: strike=31.0
2025-03-24 20:48:18,383 - __main__ - DEBUG - Finding ATM put for OKLO...
2025-03-24 20:48:18,384 - __main__ - DEBUG - ATM put for OKLO: strike=31.0
2025-03-24 20:48:18,384 - __main__ - DEBUG - Calculating volume data for OKLO...
2025-03-24 20:48:18,385 - __main__ - DEBUG - Volume data for OKLO: calls=40696, puts=27152
2025-03-24 20:48:18,385 - __main__ - INFO - Successfully processed expiration 2025-03-28 for OKLO
2025-03-24 20:48:18,385 - __main__ - INFO - Processing expiration date 2025-04-04 for OKLO...
2025-03-24 20:48:18,386 - __main__ - DEBUG - ATM calls shape before filtering: (85, 19)
2025-03-24 20:48:18,386 - __main__ - DEBUG - ATM puts shape before filtering: (76, 19)
2025-03-24 20:48:18,386 - __main__ - DEBUG - ATM calls shape after filtering: (6, 19)
2025-03-24 20:48:18,387 - __main__ - DEBUG - ATM puts shape after filtering: (6, 19)
2025-03-24 20:48:18,387 - __main__ - DEBUG - Finding ATM call for OKLO...
2025-03-24 20:48:18,388 - __main__ - DEBUG - ATM call for OKLO: strike=31.0
2025-03-24 20:48:18,388 - __main__ - DEBUG - Finding ATM put for OKLO...
2025-03-24 20:48:18,388 - __main__ - DEBUG - ATM put for OKLO: strike=31.0
2025-03-24 20:48:18,388 - __main__ - DEBUG - Calculating volume data for OKLO...
2025-03-24 20:48:18,389 - __main__ - DEBUG - Volume data for OKLO: calls=5343, puts=1728
2025-03-24 20:48:18,389 - __main__ - INFO - Successfully processed expiration 2025-04-04 for OKLO
2025-03-24 20:48:18,389 - __main__ - INFO - Processing expiration date 2025-04-11 for OKLO...
2025-03-24 20:48:18,389 - __main__ - DEBUG - ATM calls shape before filtering: (50, 19)
2025-03-24 20:48:18,390 - __main__ - DEBUG - ATM puts shape before filtering: (52, 19)
2025-03-24 20:48:18,390 - __main__ - DEBUG - ATM calls shape after filtering: (6, 19)
2025-03-24 20:48:18,391 - __main__ - DEBUG - ATM puts shape after filtering: (5, 19)
2025-03-24 20:48:18,391 - __main__ - DEBUG - Finding ATM call for OKLO...
2025-03-24 20:48:18,392 - __main__ - DEBUG - ATM call for OKLO: strike=31.0
2025-03-24 20:48:18,392 - __main__ - DEBUG - Finding ATM put for OKLO...
2025-03-24 20:48:18,393 - __main__ - DEBUG - ATM put for OKLO: strike=31.0
2025-03-24 20:48:18,393 - __main__ - DEBUG - Calculating volume data for OKLO...
2025-03-24 20:48:18,393 - __main__ - DEBUG - Volume data for OKLO: calls=2120, puts=471
2025-03-24 20:48:18,394 - __main__ - INFO - Successfully processed expiration 2025-04-11 for OKLO
2025-03-24 20:48:18,394 - __main__ - INFO - Processing expiration date 2025-04-17 for OKLO...
2025-03-24 20:48:18,394 - __main__ - DEBUG - ATM calls shape before filtering: (40, 19)
2025-03-24 20:48:18,394 - __main__ - DEBUG - ATM puts shape before filtering: (38, 19)
2025-03-24 20:48:18,395 - __main__ - DEBUG - ATM calls shape after filtering: (3, 19)
2025-03-24 20:48:18,395 - __main__ - DEBUG - ATM puts shape after filtering: (3, 19)
2025-03-24 20:48:18,396 - __main__ - DEBUG - Finding ATM call for OKLO...
2025-03-24 20:48:18,396 - __main__ - DEBUG - ATM call for OKLO: strike=31.0
2025-03-24 20:48:18,397 - __main__ - DEBUG - Finding ATM put for OKLO...
2025-03-24 20:48:18,397 - __main__ - DEBUG - ATM put for OKLO: strike=31.0
2025-03-24 20:48:18,398 - __main__ - DEBUG - Calculating volume data for OKLO...
2025-03-24 20:48:18,398 - __main__ - DEBUG - Volume data for OKLO: calls=10458, puts=2299
2025-03-24 20:48:18,398 - __main__ - INFO - Successfully processed expiration 2025-04-17 for OKLO
2025-03-24 20:48:18,399 - __main__ - INFO - Step 5: Generating analysis for OKLO...
2025-03-24 20:48:18,399 - __main__ - DEBUG - Calling get_stock_analysis_prompt for OKLO with args: stock_analysis_data, market_context
2025-03-24 20:48:30,685 - __main__ - INFO - Market alignment for OKLO: contrary
2025-03-24 20:48:30,685 - __main__ - INFO - Creating stock analysis result for OKLO...
2025-03-24 20:48:30,686 - __main__ - INFO - Successfully added OKLO to stock analyses
2025-03-24 20:48:30,686 - __main__ - INFO - Updating Notion with analysis for OKLO...
2025-03-24 20:48:30,687 - __main__ - INFO - Sending Discord notification for OKLO...
2025-03-24 20:48:30,687 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2684 chars). Splitting into parts.
2025-03-24 20:48:30,688 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:30,982 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:30,983 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:30,984 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:31,266 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:31,267 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:31,267 - __main__ - INFO - Successfully sent Discord notification for OKLO
2025-03-24 20:48:31,267 - __main__ - INFO - Analyzing RUN...
2025-03-24 20:48:31,267 - __main__ - INFO - Step 1: Getting stock data for RUN...
2025-03-24 20:48:31,268 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:31,268 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:31,268 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:31,268 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['RUN', 1, 0])
2025-03-24 20:48:31,269 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:31,269 - yfinance - DEBUG - RUN: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:31,269 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:31,269 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:31,269 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/RUN
2025-03-24 20:48:31,269 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:31,270 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,270 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,270 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,270 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,270 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,270 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,270 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,345 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/RUN?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1498
2025-03-24 20:48:31,346 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,346 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:31,346 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:31,347 - yfinance - DEBUG - RUN: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:48:31,351 - yfinance - DEBUG - RUN: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:31,353 - yfinance - DEBUG - RUN: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:31,357 - yfinance - DEBUG - RUN: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:31,357 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:31,358 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:31,359 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:31,359 - yfinance_client - INFO - Downloaded data for RUN, shape: (35, 5)
2025-03-24 20:48:31,360 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:31,360 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:31,360 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:31,361 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['RUN', 1, 0])
2025-03-24 20:48:31,361 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:31,361 - yfinance - DEBUG - RUN: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:31,362 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:31,362 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:31,362 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/RUN
2025-03-24 20:48:31,362 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:31,362 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,363 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,363 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,363 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,363 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,363 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,363 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,420 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/RUN?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2079
2025-03-24 20:48:31,421 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,421 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:31,421 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:31,422 - yfinance - DEBUG - RUN: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:48:31,423 - yfinance - DEBUG - RUN: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:48:31,425 - yfinance - DEBUG - RUN: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:31,429 - yfinance - DEBUG - RUN: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:31,430 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:31,430 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:31,431 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:31,432 - yfinance_client - INFO - Downloaded data for RUN, shape: (59, 5)
2025-03-24 20:48:31,438 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:48:31,440 - __main__ - INFO - Step 2: Getting options chain data for RUN...
2025-03-24 20:48:31,441 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for RUN
2025-03-24 20:48:31,441 - yfinance - DEBUG - Entering history()
2025-03-24 20:48:31,441 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['RUN', 1, 0])
2025-03-24 20:48:31,442 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:31,442 - yfinance - DEBUG - RUN: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:31,442 - yfinance - DEBUG -   Entering get()
2025-03-24 20:48:31,442 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:48:31,442 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/RUN
2025-03-24 20:48:31,443 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:31,443 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,443 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,443 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,443 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,443 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,443 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,444 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,497 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/RUN?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1181
2025-03-24 20:48:31,498 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,498 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:48:31,498 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:48:31,499 - yfinance - DEBUG - RUN: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:48:31,500 - yfinance - DEBUG - RUN: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:48:31,502 - yfinance - DEBUG - RUN: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:31,505 - yfinance - DEBUG - RUN: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:31,505 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:31,506 - yfinance - DEBUG - Exiting history()
2025-03-24 20:48:31,506 - yfinance_client - INFO - Current price of RUN: $6.38
2025-03-24 20:48:31,506 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:31,506 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:31,506 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/RUN
2025-03-24 20:48:31,507 - yfinance - DEBUG - params=None
2025-03-24 20:48:31,507 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,507 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,507 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,507 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,507 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,507 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,508 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,568 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/RUN?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:31,568 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,568 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:31,569 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:31,569 - yfinance_client - INFO - Found 14 expiration dates for RUN
2025-03-24 20:48:31,570 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:48:31,570 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:31,570 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:31,570 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/RUN?date=1743120000
2025-03-24 20:48:31,570 - yfinance - DEBUG - params=None
2025-03-24 20:48:31,570 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,571 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,571 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,571 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,571 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,571 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,571 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,639 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/RUN?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:31,640 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,641 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:31,641 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:31,644 - yfinance_client - INFO - Retrieved 21 calls and 22 puts
2025-03-24 20:48:31,667 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:48:31,668 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:31,668 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:31,668 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/RUN?date=1743724800
2025-03-24 20:48:31,670 - yfinance - DEBUG - params=None
2025-03-24 20:48:31,670 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,670 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,670 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,670 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,670 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,670 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,670 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,729 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/RUN?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:31,730 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,730 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:31,730 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:31,733 - yfinance_client - INFO - Retrieved 17 calls and 15 puts
2025-03-24 20:48:31,752 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:48:31,752 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:31,752 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:31,752 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/RUN?date=1744329600
2025-03-24 20:48:31,753 - yfinance - DEBUG - params=None
2025-03-24 20:48:31,753 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,753 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,753 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,753 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,753 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,754 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,754 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,809 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/RUN?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:31,810 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,811 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:31,811 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:31,814 - yfinance_client - INFO - Retrieved 14 calls and 15 puts
2025-03-24 20:48:31,831 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:48:31,832 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:31,832 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:31,832 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/RUN?date=1744848000
2025-03-24 20:48:31,832 - yfinance - DEBUG - params=None
2025-03-24 20:48:31,833 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:31,833 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:31,833 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,833 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:31,833 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:31,834 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:31,834 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:31,903 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/RUN?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:31,904 - yfinance - DEBUG - response code=200
2025-03-24 20:48:31,904 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:31,905 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:31,908 - yfinance_client - INFO - Retrieved 34 calls and 29 puts
2025-03-24 20:48:31,941 - yfinance_client - INFO - Successfully fetched 4 option chains for RUN
2025-03-24 20:48:31,942 - __main__ - INFO - Step 3: Preparing analysis data for RUN...
2025-03-24 20:48:31,942 - __main__ - INFO - Step 4: Processing options data for RUN...
2025-03-24 20:48:31,942 - __main__ - INFO - Found 4 expiration dates for RUN
2025-03-24 20:48:31,943 - __main__ - INFO - Processing expiration date 2025-03-28 for RUN...
2025-03-24 20:48:31,943 - __main__ - DEBUG - ATM calls shape before filtering: (21, 19)
2025-03-24 20:48:31,944 - __main__ - DEBUG - ATM puts shape before filtering: (22, 19)
2025-03-24 20:48:31,944 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:48:31,945 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:48:31,945 - __main__ - DEBUG - Finding ATM call for RUN...
2025-03-24 20:48:31,946 - __main__ - DEBUG - ATM call for RUN: strike=6.5
2025-03-24 20:48:31,946 - __main__ - DEBUG - Finding ATM put for RUN...
2025-03-24 20:48:31,946 - __main__ - DEBUG - ATM put for RUN: strike=6.5
2025-03-24 20:48:31,947 - __main__ - DEBUG - Calculating volume data for RUN...
2025-03-24 20:48:31,947 - __main__ - DEBUG - Volume data for RUN: calls=6459, puts=3816
2025-03-24 20:48:31,947 - __main__ - INFO - Successfully processed expiration 2025-03-28 for RUN
2025-03-24 20:48:31,948 - __main__ - INFO - Processing expiration date 2025-04-04 for RUN...
2025-03-24 20:48:31,948 - __main__ - DEBUG - ATM calls shape before filtering: (17, 19)
2025-03-24 20:48:31,948 - __main__ - DEBUG - ATM puts shape before filtering: (15, 19)
2025-03-24 20:48:31,949 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:48:31,949 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:48:31,949 - __main__ - DEBUG - Finding ATM call for RUN...
2025-03-24 20:48:31,950 - __main__ - DEBUG - ATM call for RUN: strike=6.5
2025-03-24 20:48:31,950 - __main__ - DEBUG - Finding ATM put for RUN...
2025-03-24 20:48:31,951 - __main__ - DEBUG - ATM put for RUN: strike=6.5
2025-03-24 20:48:31,951 - __main__ - DEBUG - Calculating volume data for RUN...
2025-03-24 20:48:31,951 - __main__ - DEBUG - Volume data for RUN: calls=1296, puts=16391
2025-03-24 20:48:31,952 - __main__ - INFO - Successfully processed expiration 2025-04-04 for RUN
2025-03-24 20:48:31,952 - __main__ - INFO - Processing expiration date 2025-04-11 for RUN...
2025-03-24 20:48:31,952 - __main__ - DEBUG - ATM calls shape before filtering: (14, 19)
2025-03-24 20:48:31,952 - __main__ - DEBUG - ATM puts shape before filtering: (15, 19)
2025-03-24 20:48:31,953 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:48:31,953 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:48:31,954 - __main__ - DEBUG - Finding ATM call for RUN...
2025-03-24 20:48:31,954 - __main__ - DEBUG - ATM call for RUN: strike=6.5
2025-03-24 20:48:31,954 - __main__ - DEBUG - Finding ATM put for RUN...
2025-03-24 20:48:31,955 - __main__ - DEBUG - ATM put for RUN: strike=6.5
2025-03-24 20:48:31,955 - __main__ - DEBUG - Calculating volume data for RUN...
2025-03-24 20:48:31,956 - __main__ - DEBUG - Volume data for RUN: calls=539, puts=595
2025-03-24 20:48:31,956 - __main__ - INFO - Successfully processed expiration 2025-04-11 for RUN
2025-03-24 20:48:31,956 - __main__ - INFO - Processing expiration date 2025-04-17 for RUN...
2025-03-24 20:48:31,956 - __main__ - DEBUG - ATM calls shape before filtering: (34, 19)
2025-03-24 20:48:31,957 - __main__ - DEBUG - ATM puts shape before filtering: (29, 19)
2025-03-24 20:48:31,957 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:48:31,958 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:48:31,958 - __main__ - WARNING - No valid ATM options found for RUN on 2025-04-17
2025-03-24 20:48:31,958 - __main__ - INFO - Step 5: Generating analysis for RUN...
2025-03-24 20:48:31,958 - __main__ - DEBUG - Calling get_stock_analysis_prompt for RUN with args: stock_analysis_data, market_context
2025-03-24 20:48:44,532 - __main__ - INFO - Market alignment for RUN: contrary
2025-03-24 20:48:44,533 - __main__ - INFO - Creating stock analysis result for RUN...
2025-03-24 20:48:44,533 - __main__ - INFO - Successfully added RUN to stock analyses
2025-03-24 20:48:44,533 - __main__ - INFO - Updating Notion with analysis for RUN...
2025-03-24 20:48:44,534 - __main__ - INFO - Sending Discord notification for RUN...
2025-03-24 20:48:44,534 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2694 chars). Splitting into parts.
2025-03-24 20:48:44,535 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:44,962 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:44,964 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:44,965 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:45,237 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:45,238 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:45,239 - __main__ - INFO - Successfully sent Discord notification for RUN
2025-03-24 20:48:45,239 - __main__ - INFO - Analyzing WBD...
2025-03-24 20:48:45,239 - __main__ - INFO - Step 1: Getting stock data for WBD...
2025-03-24 20:48:45,240 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:45,240 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:45,240 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:45,240 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBD', 1, 0])
2025-03-24 20:48:45,241 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:45,241 - yfinance - DEBUG - WBD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:45,241 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:45,241 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:45,242 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBD
2025-03-24 20:48:45,242 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:45,242 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,242 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,242 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,243 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,243 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,243 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,243 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,350 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1621
2025-03-24 20:48:45,350 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,351 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:45,351 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:45,352 - yfinance - DEBUG - WBD: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:48:45,356 - yfinance - DEBUG - WBD: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:45,358 - yfinance - DEBUG - WBD: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:45,362 - yfinance - DEBUG - WBD: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:45,363 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:45,363 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:45,365 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:45,365 - yfinance_client - INFO - Downloaded data for WBD, shape: (35, 5)
2025-03-24 20:48:45,365 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:45,365 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:45,366 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:45,366 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBD', 1, 0])
2025-03-24 20:48:45,366 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:45,366 - yfinance - DEBUG - WBD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:45,367 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:45,367 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:45,367 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBD
2025-03-24 20:48:45,367 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:45,367 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,368 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,368 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,368 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,368 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,368 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,368 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,421 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1901
2025-03-24 20:48:45,422 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,422 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:45,423 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:45,424 - yfinance - DEBUG - WBD: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:48:45,424 - yfinance - DEBUG - WBD: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:48:45,426 - yfinance - DEBUG - WBD: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:45,432 - yfinance - DEBUG - WBD: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:48:45,432 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:45,433 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:45,436 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:45,436 - yfinance_client - INFO - Downloaded data for WBD, shape: (59, 5)
2025-03-24 20:48:45,445 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:48:45,449 - __main__ - INFO - Step 2: Getting options chain data for WBD...
2025-03-24 20:48:45,450 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for WBD
2025-03-24 20:48:45,450 - yfinance - DEBUG - Entering history()
2025-03-24 20:48:45,451 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBD', 1, 0])
2025-03-24 20:48:45,451 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:45,451 - yfinance - DEBUG - WBD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:45,452 - yfinance - DEBUG -   Entering get()
2025-03-24 20:48:45,452 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:48:45,452 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBD
2025-03-24 20:48:45,453 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:45,453 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,453 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,453 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,454 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,454 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,454 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,454 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,516 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1223
2025-03-24 20:48:45,517 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,517 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:48:45,517 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:48:45,518 - yfinance - DEBUG - WBD: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:48:45,519 - yfinance - DEBUG - WBD: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:48:45,521 - yfinance - DEBUG - WBD: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:45,526 - yfinance - DEBUG - WBD: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:48:45,527 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:45,527 - yfinance - DEBUG - Exiting history()
2025-03-24 20:48:45,527 - yfinance_client - INFO - Current price of WBD: $10.97
2025-03-24 20:48:45,528 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:45,528 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:45,528 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/WBD
2025-03-24 20:48:45,528 - yfinance - DEBUG - params=None
2025-03-24 20:48:45,529 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,529 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,529 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,529 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,529 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,530 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,530 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,591 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/WBD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:45,591 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,592 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:45,592 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:45,592 - yfinance_client - INFO - Found 17 expiration dates for WBD
2025-03-24 20:48:45,593 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:48:45,593 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:45,593 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:45,593 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/WBD?date=1743120000
2025-03-24 20:48:45,594 - yfinance - DEBUG - params=None
2025-03-24 20:48:45,594 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,594 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,594 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,594 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,594 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,595 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,595 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,660 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/WBD?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:45,661 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,661 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:45,661 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:45,664 - yfinance_client - INFO - Retrieved 16 calls and 15 puts
2025-03-24 20:48:45,683 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:48:45,683 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:45,684 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:45,684 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/WBD?date=1743724800
2025-03-24 20:48:45,685 - yfinance - DEBUG - params=None
2025-03-24 20:48:45,685 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,685 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,686 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,686 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,686 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,686 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,686 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,749 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/WBD?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:45,750 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,750 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:45,751 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:45,754 - yfinance_client - INFO - Retrieved 16 calls and 13 puts
2025-03-24 20:48:45,771 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:48:45,772 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:45,772 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:45,772 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/WBD?date=1744329600
2025-03-24 20:48:45,773 - yfinance - DEBUG - params=None
2025-03-24 20:48:45,773 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,773 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,773 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,773 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,774 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,774 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,774 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,847 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/WBD?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:45,848 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,848 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:45,848 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:45,851 - yfinance_client - INFO - Retrieved 14 calls and 12 puts
2025-03-24 20:48:45,867 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:48:45,868 - yfinance - DEBUG - Entering get()
2025-03-24 20:48:45,868 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:48:45,869 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/WBD?date=1744848000
2025-03-24 20:48:45,869 - yfinance - DEBUG - params=None
2025-03-24 20:48:45,869 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:48:45,869 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:45,869 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,869 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:45,870 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:45,870 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:45,870 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:48:45,947 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/WBD?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:48:45,948 - yfinance - DEBUG - response code=200
2025-03-24 20:48:45,948 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:48:45,948 - yfinance - DEBUG - Exiting get()
2025-03-24 20:48:45,951 - yfinance_client - INFO - Retrieved 17 calls and 13 puts
2025-03-24 20:48:45,969 - yfinance_client - INFO - Successfully fetched 4 option chains for WBD
2025-03-24 20:48:45,969 - __main__ - INFO - Step 3: Preparing analysis data for WBD...
2025-03-24 20:48:45,970 - __main__ - INFO - Step 4: Processing options data for WBD...
2025-03-24 20:48:45,970 - __main__ - INFO - Found 4 expiration dates for WBD
2025-03-24 20:48:45,970 - __main__ - INFO - Processing expiration date 2025-03-28 for WBD...
2025-03-24 20:48:45,971 - __main__ - DEBUG - ATM calls shape before filtering: (16, 19)
2025-03-24 20:48:45,971 - __main__ - DEBUG - ATM puts shape before filtering: (15, 19)
2025-03-24 20:48:45,972 - __main__ - DEBUG - ATM calls shape after filtering: (3, 19)
2025-03-24 20:48:45,972 - __main__ - DEBUG - ATM puts shape after filtering: (3, 19)
2025-03-24 20:48:45,972 - __main__ - DEBUG - Finding ATM call for WBD...
2025-03-24 20:48:45,973 - __main__ - DEBUG - ATM call for WBD: strike=11.0
2025-03-24 20:48:45,973 - __main__ - DEBUG - Finding ATM put for WBD...
2025-03-24 20:48:45,974 - __main__ - DEBUG - ATM put for WBD: strike=11.0
2025-03-24 20:48:45,974 - __main__ - DEBUG - Calculating volume data for WBD...
2025-03-24 20:48:45,975 - __main__ - DEBUG - Volume data for WBD: calls=1876, puts=3738
2025-03-24 20:48:45,975 - __main__ - INFO - Successfully processed expiration 2025-03-28 for WBD
2025-03-24 20:48:45,975 - __main__ - INFO - Processing expiration date 2025-04-04 for WBD...
2025-03-24 20:48:45,975 - __main__ - DEBUG - ATM calls shape before filtering: (16, 19)
2025-03-24 20:48:45,976 - __main__ - DEBUG - ATM puts shape before filtering: (13, 19)
2025-03-24 20:48:45,976 - __main__ - DEBUG - ATM calls shape after filtering: (3, 19)
2025-03-24 20:48:45,976 - __main__ - DEBUG - ATM puts shape after filtering: (3, 19)
2025-03-24 20:48:45,977 - __main__ - DEBUG - Finding ATM call for WBD...
2025-03-24 20:48:45,977 - __main__ - DEBUG - ATM call for WBD: strike=11.0
2025-03-24 20:48:45,978 - __main__ - DEBUG - Finding ATM put for WBD...
2025-03-24 20:48:45,978 - __main__ - DEBUG - ATM put for WBD: strike=11.0
2025-03-24 20:48:45,979 - __main__ - DEBUG - Calculating volume data for WBD...
2025-03-24 20:48:45,979 - __main__ - DEBUG - Volume data for WBD: calls=1039, puts=1461
2025-03-24 20:48:45,979 - __main__ - INFO - Successfully processed expiration 2025-04-04 for WBD
2025-03-24 20:48:45,980 - __main__ - INFO - Processing expiration date 2025-04-11 for WBD...
2025-03-24 20:48:45,980 - __main__ - DEBUG - ATM calls shape before filtering: (14, 19)
2025-03-24 20:48:45,980 - __main__ - DEBUG - ATM puts shape before filtering: (12, 19)
2025-03-24 20:48:45,981 - __main__ - DEBUG - ATM calls shape after filtering: (3, 19)
2025-03-24 20:48:45,981 - __main__ - DEBUG - ATM puts shape after filtering: (3, 19)
2025-03-24 20:48:45,981 - __main__ - DEBUG - Finding ATM call for WBD...
2025-03-24 20:48:45,982 - __main__ - DEBUG - ATM call for WBD: strike=11.0
2025-03-24 20:48:45,982 - __main__ - DEBUG - Finding ATM put for WBD...
2025-03-24 20:48:45,983 - __main__ - DEBUG - ATM put for WBD: strike=11.0
2025-03-24 20:48:45,983 - __main__ - DEBUG - Calculating volume data for WBD...
2025-03-24 20:48:45,983 - __main__ - DEBUG - Volume data for WBD: calls=600, puts=161
2025-03-24 20:48:45,984 - __main__ - INFO - Successfully processed expiration 2025-04-11 for WBD
2025-03-24 20:48:45,984 - __main__ - INFO - Processing expiration date 2025-04-17 for WBD...
2025-03-24 20:48:45,984 - __main__ - DEBUG - ATM calls shape before filtering: (17, 19)
2025-03-24 20:48:45,984 - __main__ - DEBUG - ATM puts shape before filtering: (13, 19)
2025-03-24 20:48:45,985 - __main__ - DEBUG - ATM calls shape after filtering: (1, 19)
2025-03-24 20:48:45,986 - __main__ - DEBUG - ATM puts shape after filtering: (1, 19)
2025-03-24 20:48:45,986 - __main__ - DEBUG - Finding ATM call for WBD...
2025-03-24 20:48:45,986 - __main__ - DEBUG - ATM call for WBD: strike=11.0
2025-03-24 20:48:45,987 - __main__ - DEBUG - Finding ATM put for WBD...
2025-03-24 20:48:45,987 - __main__ - DEBUG - ATM put for WBD: strike=11.0
2025-03-24 20:48:45,987 - __main__ - DEBUG - Calculating volume data for WBD...
2025-03-24 20:48:45,988 - __main__ - DEBUG - Volume data for WBD: calls=5858, puts=481
2025-03-24 20:48:45,988 - __main__ - INFO - Successfully processed expiration 2025-04-17 for WBD
2025-03-24 20:48:45,988 - __main__ - INFO - Step 5: Generating analysis for WBD...
2025-03-24 20:48:45,988 - __main__ - DEBUG - Calling get_stock_analysis_prompt for WBD with args: stock_analysis_data, market_context
2025-03-24 20:48:59,278 - __main__ - INFO - Market alignment for WBD: aligned
2025-03-24 20:48:59,278 - __main__ - INFO - Creating stock analysis result for WBD...
2025-03-24 20:48:59,279 - __main__ - INFO - Successfully added WBD to stock analyses
2025-03-24 20:48:59,279 - __main__ - INFO - Updating Notion with analysis for WBD...
2025-03-24 20:48:59,279 - __main__ - INFO - Sending Discord notification for WBD...
2025-03-24 20:48:59,279 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2870 chars). Splitting into parts.
2025-03-24 20:48:59,280 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:59,584 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:59,585 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:59,586 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:48:59,859 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:48:59,860 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:48:59,860 - __main__ - INFO - Successfully sent Discord notification for WBD
2025-03-24 20:48:59,860 - __main__ - INFO - Analyzing LQD...
2025-03-24 20:48:59,860 - __main__ - INFO - Step 1: Getting stock data for LQD...
2025-03-24 20:48:59,861 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:59,861 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:59,861 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:59,861 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LQD', 1, 0])
2025-03-24 20:48:59,862 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:59,862 - yfinance - DEBUG - LQD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:59,862 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:59,862 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:59,862 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LQD
2025-03-24 20:48:59,863 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:59,863 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:59,863 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:59,863 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:59,863 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:59,863 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:59,863 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:59,864 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:48:59,939 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LQD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1540
2025-03-24 20:48:59,940 - yfinance - DEBUG - response code=200
2025-03-24 20:48:59,940 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:48:59,940 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:48:59,941 - yfinance - DEBUG - LQD: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:48:59,946 - yfinance - DEBUG - LQD: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:59,948 - yfinance - DEBUG - LQD: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:59,951 - yfinance - DEBUG - LQD: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:48:59,952 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:48:59,952 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:48:59,954 - yfinance - DEBUG - Exiting download()
2025-03-24 20:48:59,954 - yfinance_client - INFO - Downloaded data for LQD, shape: (35, 5)
2025-03-24 20:48:59,954 - yfinance - DEBUG - Entering download()
2025-03-24 20:48:59,954 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:48:59,955 - yfinance - DEBUG -  Entering history()
2025-03-24 20:48:59,955 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LQD', 1, 0])
2025-03-24 20:48:59,955 - yfinance - DEBUG -   Entering history()
2025-03-24 20:48:59,955 - yfinance - DEBUG - LQD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:59,956 - yfinance - DEBUG -    Entering get()
2025-03-24 20:48:59,956 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:48:59,956 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LQD
2025-03-24 20:48:59,956 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:48:59,956 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:48:59,956 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:48:59,956 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:48:59,957 - yfinance - DEBUG - reusing cookie
2025-03-24 20:48:59,957 - yfinance - DEBUG - reusing crumb
2025-03-24 20:48:59,957 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:48:59,957 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:49:00,115 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LQD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2400
2025-03-24 20:49:00,116 - yfinance - DEBUG - response code=200
2025-03-24 20:49:00,116 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:49:00,116 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:49:00,117 - yfinance - DEBUG - LQD: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:49:00,118 - yfinance - DEBUG - LQD: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:49:00,122 - yfinance - DEBUG - LQD: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:49:00,125 - yfinance - DEBUG - LQD: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:49:00,126 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:49:00,126 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:49:00,128 - yfinance - DEBUG - Exiting download()
2025-03-24 20:49:00,128 - yfinance_client - INFO - Downloaded data for LQD, shape: (59, 5)
2025-03-24 20:49:00,134 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:49:00,137 - __main__ - INFO - Step 2: Getting options chain data for LQD...
2025-03-24 20:49:00,137 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for LQD
2025-03-24 20:49:00,138 - yfinance - DEBUG - Entering history()
2025-03-24 20:49:00,138 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LQD', 1, 0])
2025-03-24 20:49:00,138 - yfinance - DEBUG -  Entering history()
2025-03-24 20:49:00,139 - yfinance - DEBUG - LQD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:00,139 - yfinance - DEBUG -   Entering get()
2025-03-24 20:49:00,139 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:49:00,139 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LQD
2025-03-24 20:49:00,140 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:00,140 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:49:00,140 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:00,140 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,140 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:00,141 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:00,141 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,141 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:49:00,219 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LQD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1254
2025-03-24 20:49:00,220 - yfinance - DEBUG - response code=200
2025-03-24 20:49:00,220 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:49:00,220 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:49:00,221 - yfinance - DEBUG - LQD: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:49:00,222 - yfinance - DEBUG - LQD: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:49:00,224 - yfinance - DEBUG - LQD: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:49:00,227 - yfinance - DEBUG - LQD: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:49:00,228 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:49:00,228 - yfinance - DEBUG - Exiting history()
2025-03-24 20:49:00,228 - yfinance_client - INFO - Current price of LQD: $108.29
2025-03-24 20:49:00,228 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:00,229 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:00,229 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LQD
2025-03-24 20:49:00,229 - yfinance - DEBUG - params=None
2025-03-24 20:49:00,229 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:00,229 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:00,230 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,230 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:00,230 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:00,230 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,230 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:00,289 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LQD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:49:00,290 - yfinance - DEBUG - response code=200
2025-03-24 20:49:00,290 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:00,290 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:00,291 - yfinance_client - INFO - Found 17 expiration dates for LQD
2025-03-24 20:49:00,291 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:49:00,291 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:00,292 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:00,292 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LQD?date=1743120000
2025-03-24 20:49:00,292 - yfinance - DEBUG - params=None
2025-03-24 20:49:00,292 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:00,292 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:00,292 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,292 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:00,293 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:00,293 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,293 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:00,362 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LQD?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:49:00,363 - yfinance - DEBUG - response code=200
2025-03-24 20:49:00,363 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:00,363 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:00,366 - yfinance_client - INFO - Retrieved 12 calls and 16 puts
2025-03-24 20:49:00,383 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:49:00,383 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:00,384 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:00,384 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LQD?date=1743724800
2025-03-24 20:49:00,384 - yfinance - DEBUG - params=None
2025-03-24 20:49:00,384 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:00,384 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:00,385 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,385 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:00,385 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:00,385 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,385 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:00,445 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LQD?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:49:00,446 - yfinance - DEBUG - response code=200
2025-03-24 20:49:00,446 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:00,446 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:00,449 - yfinance_client - INFO - Retrieved 15 calls and 12 puts
2025-03-24 20:49:00,465 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:49:00,466 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:00,466 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:00,466 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LQD?date=1744329600
2025-03-24 20:49:00,467 - yfinance - DEBUG - params=None
2025-03-24 20:49:00,467 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:00,467 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:00,467 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,467 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:00,468 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:00,468 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,468 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:00,525 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LQD?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:49:00,526 - yfinance - DEBUG - response code=200
2025-03-24 20:49:00,526 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:00,527 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:00,530 - yfinance_client - INFO - Retrieved 11 calls and 11 puts
2025-03-24 20:49:00,543 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:49:00,544 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:00,544 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:00,544 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/LQD?date=1744848000
2025-03-24 20:49:00,545 - yfinance - DEBUG - params=None
2025-03-24 20:49:00,545 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:00,545 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:00,545 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,546 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:00,546 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:00,546 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:00,546 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:00,611 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/LQD?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 20:49:00,611 - yfinance - DEBUG - response code=200
2025-03-24 20:49:00,612 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:00,612 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:00,616 - yfinance_client - INFO - Retrieved 19 calls and 20 puts
2025-03-24 20:49:00,637 - yfinance_client - INFO - Successfully fetched 4 option chains for LQD
2025-03-24 20:49:00,638 - __main__ - INFO - Step 3: Preparing analysis data for LQD...
2025-03-24 20:49:00,638 - __main__ - INFO - Step 4: Processing options data for LQD...
2025-03-24 20:49:00,638 - __main__ - INFO - Found 4 expiration dates for LQD
2025-03-24 20:49:00,639 - __main__ - INFO - Processing expiration date 2025-03-28 for LQD...
2025-03-24 20:49:00,639 - __main__ - DEBUG - ATM calls shape before filtering: (12, 19)
2025-03-24 20:49:00,640 - __main__ - DEBUG - ATM puts shape before filtering: (16, 19)
2025-03-24 20:49:00,640 - __main__ - DEBUG - ATM calls shape after filtering: (12, 19)
2025-03-24 20:49:00,641 - __main__ - DEBUG - ATM puts shape after filtering: (15, 19)
2025-03-24 20:49:00,641 - __main__ - DEBUG - Finding ATM call for LQD...
2025-03-24 20:49:00,642 - __main__ - DEBUG - ATM call for LQD: strike=108.5
2025-03-24 20:49:00,642 - __main__ - DEBUG - Finding ATM put for LQD...
2025-03-24 20:49:00,643 - __main__ - DEBUG - ATM put for LQD: strike=108.5
2025-03-24 20:49:00,643 - __main__ - DEBUG - Calculating volume data for LQD...
2025-03-24 20:49:00,644 - __main__ - DEBUG - Volume data for LQD: calls=235, puts=250
2025-03-24 20:49:00,644 - __main__ - INFO - Successfully processed expiration 2025-03-28 for LQD
2025-03-24 20:49:00,644 - __main__ - INFO - Processing expiration date 2025-04-04 for LQD...
2025-03-24 20:49:00,645 - __main__ - DEBUG - ATM calls shape before filtering: (15, 19)
2025-03-24 20:49:00,645 - __main__ - DEBUG - ATM puts shape before filtering: (12, 19)
2025-03-24 20:49:00,645 - __main__ - DEBUG - ATM calls shape after filtering: (13, 19)
2025-03-24 20:49:00,646 - __main__ - DEBUG - ATM puts shape after filtering: (12, 19)
2025-03-24 20:49:00,646 - __main__ - DEBUG - Finding ATM call for LQD...
2025-03-24 20:49:00,647 - __main__ - DEBUG - ATM call for LQD: strike=108.5
2025-03-24 20:49:00,647 - __main__ - DEBUG - Finding ATM put for LQD...
2025-03-24 20:49:00,647 - __main__ - DEBUG - ATM put for LQD: strike=108.5
2025-03-24 20:49:00,648 - __main__ - DEBUG - Calculating volume data for LQD...
2025-03-24 20:49:00,648 - __main__ - DEBUG - Volume data for LQD: calls=96, puts=64
2025-03-24 20:49:00,648 - __main__ - INFO - Successfully processed expiration 2025-04-04 for LQD
2025-03-24 20:49:00,648 - __main__ - INFO - Processing expiration date 2025-04-11 for LQD...
2025-03-24 20:49:00,649 - __main__ - DEBUG - ATM calls shape before filtering: (11, 19)
2025-03-24 20:49:00,649 - __main__ - DEBUG - ATM puts shape before filtering: (11, 19)
2025-03-24 20:49:00,650 - __main__ - DEBUG - ATM calls shape after filtering: (10, 19)
2025-03-24 20:49:00,650 - __main__ - DEBUG - ATM puts shape after filtering: (11, 19)
2025-03-24 20:49:00,650 - __main__ - DEBUG - Finding ATM call for LQD...
2025-03-24 20:49:00,651 - __main__ - DEBUG - ATM call for LQD: strike=108.5
2025-03-24 20:49:00,651 - __main__ - DEBUG - Finding ATM put for LQD...
2025-03-24 20:49:00,652 - __main__ - DEBUG - ATM put for LQD: strike=108.0
2025-03-24 20:49:00,652 - __main__ - DEBUG - Calculating volume data for LQD...
2025-03-24 20:49:00,653 - __main__ - DEBUG - Volume data for LQD: calls=170, puts=11
2025-03-24 20:49:00,653 - __main__ - INFO - Successfully processed expiration 2025-04-11 for LQD
2025-03-24 20:49:00,653 - __main__ - INFO - Processing expiration date 2025-04-17 for LQD...
2025-03-24 20:49:00,653 - __main__ - DEBUG - ATM calls shape before filtering: (19, 19)
2025-03-24 20:49:00,653 - __main__ - DEBUG - ATM puts shape before filtering: (20, 19)
2025-03-24 20:49:00,654 - __main__ - DEBUG - ATM calls shape after filtering: (10, 19)
2025-03-24 20:49:00,654 - __main__ - DEBUG - ATM puts shape after filtering: (10, 19)
2025-03-24 20:49:00,655 - __main__ - DEBUG - Finding ATM call for LQD...
2025-03-24 20:49:00,655 - __main__ - DEBUG - ATM call for LQD: strike=108.0
2025-03-24 20:49:00,656 - __main__ - DEBUG - Finding ATM put for LQD...
2025-03-24 20:49:00,656 - __main__ - DEBUG - ATM put for LQD: strike=108.0
2025-03-24 20:49:00,656 - __main__ - DEBUG - Calculating volume data for LQD...
2025-03-24 20:49:00,657 - __main__ - DEBUG - Volume data for LQD: calls=12117, puts=8164
2025-03-24 20:49:00,657 - __main__ - INFO - Successfully processed expiration 2025-04-17 for LQD
2025-03-24 20:49:00,657 - __main__ - INFO - Step 5: Generating analysis for LQD...
2025-03-24 20:49:00,657 - __main__ - DEBUG - Calling get_stock_analysis_prompt for LQD with args: stock_analysis_data, market_context
2025-03-24 20:49:14,414 - __main__ - INFO - Market alignment for LQD: **
2025-03-24 20:49:14,414 - __main__ - INFO - Creating stock analysis result for LQD...
2025-03-24 20:49:14,415 - __main__ - INFO - Successfully added LQD to stock analyses
2025-03-24 20:49:14,415 - __main__ - INFO - Updating Notion with analysis for LQD...
2025-03-24 20:49:14,415 - __main__ - INFO - Sending Discord notification for LQD...
2025-03-24 20:49:14,416 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2645 chars). Splitting into parts.
2025-03-24 20:49:14,416 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:49:14,732 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:49:14,733 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:49:14,734 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:49:15,017 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:49:15,018 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:49:15,019 - __main__ - INFO - Successfully sent Discord notification for LQD
2025-03-24 20:49:15,019 - __main__ - INFO - Analyzing TLRY...
2025-03-24 20:49:15,019 - __main__ - INFO - Step 1: Getting stock data for TLRY...
2025-03-24 20:49:15,019 - yfinance - DEBUG - Entering download()
2025-03-24 20:49:15,019 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:49:15,020 - yfinance - DEBUG -  Entering history()
2025-03-24 20:49:15,020 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TLRY', 1, 0])
2025-03-24 20:49:15,020 - yfinance - DEBUG -   Entering history()
2025-03-24 20:49:15,020 - yfinance - DEBUG - TLRY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:15,021 - yfinance - DEBUG -    Entering get()
2025-03-24 20:49:15,021 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:49:15,021 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TLRY
2025-03-24 20:49:15,021 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:15,021 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,021 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,022 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,022 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,022 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,022 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,022 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,111 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TLRY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1888
2025-03-24 20:49:15,112 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,112 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:49:15,112 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:49:15,113 - yfinance - DEBUG - TLRY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 20:49:15,117 - yfinance - DEBUG - TLRY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:49:15,119 - yfinance - DEBUG - TLRY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:49:15,123 - yfinance - DEBUG - TLRY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 20:49:15,123 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:49:15,123 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:49:15,125 - yfinance - DEBUG - Exiting download()
2025-03-24 20:49:15,125 - yfinance_client - INFO - Downloaded data for TLRY, shape: (35, 5)
2025-03-24 20:49:15,125 - yfinance - DEBUG - Entering download()
2025-03-24 20:49:15,125 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 20:49:15,126 - yfinance - DEBUG -  Entering history()
2025-03-24 20:49:15,126 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TLRY', 1, 0])
2025-03-24 20:49:15,126 - yfinance - DEBUG -   Entering history()
2025-03-24 20:49:15,126 - yfinance - DEBUG - TLRY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:15,127 - yfinance - DEBUG -    Entering get()
2025-03-24 20:49:15,127 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 20:49:15,127 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TLRY
2025-03-24 20:49:15,127 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:15,127 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,127 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,128 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,128 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,128 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,128 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,128 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,177 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TLRY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1857
2025-03-24 20:49:15,177 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,178 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 20:49:15,178 - yfinance - DEBUG -    Exiting get()
2025-03-24 20:49:15,179 - yfinance - DEBUG - TLRY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 20:49:15,180 - yfinance - DEBUG - TLRY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 20:49:15,181 - yfinance - DEBUG - TLRY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:49:15,185 - yfinance - DEBUG - TLRY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 20:49:15,185 - yfinance - DEBUG -   Exiting history()
2025-03-24 20:49:15,186 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:49:15,187 - yfinance - DEBUG - Exiting download()
2025-03-24 20:49:15,187 - yfinance_client - INFO - Downloaded data for TLRY, shape: (59, 5)
2025-03-24 20:49:15,193 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 20:49:15,196 - __main__ - INFO - Step 2: Getting options chain data for TLRY...
2025-03-24 20:49:15,196 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for TLRY
2025-03-24 20:49:15,196 - yfinance - DEBUG - Entering history()
2025-03-24 20:49:15,197 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TLRY', 1, 0])
2025-03-24 20:49:15,197 - yfinance - DEBUG -  Entering history()
2025-03-24 20:49:15,197 - yfinance - DEBUG - TLRY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:15,197 - yfinance - DEBUG -   Entering get()
2025-03-24 20:49:15,198 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:49:15,198 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TLRY
2025-03-24 20:49:15,198 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:49:15,198 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,198 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,198 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,199 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,199 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,199 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,199 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,250 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TLRY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1204
2025-03-24 20:49:15,251 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,251 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:49:15,252 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:49:15,253 - yfinance - DEBUG - TLRY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 20:49:15,254 - yfinance - DEBUG - TLRY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 20:49:15,257 - yfinance - DEBUG - TLRY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:49:15,262 - yfinance - DEBUG - TLRY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 20:49:15,262 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:49:15,263 - yfinance - DEBUG - Exiting history()
2025-03-24 20:49:15,263 - yfinance_client - INFO - Current price of TLRY: $0.68
2025-03-24 20:49:15,263 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:15,263 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:15,264 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TLRY
2025-03-24 20:49:15,264 - yfinance - DEBUG - params=None
2025-03-24 20:49:15,264 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,264 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,265 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,265 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,265 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,265 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,266 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,320 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TLRY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1714
2025-03-24 20:49:15,321 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,321 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:15,321 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:15,322 - yfinance_client - INFO - Found 11 expiration dates for TLRY
2025-03-24 20:49:15,322 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-28
2025-03-24 20:49:15,322 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:15,323 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:15,323 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TLRY?date=1743120000
2025-03-24 20:49:15,323 - yfinance - DEBUG - params=None
2025-03-24 20:49:15,323 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,323 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,324 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,324 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,324 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,324 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,324 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,379 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TLRY?date=1743120000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1714
2025-03-24 20:49:15,380 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,381 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:15,381 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:15,384 - yfinance_client - INFO - Retrieved 4 calls and 5 puts
2025-03-24 20:49:15,392 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 20:49:15,393 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:15,393 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:15,393 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TLRY?date=1743724800
2025-03-24 20:49:15,393 - yfinance - DEBUG - params=None
2025-03-24 20:49:15,393 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,394 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,394 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,394 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,394 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,394 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,394 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,442 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TLRY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1739
2025-03-24 20:49:15,443 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,443 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:15,443 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:15,446 - yfinance_client - INFO - Retrieved 4 calls and 5 puts
2025-03-24 20:49:15,454 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 20:49:15,454 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:15,454 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:15,454 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TLRY?date=1744329600
2025-03-24 20:49:15,454 - yfinance - DEBUG - params=None
2025-03-24 20:49:15,455 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,455 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,455 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,455 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,455 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,455 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,455 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,507 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TLRY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1744
2025-03-24 20:49:15,508 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,508 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:15,508 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:15,511 - yfinance_client - INFO - Retrieved 5 calls and 4 puts
2025-03-24 20:49:15,518 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 20:49:15,518 - yfinance - DEBUG - Entering get()
2025-03-24 20:49:15,519 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:49:15,519 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/TLRY?date=1744848000
2025-03-24 20:49:15,519 - yfinance - DEBUG - params=None
2025-03-24 20:49:15,519 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:49:15,519 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:49:15,520 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,520 - yfinance - DEBUG - reusing cookie
2025-03-24 20:49:15,520 - yfinance - DEBUG - reusing crumb
2025-03-24 20:49:15,520 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:49:15,520 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:49:15,573 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/TLRY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1786
2025-03-24 20:49:15,573 - yfinance - DEBUG - response code=200
2025-03-24 20:49:15,574 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:49:15,574 - yfinance - DEBUG - Exiting get()
2025-03-24 20:49:15,577 - yfinance_client - INFO - Retrieved 5 calls and 5 puts
2025-03-24 20:49:15,584 - yfinance_client - INFO - Successfully fetched 4 option chains for TLRY
2025-03-24 20:49:15,585 - __main__ - INFO - Step 3: Preparing analysis data for TLRY...
2025-03-24 20:49:15,585 - __main__ - INFO - Step 4: Processing options data for TLRY...
2025-03-24 20:49:15,585 - __main__ - INFO - Found 4 expiration dates for TLRY
2025-03-24 20:49:15,585 - __main__ - INFO - Processing expiration date 2025-03-28 for TLRY...
2025-03-24 20:49:15,586 - __main__ - DEBUG - ATM calls shape before filtering: (4, 19)
2025-03-24 20:49:15,586 - __main__ - DEBUG - ATM puts shape before filtering: (5, 19)
2025-03-24 20:49:15,587 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:49:15,587 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:49:15,587 - __main__ - WARNING - No valid ATM options found for TLRY on 2025-03-28
2025-03-24 20:49:15,587 - __main__ - INFO - Processing expiration date 2025-04-04 for TLRY...
2025-03-24 20:49:15,588 - __main__ - DEBUG - ATM calls shape before filtering: (4, 19)
2025-03-24 20:49:15,588 - __main__ - DEBUG - ATM puts shape before filtering: (5, 19)
2025-03-24 20:49:15,589 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:49:15,589 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:49:15,589 - __main__ - WARNING - No valid ATM options found for TLRY on 2025-04-04
2025-03-24 20:49:15,589 - __main__ - INFO - Processing expiration date 2025-04-11 for TLRY...
2025-03-24 20:49:15,590 - __main__ - DEBUG - ATM calls shape before filtering: (5, 19)
2025-03-24 20:49:15,590 - __main__ - DEBUG - ATM puts shape before filtering: (4, 19)
2025-03-24 20:49:15,590 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:49:15,591 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:49:15,591 - __main__ - WARNING - No valid ATM options found for TLRY on 2025-04-11
2025-03-24 20:49:15,591 - __main__ - INFO - Processing expiration date 2025-04-17 for TLRY...
2025-03-24 20:49:15,592 - __main__ - DEBUG - ATM calls shape before filtering: (5, 19)
2025-03-24 20:49:15,592 - __main__ - DEBUG - ATM puts shape before filtering: (5, 19)
2025-03-24 20:49:15,592 - __main__ - DEBUG - ATM calls shape after filtering: (0, 19)
2025-03-24 20:49:15,593 - __main__ - DEBUG - ATM puts shape after filtering: (0, 19)
2025-03-24 20:49:15,593 - __main__ - WARNING - No valid ATM options found for TLRY on 2025-04-17
2025-03-24 20:49:15,593 - __main__ - INFO - Step 5: Generating analysis for TLRY...
2025-03-24 20:49:15,593 - __main__ - DEBUG - Calling get_stock_analysis_prompt for TLRY with args: stock_analysis_data, market_context
2025-03-24 20:49:28,240 - __main__ - INFO - Market alignment for TLRY: contrary
2025-03-24 20:49:28,240 - __main__ - INFO - Creating stock analysis result for TLRY...
2025-03-24 20:49:28,240 - __main__ - INFO - Successfully added TLRY to stock analyses
2025-03-24 20:49:28,240 - __main__ - INFO - Updating Notion with analysis for TLRY...
2025-03-24 20:49:28,241 - __main__ - INFO - Sending Discord notification for TLRY...
2025-03-24 20:49:28,241 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2636 chars). Splitting into parts.
2025-03-24 20:49:28,242 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:49:28,573 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:49:28,574 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:49:28,575 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:49:28,879 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 20:49:28,880 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 20:49:28,881 - __main__ - INFO - Successfully sent Discord notification for TLRY
2025-03-24 20:49:28,881 - __main__ - INFO - Completed analysis of 35 stocks
2025-03-24 20:49:28,882 - __main__ - INFO - Searching for credit spread opportunities...
2025-03-24 20:49:28,882 - __main__ - INFO - Skipping SPY due to low technical score
2025-03-24 20:49:28,882 - __main__ - INFO - Skipping QQQ due to low technical score
2025-03-24 20:49:28,882 - __main__ - INFO - Analyzing options spreads for IWM...
2025-03-24 20:49:28,882 - __main__ - INFO - Using options data from stock analysis for IWM
2025-03-24 20:49:51,229 - __main__ - INFO - Analyzing options spreads for VTV...
2025-03-24 20:49:51,229 - __main__ - INFO - Using options data from stock analysis for VTV
2025-03-24 20:50:11,452 - __main__ - INFO - Skipping VGLT due to contrary market alignment
2025-03-24 20:50:11,452 - __main__ - WARNING - No analysis available for VIX, skipping options analysis
2025-03-24 20:50:11,452 - __main__ - INFO - Skipping DIA due to contrary market alignment
2025-03-24 20:50:11,453 - __main__ - INFO - Analyzing options spreads for BND...
2025-03-24 20:50:11,453 - __main__ - INFO - Using options data from stock analysis for BND
2025-03-24 20:50:11,598 - gemini_client - ERROR - Error generating text: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 48
}
]
2025-03-24 20:50:11,599 - gemini_client - WARNING - Rate limit exceeded. Waiting 48 seconds before retry #1
2025-03-24 20:51:16,901 - __main__ - INFO - Analyzing options spreads for BTC-USD...
2025-03-24 20:51:16,902 - __main__ - INFO - Fetching options data directly for BTC-USD
2025-03-24 20:51:16,902 - yfinance - DEBUG - Entering history()
2025-03-24 20:51:16,902 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 20:51:16,903 - yfinance - DEBUG -  Entering history()
2025-03-24 20:51:16,903 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:51:16,903 - yfinance - DEBUG -   Entering get()
2025-03-24 20:51:16,904 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 20:51:16,904 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 20:51:16,904 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 20:51:16,904 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 20:51:16,904 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:51:16,904 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 20:51:16,905 - yfinance - DEBUG - reusing cookie
2025-03-24 20:51:16,905 - yfinance - DEBUG - reusing crumb
2025-03-24 20:51:16,905 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:51:16,905 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 20:51:16,906 - urllib3.connectionpool - DEBUG - Resetting dropped connection: query2.finance.yahoo.com
2025-03-24 20:51:17,034 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1162
2025-03-24 20:51:17,034 - yfinance - DEBUG - response code=200
2025-03-24 20:51:17,035 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 20:51:17,035 - yfinance - DEBUG -   Exiting get()
2025-03-24 20:51:17,036 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-25 03:49:00 only
2025-03-24 20:51:17,037 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-25 03:49:00+00:00 only
2025-03-24 20:51:17,039 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:51:17,042 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-25 00:00:00+00:00 only
2025-03-24 20:51:17,042 - yfinance - DEBUG -  Exiting history()
2025-03-24 20:51:17,043 - yfinance - DEBUG - Exiting history()
2025-03-24 20:51:17,043 - yfinance - DEBUG - Entering get()
2025-03-24 20:51:17,043 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 20:51:17,043 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/BTC-USD
2025-03-24 20:51:17,043 - yfinance - DEBUG - params=None
2025-03-24 20:51:17,044 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 20:51:17,044 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 20:51:17,044 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 20:51:17,044 - yfinance - DEBUG - reusing cookie
2025-03-24 20:51:17,044 - yfinance - DEBUG - reusing crumb
2025-03-24 20:51:17,044 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 20:51:17,045 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 20:51:17,099 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/BTC-USD?crumb=HxKk.4JwkLQ HTTP/1.1" 200 1013
2025-03-24 20:51:17,100 - yfinance - DEBUG - response code=200
2025-03-24 20:51:17,100 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 20:51:17,100 - yfinance - DEBUG - Exiting get()
2025-03-24 20:51:17,100 - yfinance_client - WARNING - No options data available for BTC-USD
2025-03-24 20:51:17,100 - __main__ - WARNING - Failed to retrieve options data for BTC-USD
2025-03-24 20:51:17,101 - __main__ - INFO - Skipping NVDA due to contrary market alignment
2025-03-24 20:51:17,101 - __main__ - INFO - Skipping TSLA due to contrary market alignment
2025-03-24 20:51:17,101 - __main__ - INFO - Skipping AAPL due to contrary market alignment
2025-03-24 20:51:17,101 - __main__ - INFO - Analyzing options spreads for GOOGL...
2025-03-24 20:51:17,101 - __main__ - INFO - Added delay to respect API rate limits...
2025-03-24 20:51:47,104 - __main__ - INFO - Using options data from stock analysis for GOOGL
2025-03-24 20:52:08,907 - __main__ - INFO - Skipping AMZN due to contrary market alignment
2025-03-24 20:52:08,907 - __main__ - INFO - Analyzing options spreads for MSTR...
2025-03-24 20:52:08,908 - __main__ - INFO - Using options data from stock analysis for MSTR
2025-03-24 20:52:31,946 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:52:32,203 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353198972105265302/cVNVvM7bM-yjzpwmgRQT63iUir_ZU2NFk6Aq6gnLHXRMywoTUoiAKMdZKydm-xrS-NsF HTTP/1.1" 204 0
2025-03-24 20:52:32,204 - discord.discord_client - INFO - Message sent successfully to trade_alerts webhook
2025-03-24 20:52:32,205 - __main__ - INFO - Skipping MSFT due to contrary market alignment
2025-03-24 20:52:32,205 - __main__ - INFO - Skipping META due to low technical score
2025-03-24 20:52:32,205 - __main__ - INFO - Skipping TSM due to low technical score
2025-03-24 20:52:32,205 - __main__ - INFO - Skipping LLY due to contrary market alignment
2025-03-24 20:52:32,205 - __main__ - INFO - Analyzing options spreads for MU...
2025-03-24 20:52:32,206 - __main__ - INFO - Using options data from stock analysis for MU
2025-03-24 20:52:58,550 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 20:52:58,868 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353198972105265302/cVNVvM7bM-yjzpwmgRQT63iUir_ZU2NFk6Aq6gnLHXRMywoTUoiAKMdZKydm-xrS-NsF HTTP/1.1" 204 0
2025-03-24 20:52:58,869 - discord.discord_client - INFO - Message sent successfully to trade_alerts webhook
2025-03-24 20:52:58,869 - __main__ - INFO - Skipping PLTR due to contrary market alignment
2025-03-24 20:52:58,870 - __main__ - INFO - Skipping HOOD due to contrary market alignment
2025-03-24 20:52:58,870 - __main__ - INFO - Skipping TSLL due to contrary market alignment
2025-03-24 20:52:58,870 - __main__ - INFO - Skipping BBAI due to contrary market alignment
2025-03-24 20:52:58,870 - __main__ - INFO - Skipping SNAP due to contrary market alignment
2025-03-24 20:52:58,870 - __main__ - INFO - Analyzing options spreads for QUBT...
2025-03-24 20:52:58,870 - __main__ - INFO - Using options data from stock analysis for QUBT
2025-03-24 21:04:00,156 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 21:04:00,157 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 21:04:00,158 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 21:04:00,158 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 21:04:00,475 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 21:04:00,526 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002B1AB559730>
2025-03-24 21:04:00,526 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002B1AB573DD0> server_hostname='api.notion.com' timeout=60.0
2025-03-24 21:04:00,547 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002B1AB4EA7B0>
2025-03-24 21:04:00,548 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 21:04:00,548 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 21:04:00,548 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 21:04:00,549 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 21:04:00,549 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 21:04:01,017 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 04:04:01 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b85900c8fce9c-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-+8NlAhgDDJLzouqUptjmD5HdB5M"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'89c1a221-fad4-4a2d-b5b0-c7b726f48cae'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=LB2J0BV2r7YHlq4YkiduKvDvuVS63W43QHAsjNGYU_w-1742875441-1.0.1.1-1cnfq.0pb6B9wNVA90cD4izZdV88zebfMp0c0i_BvcJ2iqlRjT5.OvfBWs1SOPXBgL.C06Q0uf4WBDy3yvZULvoifXK_xgUBkje9eioxYTo; path=/; expires=Tue, 25-Mar-25 04:34:01 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=w9O3RKfdmMTT_08JP.ZB0xNSyHgt7y5Fa7QbsSLr_sk-1742875441101-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 21:04:01,019 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 21:04:01,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 21:04:01,020 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 21:04:01,020 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 21:04:01,020 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 21:04:01,021 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 21:04:01,021 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 21:04:01,022 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 21:04:01,022 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 21:04:01,022 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 21:04:01,229 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 04:04:01 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b8592f865ce9c-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-1c0qYLP/P7gqr43GsiYzJzfZ6w0"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'c631a825-7850-4881-9e03-84755d9e8388'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 21:04:01,230 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 21:04:01,230 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 21:04:01,231 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 21:04:01,231 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 21:04:01,231 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 21:04:01,231 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 21:04:01,232 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 21:04:01,232 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 21:04:01,232 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 21:04:01,232 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 21:04:03,906 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 04:04:03 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b859459ccce9c-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-+IkzE0mY4rERDWpif+LcHI3Gwmc"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'8fb8ce7b-bc54-4c05-a517-d916b1139a41'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 21:04:03,908 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 21:04:03,908 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 21:04:03,909 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 21:04:03,909 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 21:04:03,909 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 21:04:03,909 - __main__ - INFO - All clients initialized successfully
2025-03-24 21:04:03,909 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 21:04:03,910 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 21:04:03,910 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:03,910 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:03,911 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
2025-03-24 21:04:03,911 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:03,912 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 21:04:03,913 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 21:04:03,957 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:03,957 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:03,958 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:03,958 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:03,958 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 21:04:03,958 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:03,958 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:03,959 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:03,959 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:03,960 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 21:04:03,961 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 21:04:03,961 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 21:04:03,961 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:03,963 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 21:04:04,079 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 21:04:04,080 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 21:04:04,080 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,081 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,082 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 21:04:04,245 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1659
2025-03-24 21:04:04,246 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,246 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,246 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,248 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:04,255 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,259 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,263 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,263 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,263 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,265 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,266 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 21:04:04,269 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:04,269 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:04,270 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,270 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 21:04:04,271 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:04,271 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,271 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:04,271 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:04,271 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 21:04:04,272 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,272 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,272 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,272 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,272 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,272 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,273 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,273 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,355 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1695
2025-03-24 21:04:04,356 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,356 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,356 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,357 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:04,361 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,365 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,369 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,369 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,370 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,371 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,372 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 21:04:04,374 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:04,375 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:04,375 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,375 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 21:04:04,376 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:04,376 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,376 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:04,376 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:04,376 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 21:04:04,377 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,377 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,377 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,377 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,377 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,377 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,377 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,378 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,445 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1635
2025-03-24 21:04:04,446 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,447 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,447 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,448 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:04,452 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,455 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,459 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,459 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,459 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,461 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,461 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 21:04:04,464 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:04,464 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:04,465 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,465 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 21:04:04,465 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:04,466 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,466 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:04,466 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:04,466 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 21:04:04,466 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,466 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,467 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,467 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,467 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,467 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,467 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,467 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,534 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1652
2025-03-24 21:04:04,536 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,536 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,537 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,537 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:04,542 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,544 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,548 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,548 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,549 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,550 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,550 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 21:04:04,553 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:04,553 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:04,553 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,553 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 21:04:04,554 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:04,554 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,554 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:04,554 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:04,554 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 21:04:04,555 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,555 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,555 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,555 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,555 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,555 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,556 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,556 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,624 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1687
2025-03-24 21:04:04,624 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,625 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,625 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,626 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:04,630 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,632 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,636 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,636 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,637 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,638 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,639 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 21:04:04,642 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:04,642 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:04,642 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,643 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 21:04:04,643 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:04,644 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,644 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:04,645 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:04,645 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 21:04:04,645 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,645 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,645 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,646 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,646 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,646 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,646 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,646 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,721 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1679
2025-03-24 21:04:04,722 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,723 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,723 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,724 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:04,728 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,731 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,735 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,735 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,736 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,737 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,737 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 21:04:04,740 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:04,741 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:04,741 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,741 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 21:04:04,742 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:04,742 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,742 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:04,742 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:04,742 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 21:04:04,743 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,743 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,743 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,743 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,743 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,743 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,744 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,744 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,812 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1677
2025-03-24 21:04:04,813 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,813 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,813 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,814 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:04,819 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,820 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,823 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:04,824 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,824 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,826 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,826 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 21:04:04,829 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:04,829 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:04,829 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,830 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 21:04:04,830 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:04,830 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,831 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:04,831 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:04,831 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 21:04:04,831 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,832 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,832 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,832 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,832 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,832 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,833 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,833 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,891 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:04:04,892 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,892 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:04,892 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:04,893 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 04:01:00
2025-03-24 21:04:04,898 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:01:00+00:00
2025-03-24 21:04:04,900 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:01:00+00:00
2025-03-24 21:04:04,905 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:00:00+00:00
2025-03-24 21:04:04,906 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:04,906 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,908 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:04,908 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (101, 5)
2025-03-24 21:04:04,911 - yfinance_client - INFO - Getting VIX data for volatility filter...
2025-03-24 21:04:04,911 - yfinance - DEBUG - Entering history()
2025-03-24 21:04:04,911 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 21:04:04,912 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,912 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,913 - yfinance - DEBUG -   Entering get()
2025-03-24 21:04:04,913 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 21:04:04,913 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 21:04:04,913 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,913 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,913 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,914 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,914 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,914 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,914 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,914 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 21:04:04,975 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 934
2025-03-24 21:04:04,976 - yfinance - DEBUG - response code=200
2025-03-24 21:04:04,976 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 21:04:04,976 - yfinance - DEBUG -   Exiting get()
2025-03-24 21:04:04,977 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 21:04:04,982 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 21:04:04,983 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 21:04:04,987 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 21:04:04,987 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:04,988 - yfinance - DEBUG - Exiting history()
2025-03-24 21:04:04,988 - yfinance - DEBUG - Entering history()
2025-03-24 21:04:04,988 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:04,988 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,988 - yfinance - DEBUG -   Entering get()
2025-03-24 21:04:04,989 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 21:04:04,989 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 21:04:04,989 - yfinance - DEBUG - params={'range': '1mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:04,989 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 21:04:04,990 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:04,990 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,990 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:04,990 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:04,990 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:04,990 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 21:04:05,047 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1116
2025-03-24 21:04:05,048 - yfinance - DEBUG - response code=200
2025-03-24 21:04:05,048 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 21:04:05,048 - yfinance - DEBUG -   Exiting get()
2025-03-24 21:04:05,049 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-02-24 08:00:00 -> 2025-03-24 07:00:00
2025-03-24 21:04:05,050 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-02-24 02:00:00-06:00 -> 2025-03-24 02:00:00-05:00
2025-03-24 21:04:05,052 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-02-24 00:00:00-06:00 -> 2025-03-24 00:00:00-05:00
2025-03-24 21:04:05,055 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-02-24 00:00:00-06:00 -> 2025-03-24 00:00:00-05:00
2025-03-24 21:04:05,056 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:05,057 - yfinance - DEBUG - Exiting history()
2025-03-24 21:04:05,057 - yfinance_client - INFO - Current VIX: 17.48, Status: stable, Risk Adjustment: standard
2025-03-24 21:04:05,057 - yfinance_client - INFO - Getting options sentiment for SPY...
2025-03-24 21:04:05,057 - yfinance - DEBUG - Entering get()
2025-03-24 21:04:05,058 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:04:05,058 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 21:04:05,058 - yfinance - DEBUG - params=None
2025-03-24 21:04:05,058 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:04:05,058 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:05,058 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:05,058 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:05,059 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:05,059 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:05,059 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:04:05,145 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:04:05,157 - yfinance - DEBUG - response code=200
2025-03-24 21:04:05,157 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:04:05,157 - yfinance - DEBUG - Exiting get()
2025-03-24 21:04:05,159 - yfinance_client - INFO - Using expiration date: 2025-04-01
2025-03-24 21:04:05,159 - yfinance - DEBUG - Entering get()
2025-03-24 21:04:05,160 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:04:05,160 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743465600
2025-03-24 21:04:05,160 - yfinance - DEBUG - params=None
2025-03-24 21:04:05,160 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:04:05,160 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:05,161 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:05,161 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:05,161 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:05,161 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:05,161 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:04:05,298 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743465600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:04:05,300 - yfinance - DEBUG - response code=200
2025-03-24 21:04:05,300 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:04:05,300 - yfinance - DEBUG - Exiting get()
2025-03-24 21:04:05,305 - gemini_client - DEBUG - Using structured prompt with format: market_trend
2025-03-24 21:04:05,305 - gemini_client - DEBUG - Generated prompt of length 9104
2025-03-24 21:04:29,424 - gemini_client - DEBUG - Received raw response of length 4824
2025-03-24 21:04:29,424 - __main__ - INFO - Comprehensive market analysis complete: bullish
2025-03-24 21:04:29,425 - __main__ - INFO - Starting stock analysis...
2025-03-24 21:04:29,425 - __main__ - INFO - Analyzing 36 symbols from watchlist
2025-03-24 21:04:29,426 - __main__ - INFO - Processing SPY (1/36)...
2025-03-24 21:04:29,426 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:29,426 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:29,427 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:29,427 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 21:04:29,428 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:29,428 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,428 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:29,428 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:29,429 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 21:04:29,429 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,429 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:29,429 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:29,429 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,430 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:29,430 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:29,430 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,430 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:29,512 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1651
2025-03-24 21:04:29,512 - yfinance - DEBUG - response code=200
2025-03-24 21:04:29,513 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:29,513 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:29,514 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:29,519 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,522 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,526 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,526 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:29,526 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:29,528 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:29,528 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 21:04:29,528 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:29,529 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:29,529 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:29,529 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 21:04:29,530 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:29,530 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,530 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:29,530 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:29,530 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 21:04:29,530 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,530 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:29,530 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:29,531 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,531 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:29,531 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:29,531 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,531 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:29,626 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2620
2025-03-24 21:04:29,626 - yfinance - DEBUG - response code=200
2025-03-24 21:04:29,626 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:29,627 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:29,628 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:29,629 - yfinance - DEBUG - SPY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:29,632 - yfinance - DEBUG - SPY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:29,636 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:29,637 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:29,637 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:29,638 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:29,639 - yfinance_client - INFO - Downloaded data for SPY, shape: (59, 5)
2025-03-24 21:04:29,645 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:29,649 - __main__ - ERROR - Essential stock data missing for SPY: ['ema9', 'ema21']
2025-03-24 21:04:29,649 - __main__ - INFO - Processing QQQ (2/36)...
2025-03-24 21:04:29,649 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:29,650 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:29,650 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:29,650 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 21:04:29,651 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:29,651 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,651 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:29,651 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:29,651 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 21:04:29,652 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,652 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:29,652 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:29,652 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,652 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:29,652 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:29,652 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,653 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:29,721 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1695
2025-03-24 21:04:29,722 - yfinance - DEBUG - response code=200
2025-03-24 21:04:29,722 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:29,722 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:29,723 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:29,727 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,731 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,735 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,735 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:29,735 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:29,737 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:29,737 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 21:04:29,737 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:29,737 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:29,738 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:29,738 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 21:04:29,738 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:29,738 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,739 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:29,739 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:29,739 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 21:04:29,739 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,739 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:29,740 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:29,740 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,740 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:29,740 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:29,740 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,740 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:29,830 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2745
2025-03-24 21:04:29,831 - yfinance - DEBUG - response code=200
2025-03-24 21:04:29,831 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:29,831 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:29,832 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:29,833 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:29,837 - yfinance - DEBUG - QQQ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:29,840 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:29,841 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:29,841 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:29,843 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:29,843 - yfinance_client - INFO - Downloaded data for QQQ, shape: (59, 5)
2025-03-24 21:04:29,849 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:29,852 - __main__ - ERROR - Essential stock data missing for QQQ: ['ema9', 'ema21']
2025-03-24 21:04:29,853 - __main__ - INFO - Processing IWM (3/36)...
2025-03-24 21:04:29,853 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:29,853 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:29,853 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:29,854 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 21:04:29,854 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:29,854 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,854 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:29,854 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:29,855 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 21:04:29,855 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,855 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:29,855 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:29,855 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,855 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:29,856 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:29,856 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,856 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:29,942 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1622
2025-03-24 21:04:29,942 - yfinance - DEBUG - response code=200
2025-03-24 21:04:29,943 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:29,943 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:29,944 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:29,949 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,952 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,956 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:29,956 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:29,957 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:29,958 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:29,959 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 21:04:29,959 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:29,959 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:29,959 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:29,960 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 21:04:29,960 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:29,960 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,960 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:29,960 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:29,961 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 21:04:29,961 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:29,961 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:29,961 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:29,961 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,961 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:29,962 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:29,962 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:29,962 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,042 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2617
2025-03-24 21:04:30,042 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,042 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,043 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,044 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:30,044 - yfinance - DEBUG - IWM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:30,048 - yfinance - DEBUG - IWM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,052 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,052 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,052 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,054 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,054 - yfinance_client - INFO - Downloaded data for IWM, shape: (59, 5)
2025-03-24 21:04:30,061 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:30,064 - __main__ - ERROR - Essential stock data missing for IWM: ['ema9', 'ema21']
2025-03-24 21:04:30,064 - __main__ - INFO - Processing VTV (4/36)...
2025-03-24 21:04:30,064 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,064 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,065 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,065 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 21:04:30,065 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,065 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,066 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,066 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,066 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 21:04:30,066 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,066 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,067 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,067 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,067 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,067 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,067 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,068 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,130 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1646
2025-03-24 21:04:30,130 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,130 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,130 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,131 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:30,135 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,137 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,141 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,141 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,142 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,144 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,145 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 21:04:30,145 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,145 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,145 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,146 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 21:04:30,146 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,146 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,147 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,147 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,147 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 21:04:30,147 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,147 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,147 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,148 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,148 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,148 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,148 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,148 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,227 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1984
2025-03-24 21:04:30,228 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,228 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,228 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,229 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:30,231 - yfinance - DEBUG - VTV: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:30,233 - yfinance - DEBUG - VTV: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,236 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,237 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,237 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,239 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,239 - yfinance_client - INFO - Downloaded data for VTV, shape: (59, 5)
2025-03-24 21:04:30,244 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:30,246 - __main__ - ERROR - Essential stock data missing for VTV: ['ema9', 'ema21']
2025-03-24 21:04:30,246 - __main__ - INFO - Processing VGLT (5/36)...
2025-03-24 21:04:30,247 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,247 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,247 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,248 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 21:04:30,248 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,248 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,249 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,249 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,249 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 21:04:30,249 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,250 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,250 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,250 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,250 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,250 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,250 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,250 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,312 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1685
2025-03-24 21:04:30,312 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,313 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,313 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,314 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:30,318 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,320 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,324 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,324 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,324 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,326 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,326 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 21:04:30,326 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,326 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,327 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,327 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 21:04:30,327 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,327 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,328 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,328 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,328 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 21:04:30,328 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,328 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,328 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,329 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,329 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,329 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,329 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,329 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,398 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2404
2025-03-24 21:04:30,399 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,400 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,400 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,401 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:30,402 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:30,404 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 21:04:30,407 - yfinance - DEBUG - VGLT: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,412 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,412 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,412 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,414 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,414 - yfinance_client - INFO - Downloaded data for VGLT, shape: (59, 5)
2025-03-24 21:04:30,419 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:30,422 - __main__ - ERROR - Essential stock data missing for VGLT: ['ema9', 'ema21']
2025-03-24 21:04:30,422 - __main__ - INFO - Processing VIX (6/36)...
2025-03-24 21:04:30,422 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,422 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,423 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,423 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 21:04:30,423 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,424 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,424 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,424 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,424 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 21:04:30,424 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,425 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,425 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,425 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,425 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,425 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,425 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,425 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,483 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 801
2025-03-24 21:04:30,484 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,484 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,484 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,488 - yfinance - ERROR - 
1 Failed download:
2025-03-24 21:04:30,488 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=5d)')
2025-03-24 21:04:30,488 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=5d)

2025-03-24 21:04:30,490 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,491 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 21:04:30,491 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,491 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,491 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,492 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VIX', 1, 0])
2025-03-24 21:04:30,492 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,492 - yfinance - DEBUG - VIX: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,492 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,493 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,493 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VIX
2025-03-24 21:04:30,493 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,493 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,493 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,493 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,494 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,494 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,494 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,494 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,551 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VIX?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 802
2025-03-24 21:04:30,552 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,552 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,552 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,553 - yfinance - ERROR - 
1 Failed download:
2025-03-24 21:04:30,553 - yfinance - ERROR - ['VIX']: YFPricesMissingError('possibly delisted; no price data found  (period=3mo)')
2025-03-24 21:04:30,553 - yfinance - DEBUG - ['VIX']: Traceback (most recent call last):
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\multi.py", line 277, in _download_one
    data = Ticker(ticker).history(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\PROGRAMMING\BIG PROJECT\WSB-2\venv\Lib\site-packages\yfinance\scrapers\history.py", line 245, in history
    raise _exception
yfinance.exceptions.YFPricesMissingError: possibly delisted; no price data found  (period=3mo)

2025-03-24 21:04:30,556 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,556 - yfinance_client - INFO - Downloaded data for VIX, shape: (0, 6)
2025-03-24 21:04:30,556 - yfinance_client - ERROR - Failed to retrieve data for VIX
2025-03-24 21:04:30,557 - __main__ - ERROR - Failed to get data for VIX
2025-03-24 21:04:30,557 - __main__ - INFO - Processing DIA (7/36)...
2025-03-24 21:04:30,557 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,557 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,557 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,558 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 21:04:30,558 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,558 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,558 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,558 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,558 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 21:04:30,559 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,559 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,559 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,560 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,560 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,560 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,560 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,560 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,623 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1675
2025-03-24 21:04:30,624 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,624 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,625 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,626 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:30,630 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,633 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,637 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,637 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,637 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,639 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,639 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 21:04:30,639 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,640 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,640 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,640 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 21:04:30,641 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,641 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,641 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,641 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,642 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 21:04:30,642 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,642 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,642 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,642 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,642 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,642 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,643 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,643 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,724 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2582
2025-03-24 21:04:30,730 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,730 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,730 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,732 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:30,732 - yfinance - DEBUG - DIA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:30,736 - yfinance - DEBUG - DIA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,740 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,740 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,741 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,742 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,743 - yfinance_client - INFO - Downloaded data for DIA, shape: (59, 5)
2025-03-24 21:04:30,748 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:30,751 - __main__ - ERROR - Essential stock data missing for DIA: ['ema9', 'ema21']
2025-03-24 21:04:30,752 - __main__ - INFO - Processing BND (8/36)...
2025-03-24 21:04:30,752 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,752 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,752 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,752 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 21:04:30,753 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,753 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,753 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,753 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,754 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 21:04:30,754 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,754 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,754 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,754 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,754 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,755 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,755 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,755 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,815 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1681
2025-03-24 21:04:30,816 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,816 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,816 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,817 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:30,822 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,823 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,827 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:30,827 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,828 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,829 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,829 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 21:04:30,830 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,830 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,830 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,830 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 21:04:30,831 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,831 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,831 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,831 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,832 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 21:04:30,832 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,832 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,832 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,832 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,832 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,832 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,833 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,833 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:30,913 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2265
2025-03-24 21:04:30,914 - yfinance - DEBUG - response code=200
2025-03-24 21:04:30,915 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:30,915 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:30,916 - yfinance - DEBUG - BND: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:30,917 - yfinance - DEBUG - BND: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:30,919 - yfinance - DEBUG - Adding out-of-range Dividends @ 2024-12-24 in new prices row of NaNs
2025-03-24 21:04:30,923 - yfinance - DEBUG - BND: OHLC after combining events: 2024-12-24 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,926 - yfinance - DEBUG - BND: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:30,927 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:30,927 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:30,929 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:30,929 - yfinance_client - INFO - Downloaded data for BND, shape: (59, 5)
2025-03-24 21:04:30,935 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:30,939 - __main__ - ERROR - Essential stock data missing for BND: ['ema9', 'ema21']
2025-03-24 21:04:30,940 - __main__ - INFO - Processing BTC-USD (9/36)...
2025-03-24 21:04:30,940 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:30,940 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:30,940 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:30,941 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 21:04:30,941 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:30,941 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,941 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:30,941 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:30,942 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 21:04:30,942 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:30,942 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:30,942 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:30,942 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,942 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:30,943 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:30,943 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:30,943 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,007 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:04:31,008 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,008 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,008 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,009 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 04:02:00
2025-03-24 21:04:31,013 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:02:00+00:00
2025-03-24 21:04:31,015 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:02:00+00:00
2025-03-24 21:04:31,020 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:00:00+00:00
2025-03-24 21:04:31,020 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,021 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,022 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,022 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (101, 5)
2025-03-24 21:04:31,023 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,023 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,023 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,023 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 21:04:31,024 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,024 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,024 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,024 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,024 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 21:04:31,025 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,025 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,025 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,025 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,026 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,026 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,026 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,026 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,083 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:04:31,084 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,084 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,084 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,085 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2024-12-25 00:00:00 -> 2025-03-25 04:02:00
2025-03-24 21:04:31,086 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2024-12-25 00:00:00+00:00 -> 2025-03-25 04:02:00+00:00
2025-03-24 21:04:31,088 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 21:04:31,092 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2024-12-25 00:00:00+00:00 -> 2025-03-25 00:00:00+00:00
2025-03-24 21:04:31,092 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,092 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,094 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,094 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (90, 5)
2025-03-24 21:04:31,099 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (90, 5)
2025-03-24 21:04:31,103 - __main__ - ERROR - Essential stock data missing for BTC-USD: ['ema9', 'ema21']
2025-03-24 21:04:31,104 - __main__ - INFO - Processing NVDA (10/36)...
2025-03-24 21:04:31,104 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,105 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,105 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,105 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 21:04:31,106 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,106 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,106 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,106 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,106 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 21:04:31,107 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,107 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,107 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,107 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,107 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,107 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,108 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,108 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,178 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1700
2025-03-24 21:04:31,179 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,179 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,179 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,180 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:31,184 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,186 - yfinance - DEBUG - NVDA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,191 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,192 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,192 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,194 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,194 - yfinance_client - INFO - Downloaded data for NVDA, shape: (35, 5)
2025-03-24 21:04:31,194 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,194 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,195 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,195 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2025-03-24 21:04:31,195 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,195 - yfinance - DEBUG - NVDA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,196 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,196 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,196 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2025-03-24 21:04:31,196 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,196 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,197 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,197 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,197 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,197 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,197 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,197 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,270 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2740
2025-03-24 21:04:31,272 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,272 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,272 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,273 - yfinance - DEBUG - NVDA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:31,274 - yfinance - DEBUG - NVDA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:31,278 - yfinance - DEBUG - NVDA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,281 - yfinance - DEBUG - NVDA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,282 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,282 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,283 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,284 - yfinance_client - INFO - Downloaded data for NVDA, shape: (59, 5)
2025-03-24 21:04:31,289 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:31,292 - __main__ - ERROR - Essential stock data missing for NVDA: ['ema9', 'ema21']
2025-03-24 21:04:31,292 - __main__ - INFO - Processing TSLA (11/36)...
2025-03-24 21:04:31,292 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,293 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,293 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,293 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 21:04:31,293 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,294 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,294 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,294 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,294 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 21:04:31,294 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,295 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,295 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,295 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,295 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,295 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,295 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,296 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,364 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1824
2025-03-24 21:04:31,364 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,365 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,365 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,366 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:31,370 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,372 - yfinance - DEBUG - TSLA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,375 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,376 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,376 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,378 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,378 - yfinance_client - INFO - Downloaded data for TSLA, shape: (35, 5)
2025-03-24 21:04:31,378 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,378 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,378 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,379 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLA', 1, 0])
2025-03-24 21:04:31,380 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,380 - yfinance - DEBUG - TSLA: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,380 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,380 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,381 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLA
2025-03-24 21:04:31,381 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,381 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,381 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,381 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,382 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,382 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,382 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,382 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,438 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLA?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2301
2025-03-24 21:04:31,439 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,440 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,440 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,441 - yfinance - DEBUG - TSLA: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:31,442 - yfinance - DEBUG - TSLA: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:31,444 - yfinance - DEBUG - TSLA: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,448 - yfinance - DEBUG - TSLA: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,448 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,448 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,450 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,450 - yfinance_client - INFO - Downloaded data for TSLA, shape: (59, 5)
2025-03-24 21:04:31,456 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:31,459 - __main__ - ERROR - Essential stock data missing for TSLA: ['ema9', 'ema21']
2025-03-24 21:04:31,459 - __main__ - INFO - Processing AAPL (12/36)...
2025-03-24 21:04:31,459 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,459 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,460 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,460 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 21:04:31,460 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,461 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,461 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,461 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,461 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 21:04:31,461 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,462 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,462 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,462 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,462 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,462 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,462 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,463 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,533 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1694
2025-03-24 21:04:31,534 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,534 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,535 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,536 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:31,540 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,542 - yfinance - DEBUG - AAPL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,545 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,546 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,546 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,547 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,548 - yfinance_client - INFO - Downloaded data for AAPL, shape: (35, 5)
2025-03-24 21:04:31,548 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,548 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,549 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,549 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-24 21:04:31,549 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,549 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,550 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,550 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,550 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-24 21:04:31,551 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,551 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,551 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,551 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,551 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,551 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,552 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,552 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,660 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2410
2025-03-24 21:04:31,661 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,661 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,661 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,662 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:31,663 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:31,667 - yfinance - DEBUG - AAPL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,670 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,671 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,671 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,673 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,673 - yfinance_client - INFO - Downloaded data for AAPL, shape: (59, 5)
2025-03-24 21:04:31,679 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:31,681 - __main__ - ERROR - Essential stock data missing for AAPL: ['ema9', 'ema21']
2025-03-24 21:04:31,682 - __main__ - INFO - Processing GOOGL (13/36)...
2025-03-24 21:04:31,682 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,682 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,682 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,682 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 21:04:31,683 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,683 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,683 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,683 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,684 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 21:04:31,684 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,684 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,684 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,684 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,684 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,685 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,685 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,685 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,756 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1668
2025-03-24 21:04:31,757 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,757 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,757 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,758 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:31,763 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,764 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,768 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,769 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,769 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,771 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,771 - yfinance_client - INFO - Downloaded data for GOOGL, shape: (35, 5)
2025-03-24 21:04:31,771 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,772 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,772 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,773 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOGL', 1, 0])
2025-03-24 21:04:31,773 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,773 - yfinance - DEBUG - GOOGL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,774 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,774 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,774 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOGL
2025-03-24 21:04:31,774 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,774 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,775 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,775 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,775 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,775 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,775 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,775 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,833 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOGL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2529
2025-03-24 21:04:31,834 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,834 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,834 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,835 - yfinance - DEBUG - GOOGL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:31,836 - yfinance - DEBUG - GOOGL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:31,839 - yfinance - DEBUG - GOOGL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,842 - yfinance - DEBUG - GOOGL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:31,843 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,843 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,845 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,845 - yfinance_client - INFO - Downloaded data for GOOGL, shape: (59, 5)
2025-03-24 21:04:31,851 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:31,853 - __main__ - ERROR - Essential stock data missing for GOOGL: ['ema9', 'ema21']
2025-03-24 21:04:31,854 - __main__ - INFO - Processing AMZN (14/36)...
2025-03-24 21:04:31,854 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,854 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,854 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,855 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 21:04:31,855 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,856 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,856 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,856 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,856 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 21:04:31,856 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,857 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,857 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,857 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,857 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,857 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,857 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,858 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:31,925 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1699
2025-03-24 21:04:31,926 - yfinance - DEBUG - response code=200
2025-03-24 21:04:31,926 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:31,926 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:31,927 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:31,932 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,933 - yfinance - DEBUG - AMZN: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,937 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:31,937 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:31,937 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:31,940 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:31,940 - yfinance_client - INFO - Downloaded data for AMZN, shape: (35, 5)
2025-03-24 21:04:31,941 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:31,941 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:31,942 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:31,942 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2025-03-24 21:04:31,942 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:31,943 - yfinance - DEBUG - AMZN: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,943 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:31,943 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:31,943 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2025-03-24 21:04:31,943 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:31,943 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:31,944 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:31,944 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,944 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:31,944 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:31,944 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:31,945 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,040 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2149
2025-03-24 21:04:32,041 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,041 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,041 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,042 - yfinance - DEBUG - AMZN: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:32,043 - yfinance - DEBUG - AMZN: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:32,045 - yfinance - DEBUG - AMZN: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,049 - yfinance - DEBUG - AMZN: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,049 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,049 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,051 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,051 - yfinance_client - INFO - Downloaded data for AMZN, shape: (59, 5)
2025-03-24 21:04:32,057 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:32,060 - __main__ - ERROR - Essential stock data missing for AMZN: ['ema9', 'ema21']
2025-03-24 21:04:32,060 - __main__ - INFO - Processing MSTR (15/36)...
2025-03-24 21:04:32,060 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,060 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,061 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,061 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 21:04:32,061 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,061 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,062 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,062 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,062 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 21:04:32,062 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,062 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,062 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,063 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,063 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,063 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,063 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,063 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,137 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1732
2025-03-24 21:04:32,137 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,138 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,138 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,139 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:32,143 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,145 - yfinance - DEBUG - MSTR: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,149 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,149 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,149 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,151 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,151 - yfinance_client - INFO - Downloaded data for MSTR, shape: (35, 5)
2025-03-24 21:04:32,151 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,151 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,151 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,152 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSTR', 1, 0])
2025-03-24 21:04:32,152 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,152 - yfinance - DEBUG - MSTR: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,152 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,153 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,153 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSTR
2025-03-24 21:04:32,153 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,153 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,153 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,154 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,154 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,154 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,154 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,154 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,216 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSTR?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2214
2025-03-24 21:04:32,217 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,217 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,218 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,219 - yfinance - DEBUG - MSTR: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:32,220 - yfinance - DEBUG - MSTR: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:32,221 - yfinance - DEBUG - MSTR: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,224 - yfinance - DEBUG - MSTR: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,225 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,225 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,227 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,227 - yfinance_client - INFO - Downloaded data for MSTR, shape: (59, 5)
2025-03-24 21:04:32,233 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:32,236 - __main__ - ERROR - Essential stock data missing for MSTR: ['ema9', 'ema21']
2025-03-24 21:04:32,236 - __main__ - INFO - Processing MSFT (16/36)...
2025-03-24 21:04:32,237 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,237 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,237 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,237 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 21:04:32,238 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,238 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,238 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,238 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,239 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 21:04:32,239 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,239 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,239 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,239 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,239 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,240 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,240 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,240 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,361 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1683
2025-03-24 21:04:32,362 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,362 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,363 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,364 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:32,368 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,369 - yfinance - DEBUG - MSFT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,373 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,374 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,374 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,375 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,376 - yfinance_client - INFO - Downloaded data for MSFT, shape: (35, 5)
2025-03-24 21:04:32,376 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,376 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,377 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,377 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2025-03-24 21:04:32,377 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,377 - yfinance - DEBUG - MSFT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,378 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,378 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,378 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2025-03-24 21:04:32,378 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,378 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,378 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,379 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,379 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,379 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,379 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,379 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,476 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2486
2025-03-24 21:04:32,476 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,477 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,477 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,478 - yfinance - DEBUG - MSFT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:32,479 - yfinance - DEBUG - MSFT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:32,483 - yfinance - DEBUG - MSFT: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,486 - yfinance - DEBUG - MSFT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,487 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,487 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,489 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,489 - yfinance_client - INFO - Downloaded data for MSFT, shape: (59, 5)
2025-03-24 21:04:32,495 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:32,498 - __main__ - ERROR - Essential stock data missing for MSFT: ['ema9', 'ema21']
2025-03-24 21:04:32,498 - __main__ - INFO - Processing META (17/36)...
2025-03-24 21:04:32,498 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,498 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,498 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,500 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 21:04:32,500 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,500 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,500 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,500 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,501 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 21:04:32,501 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,501 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,501 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,501 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,501 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,501 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,501 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,501 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,573 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1717
2025-03-24 21:04:32,574 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,574 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,574 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,575 - yfinance - DEBUG - META: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:32,579 - yfinance - DEBUG - META: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,581 - yfinance - DEBUG - META: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,585 - yfinance - DEBUG - META: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,586 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,586 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,588 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,588 - yfinance_client - INFO - Downloaded data for META, shape: (35, 5)
2025-03-24 21:04:32,588 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,589 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,589 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,589 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-24 21:04:32,590 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,590 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,590 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,590 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,590 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-24 21:04:32,591 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,591 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,591 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,591 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,591 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,591 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,592 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,592 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,658 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2608
2025-03-24 21:04:32,659 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,659 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,659 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,661 - yfinance - DEBUG - META: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:32,662 - yfinance - DEBUG - META: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:32,665 - yfinance - DEBUG - META: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,669 - yfinance - DEBUG - META: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,669 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,669 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,671 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,671 - yfinance_client - INFO - Downloaded data for META, shape: (59, 5)
2025-03-24 21:04:32,677 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:32,680 - __main__ - ERROR - Essential stock data missing for META: ['ema9', 'ema21']
2025-03-24 21:04:32,680 - __main__ - INFO - Processing TSM (18/36)...
2025-03-24 21:04:32,681 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,681 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,681 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,681 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 21:04:32,681 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,681 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,681 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,681 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,681 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 21:04:32,682 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,682 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,682 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,682 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,682 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,683 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,683 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,683 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,746 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1643
2025-03-24 21:04:32,746 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,747 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,747 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,748 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:32,752 - yfinance - DEBUG - TSM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,755 - yfinance - DEBUG - TSM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,759 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,760 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,760 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,761 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,761 - yfinance_client - INFO - Downloaded data for TSM, shape: (35, 5)
2025-03-24 21:04:32,762 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,762 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,762 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,763 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2025-03-24 21:04:32,763 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,763 - yfinance - DEBUG - TSM: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,763 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,763 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,764 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2025-03-24 21:04:32,764 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,764 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,764 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,764 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,764 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,764 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,765 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,765 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,864 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2666
2025-03-24 21:04:32,865 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,865 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,865 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,867 - yfinance - DEBUG - TSM: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:32,867 - yfinance - DEBUG - TSM: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:32,871 - yfinance - DEBUG - TSM: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,874 - yfinance - DEBUG - TSM: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:32,875 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,875 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,877 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,877 - yfinance_client - INFO - Downloaded data for TSM, shape: (59, 5)
2025-03-24 21:04:32,882 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:32,885 - __main__ - ERROR - Essential stock data missing for TSM: ['ema9', 'ema21']
2025-03-24 21:04:32,885 - __main__ - INFO - Processing LLY (19/36)...
2025-03-24 21:04:32,886 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,886 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,886 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,886 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 21:04:32,887 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,887 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,887 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,887 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,887 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 21:04:32,888 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,888 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,888 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,888 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,888 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,888 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,888 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,889 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:32,959 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1661
2025-03-24 21:04:32,960 - yfinance - DEBUG - response code=200
2025-03-24 21:04:32,960 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:32,960 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:32,961 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:32,965 - yfinance - DEBUG - LLY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,967 - yfinance - DEBUG - LLY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,970 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:32,971 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:32,971 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:32,973 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:32,973 - yfinance_client - INFO - Downloaded data for LLY, shape: (35, 5)
2025-03-24 21:04:32,973 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:32,973 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:32,974 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:32,974 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LLY', 1, 0])
2025-03-24 21:04:32,974 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:32,975 - yfinance - DEBUG - LLY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,975 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:32,975 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:32,975 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LLY
2025-03-24 21:04:32,976 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:32,976 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:32,976 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:32,976 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,976 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:32,976 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:32,976 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:32,977 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,097 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LLY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2433
2025-03-24 21:04:33,098 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,098 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,098 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,099 - yfinance - DEBUG - LLY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:33,100 - yfinance - DEBUG - LLY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:33,104 - yfinance - DEBUG - LLY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,108 - yfinance - DEBUG - LLY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,108 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,108 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,110 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,110 - yfinance_client - INFO - Downloaded data for LLY, shape: (59, 5)
2025-03-24 21:04:33,116 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:33,119 - __main__ - ERROR - Essential stock data missing for LLY: ['ema9', 'ema21']
2025-03-24 21:04:33,119 - __main__ - INFO - Processing MU (20/36)...
2025-03-24 21:04:33,119 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,120 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,120 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,120 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 21:04:33,121 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,121 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,121 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,121 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,121 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 21:04:33,122 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,122 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,122 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,122 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,122 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,122 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,122 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,123 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,185 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1700
2025-03-24 21:04:33,186 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,187 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,187 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,188 - yfinance - DEBUG - MU: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:33,193 - yfinance - DEBUG - MU: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,194 - yfinance - DEBUG - MU: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,198 - yfinance - DEBUG - MU: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,198 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,199 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,200 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,200 - yfinance_client - INFO - Downloaded data for MU, shape: (35, 5)
2025-03-24 21:04:33,200 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,201 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,201 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,201 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MU', 1, 0])
2025-03-24 21:04:33,202 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,202 - yfinance - DEBUG - MU: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,202 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,202 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,202 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MU
2025-03-24 21:04:33,203 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,203 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,203 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,203 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,204 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,204 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,204 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,204 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,315 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MU?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2141
2025-03-24 21:04:33,316 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,317 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,317 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,318 - yfinance - DEBUG - MU: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:33,319 - yfinance - DEBUG - MU: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:33,322 - yfinance - DEBUG - MU: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,326 - yfinance - DEBUG - MU: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,326 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,327 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,328 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,329 - yfinance_client - INFO - Downloaded data for MU, shape: (59, 5)
2025-03-24 21:04:33,334 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:33,337 - __main__ - ERROR - Essential stock data missing for MU: ['ema9', 'ema21']
2025-03-24 21:04:33,337 - __main__ - INFO - Processing PLTR (21/36)...
2025-03-24 21:04:33,338 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,338 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,338 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,338 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 21:04:33,339 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,339 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,339 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,339 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,339 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 21:04:33,339 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,340 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,340 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,340 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,340 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,340 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,340 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,340 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,451 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1736
2025-03-24 21:04:33,452 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,452 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,452 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,453 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:33,458 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,459 - yfinance - DEBUG - PLTR: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,463 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,463 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,463 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,465 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,466 - yfinance_client - INFO - Downloaded data for PLTR, shape: (35, 5)
2025-03-24 21:04:33,466 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,466 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,466 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,467 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['PLTR', 1, 0])
2025-03-24 21:04:33,467 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,467 - yfinance - DEBUG - PLTR: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,467 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,468 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,468 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/PLTR
2025-03-24 21:04:33,468 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,469 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,469 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,469 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,469 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,469 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,469 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,469 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,529 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/PLTR?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2206
2025-03-24 21:04:33,530 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,530 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,530 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,531 - yfinance - DEBUG - PLTR: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:33,532 - yfinance - DEBUG - PLTR: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:33,534 - yfinance - DEBUG - PLTR: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,537 - yfinance - DEBUG - PLTR: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,538 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,538 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,539 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,540 - yfinance_client - INFO - Downloaded data for PLTR, shape: (59, 5)
2025-03-24 21:04:33,546 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:33,548 - __main__ - ERROR - Essential stock data missing for PLTR: ['ema9', 'ema21']
2025-03-24 21:04:33,549 - __main__ - INFO - Processing HOOD (22/36)...
2025-03-24 21:04:33,549 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,549 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,549 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,549 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 21:04:33,550 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,550 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,550 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,550 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,550 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 21:04:33,551 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,551 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,551 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,551 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,551 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,552 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,552 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,552 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,634 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1727
2025-03-24 21:04:33,635 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,635 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,635 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,636 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:33,641 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,643 - yfinance - DEBUG - HOOD: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,646 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,646 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,647 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,648 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,649 - yfinance_client - INFO - Downloaded data for HOOD, shape: (35, 5)
2025-03-24 21:04:33,649 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,649 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,649 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,650 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['HOOD', 1, 0])
2025-03-24 21:04:33,650 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,650 - yfinance - DEBUG - HOOD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,651 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,651 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,651 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/HOOD
2025-03-24 21:04:33,651 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,652 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,652 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,652 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,652 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,652 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,652 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,652 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,768 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/HOOD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2232
2025-03-24 21:04:33,769 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,770 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,770 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,771 - yfinance - DEBUG - HOOD: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:33,772 - yfinance - DEBUG - HOOD: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:33,774 - yfinance - DEBUG - HOOD: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,778 - yfinance - DEBUG - HOOD: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,778 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,778 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,780 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,781 - yfinance_client - INFO - Downloaded data for HOOD, shape: (59, 5)
2025-03-24 21:04:33,786 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:33,789 - __main__ - ERROR - Essential stock data missing for HOOD: ['ema9', 'ema21']
2025-03-24 21:04:33,789 - __main__ - INFO - Processing TSLL (23/36)...
2025-03-24 21:04:33,790 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,790 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,790 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,790 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 21:04:33,791 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,791 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,791 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,791 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,791 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 21:04:33,792 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,792 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,792 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,792 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,792 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,792 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,793 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,793 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,868 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1791
2025-03-24 21:04:33,869 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,869 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,870 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,870 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:33,874 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,876 - yfinance - DEBUG - TSLL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,881 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:33,881 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,881 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,883 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,883 - yfinance_client - INFO - Downloaded data for TSLL, shape: (35, 5)
2025-03-24 21:04:33,883 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,883 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,884 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,884 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSLL', 1, 0])
2025-03-24 21:04:33,884 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,884 - yfinance - DEBUG - TSLL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,885 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,885 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,885 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSLL
2025-03-24 21:04:33,885 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,886 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,886 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,886 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,886 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,886 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,886 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,886 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:33,942 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSLL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2290
2025-03-24 21:04:33,943 - yfinance - DEBUG - response code=200
2025-03-24 21:04:33,943 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:33,944 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:33,944 - yfinance - DEBUG - TSLL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:33,945 - yfinance - DEBUG - TSLL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:33,947 - yfinance - DEBUG - TSLL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,951 - yfinance - DEBUG - TSLL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:33,951 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:33,951 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:33,953 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:33,953 - yfinance_client - INFO - Downloaded data for TSLL, shape: (59, 5)
2025-03-24 21:04:33,959 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:33,962 - __main__ - ERROR - Essential stock data missing for TSLL: ['ema9', 'ema21']
2025-03-24 21:04:33,962 - __main__ - INFO - Processing BBAI (24/36)...
2025-03-24 21:04:33,962 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:33,962 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:33,963 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:33,963 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 21:04:33,963 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:33,963 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,964 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:33,964 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:33,964 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 21:04:33,964 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:33,964 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:33,965 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:33,965 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,965 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:33,965 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:33,965 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:33,965 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,033 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1589
2025-03-24 21:04:34,034 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,034 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,034 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,035 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:34,040 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,042 - yfinance - DEBUG - BBAI: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,046 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,046 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,046 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,048 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,048 - yfinance_client - INFO - Downloaded data for BBAI, shape: (35, 5)
2025-03-24 21:04:34,048 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,049 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,049 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,049 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BBAI', 1, 0])
2025-03-24 21:04:34,049 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,050 - yfinance - DEBUG - BBAI: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,050 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,050 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,050 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BBAI
2025-03-24 21:04:34,050 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,051 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,051 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,051 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,051 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,051 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,051 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,052 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,104 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BBAI?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2133
2025-03-24 21:04:34,105 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,105 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,105 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,106 - yfinance - DEBUG - BBAI: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:34,107 - yfinance - DEBUG - BBAI: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:34,109 - yfinance - DEBUG - BBAI: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,113 - yfinance - DEBUG - BBAI: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,113 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,113 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,115 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,115 - yfinance_client - INFO - Downloaded data for BBAI, shape: (59, 5)
2025-03-24 21:04:34,121 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:34,124 - __main__ - ERROR - Essential stock data missing for BBAI: ['ema9', 'ema21']
2025-03-24 21:04:34,124 - __main__ - INFO - Processing SNAP (25/36)...
2025-03-24 21:04:34,124 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,124 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,125 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,125 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 21:04:34,125 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,125 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,126 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,126 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,126 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 21:04:34,126 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,126 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,126 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,127 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,127 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,127 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,127 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,127 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,192 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1599
2025-03-24 21:04:34,192 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,193 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,193 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,194 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:34,198 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,200 - yfinance - DEBUG - SNAP: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,203 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,204 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,204 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,206 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,206 - yfinance_client - INFO - Downloaded data for SNAP, shape: (35, 5)
2025-03-24 21:04:34,206 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,206 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,206 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,207 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SNAP', 1, 0])
2025-03-24 21:04:34,207 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,207 - yfinance - DEBUG - SNAP: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,207 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,207 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,208 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SNAP
2025-03-24 21:04:34,208 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,208 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,209 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,209 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,209 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,209 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,209 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,210 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,268 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SNAP?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1985
2025-03-24 21:04:34,270 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,270 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,270 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,271 - yfinance - DEBUG - SNAP: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:34,272 - yfinance - DEBUG - SNAP: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:34,274 - yfinance - DEBUG - SNAP: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,278 - yfinance - DEBUG - SNAP: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,279 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,279 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,280 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,281 - yfinance_client - INFO - Downloaded data for SNAP, shape: (59, 5)
2025-03-24 21:04:34,286 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:34,289 - __main__ - ERROR - Essential stock data missing for SNAP: ['ema9', 'ema21']
2025-03-24 21:04:34,289 - __main__ - INFO - Processing QUBT (26/36)...
2025-03-24 21:04:34,290 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,290 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,290 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,290 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 21:04:34,291 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,291 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,291 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,291 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,292 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 21:04:34,292 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,292 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,292 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,292 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,292 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,293 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,293 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,293 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,359 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1713
2025-03-24 21:04:34,360 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,360 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,360 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,361 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:34,366 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,367 - yfinance - DEBUG - QUBT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,371 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,371 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,371 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,373 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,373 - yfinance_client - INFO - Downloaded data for QUBT, shape: (35, 5)
2025-03-24 21:04:34,374 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,374 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,374 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,374 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QUBT', 1, 0])
2025-03-24 21:04:34,375 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,375 - yfinance - DEBUG - QUBT: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,375 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,375 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,375 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QUBT
2025-03-24 21:04:34,375 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,376 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,376 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,376 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,376 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,376 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,376 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,376 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,440 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QUBT?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2199
2025-03-24 21:04:34,440 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,441 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,441 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,442 - yfinance - DEBUG - QUBT: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:34,443 - yfinance - DEBUG - QUBT: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:34,445 - yfinance - DEBUG - QUBT: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,449 - yfinance - DEBUG - QUBT: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,449 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,449 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,451 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,451 - yfinance_client - INFO - Downloaded data for QUBT, shape: (59, 5)
2025-03-24 21:04:34,457 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:34,460 - __main__ - ERROR - Essential stock data missing for QUBT: ['ema9', 'ema21']
2025-03-24 21:04:34,460 - __main__ - INFO - Processing NAK (27/36)...
2025-03-24 21:04:34,460 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,461 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,461 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,461 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 21:04:34,462 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,462 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,462 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,462 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,462 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 21:04:34,462 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,463 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,463 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,463 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,463 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,463 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,463 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,464 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,531 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1794
2025-03-24 21:04:34,532 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,532 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,532 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,533 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:34,537 - yfinance - DEBUG - NAK: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,539 - yfinance - DEBUG - NAK: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,542 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,542 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,543 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,544 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,544 - yfinance_client - INFO - Downloaded data for NAK, shape: (35, 5)
2025-03-24 21:04:34,545 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,545 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,545 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,545 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAK', 1, 0])
2025-03-24 21:04:34,546 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,546 - yfinance - DEBUG - NAK: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,546 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,547 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,547 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAK
2025-03-24 21:04:34,547 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,547 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,547 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,548 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,548 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,548 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,548 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,548 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,606 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAK?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1660
2025-03-24 21:04:34,607 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,607 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,607 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,608 - yfinance - DEBUG - NAK: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:34,609 - yfinance - DEBUG - NAK: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:34,611 - yfinance - DEBUG - NAK: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,615 - yfinance - DEBUG - NAK: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,615 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,616 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,617 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,618 - yfinance_client - INFO - Downloaded data for NAK, shape: (59, 5)
2025-03-24 21:04:34,623 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:34,626 - __main__ - ERROR - Essential stock data missing for NAK: ['ema9', 'ema21']
2025-03-24 21:04:34,626 - __main__ - INFO - Processing T (28/36)...
2025-03-24 21:04:34,626 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,627 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,627 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,627 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 21:04:34,628 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,628 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,628 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,628 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,628 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 21:04:34,628 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,629 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,629 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,629 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,629 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,629 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,629 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,630 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,693 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1513
2025-03-24 21:04:34,693 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,694 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,694 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,695 - yfinance - DEBUG - T: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:34,699 - yfinance - DEBUG - T: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,700 - yfinance - DEBUG - T: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,704 - yfinance - DEBUG - T: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,704 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,704 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,706 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,706 - yfinance_client - INFO - Downloaded data for T, shape: (35, 5)
2025-03-24 21:04:34,706 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,706 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,707 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,707 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['T', 1, 0])
2025-03-24 21:04:34,707 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,708 - yfinance - DEBUG - T: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,708 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,708 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,708 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/T
2025-03-24 21:04:34,708 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,709 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,709 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,709 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,709 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,709 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,709 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,709 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,807 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/T?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2065
2025-03-24 21:04:34,808 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,808 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,809 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,810 - yfinance - DEBUG - T: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:34,810 - yfinance - DEBUG - T: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:34,813 - yfinance - DEBUG - T: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,817 - yfinance - DEBUG - T: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,817 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,818 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,819 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,820 - yfinance_client - INFO - Downloaded data for T, shape: (59, 5)
2025-03-24 21:04:34,826 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:34,828 - __main__ - ERROR - Essential stock data missing for T: ['ema9', 'ema21']
2025-03-24 21:04:34,829 - __main__ - INFO - Processing CMG (29/36)...
2025-03-24 21:04:34,829 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,829 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,829 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,830 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 21:04:34,830 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,830 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,830 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,830 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,831 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 21:04:34,831 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,831 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,831 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,832 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,832 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,832 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,832 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,832 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,900 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1571
2025-03-24 21:04:34,901 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,901 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,902 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,902 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:34,906 - yfinance - DEBUG - CMG: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,908 - yfinance - DEBUG - CMG: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,912 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:34,912 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,913 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,914 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,914 - yfinance_client - INFO - Downloaded data for CMG, shape: (35, 5)
2025-03-24 21:04:34,915 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:34,915 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:34,915 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:34,915 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CMG', 1, 0])
2025-03-24 21:04:34,916 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:34,916 - yfinance - DEBUG - CMG: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,916 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:34,916 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:34,916 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CMG
2025-03-24 21:04:34,917 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:34,917 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:34,917 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:34,917 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,918 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:34,918 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:34,918 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:34,918 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:34,982 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CMG?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2023
2025-03-24 21:04:34,983 - yfinance - DEBUG - response code=200
2025-03-24 21:04:34,983 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:34,984 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:34,985 - yfinance - DEBUG - CMG: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:34,986 - yfinance - DEBUG - CMG: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:34,988 - yfinance - DEBUG - CMG: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,991 - yfinance - DEBUG - CMG: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:34,992 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:34,992 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:34,993 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:34,994 - yfinance_client - INFO - Downloaded data for CMG, shape: (59, 5)
2025-03-24 21:04:34,999 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:35,003 - __main__ - ERROR - Essential stock data missing for CMG: ['ema9', 'ema21']
2025-03-24 21:04:35,003 - __main__ - INFO - Processing VZ (30/36)...
2025-03-24 21:04:35,003 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,003 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,003 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,004 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 21:04:35,004 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,004 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,004 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,005 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,005 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 21:04:35,005 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,005 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,006 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,006 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,006 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,006 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,006 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,006 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,067 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1573
2025-03-24 21:04:35,067 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,067 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,068 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,069 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:35,073 - yfinance - DEBUG - VZ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,075 - yfinance - DEBUG - VZ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,079 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,079 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,079 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,081 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,081 - yfinance_client - INFO - Downloaded data for VZ, shape: (35, 5)
2025-03-24 21:04:35,081 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,082 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,082 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,082 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VZ', 1, 0])
2025-03-24 21:04:35,082 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,083 - yfinance - DEBUG - VZ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,083 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,083 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,083 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VZ
2025-03-24 21:04:35,084 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,084 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,084 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,084 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,084 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,084 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,085 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,085 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,212 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VZ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2117
2025-03-24 21:04:35,213 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,214 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,214 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,215 - yfinance - DEBUG - VZ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:35,216 - yfinance - DEBUG - VZ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:35,219 - yfinance - DEBUG - VZ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,223 - yfinance - DEBUG - VZ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,223 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,223 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,225 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,225 - yfinance_client - INFO - Downloaded data for VZ, shape: (59, 5)
2025-03-24 21:04:35,230 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:35,234 - __main__ - ERROR - Essential stock data missing for VZ: ['ema9', 'ema21']
2025-03-24 21:04:35,234 - __main__ - INFO - Processing AMDL (31/36)...
2025-03-24 21:04:35,234 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,234 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,234 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,235 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMDL', 1, 0])
2025-03-24 21:04:35,235 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,235 - yfinance - DEBUG - AMDL: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,236 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,236 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,236 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMDL
2025-03-24 21:04:35,236 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,236 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,236 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,238 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,238 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,238 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,238 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,238 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,306 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMDL?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1802
2025-03-24 21:04:35,307 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,307 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,307 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,308 - yfinance - DEBUG - AMDL: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:35,314 - yfinance - DEBUG - AMDL: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,315 - yfinance - DEBUG - AMDL: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,319 - yfinance - DEBUG - AMDL: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,319 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,320 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,321 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,321 - yfinance_client - INFO - Downloaded data for AMDL, shape: (35, 5)
2025-03-24 21:04:35,321 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,321 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,321 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,322 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMDL', 1, 0])
2025-03-24 21:04:35,322 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,322 - yfinance - DEBUG - AMDL: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,322 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,323 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,323 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMDL
2025-03-24 21:04:35,323 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,323 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,323 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,323 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,324 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,324 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,324 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,324 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,387 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMDL?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2110
2025-03-24 21:04:35,387 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,388 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,388 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,389 - yfinance - DEBUG - AMDL: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:35,390 - yfinance - DEBUG - AMDL: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:35,392 - yfinance - DEBUG - AMDL: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,396 - yfinance - DEBUG - AMDL: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,397 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,397 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,399 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,399 - yfinance_client - INFO - Downloaded data for AMDL, shape: (59, 5)
2025-03-24 21:04:35,405 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:35,408 - __main__ - ERROR - Essential stock data missing for AMDL: ['ema9', 'ema21']
2025-03-24 21:04:35,408 - __main__ - INFO - Processing OKLO (32/36)...
2025-03-24 21:04:35,408 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,408 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,409 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,409 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['OKLO', 1, 0])
2025-03-24 21:04:35,409 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,410 - yfinance - DEBUG - OKLO: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,410 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,410 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,410 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/OKLO
2025-03-24 21:04:35,410 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,411 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,411 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,411 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,411 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,411 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,411 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,411 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,477 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/OKLO?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1650
2025-03-24 21:04:35,477 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,478 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,478 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,479 - yfinance - DEBUG - OKLO: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:35,483 - yfinance - DEBUG - OKLO: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,485 - yfinance - DEBUG - OKLO: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,489 - yfinance - DEBUG - OKLO: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,489 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,489 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,491 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,492 - yfinance_client - INFO - Downloaded data for OKLO, shape: (35, 5)
2025-03-24 21:04:35,492 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,492 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,492 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,493 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['OKLO', 1, 0])
2025-03-24 21:04:35,493 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,493 - yfinance - DEBUG - OKLO: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,494 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,494 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,494 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/OKLO
2025-03-24 21:04:35,494 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,495 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,495 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,495 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,495 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,495 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,495 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,495 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,550 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/OKLO?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2234
2025-03-24 21:04:35,551 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,552 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,552 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,553 - yfinance - DEBUG - OKLO: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:35,554 - yfinance - DEBUG - OKLO: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:35,556 - yfinance - DEBUG - OKLO: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,559 - yfinance - DEBUG - OKLO: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,560 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,560 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,562 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,562 - yfinance_client - INFO - Downloaded data for OKLO, shape: (59, 5)
2025-03-24 21:04:35,568 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:35,571 - __main__ - ERROR - Essential stock data missing for OKLO: ['ema9', 'ema21']
2025-03-24 21:04:35,571 - __main__ - INFO - Processing RUN (33/36)...
2025-03-24 21:04:35,571 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,571 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,572 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,572 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['RUN', 1, 0])
2025-03-24 21:04:35,572 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,573 - yfinance - DEBUG - RUN: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,573 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,573 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,573 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/RUN
2025-03-24 21:04:35,573 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,574 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,574 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,574 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,574 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,574 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,574 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,574 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,648 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/RUN?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1508
2025-03-24 21:04:35,648 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,649 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,649 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,650 - yfinance - DEBUG - RUN: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:35,655 - yfinance - DEBUG - RUN: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,657 - yfinance - DEBUG - RUN: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,660 - yfinance - DEBUG - RUN: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,660 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,660 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,662 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,662 - yfinance_client - INFO - Downloaded data for RUN, shape: (35, 5)
2025-03-24 21:04:35,662 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,662 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,663 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,663 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['RUN', 1, 0])
2025-03-24 21:04:35,663 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,664 - yfinance - DEBUG - RUN: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,664 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,664 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,664 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/RUN
2025-03-24 21:04:35,664 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,665 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,665 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,665 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,665 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,666 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,666 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,666 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,723 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/RUN?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2062
2025-03-24 21:04:35,724 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,724 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,725 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,726 - yfinance - DEBUG - RUN: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:35,727 - yfinance - DEBUG - RUN: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:35,729 - yfinance - DEBUG - RUN: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,735 - yfinance - DEBUG - RUN: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,735 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,736 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,737 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,738 - yfinance_client - INFO - Downloaded data for RUN, shape: (59, 5)
2025-03-24 21:04:35,743 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:35,746 - __main__ - ERROR - Essential stock data missing for RUN: ['ema9', 'ema21']
2025-03-24 21:04:35,746 - __main__ - INFO - Processing WBD (34/36)...
2025-03-24 21:04:35,747 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,747 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,747 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,747 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBD', 1, 0])
2025-03-24 21:04:35,747 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,748 - yfinance - DEBUG - WBD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,748 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,748 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,748 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBD
2025-03-24 21:04:35,748 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,749 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,749 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,749 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,749 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,749 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,750 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,750 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,817 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1624
2025-03-24 21:04:35,818 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,818 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,818 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,819 - yfinance - DEBUG - WBD: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:35,823 - yfinance - DEBUG - WBD: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,825 - yfinance - DEBUG - WBD: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,829 - yfinance - DEBUG - WBD: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:35,829 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,829 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,830 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,831 - yfinance_client - INFO - Downloaded data for WBD, shape: (35, 5)
2025-03-24 21:04:35,831 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,831 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,831 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,832 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBD', 1, 0])
2025-03-24 21:04:35,832 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,832 - yfinance - DEBUG - WBD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,833 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,833 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,833 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBD
2025-03-24 21:04:35,833 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,833 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,834 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,834 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,834 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,834 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,834 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,834 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:35,892 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1914
2025-03-24 21:04:35,893 - yfinance - DEBUG - response code=200
2025-03-24 21:04:35,893 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:35,893 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:35,894 - yfinance - DEBUG - WBD: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:35,895 - yfinance - DEBUG - WBD: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:35,897 - yfinance - DEBUG - WBD: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,901 - yfinance - DEBUG - WBD: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:35,901 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:35,901 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:35,903 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:35,903 - yfinance_client - INFO - Downloaded data for WBD, shape: (59, 5)
2025-03-24 21:04:35,909 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:35,912 - __main__ - ERROR - Essential stock data missing for WBD: ['ema9', 'ema21']
2025-03-24 21:04:35,912 - __main__ - INFO - Processing LQD (35/36)...
2025-03-24 21:04:35,913 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:35,913 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:35,913 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:35,913 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LQD', 1, 0])
2025-03-24 21:04:35,914 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:35,914 - yfinance - DEBUG - LQD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,914 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:35,914 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:35,914 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LQD
2025-03-24 21:04:35,915 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:35,915 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:35,915 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:35,915 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,915 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:35,915 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:35,916 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:35,916 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:36,025 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LQD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1548
2025-03-24 21:04:36,026 - yfinance - DEBUG - response code=200
2025-03-24 21:04:36,026 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:36,027 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:36,028 - yfinance - DEBUG - LQD: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:36,032 - yfinance - DEBUG - LQD: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:36,034 - yfinance - DEBUG - LQD: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:36,038 - yfinance - DEBUG - LQD: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:36,038 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:36,038 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:36,040 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:36,040 - yfinance_client - INFO - Downloaded data for LQD, shape: (35, 5)
2025-03-24 21:04:36,040 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:36,041 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:36,041 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:36,041 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LQD', 1, 0])
2025-03-24 21:04:36,042 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:36,042 - yfinance - DEBUG - LQD: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:36,042 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:36,042 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:36,042 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LQD
2025-03-24 21:04:36,043 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:36,043 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:36,043 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:36,043 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:36,043 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:36,044 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:36,044 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:36,044 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:36,136 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LQD?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2409
2025-03-24 21:04:36,137 - yfinance - DEBUG - response code=200
2025-03-24 21:04:36,137 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:36,137 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:36,138 - yfinance - DEBUG - LQD: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:36,139 - yfinance - DEBUG - LQD: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:36,144 - yfinance - DEBUG - LQD: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:36,148 - yfinance - DEBUG - LQD: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:36,149 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:36,149 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:36,151 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:36,151 - yfinance_client - INFO - Downloaded data for LQD, shape: (59, 5)
2025-03-24 21:04:36,157 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:36,159 - __main__ - ERROR - Essential stock data missing for LQD: ['ema9', 'ema21']
2025-03-24 21:04:36,160 - __main__ - INFO - Processing TLRY (36/36)...
2025-03-24 21:04:36,160 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:36,160 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:36,160 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:36,161 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TLRY', 1, 0])
2025-03-24 21:04:36,161 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:36,161 - yfinance - DEBUG - TLRY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:36,161 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:36,162 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:36,162 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TLRY
2025-03-24 21:04:36,162 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:36,162 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:36,162 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:36,162 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:36,163 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:36,163 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:36,163 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:36,163 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:36,230 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TLRY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1899
2025-03-24 21:04:36,231 - yfinance - DEBUG - response code=200
2025-03-24 21:04:36,231 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:36,231 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:36,232 - yfinance - DEBUG - TLRY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:04:36,236 - yfinance - DEBUG - TLRY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:36,238 - yfinance - DEBUG - TLRY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:36,242 - yfinance - DEBUG - TLRY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:04:36,242 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:36,243 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:36,244 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:36,245 - yfinance_client - INFO - Downloaded data for TLRY, shape: (35, 5)
2025-03-24 21:04:36,245 - yfinance - DEBUG - Entering download()
2025-03-24 21:04:36,245 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:04:36,245 - yfinance - DEBUG -  Entering history()
2025-03-24 21:04:36,245 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TLRY', 1, 0])
2025-03-24 21:04:36,246 - yfinance - DEBUG -   Entering history()
2025-03-24 21:04:36,246 - yfinance - DEBUG - TLRY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:36,246 - yfinance - DEBUG -    Entering get()
2025-03-24 21:04:36,246 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:04:36,246 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TLRY
2025-03-24 21:04:36,247 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:04:36,247 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:04:36,247 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:04:36,247 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:04:36,247 - yfinance - DEBUG - reusing cookie
2025-03-24 21:04:36,247 - yfinance - DEBUG - reusing crumb
2025-03-24 21:04:36,247 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:04:36,248 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:04:36,307 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TLRY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1864
2025-03-24 21:04:36,308 - yfinance - DEBUG - response code=200
2025-03-24 21:04:36,309 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:04:36,309 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:04:36,310 - yfinance - DEBUG - TLRY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:04:36,311 - yfinance - DEBUG - TLRY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:04:36,313 - yfinance - DEBUG - TLRY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:36,318 - yfinance - DEBUG - TLRY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:04:36,318 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:04:36,318 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:04:36,320 - yfinance - DEBUG - Exiting download()
2025-03-24 21:04:36,320 - yfinance_client - INFO - Downloaded data for TLRY, shape: (59, 5)
2025-03-24 21:04:36,326 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:04:36,328 - __main__ - ERROR - Essential stock data missing for TLRY: ['ema9', 'ema21']
2025-03-24 21:04:36,329 - __main__ - INFO - Stock analysis complete. Processed: 36, Successful: 0, Failed: 36
2025-03-24 21:04:36,329 - __main__ - ERROR - No stock analyses generated, aborting
2025-03-24 21:04:59,131 - __main__ - INFO - Initializing WSB Trading Application...
2025-03-24 21:04:59,132 - gemini_client - INFO - Gemini client initialized successfully
2025-03-24 21:04:59,132 - yfinance_client - INFO - Initializing YFinanceClient
2025-03-24 21:04:59,133 - yfinance_client - INFO - YFinanceClient initialized successfully
2025-03-24 21:04:59,461 - httpcore.connection - DEBUG - connect_tcp.started host='api.notion.com' port=443 local_address=None timeout=60.0 socket_options=None
2025-03-24 21:04:59,489 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000270C64F9F70>
2025-03-24 21:04:59,489 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000270C8007ED0> server_hostname='api.notion.com' timeout=60.0
2025-03-24 21:04:59,509 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000270C7EF42F0>
2025-03-24 21:04:59,509 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 21:04:59,510 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 21:04:59,510 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 21:04:59,511 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 21:04:59,511 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 21:04:59,678 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 04:04:59 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b87008df12284-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'ETag', b'W/"944-PIrHV1Smgd40A/VLb/9o+VId3H8"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'e9583074-9574-42cb-9255-41ab32c8cd0a'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Set-Cookie', b'__cf_bm=haVgKrYfeiWm5KHoAgjZW_IGkE.GpYLurUO8xJzjeac-1742875499-1.0.1.1-HNeAj5o.ajnuiRfzLp1pnfFfQ3csH6z0pg8.n1lf6Xgl9A3V2GOkDcfaZavn12y9dZtgWGfnhFOgJUCyRTVneipiFWi0dkoDxR0rkDp2yKg; path=/; expires=Tue, 25-Mar-25 04:34:59 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=2jnXO7QNCz0KH2akdOnLbwBa2uox.cCpnqC04t5cQcc-1742875499762-0.0.1.1-604800000; path=/; domain=.notion.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 21:04:59,681 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 21:04:59,681 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 21:04:59,682 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 21:04:59,682 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 21:04:59,682 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 21:04:59,683 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 21:04:59,683 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 21:04:59,683 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 21:04:59,683 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 21:04:59,683 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 21:04:59,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 04:04:59 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b87019f1e2284-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-f2nAHSYPrms8ZwBcUr6uVfIwpAc"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'4e893fd9-27fd-41bb-86b6-e9563298b299'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 21:04:59,856 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 21:04:59,856 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 21:04:59,857 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 21:04:59,857 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 21:04:59,857 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 21:04:59,858 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-03-24 21:04:59,858 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-03-24 21:04:59,858 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-03-24 21:04:59,859 - httpcore.http11 - DEBUG - send_request_body.complete
2025-03-24 21:04:59,859 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-03-24 21:05:00,012 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Mar 2025 04:05:00 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'925b8702b87f2284-SJC'), (b'CF-Cache-Status', b'DYNAMIC'), (b'ETag', b'W/"a6-09EvQ9MoRxEikM27AdvEvHNKNlI"'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Vary', b'Accept-Encoding'), (b'content-security-policy', b"default-src 'none'"), (b'referrer-policy', b'strict-origin-when-cross-origin'), (b'x-content-type-options', b'nosniff'), (b'x-dns-prefetch-control', b'off'), (b'x-download-options', b'noopen'), (b'x-frame-options', b'SAMEORIGIN'), (b'x-notion-request-id', b'417a04a7-15fe-41f9-a5ea-d8267faeba27'), (b'x-permitted-cross-domain-policies', b'none'), (b'x-xss-protection', b'0'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-03-24 21:05:00,013 - httpx - INFO - HTTP Request: POST https://api.notion.com/v1/search "HTTP/1.1 200 OK"
2025-03-24 21:05:00,014 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-03-24 21:05:00,014 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-03-24 21:05:00,014 - httpcore.http11 - DEBUG - response_closed.started
2025-03-24 21:05:00,014 - httpcore.http11 - DEBUG - response_closed.complete
2025-03-24 21:05:00,015 - __main__ - INFO - All clients initialized successfully
2025-03-24 21:05:00,015 - __main__ - INFO - Starting WSB Trading Application...
2025-03-24 21:05:00,015 - __main__ - INFO - Analyzing comprehensive market conditions...
2025-03-24 21:05:00,015 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,016 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,016 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux i686; rv:135.0) Gecko/20100101 Firefox/135.0
2025-03-24 21:05:00,016 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,018 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-24 21:05:00,019 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 21:05:00,066 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,066 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,066 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,067 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,067 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 21:05:00,067 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,067 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,067 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,068 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,069 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-24 21:05:00,070 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-24 21:05:00,070 - yfinance - DEBUG - loaded persistent cookie
2025-03-24 21:05:00,070 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,071 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-24 21:05:00,178 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-24 21:05:00,178 - yfinance - DEBUG - crumb = 'HxKk.4JwkLQ'
2025-03-24 21:05:00,179 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,179 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,180 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-24 21:05:00,318 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1657
2025-03-24 21:05:00,319 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,320 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,320 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,322 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:00,330 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,334 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,338 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,339 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,339 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,341 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,341 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 21:05:00,344 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,344 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,345 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,345 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 21:05:00,346 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,346 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,346 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,346 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,346 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 21:05:00,347 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,347 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,347 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,347 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,347 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,347 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,347 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,348 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,406 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1687
2025-03-24 21:05:00,407 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,407 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,407 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,408 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:00,413 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,416 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,420 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,420 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,420 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,423 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,423 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 21:05:00,426 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,426 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,426 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,427 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IWM', 1, 0])
2025-03-24 21:05:00,427 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,427 - yfinance - DEBUG - IWM: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,427 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,428 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,428 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IWM
2025-03-24 21:05:00,428 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,428 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,428 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,429 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,429 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,429 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,429 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,429 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,490 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IWM?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1623
2025-03-24 21:05:00,490 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,490 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,491 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,492 - yfinance - DEBUG - IWM: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:00,496 - yfinance - DEBUG - IWM: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,499 - yfinance - DEBUG - IWM: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,503 - yfinance - DEBUG - IWM: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,503 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,504 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,505 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,505 - yfinance_client - INFO - Downloaded data for IWM, shape: (35, 5)
2025-03-24 21:05:00,508 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,508 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,509 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,509 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VTV', 1, 0])
2025-03-24 21:05:00,510 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,510 - yfinance - DEBUG - VTV: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,510 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,510 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,511 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VTV
2025-03-24 21:05:00,511 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,511 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,511 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,511 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,511 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,512 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,512 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,512 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,574 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VTV?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1644
2025-03-24 21:05:00,575 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,576 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,576 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,576 - yfinance - DEBUG - VTV: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:00,581 - yfinance - DEBUG - VTV: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,583 - yfinance - DEBUG - VTV: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,586 - yfinance - DEBUG - VTV: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,587 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,587 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,589 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,589 - yfinance_client - INFO - Downloaded data for VTV, shape: (35, 5)
2025-03-24 21:05:00,592 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,592 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,593 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,593 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['VGLT', 1, 0])
2025-03-24 21:05:00,593 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,593 - yfinance - DEBUG - VGLT: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,594 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,594 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,594 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/VGLT
2025-03-24 21:05:00,594 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,594 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,594 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,595 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,595 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,595 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,595 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,595 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,667 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/VGLT?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1674
2025-03-24 21:05:00,668 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,668 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,668 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,669 - yfinance - DEBUG - VGLT: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:00,673 - yfinance - DEBUG - VGLT: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,675 - yfinance - DEBUG - VGLT: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,679 - yfinance - DEBUG - VGLT: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,679 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,680 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,681 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,682 - yfinance_client - INFO - Downloaded data for VGLT, shape: (35, 5)
2025-03-24 21:05:00,684 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,685 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,685 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,685 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['DIA', 1, 0])
2025-03-24 21:05:00,686 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,686 - yfinance - DEBUG - DIA: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,686 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,687 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,687 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/DIA
2025-03-24 21:05:00,687 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,688 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,688 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,688 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,688 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,689 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,689 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,689 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,769 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/DIA?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1674
2025-03-24 21:05:00,771 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,771 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,771 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,772 - yfinance - DEBUG - DIA: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:00,776 - yfinance - DEBUG - DIA: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,779 - yfinance - DEBUG - DIA: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,783 - yfinance - DEBUG - DIA: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,784 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,784 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,786 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,786 - yfinance_client - INFO - Downloaded data for DIA, shape: (35, 5)
2025-03-24 21:05:00,789 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,789 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,789 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,790 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BND', 1, 0])
2025-03-24 21:05:00,790 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,790 - yfinance - DEBUG - BND: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,791 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,791 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,791 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BND
2025-03-24 21:05:00,791 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,791 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,792 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,792 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,792 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,792 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,792 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,792 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,858 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BND?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1680
2025-03-24 21:05:00,859 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,859 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,860 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,861 - yfinance - DEBUG - BND: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:00,865 - yfinance - DEBUG - BND: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,867 - yfinance - DEBUG - BND: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,871 - yfinance - DEBUG - BND: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:00,871 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,872 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,873 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,874 - yfinance_client - INFO - Downloaded data for BND, shape: (35, 5)
2025-03-24 21:05:00,876 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,877 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,877 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,877 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BTC-USD', 1, 0])
2025-03-24 21:05:00,878 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,878 - yfinance - DEBUG - BTC-USD: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,878 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,878 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,878 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BTC-USD
2025-03-24 21:05:00,879 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,879 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,879 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,879 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,879 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,879 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,880 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,880 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:00,932 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BTC-USD?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:00,933 - yfinance - DEBUG - response code=200
2025-03-24 21:05:00,933 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:00,934 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:00,935 - yfinance - DEBUG - BTC-USD: yfinance received OHLC data: 2025-03-21 00:00:00 -> 2025-03-25 04:02:00
2025-03-24 21:05:00,939 - yfinance - DEBUG - BTC-USD: OHLC after cleaning: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:02:00+00:00
2025-03-24 21:05:00,940 - yfinance - DEBUG - BTC-USD: OHLC after combining events: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:02:00+00:00
2025-03-24 21:05:00,946 - yfinance - DEBUG - BTC-USD: yfinance returning OHLC: 2025-03-21 00:00:00+00:00 -> 2025-03-25 04:00:00+00:00
2025-03-24 21:05:00,947 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:00,947 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:00,949 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:00,949 - yfinance_client - INFO - Downloaded data for BTC-USD, shape: (101, 5)
2025-03-24 21:05:00,952 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:00,952 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:00,953 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:00,953 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^VIX', 1, 0])
2025-03-24 21:05:00,954 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:00,954 - yfinance - DEBUG - ^VIX: Yahoo GET parameters: {'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,955 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:00,955 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:00,955 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^VIX
2025-03-24 21:05:00,955 - yfinance - DEBUG - params={'range': '1d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:00,955 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:00,955 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:00,956 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,956 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:00,956 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:00,956 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:00,956 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:01,010 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EVIX?range=1d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 932
2025-03-24 21:05:01,011 - yfinance - DEBUG - response code=200
2025-03-24 21:05:01,012 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:01,012 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:01,013 - yfinance - DEBUG - ^VIX: yfinance received OHLC data: 2025-03-24 07:00:00 -> 2025-03-24 20:15:00
2025-03-24 21:05:01,017 - yfinance - DEBUG - ^VIX: OHLC after cleaning: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 21:05:01,019 - yfinance - DEBUG - ^VIX: OHLC after combining events: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 21:05:01,024 - yfinance - DEBUG - ^VIX: yfinance returning OHLC: 2025-03-24 02:00:00-05:00 -> 2025-03-24 15:00:00-05:00
2025-03-24 21:05:01,024 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:01,024 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:01,026 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:01,026 - yfinance_client - INFO - Downloaded data for ^VIX, shape: (14, 5)
2025-03-24 21:05:01,027 - yfinance_client - INFO - Current VIX price: 17.479999542236328
2025-03-24 21:05:01,027 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:01,027 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:01,027 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 21:05:01,027 - yfinance - DEBUG - params=None
2025-03-24 21:05:01,028 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:01,028 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:01,028 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:01,028 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:01,028 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:01,029 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:01,029 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:01,108 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:01,119 - yfinance - DEBUG - response code=200
2025-03-24 21:05:01,119 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:01,120 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:01,121 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:01,121 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:01,121 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1742860800
2025-03-24 21:05:01,122 - yfinance - DEBUG - params=None
2025-03-24 21:05:01,122 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:01,122 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:01,122 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:01,122 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:01,122 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:01,122 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:01,123 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:01,217 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1742860800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:01,218 - yfinance - DEBUG - response code=200
2025-03-24 21:05:01,219 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:01,219 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:01,224 - gemini_client - DEBUG - Generated prompt of length 8919
2025-03-24 21:05:25,748 - gemini_client - DEBUG - Received raw response of length 4949
2025-03-24 21:05:25,749 - gemini_client - DEBUG - Generated prompt of length 1047
2025-03-24 21:05:35,145 - gemini_client - DEBUG - Received raw response of length 1657
2025-03-24 21:05:35,145 - discord.discord_client - INFO - Content length exceeds Discord limit (4949 chars). Splitting into chunks.
2025-03-24 21:05:35,146 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 21:05:35,546 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 21:05:35,547 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 21:05:35,548 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 21:05:35,813 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 21:05:35,814 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 21:05:35,815 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 21:05:36,111 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 21:05:36,112 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 21:05:36,113 - __main__ - INFO - Comprehensive market analysis complete: bullish
2025-03-24 21:05:36,113 - __main__ - INFO - Starting stock analysis...
2025-03-24 21:05:36,114 - __main__ - INFO - get_stock_analysis_prompt signature: (*args, **kwargs) with params: ['args', 'kwargs']
2025-03-24 21:05:36,114 - __main__ - INFO - Found 36 symbols in watchlist
2025-03-24 21:05:36,114 - __main__ - INFO - Analyzing SPY...
2025-03-24 21:05:36,114 - __main__ - INFO - Step 1: Getting stock data for SPY...
2025-03-24 21:05:36,115 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:36,115 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:36,115 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:36,115 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 21:05:36,116 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:36,116 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:36,116 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:36,116 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:36,117 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 21:05:36,117 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:36,117 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:36,117 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:36,117 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,118 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:36,118 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:36,118 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,118 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:36,185 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1658
2025-03-24 21:05:36,186 - yfinance - DEBUG - response code=200
2025-03-24 21:05:36,186 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:36,186 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:36,187 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:36,192 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:36,195 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:36,199 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:36,200 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:36,200 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:36,202 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:36,202 - yfinance_client - INFO - Downloaded data for SPY, shape: (35, 5)
2025-03-24 21:05:36,202 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:36,203 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:36,203 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:36,203 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 21:05:36,204 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:36,204 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:36,204 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:36,204 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:36,204 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 21:05:36,205 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:36,205 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:36,205 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:36,205 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,205 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:36,205 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:36,206 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,206 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:36,300 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2622
2025-03-24 21:05:36,301 - yfinance - DEBUG - response code=200
2025-03-24 21:05:36,301 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:36,303 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:36,303 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:05:36,304 - yfinance - DEBUG - SPY: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:05:36,308 - yfinance - DEBUG - SPY: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:05:36,313 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:05:36,313 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:36,314 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:36,316 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:36,317 - yfinance_client - INFO - Downloaded data for SPY, shape: (59, 5)
2025-03-24 21:05:36,324 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:05:36,328 - __main__ - INFO - Step 2: Getting options chain data for SPY...
2025-03-24 21:05:36,328 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for SPY
2025-03-24 21:05:36,329 - yfinance - DEBUG - Entering history()
2025-03-24 21:05:36,329 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['SPY', 1, 0])
2025-03-24 21:05:36,330 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:36,330 - yfinance - DEBUG - SPY: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:36,330 - yfinance - DEBUG -   Entering get()
2025-03-24 21:05:36,330 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 21:05:36,330 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/SPY
2025-03-24 21:05:36,331 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:36,331 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 21:05:36,331 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:36,331 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,331 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:36,331 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:36,332 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,332 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 21:05:36,426 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/SPY?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1198
2025-03-24 21:05:36,427 - yfinance - DEBUG - response code=200
2025-03-24 21:05:36,427 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 21:05:36,427 - yfinance - DEBUG -   Exiting get()
2025-03-24 21:05:36,428 - yfinance - DEBUG - SPY: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 21:05:36,429 - yfinance - DEBUG - SPY: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 21:05:36,431 - yfinance - DEBUG - SPY: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 21:05:36,435 - yfinance - DEBUG - SPY: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 21:05:36,435 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:36,435 - yfinance - DEBUG - Exiting history()
2025-03-24 21:05:36,436 - yfinance_client - INFO - Current price of SPY: $574.08
2025-03-24 21:05:36,436 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:36,436 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:36,436 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY
2025-03-24 21:05:36,436 - yfinance - DEBUG - params=None
2025-03-24 21:05:36,437 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:36,437 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:36,437 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,437 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:36,437 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:36,437 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,437 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:36,523 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:36,544 - yfinance - DEBUG - response code=200
2025-03-24 21:05:36,544 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:36,544 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:36,546 - yfinance_client - INFO - Found 32 expiration dates for SPY
2025-03-24 21:05:36,547 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 21:05:36,547 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:36,548 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:36,548 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743379200
2025-03-24 21:05:36,548 - yfinance - DEBUG - params=None
2025-03-24 21:05:36,548 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:36,548 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:36,549 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,549 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:36,549 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:36,549 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:36,549 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:36,660 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:36,665 - yfinance - DEBUG - response code=200
2025-03-24 21:05:36,665 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:36,665 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:36,671 - yfinance_client - INFO - Retrieved 206 calls and 201 puts
2025-03-24 21:05:37,358 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 21:05:37,359 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:37,359 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:37,360 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1743724800
2025-03-24 21:05:37,360 - yfinance - DEBUG - params=None
2025-03-24 21:05:37,360 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:37,360 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:37,361 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:37,361 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:37,361 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:37,361 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:37,361 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:37,454 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:37,480 - yfinance - DEBUG - response code=200
2025-03-24 21:05:37,481 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:37,481 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:37,486 - yfinance_client - INFO - Retrieved 134 calls and 136 puts
2025-03-24 21:05:37,617 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 21:05:37,618 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:37,618 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:37,618 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744329600
2025-03-24 21:05:37,618 - yfinance - DEBUG - params=None
2025-03-24 21:05:37,618 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:37,619 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:37,619 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:37,619 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:37,619 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:37,619 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:37,619 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:37,715 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:37,728 - yfinance - DEBUG - response code=200
2025-03-24 21:05:37,729 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:37,729 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:37,733 - yfinance_client - INFO - Retrieved 143 calls and 131 puts
2025-03-24 21:05:37,864 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 21:05:37,865 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:37,865 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:37,865 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/SPY?date=1744848000
2025-03-24 21:05:37,866 - yfinance - DEBUG - params=None
2025-03-24 21:05:37,866 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:37,866 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:37,866 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:37,867 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:37,867 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:37,867 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:37,867 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:37,974 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/SPY?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:37,998 - yfinance - DEBUG - response code=200
2025-03-24 21:05:37,998 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:37,998 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:38,004 - yfinance_client - INFO - Retrieved 224 calls and 195 puts
2025-03-24 21:05:38,203 - yfinance_client - INFO - Successfully fetched 4 option chains for SPY
2025-03-24 21:05:38,203 - __main__ - INFO - Step 3: Preparing analysis data for SPY...
2025-03-24 21:05:38,203 - __main__ - INFO - Step 4: Processing options data for SPY...
2025-03-24 21:05:38,203 - __main__ - INFO - Found 4 expiration dates for SPY
2025-03-24 21:05:38,203 - __main__ - INFO - Processing expiration date 2025-03-31 for SPY...
2025-03-24 21:05:38,204 - __main__ - DEBUG - ATM calls shape before filtering: (206, 19)
2025-03-24 21:05:38,204 - __main__ - DEBUG - ATM puts shape before filtering: (201, 19)
2025-03-24 21:05:38,205 - __main__ - DEBUG - ATM calls shape after filtering: (55, 19)
2025-03-24 21:05:38,205 - __main__ - DEBUG - ATM puts shape after filtering: (55, 19)
2025-03-24 21:05:38,205 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 21:05:38,206 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 21:05:38,206 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 21:05:38,207 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 21:05:38,207 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 21:05:38,208 - __main__ - DEBUG - Volume data for SPY: calls=130483, puts=133470
2025-03-24 21:05:38,208 - __main__ - INFO - Successfully processed expiration 2025-03-31 for SPY
2025-03-24 21:05:38,208 - __main__ - INFO - Processing expiration date 2025-04-04 for SPY...
2025-03-24 21:05:38,209 - __main__ - DEBUG - ATM calls shape before filtering: (134, 19)
2025-03-24 21:05:38,209 - __main__ - DEBUG - ATM puts shape before filtering: (136, 19)
2025-03-24 21:05:38,209 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 21:05:38,210 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 21:05:38,210 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 21:05:38,211 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 21:05:38,211 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 21:05:38,212 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 21:05:38,212 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 21:05:38,213 - __main__ - DEBUG - Volume data for SPY: calls=69776, puts=96136
2025-03-24 21:05:38,213 - __main__ - INFO - Successfully processed expiration 2025-04-04 for SPY
2025-03-24 21:05:38,213 - __main__ - INFO - Processing expiration date 2025-04-11 for SPY...
2025-03-24 21:05:38,214 - __main__ - DEBUG - ATM calls shape before filtering: (143, 19)
2025-03-24 21:05:38,214 - __main__ - DEBUG - ATM puts shape before filtering: (131, 19)
2025-03-24 21:05:38,215 - __main__ - DEBUG - ATM calls shape after filtering: (63, 19)
2025-03-24 21:05:38,216 - __main__ - DEBUG - ATM puts shape after filtering: (63, 19)
2025-03-24 21:05:38,216 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 21:05:38,217 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 21:05:38,217 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 21:05:38,217 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 21:05:38,218 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 21:05:38,218 - __main__ - DEBUG - Volume data for SPY: calls=38192, puts=37007
2025-03-24 21:05:38,218 - __main__ - INFO - Successfully processed expiration 2025-04-11 for SPY
2025-03-24 21:05:38,218 - __main__ - INFO - Processing expiration date 2025-04-17 for SPY...
2025-03-24 21:05:38,219 - __main__ - DEBUG - ATM calls shape before filtering: (224, 19)
2025-03-24 21:05:38,219 - __main__ - DEBUG - ATM puts shape before filtering: (195, 19)
2025-03-24 21:05:38,219 - __main__ - DEBUG - ATM calls shape after filtering: (57, 19)
2025-03-24 21:05:38,220 - __main__ - DEBUG - ATM puts shape after filtering: (57, 19)
2025-03-24 21:05:38,220 - __main__ - DEBUG - Finding ATM call for SPY...
2025-03-24 21:05:38,221 - __main__ - DEBUG - ATM call for SPY: strike=574.0
2025-03-24 21:05:38,221 - __main__ - DEBUG - Finding ATM put for SPY...
2025-03-24 21:05:38,222 - __main__ - DEBUG - ATM put for SPY: strike=574.0
2025-03-24 21:05:38,222 - __main__ - DEBUG - Calculating volume data for SPY...
2025-03-24 21:05:38,223 - __main__ - DEBUG - Volume data for SPY: calls=175952, puts=311384
2025-03-24 21:05:38,223 - __main__ - INFO - Successfully processed expiration 2025-04-17 for SPY
2025-03-24 21:05:38,223 - __main__ - INFO - Step 5: Generating analysis for SPY...
2025-03-24 21:05:38,223 - __main__ - DEBUG - Calling get_stock_analysis_prompt for SPY with args: stock_analysis_data, market_context
2025-03-24 21:05:38,224 - gemini_client - DEBUG - Generated prompt of length 4806
2025-03-24 21:05:51,192 - gemini_client - DEBUG - Received raw response of length 2752
2025-03-24 21:05:51,193 - __main__ - INFO - Market alignment for SPY: **
2025-03-24 21:05:51,193 - __main__ - INFO - Creating stock analysis result for SPY...
2025-03-24 21:05:51,194 - __main__ - INFO - Successfully added SPY to stock analyses
2025-03-24 21:05:51,194 - __main__ - INFO - Updating Notion with analysis for SPY...
2025-03-24 21:05:51,194 - __main__ - INFO - Sending Discord notification for SPY...
2025-03-24 21:05:51,194 - discord.discord_client - INFO - Analysis description exceeds Discord limit (2752 chars). Splitting into parts.
2025-03-24 21:05:51,195 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 21:05:51,495 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 21:05:51,496 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 21:05:51,497 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): discordapp.com:443
2025-03-24 21:05:51,784 - urllib3.connectionpool - DEBUG - https://discordapp.com:443 "POST /api/webhooks/1353201103172272220/es7on54ZfGljU6tlFEf7HwpD4AfE5MvoMoFNiM5UrmenE2haaEJgq9KVhe_eJ_3uo6Rl HTTP/1.1" 204 0
2025-03-24 21:05:51,785 - discord.discord_client - INFO - Message sent successfully to market_analysis webhook
2025-03-24 21:05:51,786 - __main__ - INFO - Successfully sent Discord notification for SPY
2025-03-24 21:05:51,787 - __main__ - INFO - Analyzing QQQ...
2025-03-24 21:05:51,787 - __main__ - INFO - Step 1: Getting stock data for QQQ...
2025-03-24 21:05:51,787 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:51,787 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:51,788 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:51,788 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 21:05:51,789 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:51,789 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:51,789 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:51,790 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:51,790 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 21:05:51,790 - yfinance - DEBUG - params={'range': '5d', 'interval': '1h', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:51,790 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:51,791 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:51,791 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:51,791 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:51,791 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:51,791 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:51,792 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:51,892 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=5d&interval=1h&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1692
2025-03-24 21:05:51,892 - yfinance - DEBUG - response code=200
2025-03-24 21:05:51,892 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:51,893 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:51,894 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-18 13:30:00 -> 2025-03-24 20:00:00
2025-03-24 21:05:51,898 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:51,901 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:51,905 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-18 09:30:00-04:00 -> 2025-03-24 15:30:00-04:00
2025-03-24 21:05:51,905 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:51,905 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:51,907 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:51,907 - yfinance_client - INFO - Downloaded data for QQQ, shape: (35, 5)
2025-03-24 21:05:51,908 - yfinance - DEBUG - Entering download()
2025-03-24 21:05:51,908 - yfinance - DEBUG - Disabling multithreading because DEBUG logging enabled
2025-03-24 21:05:51,908 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:51,908 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 21:05:51,909 - yfinance - DEBUG -   Entering history()
2025-03-24 21:05:51,909 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:51,909 - yfinance - DEBUG -    Entering get()
2025-03-24 21:05:51,909 - yfinance - DEBUG -     Entering _make_request()
2025-03-24 21:05:51,909 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 21:05:51,910 - yfinance - DEBUG - params={'range': '3mo', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:51,910 - yfinance - DEBUG -      Entering _get_cookie_and_crumb()
2025-03-24 21:05:51,910 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:51,910 - yfinance - DEBUG -       Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:51,910 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:51,910 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:51,911 - yfinance - DEBUG -       Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:51,911 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb()
2025-03-24 21:05:51,987 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=3mo&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 2748
2025-03-24 21:05:51,987 - yfinance - DEBUG - response code=200
2025-03-24 21:05:51,988 - yfinance - DEBUG -     Exiting _make_request()
2025-03-24 21:05:51,988 - yfinance - DEBUG -    Exiting get()
2025-03-24 21:05:51,989 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2024-12-26 14:30:00 -> 2025-03-24 13:30:00
2025-03-24 21:05:51,990 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2024-12-26 09:30:00-05:00 -> 2025-03-24 09:30:00-04:00
2025-03-24 21:05:51,995 - yfinance - DEBUG - QQQ: OHLC after combining events: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:05:51,999 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2024-12-26 00:00:00-05:00 -> 2025-03-24 00:00:00-04:00
2025-03-24 21:05:52,000 - yfinance - DEBUG -   Exiting history()
2025-03-24 21:05:52,000 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:52,002 - yfinance - DEBUG - Exiting download()
2025-03-24 21:05:52,002 - yfinance_client - INFO - Downloaded data for QQQ, shape: (59, 5)
2025-03-24 21:05:52,009 - yfinance_client - INFO - Using 3-month data for EMA calculation, shape: (59, 5)
2025-03-24 21:05:52,014 - __main__ - INFO - Step 2: Getting options chain data for QQQ...
2025-03-24 21:05:52,014 - yfinance_client - INFO - Fetching 4 weeks of option chains with greeks for QQQ
2025-03-24 21:05:52,015 - yfinance - DEBUG - Entering history()
2025-03-24 21:05:52,015 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['QQQ', 1, 0])
2025-03-24 21:05:52,017 - yfinance - DEBUG -  Entering history()
2025-03-24 21:05:52,017 - yfinance - DEBUG - QQQ: Yahoo GET parameters: {'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:52,017 - yfinance - DEBUG -   Entering get()
2025-03-24 21:05:52,017 - yfinance - DEBUG -    Entering _make_request()
2025-03-24 21:05:52,017 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/QQQ
2025-03-24 21:05:52,017 - yfinance - DEBUG - params={'range': '1d', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-24 21:05:52,018 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-24 21:05:52,018 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:52,018 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,018 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:52,018 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:52,019 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,019 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-24 21:05:52,091 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/QQQ?range=1d&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=HxKk.4JwkLQ HTTP/1.1" 200 1281
2025-03-24 21:05:52,092 - yfinance - DEBUG - response code=200
2025-03-24 21:05:52,092 - yfinance - DEBUG -    Exiting _make_request()
2025-03-24 21:05:52,092 - yfinance - DEBUG -   Exiting get()
2025-03-24 21:05:52,093 - yfinance - DEBUG - QQQ: yfinance received OHLC data: 2025-03-24 13:30:00 only
2025-03-24 21:05:52,094 - yfinance - DEBUG - QQQ: OHLC after cleaning: 2025-03-24 09:30:00-04:00 only
2025-03-24 21:05:52,097 - yfinance - DEBUG - QQQ: OHLC after combining events: 2025-03-24 00:00:00-04:00 only
2025-03-24 21:05:52,100 - yfinance - DEBUG - QQQ: yfinance returning OHLC: 2025-03-24 00:00:00-04:00 only
2025-03-24 21:05:52,100 - yfinance - DEBUG -  Exiting history()
2025-03-24 21:05:52,100 - yfinance - DEBUG - Exiting history()
2025-03-24 21:05:52,101 - yfinance_client - INFO - Current price of QQQ: $490.66
2025-03-24 21:05:52,101 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:52,101 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:52,101 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ
2025-03-24 21:05:52,101 - yfinance - DEBUG - params=None
2025-03-24 21:05:52,102 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:52,102 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:52,102 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,102 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:52,102 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:52,102 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,102 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:52,193 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:52,195 - yfinance - DEBUG - response code=200
2025-03-24 21:05:52,195 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:52,195 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:52,197 - yfinance_client - INFO - Found 33 expiration dates for QQQ
2025-03-24 21:05:52,198 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-03-31
2025-03-24 21:05:52,198 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:52,198 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:52,198 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743379200
2025-03-24 21:05:52,198 - yfinance - DEBUG - params=None
2025-03-24 21:05:52,199 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:52,199 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:52,199 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,199 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:52,199 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:52,200 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,200 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:52,298 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743379200&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:52,301 - yfinance - DEBUG - response code=200
2025-03-24 21:05:52,302 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:52,302 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:52,307 - yfinance_client - INFO - Retrieved 159 calls and 145 puts
2025-03-24 21:05:52,450 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-04
2025-03-24 21:05:52,451 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:52,451 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:52,451 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1743724800
2025-03-24 21:05:52,452 - yfinance - DEBUG - params=None
2025-03-24 21:05:52,452 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:52,452 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:52,452 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,453 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:52,453 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:52,453 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,453 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:52,543 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1743724800&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:52,546 - yfinance - DEBUG - response code=200
2025-03-24 21:05:52,547 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:52,547 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:52,552 - yfinance_client - INFO - Retrieved 140 calls and 159 puts
2025-03-24 21:05:52,699 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-11
2025-03-24 21:05:52,699 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:52,700 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:52,700 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744329600
2025-03-24 21:05:52,700 - yfinance - DEBUG - params=None
2025-03-24 21:05:52,700 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:52,701 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:52,701 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,701 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:52,701 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:52,701 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,702 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:52,807 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744329600&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:52,811 - yfinance - DEBUG - response code=200
2025-03-24 21:05:52,811 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:52,811 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:52,816 - yfinance_client - INFO - Retrieved 136 calls and 133 puts
2025-03-24 21:05:52,945 - yfinance_client - INFO - Fetching option chain for expiration date: 2025-04-17
2025-03-24 21:05:52,945 - yfinance - DEBUG - Entering get()
2025-03-24 21:05:52,945 - yfinance - DEBUG -  Entering _make_request()
2025-03-24 21:05:52,945 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/QQQ?date=1744848000
2025-03-24 21:05:52,946 - yfinance - DEBUG - params=None
2025-03-24 21:05:52,946 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-24 21:05:52,946 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-24 21:05:52,947 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,947 - yfinance - DEBUG - reusing cookie
2025-03-24 21:05:52,947 - yfinance - DEBUG - reusing crumb
2025-03-24 21:05:52,947 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-24 21:05:52,948 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-24 21:05:53,040 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/QQQ?date=1744848000&crumb=HxKk.4JwkLQ HTTP/1.1" 200 None
2025-03-24 21:05:53,043 - yfinance - DEBUG - response code=200
2025-03-24 21:05:53,043 - yfinance - DEBUG -  Exiting _make_request()
2025-03-24 21:05:53,044 - yfinance - DEBUG - Exiting get()
2025-03-24 21:05:53,048 - yfinance_client - INFO - Retrieved 140 calls and 132 puts
2025-03-24 21:05:53,178 - yfinance_client - INFO - Successfully fetched 4 option chains for QQQ
2025-03-24 21:05:53,179 - __main__ - INFO - Step 3: Preparing analysis data for QQQ...
2025-03-24 21:05:53,179 - __main__ - INFO - Step 4: Processing options data for QQQ...
2025-03-24 21:05:53,179 - __main__ - INFO - Found 4 expiration dates for QQQ
2025-03-24 21:05:53,180 - __main__ - INFO - Processing expiration date 2025-03-31 for QQQ...
2025-03-24 21:05:53,180 - __main__ - DEBUG - ATM calls shape before filtering: (159, 19)
2025-03-24 21:05:53,181 - __main__ - DEBUG - ATM puts shape before filtering: (145, 19)
2025-03-24 21:05:53,181 - __main__ - DEBUG - ATM calls shape after filtering: (37, 19)
2025-03-24 21:05:53,182 - __main__ - DEBUG - ATM puts shape after filtering: (35, 19)
2025-03-24 21:05:53,182 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 21:05:53,183 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 21:05:53,183 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 21:05:53,184 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 21:05:53,184 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 21:05:53,185 - __main__ - DEBUG - Volume data for QQQ: calls=38217, puts=47709
2025-03-24 21:05:53,185 - __main__ - INFO - Successfully processed expiration 2025-03-31 for QQQ
2025-03-24 21:05:53,185 - __main__ - INFO - Processing expiration date 2025-04-04 for QQQ...
2025-03-24 21:05:53,186 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 21:05:53,186 - __main__ - DEBUG - ATM puts shape before filtering: (159, 19)
2025-03-24 21:05:53,186 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 21:05:53,187 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 21:05:53,187 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 21:05:53,188 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 21:05:53,188 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 21:05:53,189 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 21:05:53,189 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 21:05:53,190 - __main__ - DEBUG - Volume data for QQQ: calls=28545, puts=29809
2025-03-24 21:05:53,190 - __main__ - INFO - Successfully processed expiration 2025-04-04 for QQQ
2025-03-24 21:05:53,190 - __main__ - INFO - Processing expiration date 2025-04-11 for QQQ...
2025-03-24 21:05:53,191 - __main__ - DEBUG - ATM calls shape before filtering: (136, 19)
2025-03-24 21:05:53,191 - __main__ - DEBUG - ATM puts shape before filtering: (133, 19)
2025-03-24 21:05:53,191 - __main__ - DEBUG - ATM calls shape after filtering: (56, 19)
2025-03-24 21:05:53,192 - __main__ - DEBUG - ATM puts shape after filtering: (56, 19)
2025-03-24 21:05:53,192 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 21:05:53,193 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 21:05:53,193 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 21:05:53,193 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 21:05:53,194 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 21:05:53,194 - __main__ - DEBUG - Volume data for QQQ: calls=16620, puts=21183
2025-03-24 21:05:53,194 - __main__ - INFO - Successfully processed expiration 2025-04-11 for QQQ
2025-03-24 21:05:53,194 - __main__ - INFO - Processing expiration date 2025-04-17 for QQQ...
2025-03-24 21:05:53,195 - __main__ - DEBUG - ATM calls shape before filtering: (140, 19)
2025-03-24 21:05:53,195 - __main__ - DEBUG - ATM puts shape before filtering: (132, 19)
2025-03-24 21:05:53,196 - __main__ - DEBUG - ATM calls shape after filtering: (22, 19)
2025-03-24 21:05:53,196 - __main__ - DEBUG - ATM puts shape after filtering: (22, 19)
2025-03-24 21:05:53,196 - __main__ - DEBUG - Finding ATM call for QQQ...
2025-03-24 21:05:53,197 - __main__ - DEBUG - ATM call for QQQ: strike=490.0
2025-03-24 21:05:53,197 - __main__ - DEBUG - Finding ATM put for QQQ...
2025-03-24 21:05:53,198 - __main__ - DEBUG - ATM put for QQQ: strike=490.0
2025-03-24 21:05:53,198 - __main__ - DEBUG - Calculating volume data for QQQ...
2025-03-24 21:05:53,199 - __main__ - DEBUG - Volume data for QQQ: calls=92414, puts=81733
2025-03-24 21:05:53,199 - __main__ - INFO - Successfully processed expiration 2025-04-17 for QQQ
2025-03-24 21:05:53,199 - __main__ - INFO - Step 5: Generating analysis for QQQ...
2025-03-24 21:05:53,199 - __main__ - DEBUG - Calling get_stock_analysis_prompt for QQQ with args: stock_analysis_data, market_context
2025-03-24 21:05:53,200 - gemini_client - DEBUG - Generated prompt of length 4807
